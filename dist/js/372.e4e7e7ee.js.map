{"version":3,"file":"js/372.e4e7e7ee.js","mappings":"kKAEA,MAAOA,EAAsBC,IAAwBC,EAAAA,EAAAA,SAAM,GAC3D,SAASC,IACHC,KAAKC,OAETD,KAAKE,cAAa,KAChB,IAAqC,IAAjCF,KAAKG,kBAAkBC,QAAkBC,EAAAA,EAAAA,QAAwBL,KAAKM,OAG1E,OADAC,EAAAA,EAAAA,IAAe,UACR,MACLA,EAAAA,EAAAA,IAAe,YAEhB,CAACP,KAAKG,kBAAkBC,IAAKC,EAAAA,KAChCL,KAAKE,cAAa,KAChB,IAAIG,EAAAA,EAAAA,QAAwBL,KAAKM,SAAWN,KAAKG,kBAAkBC,MACjE,OACF,GAAIP,MAA2BG,KAAKM,OAAQ,CAC1C,MAAME,EAAeC,GAAMT,KAAKU,OAAOD,EAAEE,UAAWF,EAAEG,WAEtD,OADAC,SAASC,iBAAiB,YAAaN,GAChC,KACLK,SAASE,oBAAoB,YAAaP,IAG9C,IAAIQ,GAAU,GACTC,EAAMC,GAAQ,CAAC,EAAG,GACvB,MAAMC,EAAUC,EAAAA,GAAAA,GAAe,QAASX,IAAOO,GAAU,GAAOC,EAAMC,GAAQ,CAACT,EAAEY,QAASZ,EAAEa,YACtFC,EAAUH,EAAAA,GAAAA,GAAe,MAAM,IAAMJ,GAAU,IAC/CQ,EAAcf,IAClB,QAAoB,IAAhBA,EAAEE,UAAsB,CAC1B,MAAOA,EAAWC,GAAa,CAACH,EAAEY,QAAUJ,EAAMR,EAAEa,QAAUJ,GAG9D,OAFCD,EAAMC,GAAQ,CAACT,EAAEY,QAASZ,EAAEa,cAC7BN,GAAWhB,KAAKU,OAAmB,EAAZC,EAA2B,EAAZC,IAGxCI,GAAWhB,KAAKU,OAAqB,EAAdD,EAAEE,UAA6B,EAAdF,EAAEG,YAG5C,OADAa,EAAAA,GAAAA,iBAA2B,cAAeD,GACnC,KACLL,EAAQO,SACRH,EAAQG,SACRD,EAAAA,GAAAA,oBAA8B,cAAeD,GAC7CR,GAAU,KAEX,CAAChB,KAAKG,kBAAkBC,IAAKC,EAAAA,GAAmBR,IACnDG,KAAKE,cAAa,KAChB,MAAMI,GAASD,EAAAA,EAAAA,MACf,IAAqC,IAAjCL,KAAKG,kBAAkBC,OAAkBE,IAAWN,KAAKM,OAC3D,OACF,MAAMqB,EAAU,KACd,IAAIC,EAAIC,EACR,OAAqD,OAA7CA,GAAMD,EAAKH,EAAAA,IAAWK,yBAA8B,EAASD,EAAGE,KAAKH,IAEzEI,EAAsB,KACtBnB,SAASoB,qBAAuBR,EAAAA,GAClC7B,EAAqBU,GAErBV,OAAqB,IAIzB,OAFA6B,EAAAA,GAAAA,iBAA2B,QAASE,GACpCd,SAASC,iBAAiB,oBAAqBkB,GACxC,KACLP,EAAAA,GAAAA,oBAA8B,QAASE,GACvCd,SAASE,oBAAoB,oBAAqBiB,GAClDnB,SAASqB,kBACTtC,OAAqB,MAEtB,CAACI,KAAKG,kBAAkBC,IAAKC,EAAAA","sources":["webpack://vue3/./node_modules/lingo3d-vue/dist/enableMouseControl.js"],"sourcesContent":["import { aB as store, aC as getCameraRendered, aD as setPickingMode, aE as mouseEvents, aF as container } from \"./index.js\";\nimport \"vue\";\nconst [setPointerLockCamera, getPointerLockCamera] = store(void 0);\nfunction enableMouseControl() {\n  if (this.done)\n    return;\n  this.createEffect(() => {\n    if (this.mouseControlState.get() !== true || getCameraRendered() !== this.camera)\n      return;\n    setPickingMode(\"camera\");\n    return () => {\n      setPickingMode(\"mouse\");\n    };\n  }, [this.mouseControlState.get, getCameraRendered]);\n  this.createEffect(() => {\n    if (getCameraRendered() !== this.camera || !this.mouseControlState.get())\n      return;\n    if (getPointerLockCamera() === this.camera) {\n      const handleMove2 = (e) => this.gyrate(e.movementX, e.movementY);\n      document.addEventListener(\"mousemove\", handleMove2);\n      return () => {\n        document.removeEventListener(\"mousemove\", handleMove2);\n      };\n    }\n    let started = false;\n    let [xOld, yOld] = [0, 0];\n    const handle0 = mouseEvents.on(\"down\", (e) => (started = true, [xOld, yOld] = [e.clientX, e.clientY]));\n    const handle1 = mouseEvents.on(\"up\", () => started = false);\n    const handleMove = (e) => {\n      if (e.movementX === void 0) {\n        const [movementX, movementY] = [e.clientX - xOld, e.clientY - yOld];\n        [xOld, yOld] = [e.clientX, e.clientY];\n        started && this.gyrate(movementX * 2, movementY * 2);\n        return;\n      }\n      started && this.gyrate(e.movementX * 2, e.movementY * 2);\n    };\n    container.addEventListener(\"pointermove\", handleMove);\n    return () => {\n      handle0.cancel();\n      handle1.cancel();\n      container.removeEventListener(\"pointermove\", handleMove);\n      started = false;\n    };\n  }, [this.mouseControlState.get, getCameraRendered, getPointerLockCamera]);\n  this.createEffect(() => {\n    const camera = getCameraRendered();\n    if (this.mouseControlState.get() !== true || camera !== this.camera)\n      return;\n    const onClick = () => {\n      var _a, _b;\n      return (_b = (_a = container).requestPointerLock) == null ? void 0 : _b.call(_a);\n    };\n    const onPointerLockChange = () => {\n      if (document.pointerLockElement === container)\n        setPointerLockCamera(camera);\n      else\n        setPointerLockCamera(void 0);\n    };\n    container.addEventListener(\"click\", onClick);\n    document.addEventListener(\"pointerlockchange\", onPointerLockChange);\n    return () => {\n      container.removeEventListener(\"click\", onClick);\n      document.removeEventListener(\"pointerlockchange\", onPointerLockChange);\n      document.exitPointerLock();\n      setPointerLockCamera(void 0);\n    };\n  }, [this.mouseControlState.get, getCameraRendered]);\n}\nexport { enableMouseControl as default };\n"],"names":["setPointerLockCamera","getPointerLockCamera","store","enableMouseControl","this","done","createEffect","mouseControlState","get","getCameraRendered","camera","setPickingMode","handleMove2","e","gyrate","movementX","movementY","document","addEventListener","removeEventListener","started","xOld","yOld","handle0","mouseEvents","clientX","clientY","handle1","handleMove","container","cancel","onClick","_a","_b","requestPointerLock","call","onPointerLockChange","pointerLockElement","exitPointerLock"],"sourceRoot":""}