(self["webpackChunkvue3"]=self["webpackChunkvue3"]||[]).push([[189],{5787:function(t,e,n){var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,a=n(4019),s=n(9781),l=n(7854),u=n(614),c=n(111),h=n(2597),d=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(3070).f,v=n(7976),y=n(9518),b=n(7674),x=n(5112),_=n(9711),w=l.Int8Array,S=w&&w.prototype,M=l.Uint8ClampedArray,E=M&&M.prototype,C=w&&y(w),T=S&&y(S),A=Object.prototype,D=l.TypeError,P=x("toStringTag"),R=_("TYPED_ARRAY_TAG"),L=_("TYPED_ARRAY_CONSTRUCTOR"),O=a&&!!b&&"Opera"!==d(l.opera),k=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},B=function(t){if(!c(t))return!1;var e=d(t);return"DataView"===e||h(I,e)||h(N,e)},F=function(t){if(!c(t))return!1;var e=d(t);return h(I,e)||h(N,e)},z=function(t){if(F(t))return t;throw D("Target is not a typed array")},U=function(t){if(u(t)&&(!b||v(C,t)))return t;throw D(p(t)+" is not a typed array constructor")},j=function(t,e,n,r){if(s){if(n)for(var i in I){var o=l[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(a){try{o.prototype[t]=e}catch(u){}}}T[t]&&!n||m(T,t,n?e:O&&S[t]||e,r)}},V=function(t,e,n){var r,i;if(s){if(b){if(n)for(r in I)if(i=l[r],i&&h(i,t))try{delete i[t]}catch(o){}if(C[t]&&!n)return;try{return m(C,t,n?e:O&&C[t]||e)}catch(o){}}for(r in I)i=l[r],!i||i[t]&&!n||m(i,t,e)}};for(r in I)i=l[r],o=i&&i.prototype,o?f(o,L,i):O=!1;for(r in N)i=l[r],o=i&&i.prototype,o&&f(o,L,i);if((!O||!u(C)||C===Function.prototype)&&(C=function(){throw D("Incorrect invocation")},O))for(r in I)l[r]&&b(l[r],C);if((!O||!T||T===A)&&(T=C.prototype,O))for(r in I)l[r]&&b(l[r].prototype,T);if(O&&y(E)!==T&&b(E,T),s&&!h(T,P))for(r in k=!0,g(T,P,{get:function(){return c(this)?this[R]:void 0}}),I)l[r]&&f(l[r],R,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:k&&R,aTypedArray:z,aTypedArrayConstructor:U,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:V,isView:B,isTypedArray:F,TypedArray:C,TypedArrayPrototype:T}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},9518:function(t,e,n){var r=n(2597),i=n(614),o=n(7908),a=n(6200),s=n(8544),l=a("IE_PROTO"),u=Object,c=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=o(t);if(r(e,l))return e[l];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof u?c:null}},4590:function(t,e,n){var r=n(3002),i=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw i("Wrong offset");return n}},3002:function(t,e,n){var r=n(9303),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw i("The argument can't be less than 0");return e}},2120:function(t,e,n){var r=n(2109),i=n(5005),o=n(2104),a=n(7293),s=n(9191),l="AggregateError",u=i(l),c=!a((function(){return 1!==u([1]).errors[0]}))&&a((function(){return 7!==u([1],l,{cause:7}).cause}));r({global:!0,constructor:!0,arity:2,forced:c},{AggregateError:s(l,(function(t){return function(e,n){return o(t,this,arguments)}}),c,!0)})},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),a=n(9303),s=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=a(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}}),s("at")},6314:function(t,e,n){var r=n(2109),i=n(2597);r({target:"Object",stat:!0},{hasOwn:i})},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),a=n(9303),s=n(1340),l=n(7293),u=i("".charAt),c=l((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:c},{at:function(t){var e=s(o(this)),n=e.length,r=a(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:u(e,i)}})},8675:function(t,e,n){"use strict";var r=n(260),i=n(6244),o=n(9303),a=r.aTypedArray,s=r.exportTypedArrayMethod;s("at",(function(t){var e=a(this),n=i(e),r=o(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}))},3462:function(t,e,n){"use strict";var r=n(7854),i=n(6916),o=n(260),a=n(6244),s=n(4590),l=n(7908),u=n(7293),c=r.RangeError,h=r.Int8Array,d=h&&h.prototype,p=d&&d.set,f=o.aTypedArray,m=o.exportTypedArrayMethod,g=!u((function(){var t=new Uint8ClampedArray(2);return i(p,t,{length:1,0:3},1),3!==t[1]})),v=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));m("set",(function(t){f(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=l(t);if(g)return i(p,this,n,e);var r=this.length,o=a(n),u=0;if(o+e>r)throw c("Wrong length");while(u<o)this[e+u]=n[u++]}),!g||v)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(5005),o=n(9114),a=n(3070).f,s=n(2597),l=n(5787),u=n(9587),c=n(6277),h=n(3678),d=n(7741),p=n(1913),f="DOMException",m=i("Error"),g=i(f),v=function(){l(this,y);var t=arguments.length,e=c(t<1?void 0:arguments[0]),n=c(t<2?void 0:arguments[1],"Error"),r=new g(e,n),i=m(e);return i.name=f,a(r,"stack",o(1,d(i.stack,1))),u(r,this,v),r},y=v.prototype=g.prototype,b="stack"in m(f),x="stack"in new g(1,2),_=b&&!x;r({global:!0,constructor:!0,forced:p||_},{DOMException:_?v:g});var w=i(f),S=w.prototype;if(S.constructor!==w)for(var M in p||a(S,"constructor",o(1,w)),h)if(s(h,M)){var E=h[M],C=E.s;s(w,C)||a(w,C,o(6,E.c))}},6265:function(t,e,n){t.exports=n(9435)},4951:function(t,e,n){"use strict";n(2801);var r=n(6642),i=n(6806),o=n(3833),a=n(4360),s=n(5047),l=n(5976),u=n(9896),c=n(8507),h=n(3303),d=n(6090),p=n(1874);t.exports=function(t){return new Promise((function(e,n){var f,m=t.data,g=t.headers,v=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var b=new XMLHttpRequest;if(t.auth){var x=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(x+":"+_)}var w=s(t.baseURL,t.url);function S(){if(b){var r="getAllResponseHeaders"in b?l(b.getAllResponseHeaders()):null,o=v&&"text"!==v&&"json"!==v?b.response:b.responseText,a={data:o,status:b.status,statusText:b.statusText,headers:r,config:t,request:b};i((function(t){e(t),y()}),(function(t){n(t),y()}),a),b=null}}if(b.open(t.method.toUpperCase(),a(w,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(new h("Request aborted",h.ECONNABORTED,t,b)),b=null)},b.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,t,b,b)),b=null},b.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||c;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new h(e,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,t,b)),b=null},r.isStandardBrowserEnv()){var M=(t.withCredentials||u(w))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;M&&(g[t.xsrfHeaderName]=M)}"setRequestHeader"in b&&r.forEach(g,(function(t,e){"undefined"===typeof m&&"content-type"===e.toLowerCase()?delete g[e]:b.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),v&&"json"!==v&&(b.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&b.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(f=function(t){b&&(n(!t||t&&t.type?new d:t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f))),m||(m=null);var E=p(w);E&&-1===["http","https","file"].indexOf(E)?n(new h("Unsupported protocol "+E+":",h.ERR_BAD_REQUEST,t)):b.send(m)}))}},9435:function(t,e,n){"use strict";var r=n(6642),i=n(5955),o=n(7104),a=n(8186),s=n(7);function l(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n.create=function(e){return l(a(t,e))},n}var u=l(s);u.Axios=o,u.CanceledError=n(6090),u.CancelToken=n(6016),u.isCancel=n(5936),u.VERSION=n(4679).version,u.toFormData=n(8994),u.AxiosError=n(3303),u.Cancel=u.CanceledError,u.all=function(t){return Promise.all(t)},u.spread=n(5431),u.isAxiosError=n(786),t.exports=u,t.exports["default"]=u},6016:function(t,e,n){"use strict";n(1703);var r=n(6090);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t,e=new i((function(e){t=e}));return{token:e,cancel:t}},t.exports=i},6090:function(t,e,n){"use strict";var r=n(3303),i=n(6642);function o(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}i.inherits(o,r,{__CANCEL__:!0}),t.exports=o},5936:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},7104:function(t,e,n){"use strict";var r=n(6642),i=n(4360),o=n(999),a=n(6559),s=n(8186),l=n(5047),u=n(6298),c=u.validators;function h(t){this.defaults=t,this.interceptors={request:new o,response:new o}}h.prototype.request=function(t,e){"string"===typeof t?(e=e||{},e.url=t):e=t||{},e=s(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)})),!i){var h=[a,void 0];Array.prototype.unshift.apply(h,r),h=h.concat(l),o=Promise.resolve(e);while(h.length)o=o.then(h.shift(),h.shift());return o}var d=e;while(r.length){var p=r.shift(),f=r.shift();try{d=p(d)}catch(m){f(m);break}}try{o=a(d)}catch(m){return Promise.reject(m)}while(l.length)o=o.then(l.shift(),l.shift());return o},h.prototype.getUri=function(t){t=s(this.defaults,t);var e=l(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(s(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[t]=e(),h.prototype[t+"Form"]=e(!0)})),t.exports=h},3303:function(t,e,n){"use strict";n(1703);var r=n(6642);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){a[t]={value:t}})),Object.defineProperties(i,a),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(t,e,n,a,s,l){var u=Object.create(o);return r.toFlatObject(t,u,(function(t){return t!==Error.prototype})),i.call(u,t.message,e,n,a,s),u.name=t.name,l&&Object.assign(u,l),u},t.exports=i},999:function(t,e,n){"use strict";var r=n(6642);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},5047:function(t,e,n){"use strict";var r=n(4777),i=n(2381);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},6559:function(t,e,n){"use strict";var r=n(6642),i=n(3756),o=n(5936),a=n(7),s=n(6090);function l(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){l(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]}));var e=t.adapter||a.adapter;return e(t).then((function(e){return l(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},8186:function(t,e,n){"use strict";var r=n(6642);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function o(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function a(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function l(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=u[t]||o,i=e(t);r.isUndefined(i)&&e!==l||(n[t]=i)})),n}},6806:function(t,e,n){"use strict";var r=n(3303);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},3756:function(t,e,n){"use strict";var r=n(6642),i=n(7);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},7:function(t,e,n){"use strict";var r=n(6642),i=n(1446),o=n(3303),a=n(8507),s=n(8994),l={"Content-Type":"application/x-www-form-urlencoded"};function u(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function c(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(t=n(4951)),t}function h(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}var d={transitional:a,adapter:c(),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return u(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,o=r.isObject(t),a=e&&e["Content-Type"];if((n=r.isFileList(t))||o&&"multipart/form-data"===a){var l=this.env&&this.env.FormData;return s(n?{"files[]":t}:t,l&&new l)}return o||"application/json"===a?(u(e,"application/json"),h(t)):t}],transformResponse:[function(t){var e=this.transitional||d.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(a){if("SyntaxError"===s.name)throw o.from(s,o.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1051)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){d.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){d.headers[t]=r.merge(l)})),t.exports=d},8507:function(t){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},4679:function(t){t.exports={version:"0.27.2"}},5955:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},4360:function(t,e,n){"use strict";var r=n(6642);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},2381:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},3833:function(t,e,n){"use strict";var r=n(6642);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},4777:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},786:function(t,e,n){"use strict";var r=n(6642);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},9896:function(t,e,n){"use strict";var r=n(6642);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},1446:function(t,e,n){"use strict";var r=n(6642);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},1051:function(t){t.exports=null},5976:function(t,e,n){"use strict";var r=n(6642),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},1874:function(t){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},5431:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},8994:function(t,e,n){"use strict";n(1703);var r=n(6642);function i(t,e){e=e||new FormData;var n=[];function i(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function o(t,a){if(r.isPlainObject(t)||r.isArray(t)){if(-1!==n.indexOf(t))throw Error("Circular reference detected in "+a);n.push(t),r.forEach(t,(function(t,n){if(!r.isUndefined(t)){var s,l=a?a+"."+n:n;if(t&&!a&&"object"===typeof t)if(r.endsWith(n,"{}"))t=JSON.stringify(t);else if(r.endsWith(n,"[]")&&(s=r.toArray(t)))return void s.forEach((function(t){!r.isUndefined(t)&&e.append(l,i(t))}));o(t,l)}})),n.pop()}else e.append(a,i(t))}return o(t),e}t.exports=i},6298:function(t,e,n){"use strict";var r=n(4679).version,i=n(3303),o={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){o[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var a={};function s(t,e,n){if("object"!==typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);var r=Object.keys(t),o=r.length;while(o-- >0){var a=r[o],s=e[a];if(s){var l=t[a],u=void 0===l||s(l,a,t);if(!0!==u)throw new i("option "+a+" must be "+u,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+a,i.ERR_BAD_OPTION)}}o.transitional=function(t,e,n){function o(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,s){if(!1===t)throw new i(o(r," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!a[r]&&(a[r]=!0,console.warn(o(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},t.exports={assertOptions:s,validators:o}},6642:function(t,e,n){"use strict";n(8675),n(3462);var r=n(5955),i=Object.prototype.toString,o=function(t){return function(e){var n=i.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function a(t){return t=t.toLowerCase(),function(e){return o(e)===t}}function s(t){return Array.isArray(t)}function l(t){return"undefined"===typeof t}function u(t){return null!==t&&!l(t)&&null!==t.constructor&&!l(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var c=a("ArrayBuffer");function h(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&c(t.buffer),e}function d(t){return"string"===typeof t}function p(t){return"number"===typeof t}function f(t){return null!==t&&"object"===typeof t}function m(t){if("object"!==o(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var g=a("Date"),v=a("File"),y=a("Blob"),b=a("FileList");function x(t){return"[object Function]"===i.call(t)}function _(t){return f(t)&&x(t.pipe)}function w(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||i.call(t)===e||x(t.toString)&&t.toString()===e)}var S=a("URLSearchParams");function M(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function C(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),s(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function T(){var t={};function e(e,n){m(t[n])&&m(e)?t[n]=T(t[n],e):m(e)?t[n]=T({},e):s(e)?t[n]=e.slice():t[n]=e}for(var n=0,r=arguments.length;n<r;n++)C(arguments[n],e);return t}function A(t,e,n){return C(e,(function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e})),t}function D(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}function P(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function R(t,e,n){var r,i,o,a={};e=e||{};do{r=Object.getOwnPropertyNames(t),i=r.length;while(i-- >0)o=r[i],a[o]||(e[o]=t[o],a[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function L(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n}function O(t){if(!t)return null;var e=t.length;if(l(e))return null;var n=new Array(e);while(e-- >0)n[e]=t[e];return n}var k=function(t){return function(e){return t&&e instanceof t}}("undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));t.exports={isArray:s,isArrayBuffer:c,isBuffer:u,isFormData:w,isArrayBufferView:h,isString:d,isNumber:p,isObject:f,isPlainObject:m,isUndefined:l,isDate:g,isFile:v,isBlob:y,isFunction:x,isStream:_,isURLSearchParams:S,isStandardBrowserEnv:E,forEach:C,merge:T,extend:A,trim:M,stripBOM:D,inherits:P,toFlatObject:R,kindOf:o,kindOfTest:a,endsWith:L,toArray:O,isTypedArray:k,isFileList:b}},9260:function(t,e,n){"use strict";n.d(e,{$:function(){return Yv},A:function(){return rm},B:function(){return Io},C:function(){return hp},D:function(){return st},E:function(){return Si},F:function(){return oo},G:function(){return xh},H:function(){return ed},I:function(){return ad},J:function(){return im},K:function(){return lr},L:function(){return pd},M:function(){return pi},N:function(){return Pf},O:function(){return Fi},P:function(){return ia},Q:function(){return Ir},R:function(){return qm},S:function(){return nf},T:function(){return of},U:function(){return no},V:function(){return Nr},W:function(){return Df},X:function(){return Tf},Y:function(){return Ef},Z:function(){return b},_:function(){return aS},a:function(){return Qi},a$:function(){return ow},a0:function(){return Zv},a1:function(){return bn},a2:function(){return Jv},a3:function(){return uf},a4:function(){return sr},a5:function(){return lf},a6:function(){return Sn},a7:function(){return yf},a8:function(){return re},a9:function(){return ae},aA:function(){return Mg},aB:function(){return F},aC:function(){return _v},aD:function(){return Db},aE:function(){return Nb},aF:function(){return bb},aG:function(){return Ol},aH:function(){return rd},aI:function(){return we},aJ:function(){return me},aK:function(){return Yt},aL:function(){return Eg},aM:function(){return ge},aN:function(){return ly},aO:function(){return lw},aP:function(){return dw},aQ:function(){return jD},aR:function(){return VD},aS:function(){return zy},aT:function(){return Qo},aU:function(){return tg},aV:function(){return Zi},aW:function(){return at},aX:function(){return $_},aY:function(){return $w},aZ:function(){return X},a_:function(){return UD},aa:function(){return ie},ab:function(){return se},ac:function(){return oe},ad:function(){return le},ae:function(){return ne},af:function(){return un},ag:function(){return ln},ah:function(){return cm},ai:function(){return Rh},aj:function(){return Oh},ak:function(){return eo},al:function(){return Md},am:function(){return Ji},an:function(){return vn},ao:function(){return yn},ap:function(){return wd},aq:function(){return Sd},ar:function(){return Dd},as:function(){return ot},at:function(){return zr},au:function(){return ii},av:function(){return oR},aw:function(){return Xp},ax:function(){return Jm},ay:function(){return fp},az:function(){return up},b:function(){return fo},b0:function(){return NP},b1:function(){return Ib},b2:function(){return mv},b3:function(){return hw},b4:function(){return Iy},b5:function(){return Py},b6:function(){return Fy},b7:function(){return Ay},b8:function(){return Dy},b9:function(){return rw},bA:function(){return cR},bL:function(){return xk},bP:function(){return wk},bU:function(){return Mk},ba:function(){return g},bb:function(){return Vo},bc:function(){return Dr},bd:function(){return ue},be:function(){return jo},bf:function(){return Wm},bg:function(){return ut},bh:function(){return Ph},bi:function(){return _n},bj:function(){return On},bk:function(){return Sh},bl:function(){return Ee},bm:function(){return de},bn:function(){return HD},bo:function(){return GD},bp:function(){return Ry},bq:function(){return v},c:function(){return Lo},c3:function(){return Ck},d:function(){return $p},e:function(){return bd},f:function(){return Ar},g:function(){return Id},h:function(){return Nf},i:function(){return lm},j:function(){return Ff},k:function(){return Vf},l:function(){return te},m:function(){return ee},n:function(){return Tr},o:function(){return cf},p:function(){return pf},q:function(){return _r},r:function(){return Jt},s:function(){return xn},t:function(){return nd},u:function(){return jm},v:function(){return jl},w:function(){return Ho},x:function(){return em},y:function(){return ar},z:function(){return Kf}});n(2262),n(4506),n(6699),n(1703),n(8675),n(3462);var r=n(3396),i=n(4870),o=n(7139),a=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=(t,e,n)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p=(t,e)=>{for(var n in e||(e={}))c.call(e,n)&&d(t,n,e[n]);if(u)for(var n of u(e))h.call(e,n)&&d(t,n,e[n]);return t},f=(t,e)=>s(t,l(e)),m=(t,e,n)=>(d(t,"symbol"!==typeof e?e+"":e,n),n),g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function v(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var y={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",h=1,d=2,p=4,f=1,m=2,v=1,y=2,b=4,x=8,_=16,w=32,S=64,M=128,E=256,C=512,T=30,A="...",D=800,P=16,R=1,L=2,O=3,k=1/0,I=9007199254740991,N=17976931348623157e292,B=NaN,F=4294967295,z=F-1,U=F>>>1,j=[["ary",M],["bind",v],["bindKey",y],["curry",x],["curryRight",_],["flip",C],["partial",w],["partialRight",S],["rearg",E]],V="[object Arguments]",H="[object Array]",W="[object AsyncFunction]",G="[object Boolean]",q="[object Date]",X="[object DOMException]",Y="[object Error]",Z="[object Function]",K="[object GeneratorFunction]",J="[object Map]",Q="[object Number]",$="[object Null]",tt="[object Object]",et="[object Promise]",nt="[object Proxy]",rt="[object RegExp]",it="[object Set]",ot="[object String]",at="[object Symbol]",st="[object Undefined]",lt="[object WeakMap]",ut="[object WeakSet]",ct="[object ArrayBuffer]",ht="[object DataView]",dt="[object Float32Array]",pt="[object Float64Array]",ft="[object Int8Array]",mt="[object Int16Array]",gt="[object Int32Array]",vt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",xt="[object Uint32Array]",_t=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,St=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,Ct=RegExp(Mt.source),Tt=RegExp(Et.source),At=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(kt.source),Nt=/^\s+/,Bt=/\s/,Ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Ht=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Xt=/^0b[01]+$/i,Yt=/^\[object .+?Constructor\]$/,Zt=/^0o[0-7]+$/i,Kt=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,$t=/['\n\r\u2028\u2029\\]/g,te="\\ud800-\\udfff",ee="\\u0300-\\u036f",ne="\\ufe20-\\ufe2f",re="\\u20d0-\\u20ff",ie=ee+ne+re,oe="\\u2700-\\u27bf",ae="a-z\\xdf-\\xf6\\xf8-\\xff",se="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ue="\\u2000-\\u206f",ce=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="A-Z\\xc0-\\xd6\\xd8-\\xde",de="\\ufe0e\\ufe0f",pe=se+le+ue+ce,fe="['’]",me="["+te+"]",ge="["+pe+"]",ve="["+ie+"]",ye="\\d+",be="["+oe+"]",xe="["+ae+"]",_e="[^"+te+pe+ye+oe+ae+he+"]",we="\\ud83c[\\udffb-\\udfff]",Se="(?:"+ve+"|"+we+")",Me="[^"+te+"]",Ee="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+he+"]",Ae="\\u200d",De="(?:"+xe+"|"+_e+")",Pe="(?:"+Te+"|"+_e+")",Re="(?:"+fe+"(?:d|ll|m|re|s|t|ve))?",Le="(?:"+fe+"(?:D|LL|M|RE|S|T|VE))?",Oe=Se+"?",ke="["+de+"]?",Ie="(?:"+Ae+"(?:"+[Me,Ee,Ce].join("|")+")"+ke+Oe+")*",Ne="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fe=ke+Oe+Ie,ze="(?:"+[be,Ee,Ce].join("|")+")"+Fe,Ue="(?:"+[Me+ve+"?",ve,Ee,Ce,me].join("|")+")",je=RegExp(fe,"g"),Ve=RegExp(ve,"g"),He=RegExp(we+"(?="+we+")|"+Ue+Fe,"g"),We=RegExp([Te+"?"+xe+"+"+Re+"(?="+[ge,Te,"$"].join("|")+")",Pe+"+"+Le+"(?="+[ge,Te+De,"$"].join("|")+")",Te+"?"+De+"+"+Re,Te+"+"+Le,Be,Ne,ye,ze].join("|"),"g"),Ge=RegExp("["+Ae+te+ie+de+"]"),qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ye=-1,Ze={};Ze[dt]=Ze[pt]=Ze[ft]=Ze[mt]=Ze[gt]=Ze[vt]=Ze[yt]=Ze[bt]=Ze[xt]=!0,Ze[V]=Ze[H]=Ze[ct]=Ze[G]=Ze[ht]=Ze[q]=Ze[Y]=Ze[Z]=Ze[J]=Ze[Q]=Ze[tt]=Ze[rt]=Ze[it]=Ze[ot]=Ze[lt]=!1;var Ke={};Ke[V]=Ke[H]=Ke[ct]=Ke[ht]=Ke[G]=Ke[q]=Ke[dt]=Ke[pt]=Ke[ft]=Ke[mt]=Ke[gt]=Ke[J]=Ke[Q]=Ke[tt]=Ke[rt]=Ke[it]=Ke[ot]=Ke[at]=Ke[vt]=Ke[yt]=Ke[bt]=Ke[xt]=!0,Ke[Y]=Ke[Z]=Ke[lt]=!1;var Je={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},en=parseFloat,nn=parseInt,rn="object"==typeof g&&g&&g.Object===Object&&g,on="object"==typeof self&&self&&self.Object===Object&&self,an=rn||on||Function("return this")(),sn=e&&!e.nodeType&&e,ln=sn&&t&&!t.nodeType&&t,un=ln&&ln.exports===sn,cn=un&&rn.process,hn=function(){try{var t=ln&&ln.require&&ln.require("util").types;return t||cn&&cn.binding&&cn.binding("util")}catch(e){}}(),dn=hn&&hn.isArrayBuffer,pn=hn&&hn.isDate,fn=hn&&hn.isMap,mn=hn&&hn.isRegExp,gn=hn&&hn.isSet,vn=hn&&hn.isTypedArray;function yn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function bn(t,e,n,r){var i=-1,o=null==t?0:t.length;while(++i<o){var a=t[i];e(r,a,n(a),t)}return r}function xn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}function _n(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function wn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!e(t[n],n,t))return!1;return!0}function Sn(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Mn(t,e){var n=null==t?0:t.length;return!!n&&Nn(t,e,0)>-1}function En(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}function Cn(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function Tn(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function An(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function Dn(t,e,n,r){var i=null==t?0:t.length;r&&i&&(n=t[--i]);while(i--)n=e(n,t[i],i,t);return n}function Pn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var Rn=Un("length");function Ln(t){return t.split("")}function On(t){return t.match(jt)||[]}function kn(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function In(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}function Nn(t,e,n){return e===e?dr(t,e,n):In(t,Fn,n)}function Bn(t,e,n,r){var i=n-1,o=t.length;while(++i<o)if(r(t[i],e))return i;return-1}function Fn(t){return t!==t}function zn(t,e){var n=null==t?0:t.length;return n?Wn(t,e)/n:B}function Un(t){return function(e){return null==e?n:e[t]}}function jn(t){return function(e){return null==t?n:t[e]}}function Vn(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Hn(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Wn(t,e){var r,i=-1,o=t.length;while(++i<o){var a=e(t[i]);a!==n&&(r=r===n?a:r+a)}return r}function Gn(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function qn(t,e){return Cn(e,(function(e){return[e,t[e]]}))}function Xn(t){return t?t.slice(0,gr(t)+1).replace(Nt,""):t}function Yn(t){return function(e){return t(e)}}function Zn(t,e){return Cn(e,(function(e){return t[e]}))}function Kn(t,e){return t.has(e)}function Jn(t,e){var n=-1,r=t.length;while(++n<r&&Nn(e,t[n],0)>-1);return n}function Qn(t,e){var n=t.length;while(n--&&Nn(e,t[n],0)>-1);return n}function $n(t,e){var n=t.length,r=0;while(n--)t[n]===e&&++r;return r}var tr=jn(Je),er=jn(Qe);function nr(t){return"\\"+tn[t]}function rr(t,e){return null==t?n:t[e]}function ir(t){return Ge.test(t)}function or(t){return qe.test(t)}function ar(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function sr(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function lr(t,e){return function(n){return t(e(n))}}function ur(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n];a!==e&&a!==c||(t[n]=c,o[i++]=n)}return o}function cr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function dr(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}function pr(t,e,n){var r=n+1;while(r--)if(t[r]===e)return r;return r}function fr(t){return ir(t)?yr(t):Rn(t)}function mr(t){return ir(t)?br(t):Ln(t)}function gr(t){var e=t.length;while(e--&&Bt.test(t.charAt(e)));return e}var vr=jn($e);function yr(t){var e=He.lastIndex=0;while(He.test(t))++e;return e}function br(t){return t.match(He)||[]}function xr(t){return t.match(We)||[]}var _r=function t(e){e=null==e?an:wr.defaults(an.Object(),e,wr.pick(an,Xe));var g=e.Array,Bt=e.Date,jt=e.Error,te=e.Function,ee=e.Math,ne=e.Object,re=e.RegExp,ie=e.String,oe=e.TypeError,ae=g.prototype,se=te.prototype,le=ne.prototype,ue=e["__core-js_shared__"],ce=se.toString,he=le.hasOwnProperty,de=0,pe=function(){var t=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fe=le.toString,me=ce.call(ne),ge=an._,ve=re("^"+ce.call(he).replace(kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=un?e.Buffer:n,be=e.Symbol,xe=e.Uint8Array,_e=ye?ye.allocUnsafe:n,we=lr(ne.getPrototypeOf,ne),Se=ne.create,Me=le.propertyIsEnumerable,Ee=ae.splice,Ce=be?be.isConcatSpreadable:n,Te=be?be.iterator:n,Ae=be?be.toStringTag:n,De=function(){try{var t=Xa(ne,"defineProperty");return t({},"",{}),t}catch(e){}}(),Pe=e.clearTimeout!==an.clearTimeout&&e.clearTimeout,Re=Bt&&Bt.now!==an.Date.now&&Bt.now,Le=e.setTimeout!==an.setTimeout&&e.setTimeout,Oe=ee.ceil,ke=ee.floor,Ie=ne.getOwnPropertySymbols,Ne=ye?ye.isBuffer:n,Be=e.isFinite,Fe=ae.join,ze=lr(ne.keys,ne),Ue=ee.max,He=ee.min,We=Bt.now,Ge=e.parseInt,qe=ee.random,Je=ae.reverse,Qe=Xa(e,"DataView"),$e=Xa(e,"Map"),tn=Xa(e,"Promise"),rn=Xa(e,"Set"),on=Xa(e,"WeakMap"),sn=Xa(ne,"create"),ln=on&&new on,cn={},hn=Ls(Qe),Rn=Ls($e),Ln=Ls(tn),jn=Ls(rn),dr=Ls(on),yr=be?be.prototype:n,br=yr?yr.valueOf:n,_r=yr?yr.toString:n;function Sr(t){if(Ec(t)&&!lc(t)&&!(t instanceof Tr)){if(t instanceof Cr)return t;if(he.call(t,"__wrapped__"))return ks(t)}return new Cr(t)}var Mr=function(){function t(){}return function(e){if(!Mc(e))return{};if(Se)return Se(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Er(){}function Cr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Tr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function Ar(){var t=new Tr(this.__wrapped__);return t.__actions__=ia(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ia(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ia(this.__views__),t}function Dr(){if(this.__filtered__){var t=new Tr(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pr(){var t=this.__wrapped__.value(),e=this.__dir__,n=lc(t),r=e<0,i=n?t.length:0,o=Qa(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,h=c.length,d=0,p=He(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return zo(t,this.__actions__);var f=[];t:while(l--&&d<p){u+=e;var m=-1,g=t[u];while(++m<h){var v=c[m],y=v.iteratee,b=v.type,x=y(g);if(b==L)g=x;else if(!x){if(b==R)continue t;break t}}f[d++]=g}return f}function Rr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Lr(){this.__data__=sn?sn(null):{},this.size=0}function Or(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function kr(t){var e=this.__data__;if(sn){var r=e[t];return r===l?n:r}return he.call(e,t)?e[t]:n}function Ir(t){var e=this.__data__;return sn?e[t]!==n:he.call(e,t)}function Nr(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=sn&&e===n?l:e,this}function Br(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Fr(){this.__data__=[],this.size=0}function zr(t){var e=this.__data__,n=ci(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Ee.call(e,n,1),--this.size,!0}function Ur(t){var e=this.__data__,r=ci(e,t);return r<0?n:e[r][1]}function jr(t){return ci(this.__data__,t)>-1}function Vr(t,e){var n=this.__data__,r=ci(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Hr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Wr(){this.size=0,this.__data__={hash:new Rr,map:new($e||Br),string:new Rr}}function Gr(t){var e=Ga(this,t)["delete"](t);return this.size-=e?1:0,e}function qr(t){return Ga(this,t).get(t)}function Xr(t){return Ga(this,t).has(t)}function Yr(t,e){var n=Ga(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Zr(t){var e=-1,n=null==t?0:t.length;this.__data__=new Hr;while(++e<n)this.add(t[e])}function Kr(t){return this.__data__.set(t,l),this}function Jr(t){return this.__data__.has(t)}function Qr(t){var e=this.__data__=new Br(t);this.size=e.size}function $r(){this.__data__=new Br,this.size=0}function ti(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ei(t){return this.__data__.get(t)}function ni(t){return this.__data__.has(t)}function ri(t,e){var n=this.__data__;if(n instanceof Br){var r=n.__data__;if(!$e||r.length<i-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hr(r)}return n.set(t,e),this.size=n.size,this}function ii(t,e){var n=lc(t),r=!n&&sc(t),i=!n&&!r&&pc(t),o=!n&&!r&&!i&&Uc(t),a=n||r||i||o,s=a?Gn(t.length,ie):[],l=s.length;for(var u in t)!e&&!he.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||as(u,l))||s.push(u);return s}function oi(t){var e=t.length;return e?t[yo(0,e-1)]:n}function ai(t,e){return Ds(ia(t),gi(e,0,t.length))}function si(t){return Ds(ia(t))}function li(t,e,r){(r!==n&&!ic(t[e],r)||r===n&&!(e in t))&&fi(t,e,r)}function ui(t,e,r){var i=t[e];he.call(t,e)&&ic(i,r)&&(r!==n||e in t)||fi(t,e,r)}function ci(t,e){var n=t.length;while(n--)if(ic(t[n][0],e))return n;return-1}function hi(t,e,n,r){return wi(t,(function(t,i,o){e(r,t,n(t),o)})),r}function di(t,e){return t&&oa(e,wh(e),t)}function pi(t,e){return t&&oa(e,Sh(e),t)}function fi(t,e,n){"__proto__"==e&&De?De(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function mi(t,e){var r=-1,i=e.length,o=g(i),a=null==t;while(++r<i)o[r]=a?n:gh(t,e[r]);return o}function gi(t,e,r){return t===t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function vi(t,e,r,i,o,a){var s,l=e&h,u=e&d,c=e&p;if(r&&(s=o?r(t,i,o,a):r(t)),s!==n)return s;if(!Mc(t))return t;var f=lc(t);if(f){if(s=es(t),!l)return ia(t,s)}else{var m=Ja(t),g=m==Z||m==K;if(pc(t))return Yo(t,l);if(m==tt||m==V||g&&!o){if(s=u||g?{}:ns(t),!l)return u?sa(t,pi(s,t)):aa(t,di(s,t))}else{if(!Ke[m])return o?t:{};s=rs(t,m,l)}}a||(a=new Qr);var v=a.get(t);if(v)return v;a.set(t,s),Bc(t)?t.forEach((function(n){s.add(vi(n,e,r,n,t,a))})):Cc(t)&&t.forEach((function(n,i){s.set(i,vi(n,e,r,i,t,a))}));var y=c?u?Ua:za:u?Sh:wh,b=f?n:y(t);return xn(b||t,(function(n,i){b&&(i=n,n=t[i]),ui(s,i,vi(n,e,r,i,t,a))})),s}function yi(t){var e=wh(t);return function(n){return bi(n,t,e)}}function bi(t,e,r){var i=r.length;if(null==t)return!i;t=ne(t);while(i--){var o=r[i],a=e[o],s=t[o];if(s===n&&!(o in t)||!a(s))return!1}return!0}function xi(t,e,r){if("function"!=typeof t)throw new oe(a);return Es((function(){t.apply(n,r)}),e)}function _i(t,e,n,r){var o=-1,a=Mn,s=!0,l=t.length,u=[],c=e.length;if(!l)return u;n&&(e=Cn(e,Yn(n))),r?(a=En,s=!1):e.length>=i&&(a=Kn,s=!1,e=new Zr(e));t:while(++o<l){var h=t[o],d=null==n?h:n(h);if(h=r||0!==h?h:0,s&&d===d){var p=c;while(p--)if(e[p]===d)continue t;u.push(h)}else a(e,d,r)||u.push(h)}return u}Sr.templateSettings={escape:At,evaluate:Dt,interpolate:Pt,variable:"",imports:{_:Sr}},Sr.prototype=Er.prototype,Sr.prototype.constructor=Sr,Cr.prototype=Mr(Er.prototype),Cr.prototype.constructor=Cr,Tr.prototype=Mr(Er.prototype),Tr.prototype.constructor=Tr,Rr.prototype.clear=Lr,Rr.prototype["delete"]=Or,Rr.prototype.get=kr,Rr.prototype.has=Ir,Rr.prototype.set=Nr,Br.prototype.clear=Fr,Br.prototype["delete"]=zr,Br.prototype.get=Ur,Br.prototype.has=jr,Br.prototype.set=Vr,Hr.prototype.clear=Wr,Hr.prototype["delete"]=Gr,Hr.prototype.get=qr,Hr.prototype.has=Xr,Hr.prototype.set=Yr,Zr.prototype.add=Zr.prototype.push=Kr,Zr.prototype.has=Jr,Qr.prototype.clear=$r,Qr.prototype["delete"]=ti,Qr.prototype.get=ei,Qr.prototype.has=ni,Qr.prototype.set=ri;var wi=ca(Ri),Si=ca(Li,!0);function Mi(t,e){var n=!0;return wi(t,(function(t,r,i){return n=!!e(t,r,i),n})),n}function Ei(t,e,r){var i=-1,o=t.length;while(++i<o){var a=t[i],s=e(a);if(null!=s&&(l===n?s===s&&!zc(s):r(s,l)))var l=s,u=a}return u}function Ci(t,e,r,i){var o=t.length;r=Yc(r),r<0&&(r=-r>o?0:o+r),i=i===n||i>o?o:Yc(i),i<0&&(i+=o),i=r>i?0:Zc(i);while(r<i)t[r++]=e;return t}function Ti(t,e){var n=[];return wi(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Ai(t,e,n,r,i){var o=-1,a=t.length;n||(n=os),i||(i=[]);while(++o<a){var s=t[o];e>0&&n(s)?e>1?Ai(s,e-1,n,r,i):Tn(i,s):r||(i[i.length]=s)}return i}var Di=ha(),Pi=ha(!0);function Ri(t,e){return t&&Di(t,e,wh)}function Li(t,e){return t&&Pi(t,e,wh)}function Oi(t,e){return Sn(e,(function(e){return _c(t[e])}))}function ki(t,e){e=Wo(e,t);var r=0,i=e.length;while(null!=t&&r<i)t=t[Rs(e[r++])];return r&&r==i?t:n}function Ii(t,e,n){var r=e(t);return lc(t)?r:Tn(r,n(t))}function Ni(t){return null==t?t===n?st:$:Ae&&Ae in ne(t)?Ya(t):bs(t)}function Bi(t,e){return t>e}function Fi(t,e){return null!=t&&he.call(t,e)}function zi(t,e){return null!=t&&e in ne(t)}function Ui(t,e,n){return t>=He(e,n)&&t<Ue(e,n)}function ji(t,e,r){var i=r?En:Mn,o=t[0].length,a=t.length,s=a,l=g(a),u=1/0,c=[];while(s--){var h=t[s];s&&e&&(h=Cn(h,Yn(e))),u=He(h.length,u),l[s]=!r&&(e||o>=120&&h.length>=120)?new Zr(s&&h):n}h=t[0];var d=-1,p=l[0];t:while(++d<o&&c.length<u){var f=h[d],m=e?e(f):f;if(f=r||0!==f?f:0,!(p?Kn(p,m):i(c,m,r))){s=a;while(--s){var v=l[s];if(!(v?Kn(v,m):i(t[s],m,r)))continue t}p&&p.push(m),c.push(f)}}return c}function Vi(t,e,n,r){return Ri(t,(function(t,i,o){e(r,n(t),i,o)})),r}function Hi(t,e,r){e=Wo(e,t),t=_s(t,e);var i=null==t?t:t[Rs(ol(e))];return null==i?n:yn(i,t,r)}function Wi(t){return Ec(t)&&Ni(t)==V}function Gi(t){return Ec(t)&&Ni(t)==ct}function qi(t){return Ec(t)&&Ni(t)==q}function Xi(t,e,n,r,i){return t===e||(null==t||null==e||!Ec(t)&&!Ec(e)?t!==t&&e!==e:Yi(t,e,n,r,Xi,i))}function Yi(t,e,n,r,i,o){var a=lc(t),s=lc(e),l=a?H:Ja(t),u=s?H:Ja(e);l=l==V?tt:l,u=u==V?tt:u;var c=l==tt,h=u==tt,d=l==u;if(d&&pc(t)){if(!pc(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new Qr),a||Uc(t)?Ia(t,e,n,r,i,o):Na(t,e,l,n,r,i,o);if(!(n&f)){var p=c&&he.call(t,"__wrapped__"),m=h&&he.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,v=m?e.value():e;return o||(o=new Qr),i(g,v,n,r,o)}}return!!d&&(o||(o=new Qr),Ba(t,e,n,r,i,o))}function Zi(t){return Ec(t)&&Ja(t)==J}function Ki(t,e,r,i){var o=r.length,a=o,s=!i;if(null==t)return!a;t=ne(t);while(o--){var l=r[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}while(++o<a){l=r[o];var u=l[0],c=t[u],h=l[1];if(s&&l[2]){if(c===n&&!(u in t))return!1}else{var d=new Qr;if(i)var p=i(c,h,u,t,e,d);if(!(p===n?Xi(h,c,f|m,i,d):p))return!1}}return!0}function Ji(t){if(!Mc(t)||hs(t))return!1;var e=_c(t)?ve:Yt;return e.test(Ls(t))}function Qi(t){return Ec(t)&&Ni(t)==rt}function $i(t){return Ec(t)&&Ja(t)==it}function to(t){return Ec(t)&&Sc(t.length)&&!!Ze[Ni(t)]}function eo(t){return"function"==typeof t?t:null==t?Pd:"object"==typeof t?lc(t)?so(t[0],t[1]):ao(t):Hd(t)}function no(t){if(!ps(t))return ze(t);var e=[];for(var n in ne(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ro(t){if(!Mc(t))return ys(t);var e=ps(t),n=[];for(var r in t)("constructor"!=r||!e&&he.call(t,r))&&n.push(r);return n}function io(t,e){return t<e}function oo(t,e){var n=-1,r=cc(t)?g(t.length):[];return wi(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function ao(t){var e=qa(t);return 1==e.length&&e[0][2]?ms(e[0][0],e[0][1]):function(n){return n===t||Ki(n,t,e)}}function so(t,e){return ls(t)&&fs(e)?ms(Rs(t),e):function(r){var i=gh(r,t);return i===n&&i===e?yh(r,t):Xi(e,i,f|m)}}function lo(t,e,r,i,o){t!==e&&Di(e,(function(a,s){if(o||(o=new Qr),Mc(a))uo(t,e,s,r,lo,i,o);else{var l=i?i(Ss(t,s),a,s+"",t,e,o):n;l===n&&(l=a),li(t,s,l)}}),Sh)}function uo(t,e,r,i,o,a,s){var l=Ss(t,r),u=Ss(e,r),c=s.get(u);if(c)li(t,r,c);else{var h=a?a(l,u,r+"",t,e,s):n,d=h===n;if(d){var p=lc(u),f=!p&&pc(u),m=!p&&!f&&Uc(u);h=u,p||f||m?lc(l)?h=l:hc(l)?h=ia(l):f?(d=!1,h=Yo(u,!0)):m?(d=!1,h=$o(u,!0)):h=[]:kc(u)||sc(u)?(h=l,sc(l)?h=Jc(l):Mc(l)&&!_c(l)||(h=ns(u))):d=!1}d&&(s.set(u,h),o(h,u,i,a,s),s["delete"](u)),li(t,r,h)}}function co(t,e){var r=t.length;if(r)return e+=e<0?r:0,as(e,r)?t[e]:n}function ho(t,e,n){e=e.length?Cn(e,(function(t){return lc(t)?function(e){return ki(e,1===t.length?t[0]:t)}:t})):[Pd];var r=-1;e=Cn(e,Yn(Wa()));var i=oo(t,(function(t,n,i){var o=Cn(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return Hn(i,(function(t,e){return ea(t,e,n)}))}function po(t,e){return fo(t,e,(function(e,n){return yh(t,n)}))}function fo(t,e,n){var r=-1,i=e.length,o={};while(++r<i){var a=e[r],s=ki(t,a);n(s,a)&&Mo(o,Wo(a,t),s)}return o}function mo(t){return function(e){return ki(e,t)}}function go(t,e,n,r){var i=r?Bn:Nn,o=-1,a=e.length,s=t;t===e&&(e=ia(e)),n&&(s=Cn(t,Yn(n)));while(++o<a){var l=0,u=e[o],c=n?n(u):u;while((l=i(s,c,l,r))>-1)s!==t&&Ee.call(s,l,1),Ee.call(t,l,1)}return t}function vo(t,e){var n=t?e.length:0,r=n-1;while(n--){var i=e[n];if(n==r||i!==o){var o=i;as(i)?Ee.call(t,i,1):No(t,i)}}return t}function yo(t,e){return t+ke(qe()*(e-t+1))}function bo(t,e,n,r){var i=-1,o=Ue(Oe((e-t)/(n||1)),0),a=g(o);while(o--)a[r?o:++i]=t,t+=n;return a}function xo(t,e){var n="";if(!t||e<1||e>I)return n;do{e%2&&(n+=t),e=ke(e/2),e&&(t+=t)}while(e);return n}function _o(t,e){return Cs(xs(t,e,Pd),t+"")}function wo(t){return oi(jh(t))}function So(t,e){var n=jh(t);return Ds(n,gi(e,0,n.length))}function Mo(t,e,r,i){if(!Mc(t))return t;e=Wo(e,t);var o=-1,a=e.length,s=a-1,l=t;while(null!=l&&++o<a){var u=Rs(e[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=s){var h=l[u];c=i?i(h,u,l):n,c===n&&(c=Mc(h)?h:as(e[o+1])?[]:{})}ui(l,u,c),l=l[u]}return t}var Eo=ln?function(t,e){return ln.set(t,e),t}:Pd,Co=De?function(t,e){return De(t,"toString",{configurable:!0,enumerable:!1,value:Cd(e),writable:!0})}:Pd;function To(t){return Ds(jh(t))}function Ao(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;var o=g(i);while(++r<i)o[r]=t[r+e];return o}function Do(t,e){var n;return wi(t,(function(t,r,i){return n=e(t,r,i),!n})),!!n}function Po(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=U){while(r<i){var o=r+i>>>1,a=t[o];null!==a&&!zc(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Ro(t,e,Pd,n)}function Ro(t,e,r,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;e=r(e);var s=e!==e,l=null===e,u=zc(e),c=e===n;while(o<a){var h=ke((o+a)/2),d=r(t[h]),p=d!==n,f=null===d,m=d===d,g=zc(d);if(s)var v=i||m;else v=c?m&&(i||p):l?m&&p&&(i||!f):u?m&&p&&!f&&(i||!g):!f&&!g&&(i?d<=e:d<e);v?o=h+1:a=h}return He(a,z)}function Lo(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n],s=e?e(a):a;if(!n||!ic(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function Oo(t){return"number"==typeof t?t:zc(t)?B:+t}function ko(t){if("string"==typeof t)return t;if(lc(t))return Cn(t,ko)+"";if(zc(t))return _r?_r.call(t):"";var e=t+"";return"0"==e&&1/t==-k?"-0":e}function Io(t,e,n){var r=-1,o=Mn,a=t.length,s=!0,l=[],u=l;if(n)s=!1,o=En;else if(a>=i){var c=e?null:Da(t);if(c)return cr(c);s=!1,o=Kn,u=new Zr}else u=e?[]:l;t:while(++r<a){var h=t[r],d=e?e(h):h;if(h=n||0!==h?h:0,s&&d===d){var p=u.length;while(p--)if(u[p]===d)continue t;e&&u.push(d),l.push(h)}else o(u,d,n)||(u!==l&&u.push(d),l.push(h))}return l}function No(t,e){return e=Wo(e,t),t=_s(t,e),null==t||delete t[Rs(ol(e))]}function Bo(t,e,n,r){return Mo(t,e,n(ki(t,e)),r)}function Fo(t,e,n,r){var i=t.length,o=r?i:-1;while((r?o--:++o<i)&&e(t[o],o,t));return n?Ao(t,r?0:o,r?o+1:i):Ao(t,r?o+1:0,r?i:o)}function zo(t,e){var n=t;return n instanceof Tr&&(n=n.value()),An(e,(function(t,e){return e.func.apply(e.thisArg,Tn([t],e.args))}),n)}function Uo(t,e,n){var r=t.length;if(r<2)return r?Io(t[0]):[];var i=-1,o=g(r);while(++i<r){var a=t[i],s=-1;while(++s<r)s!=i&&(o[i]=_i(o[i]||a,t[s],e,n))}return Io(Ai(o,1),e,n)}function jo(t,e,r){var i=-1,o=t.length,a=e.length,s={};while(++i<o){var l=i<a?e[i]:n;r(s,t[i],l)}return s}function Vo(t){return hc(t)?t:[]}function Ho(t){return"function"==typeof t?t:Pd}function Wo(t,e){return lc(t)?t:ls(t,e)?[t]:Ps($c(t))}var Go=_o;function qo(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:Ao(t,e,r)}var Xo=Pe||function(t){return an.clearTimeout(t)};function Yo(t,e){if(e)return t.slice();var n=t.length,r=_e?_e(n):new t.constructor(n);return t.copy(r),r}function Zo(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}function Ko(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Jo(t){var e=new t.constructor(t.source,Gt.exec(t));return e.lastIndex=t.lastIndex,e}function Qo(t){return br?ne(br.call(t)):{}}function $o(t,e){var n=e?Zo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ta(t,e){if(t!==e){var r=t!==n,i=null===t,o=t===t,a=zc(t),s=e!==n,l=null===e,u=e===e,c=zc(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!c&&t<e||c&&r&&o&&!i&&!a||l&&r&&o||!s&&o||!u)return-1}return 0}function ea(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;while(++r<a){var l=ta(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*("desc"==u?-1:1)}}return t.index-e.index}function na(t,e,n,r){var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=Ue(o-a,0),c=g(l+u),h=!r;while(++s<l)c[s]=e[s];while(++i<a)(h||i<o)&&(c[n[i]]=t[i]);while(u--)c[s++]=t[i++];return c}function ra(t,e,n,r){var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=Ue(o-s,0),h=g(c+u),d=!r;while(++i<c)h[i]=t[i];var p=i;while(++l<u)h[p+l]=e[l];while(++a<s)(d||i<o)&&(h[p+n[a]]=t[i++]);return h}function ia(t,e){var n=-1,r=t.length;e||(e=g(r));while(++n<r)e[n]=t[n];return e}function oa(t,e,r,i){var o=!r;r||(r={});var a=-1,s=e.length;while(++a<s){var l=e[a],u=i?i(r[l],t[l],l,r,t):n;u===n&&(u=t[l]),o?fi(r,l,u):ui(r,l,u)}return r}function aa(t,e){return oa(t,Za(t),e)}function sa(t,e){return oa(t,Ka(t),e)}function la(t,e){return function(n,r){var i=lc(n)?bn:hi,o=e?e():{};return i(n,t,Wa(r,2),o)}}function ua(t){return _o((function(e,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;a=t.length>3&&"function"==typeof a?(o--,a):n,s&&ss(r[0],r[1],s)&&(a=o<3?n:a,o=1),e=ne(e);while(++i<o){var l=r[i];l&&t(e,l,i,a)}return e}))}function ca(t,e){return function(n,r){if(null==n)return n;if(!cc(n))return t(n,r);var i=n.length,o=e?i:-1,a=ne(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function ha(t){return function(e,n,r){var i=-1,o=ne(e),a=r(e),s=a.length;while(s--){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function da(t,e,n){var r=e&v,i=ma(t);function o(){var e=this&&this!==an&&this instanceof o?i:t;return e.apply(r?n:this,arguments)}return o}function pa(t){return function(e){e=$c(e);var r=ir(e)?mr(e):n,i=r?r[0]:e.charAt(0),o=r?qo(r,1).join(""):e.slice(1);return i[t]()+o}}function fa(t){return function(e){return An(_d(Yh(e).replace(je,"")),t,"")}}function ma(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Mr(t.prototype),r=t.apply(n,e);return Mc(r)?r:n}}function ga(t,e,r){var i=ma(t);function o(){var a=arguments.length,s=g(a),l=a,u=Ha(o);while(l--)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:ur(s,u);if(a-=c.length,a<r)return Ta(t,e,ba,o.placeholder,n,s,c,n,n,r-a);var h=this&&this!==an&&this instanceof o?i:t;return yn(h,this,s)}return o}function va(t){return function(e,r,i){var o=ne(e);if(!cc(e)){var a=Wa(r,3);e=wh(e),r=function(t){return a(o[t],t,o)}}var s=t(e,r,i);return s>-1?o[a?e[s]:s]:n}}function ya(t){return Fa((function(e){var r=e.length,i=r,o=Cr.prototype.thru;t&&e.reverse();while(i--){var s=e[i];if("function"!=typeof s)throw new oe(a);if(o&&!l&&"wrapper"==Va(s))var l=new Cr([],!0)}i=l?i:r;while(++i<r){s=e[i];var u=Va(s),c="wrapper"==u?ja(s):n;l=c&&cs(c[0])&&c[1]==(M|x|w|E)&&!c[4].length&&1==c[9]?l[Va(c[0])].apply(l,c[3]):1==s.length&&cs(s)?l[u]():l.thru(s)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&lc(n))return l.plant(n).value();var i=0,o=r?e[i].apply(this,t):n;while(++i<r)o=e[i].call(this,o);return o}}))}function ba(t,e,r,i,o,a,s,l,u,c){var h=e&M,d=e&v,p=e&y,f=e&(x|_),m=e&C,b=p?n:ma(t);function w(){var n=arguments.length,v=g(n),y=n;while(y--)v[y]=arguments[y];if(f)var x=Ha(w),_=$n(v,x);if(i&&(v=na(v,i,o,f)),a&&(v=ra(v,a,s,f)),n-=_,f&&n<c){var S=ur(v,x);return Ta(t,e,ba,w.placeholder,r,v,S,l,u,c-n)}var M=d?r:this,E=p?M[t]:t;return n=v.length,l?v=ws(v,l):m&&n>1&&v.reverse(),h&&u<n&&(v.length=u),this&&this!==an&&this instanceof w&&(E=b||ma(E)),E.apply(M,v)}return w}function xa(t,e){return function(n,r){return Vi(n,t,e(r),{})}}function _a(t,e){return function(r,i){var o;if(r===n&&i===n)return e;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=ko(r),i=ko(i)):(r=Oo(r),i=Oo(i)),o=t(r,i)}return o}}function wa(t){return Fa((function(e){return e=Cn(e,Yn(Wa())),_o((function(n){var r=this;return t(e,(function(t){return yn(t,r,n)}))}))}))}function Sa(t,e){e=e===n?" ":ko(e);var r=e.length;if(r<2)return r?xo(e,t):e;var i=xo(e,Oe(t/fr(e)));return ir(e)?qo(mr(i),0,t).join(""):i.slice(0,t)}function Ma(t,e,n,r){var i=e&v,o=ma(t);function a(){var e=-1,s=arguments.length,l=-1,u=r.length,c=g(u+s),h=this&&this!==an&&this instanceof a?o:t;while(++l<u)c[l]=r[l];while(s--)c[l++]=arguments[++e];return yn(h,i?n:this,c)}return a}function Ea(t){return function(e,r,i){return i&&"number"!=typeof i&&ss(e,r,i)&&(r=i=n),e=Xc(e),r===n?(r=e,e=0):r=Xc(r),i=i===n?e<r?1:-1:Xc(i),bo(e,r,i,t)}}function Ca(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Kc(e),n=Kc(n)),t(e,n)}}function Ta(t,e,r,i,o,a,s,l,u,c){var h=e&x,d=h?s:n,p=h?n:s,f=h?a:n,m=h?n:a;e|=h?w:S,e&=~(h?S:w),e&b||(e&=~(v|y));var g=[t,e,o,f,d,m,p,l,u,c],_=r.apply(n,g);return cs(t)&&Ms(_,g),_.placeholder=i,Ts(_,t,e)}function Aa(t){var e=ee[t];return function(t,n){if(t=Kc(t),n=null==n?0:He(Yc(n),292),n&&Be(t)){var r=($c(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=($c(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}var Da=rn&&1/cr(new rn([,-0]))[1]==k?function(t){return new rn(t)}:Fd;function Pa(t){return function(e){var n=Ja(e);return n==J?sr(e):n==it?hr(e):qn(e,t(e))}}function Ra(t,e,r,i,o,s,l,u){var c=e&y;if(!c&&"function"!=typeof t)throw new oe(a);var h=i?i.length:0;if(h||(e&=~(w|S),i=o=n),l=l===n?l:Ue(Yc(l),0),u=u===n?u:Yc(u),h-=o?o.length:0,e&S){var d=i,p=o;i=o=n}var f=c?n:ja(t),m=[t,e,r,i,o,d,p,s,l,u];if(f&&vs(m,f),t=m[0],e=m[1],r=m[2],i=m[3],o=m[4],u=m[9]=m[9]===n?c?0:t.length:Ue(m[9]-h,0),!u&&e&(x|_)&&(e&=~(x|_)),e&&e!=v)g=e==x||e==_?ga(t,e,u):e!=w&&e!=(v|w)||o.length?ba.apply(n,m):Ma(t,e,r,i);else var g=da(t,e,r);var b=f?Eo:Ms;return Ts(b(g,m),t,e)}function La(t,e,r,i){return t===n||ic(t,le[r])&&!he.call(i,r)?e:t}function Oa(t,e,r,i,o,a){return Mc(t)&&Mc(e)&&(a.set(e,t),lo(t,e,n,Oa,a),a["delete"](e)),t}function ka(t){return kc(t)?n:t}function Ia(t,e,r,i,o,a){var s=r&f,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var d=-1,p=!0,g=r&m?new Zr:n;a.set(t,e),a.set(e,t);while(++d<l){var v=t[d],y=e[d];if(i)var b=s?i(y,v,d,e,t,a):i(v,y,d,t,e,a);if(b!==n){if(b)continue;p=!1;break}if(g){if(!Pn(e,(function(t,e){if(!Kn(g,e)&&(v===t||o(v,t,r,i,a)))return g.push(e)}))){p=!1;break}}else if(v!==y&&!o(v,y,r,i,a)){p=!1;break}}return a["delete"](t),a["delete"](e),p}function Na(t,e,n,r,i,o,a){switch(n){case ht:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ct:return!(t.byteLength!=e.byteLength||!o(new xe(t),new xe(e)));case G:case q:case Q:return ic(+t,+e);case Y:return t.name==e.name&&t.message==e.message;case rt:case ot:return t==e+"";case J:var s=sr;case it:var l=r&f;if(s||(s=cr),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=m,a.set(t,e);var c=Ia(s(t),s(e),r,i,o,a);return a["delete"](t),c;case at:if(br)return br.call(t)==br.call(e)}return!1}function Ba(t,e,r,i,o,a){var s=r&f,l=za(t),u=l.length,c=za(e),h=c.length;if(u!=h&&!s)return!1;var d=u;while(d--){var p=l[d];if(!(s?p in e:he.call(e,p)))return!1}var m=a.get(t),g=a.get(e);if(m&&g)return m==e&&g==t;var v=!0;a.set(t,e),a.set(e,t);var y=s;while(++d<u){p=l[d];var b=t[p],x=e[p];if(i)var _=s?i(x,b,p,e,t,a):i(b,x,p,t,e,a);if(!(_===n?b===x||o(b,x,r,i,a):_)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=t.constructor,S=e.constructor;w==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(v=!1)}return a["delete"](t),a["delete"](e),v}function Fa(t){return Cs(xs(t,n,Ys),t+"")}function za(t){return Ii(t,wh,Za)}function Ua(t){return Ii(t,Sh,Ka)}var ja=ln?function(t){return ln.get(t)}:Fd;function Va(t){var e=t.name+"",n=cn[e],r=he.call(cn,e)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ha(t){var e=he.call(Sr,"placeholder")?Sr:t;return e.placeholder}function Wa(){var t=Sr.iteratee||Rd;return t=t===Rd?eo:t,arguments.length?t(arguments[0],arguments[1]):t}function Ga(t,e){var n=t.__data__;return us(e)?n["string"==typeof e?"string":"hash"]:n.map}function qa(t){var e=wh(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,fs(i)]}return e}function Xa(t,e){var r=rr(t,e);return Ji(r)?r:n}function Ya(t){var e=he.call(t,Ae),r=t[Ae];try{t[Ae]=n;var i=!0}catch(a){}var o=fe.call(t);return i&&(e?t[Ae]=r:delete t[Ae]),o}var Za=Ie?function(t){return null==t?[]:(t=ne(t),Sn(Ie(t),(function(e){return Me.call(t,e)})))}:Xd,Ka=Ie?function(t){var e=[];while(t)Tn(e,Za(t)),t=we(t);return e}:Xd,Ja=Ni;function Qa(t,e,n){var r=-1,i=n.length;while(++r<i){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=He(e,t+a);break;case"takeRight":t=Ue(t,e-a);break}}return{start:t,end:e}}function $a(t){var e=t.match(zt);return e?e[1].split(Ut):[]}function ts(t,e,n){e=Wo(e,t);var r=-1,i=e.length,o=!1;while(++r<i){var a=Rs(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&Sc(i)&&as(a,i)&&(lc(t)||sc(t)))}function es(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&he.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ns(t){return"function"!=typeof t.constructor||ps(t)?{}:Mr(we(t))}function rs(t,e,n){var r=t.constructor;switch(e){case ct:return Zo(t);case G:case q:return new r(+t);case ht:return Ko(t,n);case dt:case pt:case ft:case mt:case gt:case vt:case yt:case bt:case xt:return $o(t,n);case J:return new r;case Q:case ot:return new r(t);case rt:return Jo(t);case it:return new r;case at:return Qo(t)}}function is(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ft,"{\n/* [wrapped with "+e+"] */\n")}function os(t){return lc(t)||sc(t)||!!(Ce&&t&&t[Ce])}function as(t,e){var n=typeof t;return e=null==e?I:e,!!e&&("number"==n||"symbol"!=n&&Kt.test(t))&&t>-1&&t%1==0&&t<e}function ss(t,e,n){if(!Mc(n))return!1;var r=typeof e;return!!("number"==r?cc(n)&&as(e,n.length):"string"==r&&e in n)&&ic(n[e],t)}function ls(t,e){if(lc(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!zc(t))||(Lt.test(t)||!Rt.test(t)||null!=e&&t in ne(e))}function us(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function cs(t){var e=Va(t),n=Sr[e];if("function"!=typeof n||!(e in Tr.prototype))return!1;if(t===n)return!0;var r=ja(n);return!!r&&t===r[0]}function hs(t){return!!pe&&pe in t}(Qe&&Ja(new Qe(new ArrayBuffer(1)))!=ht||$e&&Ja(new $e)!=J||tn&&Ja(tn.resolve())!=et||rn&&Ja(new rn)!=it||on&&Ja(new on)!=lt)&&(Ja=function(t){var e=Ni(t),r=e==tt?t.constructor:n,i=r?Ls(r):"";if(i)switch(i){case hn:return ht;case Rn:return J;case Ln:return et;case jn:return it;case dr:return lt}return e});var ds=ue?_c:Yd;function ps(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||le;return t===n}function fs(t){return t===t&&!Mc(t)}function ms(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in ne(r)))}}function gs(t){var e=Uu(t,(function(t){return n.size===u&&n.clear(),t})),n=e.cache;return e}function vs(t,e){var n=t[1],r=e[1],i=n|r,o=i<(v|y|M),a=r==M&&n==x||r==M&&n==E&&t[7].length<=e[8]||r==(M|E)&&e[7].length<=e[8]&&n==x;if(!o&&!a)return t;r&v&&(t[2]=e[2],i|=n&v?0:b);var s=e[3];if(s){var l=t[3];t[3]=l?na(l,s,e[4]):s,t[4]=l?ur(t[3],c):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?ra(l,s,e[6]):s,t[6]=l?ur(t[5],c):e[6]),s=e[7],s&&(t[7]=s),r&M&&(t[8]=null==t[8]?e[8]:He(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function ys(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}function bs(t){return fe.call(t)}function xs(t,e,r){return e=Ue(e===n?t.length-1:e,0),function(){var n=arguments,i=-1,o=Ue(n.length-e,0),a=g(o);while(++i<o)a[i]=n[e+i];i=-1;var s=g(e+1);while(++i<e)s[i]=n[i];return s[e]=r(a),yn(t,this,s)}}function _s(t,e){return e.length<2?t:ki(t,Ao(e,0,-1))}function ws(t,e){var r=t.length,i=He(e.length,r),o=ia(t);while(i--){var a=e[i];t[i]=as(a,r)?o[a]:n}return t}function Ss(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ms=As(Eo),Es=Le||function(t,e){return an.setTimeout(t,e)},Cs=As(Co);function Ts(t,e,n){var r=e+"";return Cs(t,is(r,Os($a(r),n)))}function As(t){var e=0,r=0;return function(){var i=We(),o=P-(i-r);if(r=i,o>0){if(++e>=D)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Ds(t,e){var r=-1,i=t.length,o=i-1;e=e===n?i:e;while(++r<e){var a=yo(r,o),s=t[a];t[a]=t[r],t[r]=s}return t.length=e,t}var Ps=gs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ot,(function(t,n,r,i){e.push(r?i.replace(Ht,"$1"):n||t)})),e}));function Rs(t){if("string"==typeof t||zc(t))return t;var e=t+"";return"0"==e&&1/t==-k?"-0":e}function Ls(t){if(null!=t){try{return ce.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Os(t,e){return xn(j,(function(n){var r="_."+n[0];e&n[1]&&!Mn(t,r)&&t.push(r)})),t.sort()}function ks(t){if(t instanceof Tr)return t.clone();var e=new Cr(t.__wrapped__,t.__chain__);return e.__actions__=ia(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Is(t,e,r){e=(r?ss(t,e,r):e===n)?1:Ue(Yc(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var o=0,a=0,s=g(Oe(i/e));while(o<i)s[a++]=Ao(t,o,o+=e);return s}function Ns(t){var e=-1,n=null==t?0:t.length,r=0,i=[];while(++e<n){var o=t[e];o&&(i[r++]=o)}return i}function Bs(){var t=arguments.length;if(!t)return[];var e=g(t-1),n=arguments[0],r=t;while(r--)e[r-1]=arguments[r];return Tn(lc(n)?ia(n):[n],Ai(e,1))}var Fs=_o((function(t,e){return hc(t)?_i(t,Ai(e,1,hc,!0)):[]})),zs=_o((function(t,e){var r=ol(e);return hc(r)&&(r=n),hc(t)?_i(t,Ai(e,1,hc,!0),Wa(r,2)):[]})),Us=_o((function(t,e){var r=ol(e);return hc(r)&&(r=n),hc(t)?_i(t,Ai(e,1,hc,!0),n,r):[]}));function js(t,e,r){var i=null==t?0:t.length;return i?(e=r||e===n?1:Yc(e),Ao(t,e<0?0:e,i)):[]}function Vs(t,e,r){var i=null==t?0:t.length;return i?(e=r||e===n?1:Yc(e),e=i-e,Ao(t,0,e<0?0:e)):[]}function Hs(t,e){return t&&t.length?Fo(t,Wa(e,3),!0,!0):[]}function Ws(t,e){return t&&t.length?Fo(t,Wa(e,3),!0):[]}function Gs(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ss(t,e,n)&&(n=0,r=i),Ci(t,e,n,r)):[]}function qs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Yc(n);return i<0&&(i=Ue(r+i,0)),In(t,Wa(e,3),i)}function Xs(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==n&&(o=Yc(r),o=r<0?Ue(i+o,0):He(o,i-1)),In(t,Wa(e,3),o,!0)}function Ys(t){var e=null==t?0:t.length;return e?Ai(t,1):[]}function Zs(t){var e=null==t?0:t.length;return e?Ai(t,k):[]}function Ks(t,e){var r=null==t?0:t.length;return r?(e=e===n?1:Yc(e),Ai(t,e)):[]}function Js(t){var e=-1,n=null==t?0:t.length,r={};while(++e<n){var i=t[e];r[i[0]]=i[1]}return r}function Qs(t){return t&&t.length?t[0]:n}function $s(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Yc(n);return i<0&&(i=Ue(r+i,0)),Nn(t,e,i)}function tl(t){var e=null==t?0:t.length;return e?Ao(t,0,-1):[]}var el=_o((function(t){var e=Cn(t,Vo);return e.length&&e[0]===t[0]?ji(e):[]})),nl=_o((function(t){var e=ol(t),r=Cn(t,Vo);return e===ol(r)?e=n:r.pop(),r.length&&r[0]===t[0]?ji(r,Wa(e,2)):[]})),rl=_o((function(t){var e=ol(t),r=Cn(t,Vo);return e="function"==typeof e?e:n,e&&r.pop(),r.length&&r[0]===t[0]?ji(r,n,e):[]}));function il(t,e){return null==t?"":Fe.call(t,e)}function ol(t){var e=null==t?0:t.length;return e?t[e-1]:n}function al(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==n&&(o=Yc(r),o=o<0?Ue(i+o,0):He(o,i-1)),e===e?pr(t,e,o):In(t,Fn,o,!0)}function sl(t,e){return t&&t.length?co(t,Yc(e)):n}var ll=_o(ul);function ul(t,e){return t&&t.length&&e&&e.length?go(t,e):t}function cl(t,e,n){return t&&t.length&&e&&e.length?go(t,e,Wa(n,2)):t}function hl(t,e,r){return t&&t.length&&e&&e.length?go(t,e,n,r):t}var dl=Fa((function(t,e){var n=null==t?0:t.length,r=mi(t,e);return vo(t,Cn(e,(function(t){return as(t,n)?+t:t})).sort(ta)),r}));function pl(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;e=Wa(e,3);while(++r<o){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return vo(t,i),n}function fl(t){return null==t?t:Je.call(t)}function ml(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&ss(t,e,r)?(e=0,r=i):(e=null==e?0:Yc(e),r=r===n?i:Yc(r)),Ao(t,e,r)):[]}function gl(t,e){return Po(t,e)}function vl(t,e,n){return Ro(t,e,Wa(n,2))}function yl(t,e){var n=null==t?0:t.length;if(n){var r=Po(t,e);if(r<n&&ic(t[r],e))return r}return-1}function bl(t,e){return Po(t,e,!0)}function xl(t,e,n){return Ro(t,e,Wa(n,2),!0)}function _l(t,e){var n=null==t?0:t.length;if(n){var r=Po(t,e,!0)-1;if(ic(t[r],e))return r}return-1}function wl(t){return t&&t.length?Lo(t):[]}function Sl(t,e){return t&&t.length?Lo(t,Wa(e,2)):[]}function Ml(t){var e=null==t?0:t.length;return e?Ao(t,1,e):[]}function El(t,e,r){return t&&t.length?(e=r||e===n?1:Yc(e),Ao(t,0,e<0?0:e)):[]}function Cl(t,e,r){var i=null==t?0:t.length;return i?(e=r||e===n?1:Yc(e),e=i-e,Ao(t,e<0?0:e,i)):[]}function Tl(t,e){return t&&t.length?Fo(t,Wa(e,3),!1,!0):[]}function Al(t,e){return t&&t.length?Fo(t,Wa(e,3)):[]}var Dl=_o((function(t){return Io(Ai(t,1,hc,!0))})),Pl=_o((function(t){var e=ol(t);return hc(e)&&(e=n),Io(Ai(t,1,hc,!0),Wa(e,2))})),Rl=_o((function(t){var e=ol(t);return e="function"==typeof e?e:n,Io(Ai(t,1,hc,!0),n,e)}));function Ll(t){return t&&t.length?Io(t):[]}function Ol(t,e){return t&&t.length?Io(t,Wa(e,2)):[]}function kl(t,e){return e="function"==typeof e?e:n,t&&t.length?Io(t,n,e):[]}function Il(t){if(!t||!t.length)return[];var e=0;return t=Sn(t,(function(t){if(hc(t))return e=Ue(t.length,e),!0})),Gn(e,(function(e){return Cn(t,Un(e))}))}function Nl(t,e){if(!t||!t.length)return[];var r=Il(t);return null==e?r:Cn(r,(function(t){return yn(e,n,t)}))}var Bl=_o((function(t,e){return hc(t)?_i(t,e):[]})),Fl=_o((function(t){return Uo(Sn(t,hc))})),zl=_o((function(t){var e=ol(t);return hc(e)&&(e=n),Uo(Sn(t,hc),Wa(e,2))})),Ul=_o((function(t){var e=ol(t);return e="function"==typeof e?e:n,Uo(Sn(t,hc),n,e)})),jl=_o(Il);function Vl(t,e){return jo(t||[],e||[],ui)}function Hl(t,e){return jo(t||[],e||[],Mo)}var Wl=_o((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,Nl(t,r)}));function Gl(t){var e=Sr(t);return e.__chain__=!0,e}function ql(t,e){return e(t),t}function Xl(t,e){return e(t)}var Yl=Fa((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,o=function(e){return mi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Tr&&as(r)?(i=i.slice(r,+r+(e?1:0)),i.__actions__.push({func:Xl,args:[o],thisArg:n}),new Cr(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));function Zl(){return Gl(this)}function Kl(){return new Cr(this.value(),this.__chain__)}function Jl(){this.__values__===n&&(this.__values__=qc(this.value()));var t=this.__index__>=this.__values__.length,e=t?n:this.__values__[this.__index__++];return{done:t,value:e}}function Ql(){return this}function $l(t){var e,r=this;while(r instanceof Er){var i=ks(r);i.__index__=0,i.__values__=n,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function tu(){var t=this.__wrapped__;if(t instanceof Tr){var e=t;return this.__actions__.length&&(e=new Tr(this)),e=e.reverse(),e.__actions__.push({func:Xl,args:[fl],thisArg:n}),new Cr(e,this.__chain__)}return this.thru(fl)}function eu(){return zo(this.__wrapped__,this.__actions__)}var nu=la((function(t,e,n){he.call(t,n)?++t[n]:fi(t,n,1)}));function ru(t,e,r){var i=lc(t)?wn:Mi;return r&&ss(t,e,r)&&(e=n),i(t,Wa(e,3))}function iu(t,e){var n=lc(t)?Sn:Ti;return n(t,Wa(e,3))}var ou=va(qs),au=va(Xs);function su(t,e){return Ai(gu(t,e),1)}function lu(t,e){return Ai(gu(t,e),k)}function uu(t,e,r){return r=r===n?1:Yc(r),Ai(gu(t,e),r)}function cu(t,e){var n=lc(t)?xn:wi;return n(t,Wa(e,3))}function hu(t,e){var n=lc(t)?_n:Si;return n(t,Wa(e,3))}var du=la((function(t,e,n){he.call(t,n)?t[n].push(e):fi(t,n,[e])}));function pu(t,e,n,r){t=cc(t)?t:jh(t),n=n&&!r?Yc(n):0;var i=t.length;return n<0&&(n=Ue(i+n,0)),Fc(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Nn(t,e,n)>-1}var fu=_o((function(t,e,n){var r=-1,i="function"==typeof e,o=cc(t)?g(t.length):[];return wi(t,(function(t){o[++r]=i?yn(e,t,n):Hi(t,e,n)})),o})),mu=la((function(t,e,n){fi(t,n,e)}));function gu(t,e){var n=lc(t)?Cn:oo;return n(t,Wa(e,3))}function vu(t,e,r,i){return null==t?[]:(lc(e)||(e=null==e?[]:[e]),r=i?n:r,lc(r)||(r=null==r?[]:[r]),ho(t,e,r))}var yu=la((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function bu(t,e,n){var r=lc(t)?An:Vn,i=arguments.length<3;return r(t,Wa(e,4),n,i,wi)}function xu(t,e,n){var r=lc(t)?Dn:Vn,i=arguments.length<3;return r(t,Wa(e,4),n,i,Si)}function _u(t,e){var n=lc(t)?Sn:Ti;return n(t,ju(Wa(e,3)))}function wu(t){var e=lc(t)?oi:wo;return e(t)}function Su(t,e,r){e=(r?ss(t,e,r):e===n)?1:Yc(e);var i=lc(t)?ai:So;return i(t,e)}function Mu(t){var e=lc(t)?si:To;return e(t)}function Eu(t){if(null==t)return 0;if(cc(t))return Fc(t)?fr(t):t.length;var e=Ja(t);return e==J||e==it?t.size:no(t).length}function Cu(t,e,r){var i=lc(t)?Pn:Do;return r&&ss(t,e,r)&&(e=n),i(t,Wa(e,3))}var Tu=_o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ss(t,e[0],e[1])?e=[]:n>2&&ss(e[0],e[1],e[2])&&(e=[e[0]]),ho(t,Ai(e,1),[])})),Au=Re||function(){return an.Date.now()};function Du(t,e){if("function"!=typeof e)throw new oe(a);return t=Yc(t),function(){if(--t<1)return e.apply(this,arguments)}}function Pu(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Ra(t,M,n,n,n,n,e)}function Ru(t,e){var r;if("function"!=typeof e)throw new oe(a);return t=Yc(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var Lu=_o((function(t,e,n){var r=v;if(n.length){var i=ur(n,Ha(Lu));r|=w}return Ra(t,r,e,n,i)})),Ou=_o((function(t,e,n){var r=v|y;if(n.length){var i=ur(n,Ha(Ou));r|=w}return Ra(e,r,t,n,i)}));function ku(t,e,r){e=r?n:e;var i=Ra(t,x,n,n,n,n,n,e);return i.placeholder=ku.placeholder,i}function Iu(t,e,r){e=r?n:e;var i=Ra(t,_,n,n,n,n,n,e);return i.placeholder=Iu.placeholder,i}function Nu(t,e,r){var i,o,s,l,u,c,h=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new oe(a);function m(e){var r=i,a=o;return i=o=n,h=e,l=t.apply(a,r),l}function g(t){return h=t,u=Es(b,e),d?m(t):l}function v(t){var n=t-c,r=t-h,i=e-n;return p?He(i,s-r):i}function y(t){var r=t-c,i=t-h;return c===n||r>=e||r<0||p&&i>=s}function b(){var t=Au();if(y(t))return x(t);u=Es(b,v(t))}function x(t){return u=n,f&&i?m(t):(i=o=n,l)}function _(){u!==n&&Xo(u),h=0,i=c=o=u=n}function w(){return u===n?l:x(Au())}function S(){var t=Au(),r=y(t);if(i=arguments,o=this,c=t,r){if(u===n)return g(c);if(p)return Xo(u),u=Es(b,e),m(c)}return u===n&&(u=Es(b,e)),l}return e=Kc(e)||0,Mc(r)&&(d=!!r.leading,p="maxWait"in r,s=p?Ue(Kc(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f),S.cancel=_,S.flush=w,S}var Bu=_o((function(t,e){return xi(t,1,e)})),Fu=_o((function(t,e,n){return xi(t,Kc(e)||0,n)}));function zu(t){return Ra(t,C)}function Uu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Uu.Cache||Hr),n}function ju(t){if("function"!=typeof t)throw new oe(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Vu(t){return Ru(2,t)}Uu.Cache=Hr;var Hu=Go((function(t,e){e=1==e.length&&lc(e[0])?Cn(e[0],Yn(Wa())):Cn(Ai(e,1),Yn(Wa()));var n=e.length;return _o((function(r){var i=-1,o=He(r.length,n);while(++i<o)r[i]=e[i].call(this,r[i]);return yn(t,this,r)}))})),Wu=_o((function(t,e){var r=ur(e,Ha(Wu));return Ra(t,w,n,e,r)})),Gu=_o((function(t,e){var r=ur(e,Ha(Gu));return Ra(t,S,n,e,r)})),qu=Fa((function(t,e){return Ra(t,E,n,n,n,e)}));function Xu(t,e){if("function"!=typeof t)throw new oe(a);return e=e===n?e:Yc(e),_o(t,e)}function Yu(t,e){if("function"!=typeof t)throw new oe(a);return e=null==e?0:Ue(Yc(e),0),_o((function(n){var r=n[e],i=qo(n,0,e);return r&&Tn(i,r),yn(t,this,i)}))}function Zu(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oe(a);return Mc(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Nu(t,e,{leading:r,maxWait:e,trailing:i})}function Ku(t){return Pu(t,1)}function Ju(t,e){return Wu(Ho(e),t)}function Qu(){if(!arguments.length)return[];var t=arguments[0];return lc(t)?t:[t]}function $u(t){return vi(t,p)}function tc(t,e){return e="function"==typeof e?e:n,vi(t,p,e)}function ec(t){return vi(t,h|p)}function nc(t,e){return e="function"==typeof e?e:n,vi(t,h|p,e)}function rc(t,e){return null==e||bi(t,e,wh(e))}function ic(t,e){return t===e||t!==t&&e!==e}var oc=Ca(Bi),ac=Ca((function(t,e){return t>=e})),sc=Wi(function(){return arguments}())?Wi:function(t){return Ec(t)&&he.call(t,"callee")&&!Me.call(t,"callee")},lc=g.isArray,uc=dn?Yn(dn):Gi;function cc(t){return null!=t&&Sc(t.length)&&!_c(t)}function hc(t){return Ec(t)&&cc(t)}function dc(t){return!0===t||!1===t||Ec(t)&&Ni(t)==G}var pc=Ne||Yd,fc=pn?Yn(pn):qi;function mc(t){return Ec(t)&&1===t.nodeType&&!kc(t)}function gc(t){if(null==t)return!0;if(cc(t)&&(lc(t)||"string"==typeof t||"function"==typeof t.splice||pc(t)||Uc(t)||sc(t)))return!t.length;var e=Ja(t);if(e==J||e==it)return!t.size;if(ps(t))return!no(t).length;for(var n in t)if(he.call(t,n))return!1;return!0}function vc(t,e){return Xi(t,e)}function yc(t,e,r){r="function"==typeof r?r:n;var i=r?r(t,e):n;return i===n?Xi(t,e,n,r):!!i}function bc(t){if(!Ec(t))return!1;var e=Ni(t);return e==Y||e==X||"string"==typeof t.message&&"string"==typeof t.name&&!kc(t)}function xc(t){return"number"==typeof t&&Be(t)}function _c(t){if(!Mc(t))return!1;var e=Ni(t);return e==Z||e==K||e==W||e==nt}function wc(t){return"number"==typeof t&&t==Yc(t)}function Sc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=I}function Mc(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ec(t){return null!=t&&"object"==typeof t}var Cc=fn?Yn(fn):Zi;function Tc(t,e){return t===e||Ki(t,e,qa(e))}function Ac(t,e,r){return r="function"==typeof r?r:n,Ki(t,e,qa(e),r)}function Dc(t){return Oc(t)&&t!=+t}function Pc(t){if(ds(t))throw new jt(o);return Ji(t)}function Rc(t){return null===t}function Lc(t){return null==t}function Oc(t){return"number"==typeof t||Ec(t)&&Ni(t)==Q}function kc(t){if(!Ec(t)||Ni(t)!=tt)return!1;var e=we(t);if(null===e)return!0;var n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==me}var Ic=mn?Yn(mn):Qi;function Nc(t){return wc(t)&&t>=-I&&t<=I}var Bc=gn?Yn(gn):$i;function Fc(t){return"string"==typeof t||!lc(t)&&Ec(t)&&Ni(t)==ot}function zc(t){return"symbol"==typeof t||Ec(t)&&Ni(t)==at}var Uc=vn?Yn(vn):to;function jc(t){return t===n}function Vc(t){return Ec(t)&&Ja(t)==lt}function Hc(t){return Ec(t)&&Ni(t)==ut}var Wc=Ca(io),Gc=Ca((function(t,e){return t<=e}));function qc(t){if(!t)return[];if(cc(t))return Fc(t)?mr(t):ia(t);if(Te&&t[Te])return ar(t[Te]());var e=Ja(t),n=e==J?sr:e==it?cr:jh;return n(t)}function Xc(t){if(!t)return 0===t?t:0;if(t=Kc(t),t===k||t===-k){var e=t<0?-1:1;return e*N}return t===t?t:0}function Yc(t){var e=Xc(t),n=e%1;return e===e?n?e-n:e:0}function Zc(t){return t?gi(Yc(t),0,F):0}function Kc(t){if("number"==typeof t)return t;if(zc(t))return B;if(Mc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Mc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Xn(t);var n=Xt.test(t);return n||Zt.test(t)?nn(t.slice(2),n?2:8):qt.test(t)?B:+t}function Jc(t){return oa(t,Sh(t))}function Qc(t){return t?gi(Yc(t),-I,I):0===t?t:0}function $c(t){return null==t?"":ko(t)}var th=ua((function(t,e){if(ps(e)||cc(e))oa(e,wh(e),t);else for(var n in e)he.call(e,n)&&ui(t,n,e[n])})),eh=ua((function(t,e){oa(e,Sh(e),t)})),nh=ua((function(t,e,n,r){oa(e,Sh(e),t,r)})),rh=ua((function(t,e,n,r){oa(e,wh(e),t,r)})),ih=Fa(mi);function oh(t,e){var n=Mr(t);return null==e?n:di(n,e)}var ah=_o((function(t,e){t=ne(t);var r=-1,i=e.length,o=i>2?e[2]:n;o&&ss(e[0],e[1],o)&&(i=1);while(++r<i){var a=e[r],s=Sh(a),l=-1,u=s.length;while(++l<u){var c=s[l],h=t[c];(h===n||ic(h,le[c])&&!he.call(t,c))&&(t[c]=a[c])}}return t})),sh=_o((function(t){return t.push(n,Oa),yn(Th,n,t)}));function lh(t,e){return kn(t,Wa(e,3),Ri)}function uh(t,e){return kn(t,Wa(e,3),Li)}function ch(t,e){return null==t?t:Di(t,Wa(e,3),Sh)}function hh(t,e){return null==t?t:Pi(t,Wa(e,3),Sh)}function dh(t,e){return t&&Ri(t,Wa(e,3))}function ph(t,e){return t&&Li(t,Wa(e,3))}function fh(t){return null==t?[]:Oi(t,wh(t))}function mh(t){return null==t?[]:Oi(t,Sh(t))}function gh(t,e,r){var i=null==t?n:ki(t,e);return i===n?r:i}function vh(t,e){return null!=t&&ts(t,e,Fi)}function yh(t,e){return null!=t&&ts(t,e,zi)}var bh=xa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),t[e]=n}),Cd(Pd)),xh=xa((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=fe.call(e)),he.call(t,e)?t[e].push(n):t[e]=[n]}),Wa),_h=_o(Hi);function wh(t){return cc(t)?ii(t):no(t)}function Sh(t){return cc(t)?ii(t,!0):ro(t)}function Mh(t,e){var n={};return e=Wa(e,3),Ri(t,(function(t,r,i){fi(n,e(t,r,i),t)})),n}function Eh(t,e){var n={};return e=Wa(e,3),Ri(t,(function(t,r,i){fi(n,r,e(t,r,i))})),n}var Ch=ua((function(t,e,n){lo(t,e,n)})),Th=ua((function(t,e,n,r){lo(t,e,n,r)})),Ah=Fa((function(t,e){var n={};if(null==t)return n;var r=!1;e=Cn(e,(function(e){return e=Wo(e,t),r||(r=e.length>1),e})),oa(t,Ua(t),n),r&&(n=vi(n,h|d|p,ka));var i=e.length;while(i--)No(n,e[i]);return n}));function Dh(t,e){return Rh(t,ju(Wa(e)))}var Ph=Fa((function(t,e){return null==t?{}:po(t,e)}));function Rh(t,e){if(null==t)return{};var n=Cn(Ua(t),(function(t){return[t]}));return e=Wa(e),fo(t,n,(function(t,n){return e(t,n[0])}))}function Lh(t,e,r){e=Wo(e,t);var i=-1,o=e.length;o||(o=1,t=n);while(++i<o){var a=null==t?n:t[Rs(e[i])];a===n&&(i=o,a=r),t=_c(a)?a.call(t):a}return t}function Oh(t,e,n){return null==t?t:Mo(t,e,n)}function kh(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:Mo(t,e,r,i)}var Ih=Pa(wh),Nh=Pa(Sh);function Bh(t,e,n){var r=lc(t),i=r||pc(t)||Uc(t);if(e=Wa(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Mc(t)&&_c(o)?Mr(we(t)):{}}return(i?xn:Ri)(t,(function(t,r,i){return e(n,t,r,i)})),n}function Fh(t,e){return null==t||No(t,e)}function zh(t,e,n){return null==t?t:Bo(t,e,Ho(n))}function Uh(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:Bo(t,e,Ho(r),i)}function jh(t){return null==t?[]:Zn(t,wh(t))}function Vh(t){return null==t?[]:Zn(t,Sh(t))}function Hh(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=Kc(r),r=r===r?r:0),e!==n&&(e=Kc(e),e=e===e?e:0),gi(Kc(t),e,r)}function Wh(t,e,r){return e=Xc(e),r===n?(r=e,e=0):r=Xc(r),t=Kc(t),Ui(t,e,r)}function Gh(t,e,r){if(r&&"boolean"!=typeof r&&ss(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Xc(t),e===n?(e=t,t=0):e=Xc(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var o=qe();return He(t+o*(e-t+en("1e-"+((o+"").length-1))),e)}return yo(t,e)}var qh=fa((function(t,e,n){return e=e.toLowerCase(),t+(n?Xh(e):e)}));function Xh(t){return xd($c(t).toLowerCase())}function Yh(t){return t=$c(t),t&&t.replace(Jt,tr).replace(Ve,"")}function Zh(t,e,r){t=$c(t),e=ko(e);var i=t.length;r=r===n?i:gi(Yc(r),0,i);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function Kh(t){return t=$c(t),t&&Tt.test(t)?t.replace(Et,er):t}function Jh(t){return t=$c(t),t&&It.test(t)?t.replace(kt,"\\$&"):t}var Qh=fa((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),$h=fa((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),td=pa("toLowerCase");function ed(t,e,n){t=$c(t),e=Yc(e);var r=e?fr(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Sa(ke(i),n)+t+Sa(Oe(i),n)}function nd(t,e,n){t=$c(t),e=Yc(e);var r=e?fr(t):0;return e&&r<e?t+Sa(e-r,n):t}function rd(t,e,n){t=$c(t),e=Yc(e);var r=e?fr(t):0;return e&&r<e?Sa(e-r,n)+t:t}function id(t,e,n){return n||null==e?e=0:e&&(e=+e),Ge($c(t).replace(Nt,""),e||0)}function od(t,e,r){return e=(r?ss(t,e,r):e===n)?1:Yc(e),xo($c(t),e)}function ad(){var t=arguments,e=$c(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var sd=fa((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function ld(t,e,r){return r&&"number"!=typeof r&&ss(t,e,r)&&(e=r=n),r=r===n?F:r>>>0,r?(t=$c(t),t&&("string"==typeof e||null!=e&&!Ic(e))&&(e=ko(e),!e&&ir(t))?qo(mr(t),0,r):t.split(e,r)):[]}var ud=fa((function(t,e,n){return t+(n?" ":"")+xd(e)}));function cd(t,e,n){return t=$c(t),n=null==n?0:gi(Yc(n),0,t.length),e=ko(e),t.slice(n,n+e.length)==e}function hd(t,e,r){var i=Sr.templateSettings;r&&ss(t,e,r)&&(e=n),t=$c(t),e=nh({},e,i,La);var o,a,l=nh({},e.imports,i.imports,La),u=wh(l),c=Zn(l,u),h=0,d=e.interpolate||Qt,p="__p += '",f=re((e.escape||Qt).source+"|"+d.source+"|"+(d===Pt?Wt:Qt).source+"|"+(e.evaluate||Qt).source+"|$","g"),m="//# sourceURL="+(he.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ye+"]")+"\n";t.replace(f,(function(e,n,r,i,s,l){return r||(r=i),p+=t.slice(h,l).replace($t,nr),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),p+="';\n";var g=he.call(e,"variable")&&e.variable;if(g){if(Vt.test(g))throw new jt(s)}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(_t,""):p).replace(wt,"$1").replace(St,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=wd((function(){return te(u,m+"return "+p).apply(n,c)}));if(v.source=p,bc(v))throw v;return v}function dd(t){return $c(t).toLowerCase()}function pd(t){return $c(t).toUpperCase()}function fd(t,e,r){if(t=$c(t),t&&(r||e===n))return Xn(t);if(!t||!(e=ko(e)))return t;var i=mr(t),o=mr(e),a=Jn(i,o),s=Qn(i,o)+1;return qo(i,a,s).join("")}function md(t,e,r){if(t=$c(t),t&&(r||e===n))return t.slice(0,gr(t)+1);if(!t||!(e=ko(e)))return t;var i=mr(t),o=Qn(i,mr(e))+1;return qo(i,0,o).join("")}function gd(t,e,r){if(t=$c(t),t&&(r||e===n))return t.replace(Nt,"");if(!t||!(e=ko(e)))return t;var i=mr(t),o=Jn(i,mr(e));return qo(i,o).join("")}function vd(t,e){var r=T,i=A;if(Mc(e)){var o="separator"in e?e.separator:o;r="length"in e?Yc(e.length):r,i="omission"in e?ko(e.omission):i}t=$c(t);var a=t.length;if(ir(t)){var s=mr(t);a=s.length}if(r>=a)return t;var l=r-fr(i);if(l<1)return i;var u=s?qo(s,0,l).join(""):t.slice(0,l);if(o===n)return u+i;if(s&&(l+=u.length-l),Ic(o)){if(t.slice(l).search(o)){var c,h=u;o.global||(o=re(o.source,$c(Gt.exec(o))+"g")),o.lastIndex=0;while(c=o.exec(h))var d=c.index;u=u.slice(0,d===n?l:d)}}else if(t.indexOf(ko(o),l)!=l){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+i}function yd(t){return t=$c(t),t&&Ct.test(t)?t.replace(Mt,vr):t}var bd=fa((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),xd=pa("toUpperCase");function _d(t,e,r){return t=$c(t),e=r?n:e,e===n?or(t)?xr(t):On(t):t.match(e)||[]}var wd=_o((function(t,e){try{return yn(t,n,e)}catch(r){return bc(r)?r:new jt(r)}})),Sd=Fa((function(t,e){return xn(e,(function(e){e=Rs(e),fi(t,e,Lu(t[e],t))})),t}));function Md(t){var e=null==t?0:t.length,n=Wa();return t=e?Cn(t,(function(t){if("function"!=typeof t[1])throw new oe(a);return[n(t[0]),t[1]]})):[],_o((function(n){var r=-1;while(++r<e){var i=t[r];if(yn(i[0],this,n))return yn(i[1],this,n)}}))}function Ed(t){return yi(vi(t,h))}function Cd(t){return function(){return t}}function Td(t,e){return null==t||t!==t?e:t}var Ad=ya(),Dd=ya(!0);function Pd(t){return t}function Rd(t){return eo("function"==typeof t?t:vi(t,h))}function Ld(t){return ao(vi(t,h))}function Od(t,e){return so(t,vi(e,h))}var kd=_o((function(t,e){return function(n){return Hi(n,t,e)}})),Id=_o((function(t,e){return function(n){return Hi(t,n,e)}}));function Nd(t,e,n){var r=wh(e),i=Oi(e,r);null!=n||Mc(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Oi(e,wh(e)));var o=!(Mc(n)&&"chain"in n)||!!n.chain,a=_c(t);return xn(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ia(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Tn([this.value()],arguments))})})),t}function Bd(){return an._===this&&(an._=ge),this}function Fd(){}function zd(t){return t=Yc(t),_o((function(e){return co(e,t)}))}var Ud=wa(Cn),jd=wa(wn),Vd=wa(Pn);function Hd(t){return ls(t)?Un(Rs(t)):mo(t)}function Wd(t){return function(e){return null==t?n:ki(t,e)}}var Gd=Ea(),qd=Ea(!0);function Xd(){return[]}function Yd(){return!1}function Zd(){return{}}function Kd(){return""}function Jd(){return!0}function Qd(t,e){if(t=Yc(t),t<1||t>I)return[];var n=F,r=He(t,F);e=Wa(e),t-=F;var i=Gn(r,e);while(++n<t)e(n);return i}function $d(t){return lc(t)?Cn(t,Rs):zc(t)?[t]:ia(Ps($c(t)))}function tp(t){var e=++de;return $c(t)+e}var ep=_a((function(t,e){return t+e}),0),np=Aa("ceil"),rp=_a((function(t,e){return t/e}),1),ip=Aa("floor");function op(t){return t&&t.length?Ei(t,Pd,Bi):n}function ap(t,e){return t&&t.length?Ei(t,Wa(e,2),Bi):n}function sp(t){return zn(t,Pd)}function lp(t,e){return zn(t,Wa(e,2))}function up(t){return t&&t.length?Ei(t,Pd,io):n}function cp(t,e){return t&&t.length?Ei(t,Wa(e,2),io):n}var hp=_a((function(t,e){return t*e}),1),dp=Aa("round"),pp=_a((function(t,e){return t-e}),0);function fp(t){return t&&t.length?Wn(t,Pd):0}function mp(t,e){return t&&t.length?Wn(t,Wa(e,2)):0}return Sr.after=Du,Sr.ary=Pu,Sr.assign=th,Sr.assignIn=eh,Sr.assignInWith=nh,Sr.assignWith=rh,Sr.at=ih,Sr.before=Ru,Sr.bind=Lu,Sr.bindAll=Sd,Sr.bindKey=Ou,Sr.castArray=Qu,Sr.chain=Gl,Sr.chunk=Is,Sr.compact=Ns,Sr.concat=Bs,Sr.cond=Md,Sr.conforms=Ed,Sr.constant=Cd,Sr.countBy=nu,Sr.create=oh,Sr.curry=ku,Sr.curryRight=Iu,Sr.debounce=Nu,Sr.defaults=ah,Sr.defaultsDeep=sh,Sr.defer=Bu,Sr.delay=Fu,Sr.difference=Fs,Sr.differenceBy=zs,Sr.differenceWith=Us,Sr.drop=js,Sr.dropRight=Vs,Sr.dropRightWhile=Hs,Sr.dropWhile=Ws,Sr.fill=Gs,Sr.filter=iu,Sr.flatMap=su,Sr.flatMapDeep=lu,Sr.flatMapDepth=uu,Sr.flatten=Ys,Sr.flattenDeep=Zs,Sr.flattenDepth=Ks,Sr.flip=zu,Sr.flow=Ad,Sr.flowRight=Dd,Sr.fromPairs=Js,Sr.functions=fh,Sr.functionsIn=mh,Sr.groupBy=du,Sr.initial=tl,Sr.intersection=el,Sr.intersectionBy=nl,Sr.intersectionWith=rl,Sr.invert=bh,Sr.invertBy=xh,Sr.invokeMap=fu,Sr.iteratee=Rd,Sr.keyBy=mu,Sr.keys=wh,Sr.keysIn=Sh,Sr.map=gu,Sr.mapKeys=Mh,Sr.mapValues=Eh,Sr.matches=Ld,Sr.matchesProperty=Od,Sr.memoize=Uu,Sr.merge=Ch,Sr.mergeWith=Th,Sr.method=kd,Sr.methodOf=Id,Sr.mixin=Nd,Sr.negate=ju,Sr.nthArg=zd,Sr.omit=Ah,Sr.omitBy=Dh,Sr.once=Vu,Sr.orderBy=vu,Sr.over=Ud,Sr.overArgs=Hu,Sr.overEvery=jd,Sr.overSome=Vd,Sr.partial=Wu,Sr.partialRight=Gu,Sr.partition=yu,Sr.pick=Ph,Sr.pickBy=Rh,Sr.property=Hd,Sr.propertyOf=Wd,Sr.pull=ll,Sr.pullAll=ul,Sr.pullAllBy=cl,Sr.pullAllWith=hl,Sr.pullAt=dl,Sr.range=Gd,Sr.rangeRight=qd,Sr.rearg=qu,Sr.reject=_u,Sr.remove=pl,Sr.rest=Xu,Sr.reverse=fl,Sr.sampleSize=Su,Sr.set=Oh,Sr.setWith=kh,Sr.shuffle=Mu,Sr.slice=ml,Sr.sortBy=Tu,Sr.sortedUniq=wl,Sr.sortedUniqBy=Sl,Sr.split=ld,Sr.spread=Yu,Sr.tail=Ml,Sr.take=El,Sr.takeRight=Cl,Sr.takeRightWhile=Tl,Sr.takeWhile=Al,Sr.tap=ql,Sr.throttle=Zu,Sr.thru=Xl,Sr.toArray=qc,Sr.toPairs=Ih,Sr.toPairsIn=Nh,Sr.toPath=$d,Sr.toPlainObject=Jc,Sr.transform=Bh,Sr.unary=Ku,Sr.union=Dl,Sr.unionBy=Pl,Sr.unionWith=Rl,Sr.uniq=Ll,Sr.uniqBy=Ol,Sr.uniqWith=kl,Sr.unset=Fh,Sr.unzip=Il,Sr.unzipWith=Nl,Sr.update=zh,Sr.updateWith=Uh,Sr.values=jh,Sr.valuesIn=Vh,Sr.without=Bl,Sr.words=_d,Sr.wrap=Ju,Sr.xor=Fl,Sr.xorBy=zl,Sr.xorWith=Ul,Sr.zip=jl,Sr.zipObject=Vl,Sr.zipObjectDeep=Hl,Sr.zipWith=Wl,Sr.entries=Ih,Sr.entriesIn=Nh,Sr.extend=eh,Sr.extendWith=nh,Nd(Sr,Sr),Sr.add=ep,Sr.attempt=wd,Sr.camelCase=qh,Sr.capitalize=Xh,Sr.ceil=np,Sr.clamp=Hh,Sr.clone=$u,Sr.cloneDeep=ec,Sr.cloneDeepWith=nc,Sr.cloneWith=tc,Sr.conformsTo=rc,Sr.deburr=Yh,Sr.defaultTo=Td,Sr.divide=rp,Sr.endsWith=Zh,Sr.eq=ic,Sr.escape=Kh,Sr.escapeRegExp=Jh,Sr.every=ru,Sr.find=ou,Sr.findIndex=qs,Sr.findKey=lh,Sr.findLast=au,Sr.findLastIndex=Xs,Sr.findLastKey=uh,Sr.floor=ip,Sr.forEach=cu,Sr.forEachRight=hu,Sr.forIn=ch,Sr.forInRight=hh,Sr.forOwn=dh,Sr.forOwnRight=ph,Sr.get=gh,Sr.gt=oc,Sr.gte=ac,Sr.has=vh,Sr.hasIn=yh,Sr.head=Qs,Sr.identity=Pd,Sr.includes=pu,Sr.indexOf=$s,Sr.inRange=Wh,Sr.invoke=_h,Sr.isArguments=sc,Sr.isArray=lc,Sr.isArrayBuffer=uc,Sr.isArrayLike=cc,Sr.isArrayLikeObject=hc,Sr.isBoolean=dc,Sr.isBuffer=pc,Sr.isDate=fc,Sr.isElement=mc,Sr.isEmpty=gc,Sr.isEqual=vc,Sr.isEqualWith=yc,Sr.isError=bc,Sr.isFinite=xc,Sr.isFunction=_c,Sr.isInteger=wc,Sr.isLength=Sc,Sr.isMap=Cc,Sr.isMatch=Tc,Sr.isMatchWith=Ac,Sr.isNaN=Dc,Sr.isNative=Pc,Sr.isNil=Lc,Sr.isNull=Rc,Sr.isNumber=Oc,Sr.isObject=Mc,Sr.isObjectLike=Ec,Sr.isPlainObject=kc,Sr.isRegExp=Ic,Sr.isSafeInteger=Nc,Sr.isSet=Bc,Sr.isString=Fc,Sr.isSymbol=zc,Sr.isTypedArray=Uc,Sr.isUndefined=jc,Sr.isWeakMap=Vc,Sr.isWeakSet=Hc,Sr.join=il,Sr.kebabCase=Qh,Sr.last=ol,Sr.lastIndexOf=al,Sr.lowerCase=$h,Sr.lowerFirst=td,Sr.lt=Wc,Sr.lte=Gc,Sr.max=op,Sr.maxBy=ap,Sr.mean=sp,Sr.meanBy=lp,Sr.min=up,Sr.minBy=cp,Sr.stubArray=Xd,Sr.stubFalse=Yd,Sr.stubObject=Zd,Sr.stubString=Kd,Sr.stubTrue=Jd,Sr.multiply=hp,Sr.nth=sl,Sr.noConflict=Bd,Sr.noop=Fd,Sr.now=Au,Sr.pad=ed,Sr.padEnd=nd,Sr.padStart=rd,Sr.parseInt=id,Sr.random=Gh,Sr.reduce=bu,Sr.reduceRight=xu,Sr.repeat=od,Sr.replace=ad,Sr.result=Lh,Sr.round=dp,Sr.runInContext=t,Sr.sample=wu,Sr.size=Eu,Sr.snakeCase=sd,Sr.some=Cu,Sr.sortedIndex=gl,Sr.sortedIndexBy=vl,Sr.sortedIndexOf=yl,Sr.sortedLastIndex=bl,Sr.sortedLastIndexBy=xl,Sr.sortedLastIndexOf=_l,Sr.startCase=ud,Sr.startsWith=cd,Sr.subtract=pp,Sr.sum=fp,Sr.sumBy=mp,Sr.template=hd,Sr.times=Qd,Sr.toFinite=Xc,Sr.toInteger=Yc,Sr.toLength=Zc,Sr.toLower=dd,Sr.toNumber=Kc,Sr.toSafeInteger=Qc,Sr.toString=$c,Sr.toUpper=pd,Sr.trim=fd,Sr.trimEnd=md,Sr.trimStart=gd,Sr.truncate=vd,Sr.unescape=yd,Sr.uniqueId=tp,Sr.upperCase=bd,Sr.upperFirst=xd,Sr.each=cu,Sr.eachRight=hu,Sr.first=Qs,Nd(Sr,function(){var t={};return Ri(Sr,(function(e,n){he.call(Sr.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Sr.VERSION=r,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Sr[t].placeholder=Sr})),xn(["drop","take"],(function(t,e){Tr.prototype[t]=function(r){r=r===n?1:Ue(Yc(r),0);var i=this.__filtered__&&!e?new Tr(this):this.clone();return i.__filtered__?i.__takeCount__=He(r,i.__takeCount__):i.__views__.push({size:He(r,F),type:t+(i.__dir__<0?"Right":"")}),i},Tr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),xn(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==R||n==O;Tr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Wa(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),xn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Tr.prototype[t]=function(){return this[n](1).value()[0]}})),xn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Tr.prototype[t]=function(){return this.__filtered__?new Tr(this):this[n](1)}})),Tr.prototype.compact=function(){return this.filter(Pd)},Tr.prototype.find=function(t){return this.filter(t).head()},Tr.prototype.findLast=function(t){return this.reverse().find(t)},Tr.prototype.invokeMap=_o((function(t,e){return"function"==typeof t?new Tr(this):this.map((function(n){return Hi(n,t,e)}))})),Tr.prototype.reject=function(t){return this.filter(ju(Wa(t)))},Tr.prototype.slice=function(t,e){t=Yc(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Tr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(e=Yc(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},Tr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Tr.prototype.toArray=function(){return this.take(F)},Ri(Tr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Sr[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Sr.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Tr,u=s[0],c=l||lc(e),h=function(t){var e=o.apply(Sr,Tn([t],s));return i&&d?e[0]:e};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,p=!!this.__actions__.length,f=a&&!d,m=l&&!p;if(!a&&c){e=m?e:new Tr(this);var g=t.apply(e,s);return g.__actions__.push({func:Xl,args:[h],thisArg:n}),new Cr(g,d)}return f&&m?t.apply(this,s):(g=this.thru(h),f?i?g.value()[0]:g.value():g)})})),xn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Sr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(lc(i)?i:[],t)}return this[n]((function(n){return e.apply(lc(n)?n:[],t)}))}})),Ri(Tr.prototype,(function(t,e){var n=Sr[e];if(n){var r=n.name+"";he.call(cn,r)||(cn[r]=[]),cn[r].push({name:e,func:n})}})),cn[ba(n,y).name]=[{name:"wrapper",func:n}],Tr.prototype.clone=Ar,Tr.prototype.reverse=Dr,Tr.prototype.value=Pr,Sr.prototype.at=Yl,Sr.prototype.chain=Zl,Sr.prototype.commit=Kl,Sr.prototype.next=Jl,Sr.prototype.plant=$l,Sr.prototype.reverse=tu,Sr.prototype.toJSON=Sr.prototype.valueOf=Sr.prototype.value=eu,Sr.prototype.first=Sr.prototype.head,Te&&(Sr.prototype[Te]=Ql),Sr},wr=_r();ln?((ln.exports=wr)._=wr,sn._=wr):an._=wr}).call(g)})(y,y.exports);const b=(t,e,n)=>{if(!t.has(e)){const r=n();return t.set(e,r),r}return t.get(e)},x=t=>{throw new Error("unexpected value: "+t)},_=(t,e,n=new WeakSet)=>{if(Array.isArray(t)){if(n.has(t))return;n.add(t);for(let r=0;r<t.length;++r){const i=t[r];e(r,i,t),_(i,e,n)}}else if(t&&"object"===typeof t){if(n.has(t))return;n.add(t);for(const[r,i]of Object.entries(t))e(r,i,t),_(i,e,n)}},w=(t,e)=>{const n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)},S=(t,e=-1)=>t[t.length+e],M=(t,e,n)=>{let r,i,o,a=!1,s="trailingPromise"===n?new Promise((t=>o=t)):void 0;return(...l)=>{if(i=l,a)return null!==s&&void 0!==s?s:r;a=!0,"leading"!==n&&"both"!==n||(r=t(...i));const u=()=>{"trailing"!==n&&"both"!==n&&"trailingPromise"!==n||(r=t(...i),null===o||void 0===o||o(r),s="trailingPromise"===n?new Promise((t=>o=t)):void 0),a=!1};return e>0?setTimeout(u,e):queueMicrotask(u),null!==s&&void 0!==s?s:r}},E=(t,e)=>{if(0===e){let e=!0;return queueMicrotask((()=>e&&t())),()=>e=!1}const n=setTimeout(t,e);return()=>clearTimeout(n)},C=(t,e,n)=>{let r,i,o,a,s="trailingPromise"===n?new Promise((t=>a=t)):void 0;return(...l)=>(o=l,r?r():"leading"!==n&&"both"!==n||(i=t(...o)),r=E((()=>{"trailing"!==n&&"both"!==n&&"trailingPromise"!==n||(i=t(...o),null===a||void 0===a||a(i),s="trailingPromise"===n?new Promise((t=>a=t)):void 0),r=void 0}),e),null!==s&&void 0!==s?s:i)},T=t=>t,A=(t,e)=>{let n,r=!1,i=null===e||void 0===e?void 0:e();return(...o)=>{if(e){const t=e();i!==t&&(r=!1),i=t}return r?n:(r=!0,n=t(...o))}},D=(t,e)=>{for(const n of e)for(const e of Object.getOwnPropertyNames(n.prototype))!(e in t.prototype)&&Object.defineProperty(t.prototype,e,Object.getOwnPropertyDescriptor(n.prototype,e)||Object.create(null))};class P{constructor(t){this._cb=t,this.done=void 0,this._value=void 0,this._callbacks=void 0,this._watched=void 0}then(t){var e;return this.done?(t(this._value),new L):((null!==(e=this._callbacks)&&void 0!==e?e:this._callbacks=new Set).add(t),new L((()=>this._callbacks.delete(t))))}watch(t){var e;return this.done?t._resolve(this._value):((null!==(e=this._watched)&&void 0!==e?e:this._watched=new Set).add(t),t.then((()=>this._watched.delete(t))),t)}_resolve(t){var e;if(this.done)return this;if(this.done=!0,this._value=t,null===(e=this._cb)||void 0===e||e.call(this,t),this._callbacks)for(const n of this._callbacks)n(t);if(this._watched)for(const n of this._watched)n._resolve(t);return this}}class R extends P{constructor(t){super(t)}resolve(t){return this._resolve(t)}}class L extends P{constructor(t){super(t)}cancel(){return this._resolve()}}class O extends P{constructor(t){super(t)}_resolve(){return this.dispose(),this}dispose(){return super._resolve()}}(new L).cancel();class k{constructor(){this.cbsMap=new Map}on(t,e){var n;if(Array.isArray(t)){const n=new L;for(const r of t)n.watch(this.on(r,e));return n}(null===(n=this.states)||void 0===n?void 0:n.has(t))&&e(this.states.get(t));const r=b(this.cbsMap,t,(()=>new Set));return r.add(e),new L((()=>r.delete(e)))}once(t,e){const n=new L;return n.watch(this.on(t,(t=>{n.cancel(),e(t)}))),n}emit(t,e){if(this.cbsMap.has(t))for(const n of this.cbsMap.get(t))n(e)}hasState(t){var e;return!!(null===(e=this.states)||void 0===e?void 0:e.has(t))}setState(t,e){var n;null!==(n=this.states)&&void 0!==n||(this.states=new Map),this.states.has(t)&&this.states.get(t)===e||(this.states.set(t,e),this.emit(t,e))}getState(t){var e;return null===(e=this.states)||void 0===e?void 0:e.get(t)}deleteState(t){var e;null===(e=this.states)||void 0===e||e.delete(t)}clear(){var t;this.cbsMap.clear(),null===(t=this.states)||void 0===t||t.clear()}}class I{constructor(){this.cbs=new Set}on(t){return"state"in this&&t(this.state),this.cbs.add(t),new L((()=>this.cbs.delete(t)))}once(t){const e=new L;return e.watch(this.on((n=>{e.cancel(),t(n)}))),e}emit(t){for(const e of this.cbs)e(t)}setState(t){"state"in this&&this.state===t||(this.state=t,this.emit(t))}getState(){return this.state}}var N=()=>{const t=new I,e=e=>t.emit(e),n=(e,n)=>n?t.once(e):t.on(e),r=e=>t.setState(e),i=()=>t.getState();return[e,n,r,i]};const B=new WeakSet,F=t=>{const[,e,n,r]=N();n(t);const i=t=>{if(t){const n=new L;return n.watch(e((e=>t(e,n)))),n}return r()};return B.add(i),[n,i]},z=(t,e)=>n=>{const r=e();r&&t([...r,n])},U=(t,e)=>n=>{const r=e();r&&t(r.filter((t=>t!==n)))},j=(t,e)=>{const n=e();return n&&"object"===typeof n&&(_(n,((t,e)=>Object.freeze(e))),Object.freeze(n)),()=>t(n)},V=[],H=t=>{var e,n,r;const i=V[V.length-1];return null!==(e=(n=i.fiber)[r=i.count++])&&void 0!==e?e:n[r]=t()},W=t=>{var e,n;const r=V[V.length-1],i=r.count++;return null!==(e=(n=r.fiber)[i])&&void 0!==e||(n[i]=t),[()=>r.fiber[i],t=>r.fiber[i]=t]},G=(t,e,n,r,i,o)=>{V.push({count:0,fiber:n,handle:t});const a=r.map((t=>"function"===typeof t?t():t)),s=!i||a.some(((t,e)=>t!==i[e]));s&&"function"===typeof e&&e();const l=s?o():void 0;return V.pop(),[l,a,s]},q=(t,e)=>{const n=H((()=>{const t=V[V.length-1].handle;return t.watch(new L((()=>{var t;return null===(t=i())||void 0===t?void 0:t()})))}));if(n.done)return n;const r=H((()=>[])),[i,o]=W(void 0),[a,s]=W(void 0),l=i(),u=a();l&&"function"!==typeof l&&console.warn("cleanup is not a function");const[c,h,d]=G(n,l,r,e,u,t);return d&&o("function"===typeof c?c:void 0),s(h),n},X=(t,e)=>{const n=new L((()=>setTimeout((()=>null===i||void 0===i?void 0:i())))),r=[];let i,o;const a=C((()=>{const[a,s,l]=G(n,i,r,e,o,t);l&&(i="function"===typeof a?a:void 0),o=s}),0,"trailing");a();for(const s of e)"function"===typeof s&&n.watch(s(a));return n},Y=t=>{var e,n,r;const i=V[V.length-1];return null!==(e=(n=i.fiber)[r=i.count++])&&void 0!==e?e:n[r]={current:"function"===typeof t?t():t}};class Z{constructor(t){[this.set,this.get]=F(t)}}
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const K="140",J={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Q={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},$=0,tt=1,et=2,nt=1,rt=2,it=3,ot=0,at=1,st=2,lt=1,ut=0,ct=1,ht=2,dt=3,pt=4,ft=5,mt=100,gt=101,vt=102,yt=103,bt=104,xt=200,_t=201,wt=202,St=203,Mt=204,Et=205,Ct=206,Tt=207,At=208,Dt=209,Pt=210,Rt=0,Lt=1,Ot=2,kt=3,It=4,Nt=5,Bt=6,Ft=7,zt=0,Ut=1,jt=2,Vt=0,Ht=1,Wt=2,Gt=3,qt=4,Xt=5,Yt=300,Zt=301,Kt=302,Jt=303,Qt=304,$t=306,te=1e3,ee=1001,ne=1002,re=1003,ie=1004,oe=1005,ae=1006,se=1007,le=1008,ue=1009,ce=1010,he=1011,de=1012,pe=1013,fe=1014,me=1015,ge=1016,ve=1017,ye=1018,be=1020,xe=1021,_e=1022,we=1023,Se=1024,Me=1025,Ee=1026,Ce=1027,Te=1028,Ae=1029,De=1030,Pe=1031,Re=1033,Le=33776,Oe=33777,ke=33778,Ie=33779,Ne=35840,Be=35841,Fe=35842,ze=35843,Ue=36196,je=37492,Ve=37496,He=37808,We=37809,Ge=37810,qe=37811,Xe=37812,Ye=37813,Ze=37814,Ke=37815,Je=37816,Qe=37817,$e=37818,tn=37819,en=37820,nn=37821,rn=36492,on=2200,an=2201,sn=2202,ln=2300,un=2301,cn=2302,hn=2400,dn=2401,pn=2402,fn=2500,mn=2501,gn=0,vn=1,yn=2,bn=3e3,xn=3001,_n=3200,wn=3201,Sn=0,Mn=1,En="srgb",Cn="srgb-linear",Tn=7680,An=519,Dn=35044,Pn=35048,Rn="300 es",Ln=1035;class On{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners,r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,r=e.length;n<r;n++)e[n].call(this,t);t.target=null}}}const kn=[];for(let FI=0;FI<256;FI++)kn[FI]=(FI<16?"0":"")+FI.toString(16);let In=1234567;const Nn=Math.PI/180,Bn=180/Math.PI;function Fn(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=kn[255&t]+kn[t>>8&255]+kn[t>>16&255]+kn[t>>24&255]+"-"+kn[255&e]+kn[e>>8&255]+"-"+kn[e>>16&15|64]+kn[e>>24&255]+"-"+kn[63&n|128]+kn[n>>8&255]+"-"+kn[n>>16&255]+kn[n>>24&255]+kn[255&r]+kn[r>>8&255]+kn[r>>16&255]+kn[r>>24&255];return i.toLowerCase()}function zn(t,e,n){return Math.max(e,Math.min(n,t))}function Un(t,e){return(t%e+e)%e}function jn(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Vn(t,e,n){return t!==e?(n-t)/(e-t):0}function Hn(t,e,n){return(1-n)*t+n*e}function Wn(t,e,n,r){return Hn(t,e,1-Math.exp(-n*r))}function Gn(t,e=1){return e-Math.abs(Un(t,2*e)-e)}function qn(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Xn(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))}function Yn(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Zn(t,e){return t+Math.random()*(e-t)}function Kn(t){return t*(.5-Math.random())}function Jn(t){void 0!==t&&(In=t);let e=In+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}function Qn(t){return t*Nn}function $n(t){return t*Bn}function tr(t){return 0===(t&t-1)&&0!==t}function er(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function nr(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function rr(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),u=o((e+r)/2),c=a((e+r)/2),h=o((e-r)/2),d=a((e-r)/2),p=o((r-e)/2),f=a((r-e)/2);switch(i){case"XYX":t.set(s*c,l*h,l*d,s*u);break;case"YZY":t.set(l*d,s*c,l*h,s*u);break;case"ZXZ":t.set(l*h,l*d,s*c,s*u);break;case"XZX":t.set(s*c,l*f,l*p,s*u);break;case"YXY":t.set(l*p,s*c,l*f,s*u);break;case"ZYZ":t.set(l*f,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ir(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function or(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var ar=Object.freeze({__proto__:null,DEG2RAD:Nn,RAD2DEG:Bn,generateUUID:Fn,clamp:zn,euclideanModulo:Un,mapLinear:jn,inverseLerp:Vn,lerp:Hn,damp:Wn,pingpong:Gn,smoothstep:qn,smootherstep:Xn,randInt:Yn,randFloat:Zn,randFloatSpread:Kn,seededRandom:Jn,degToRad:Qn,radToDeg:$n,isPowerOfTwo:tr,ceilPowerOfTwo:er,floorPowerOfTwo:nr,setQuaternionFromProperEuler:rr,normalize:or,denormalize:ir});class sr{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}sr.prototype.isVector2=!0;class lr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*f+a*v+s*x,i[3]=o*m+a*y+s*_,i[6]=o*g+a*b+s*w,i[1]=l*f+u*v+c*x,i[4]=l*m+u*y+c*_,i[7]=l*g+u*b+c*w,i[2]=h*f+d*v+p*x,i[5]=h*m+d*y+p*_,i[8]=h*g+d*b+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*o*u-e*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=u*o-a*l,h=a*s-u*i,d=l*i-o*s,p=e*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=c*f,t[1]=(r*l-u*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(u*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-l*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-r*l,r*s,-r*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*l,r[6]=e*a+n*u,r[1]=-n*i+e*s,r[4]=-n*o+e*l,r[7]=-n*a+e*u,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function ur(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}function cr(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function hr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function dr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}lr.prototype.isMatrix3=!0;const pr={[En]:{[Cn]:hr},[Cn]:{[En]:dr}},fr={legacyMode:!0,get workingColorSpace(){return Cn},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(pr[e]&&void 0!==pr[e][n]){const r=pr[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gr={r:0,g:0,b:0},vr={h:0,s:0,l:0},yr={h:0,s:0,l:0};function br(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function xr(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class _r{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=En){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,fr.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Cn){return this.r=t,this.g=e,this.b=n,fr.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Cn){if(t=Un(t,1),e=zn(e,0,1),n=zn(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=br(i,r,t+1/3),this.g=br(i,r,t),this.b=br(i,r,t-1/3)}return fr.toWorkingColorSpace(this,r),this}setStyle(t,e=En){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,fr.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,fr.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100;return n(t[4]),this.setHSL(r,i,o,e)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,fr.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,fr.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=En){const n=mr[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=hr(t.r),this.g=hr(t.g),this.b=hr(t.b),this}copyLinearToSRGB(t){return this.r=dr(t.r),this.g=dr(t.g),this.b=dr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=En){return fr.fromWorkingColorSpace(xr(this,gr),t),zn(255*gr.r,0,255)<<16^zn(255*gr.g,0,255)<<8^zn(255*gr.b,0,255)<<0}getHexString(t=En){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Cn){fr.fromWorkingColorSpace(xr(this,gr),e);const n=gr.r,r=gr.g,i=gr.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=u<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4;break}s/=6}return t.h=s,t.s=l,t.l=u,t}getRGB(t,e=Cn){return fr.fromWorkingColorSpace(xr(this,gr),e),t.r=gr.r,t.g=gr.g,t.b=gr.b,t}getStyle(t=En){return fr.fromWorkingColorSpace(xr(this,gr),t),t!==En?`color(${t} ${gr.r} ${gr.g} ${gr.b})`:`rgb(${255*gr.r|0},${255*gr.g|0},${255*gr.b|0})`}offsetHSL(t,e,n){return this.getHSL(vr),vr.h+=t,vr.s+=e,vr.l+=n,this.setHSL(vr.h,vr.s,vr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(vr),t.getHSL(yr);const n=Hn(vr.h,yr.h,e),r=Hn(vr.s,yr.s,e),i=Hn(vr.l,yr.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let wr;_r.NAMES=mr,_r.prototype.isColor=!0,_r.prototype.r=1,_r.prototype.g=1,_r.prototype.b=1;class Sr{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===wr&&(wr=cr("canvas")),wr.width=t.width,wr.height=t.height;const n=wr.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=wr}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=cr("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*hr(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*hr(e[t]/255)):e[t]=hr(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Mr{constructor(t=null){this.uuid=Fn(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Er(r[e].image)):t.push(Er(r[e]))}else t=Er(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Er(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Sr.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Mr.prototype.isSource=!0;let Cr=0;class Tr extends On{constructor(t=Tr.DEFAULT_IMAGE,e=Tr.DEFAULT_MAPPING,n=ee,r=ee,i=ae,o=le,a=we,s=ue,l=1,u=bn){super(),Object.defineProperty(this,"id",{value:Cr++}),this.uuid=Fn(),this.name="",this.source=new Mr(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new sr(0,0),this.repeat=new sr(1,1),this.center=new sr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new lr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Yt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case te:t.x=t.x-Math.floor(t.x);break;case ee:t.x=t.x<0?0:1;break;case ne:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case te:t.y=t.y-Math.floor(t.y);break;case ee:t.y=t.y<0?0:1;break;case ne:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Tr.DEFAULT_IMAGE=null,Tr.DEFAULT_MAPPING=Yt,Tr.prototype.isTexture=!0;class Ar{constructor(t=0,e=0,n=0,r=1){this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(u-h)<o&&Math.abs(c-f)<o&&Math.abs(p-m)<o){if(Math.abs(u+h)<a&&Math.abs(c+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(u+h)/4,b=(c+f)/4,x=(p+m)/4;return t>s&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(c-f)/v,this.z=(h-u)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ar.prototype.isVector4=!0;class Dr extends On{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Ar(0,0,t,e),this.scissorTest=!1,this.viewport=new Ar(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new Tr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ae,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Mr(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Dr.prototype.isWebGLRenderTarget=!0;class Pr extends Tr{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=re,this.minFilter=re,this.wrapR=ee,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Pr.prototype.isDataArrayTexture=!0;class Rr extends Dr{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new Pr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}Rr.prototype.isWebGLArrayRenderTarget=!0;class Lr extends Tr{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=re,this.minFilter=re,this.wrapR=ee,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Lr.prototype.isData3DTexture=!0;class Or extends Dr{constructor(t,e,n){super(t,e),this.depth=n,this.texture=new Lr(null,t,e,n),this.texture.isRenderTargetTexture=!0}}Or.prototype.isWebGL3DRenderTarget=!0;class kr extends Dr{constructor(t,e,n,r={}){super(t,e,r);const i=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=i.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}kr.prototype.isWebGLMultipleRenderTargets=!0;class Ir{constructor(t=0,e=0,n=0,r=1){this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(c!==f||s!==h||l!==d||u!==p){let t=1-a;const e=s*h+l*d+u*p+c*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,l=l*t+d*i,u=u*t+p*i,c=c*t+f*i,t===1-a){const t=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=t,l*=t,u*=t,c*=t}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=a*p+u*c+s*d-l*h,t[e+1]=s*p+u*h+l*c-a*d,t[e+2]=l*p+u*d+a*h-s*c,t[e+3]=u*p-a*c-s*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],l=e[2],u=e[6],c=e[10],h=n+a+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-s)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(u-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+u)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(s+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}Ir.prototype.isQuaternion=!0;class Nr{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Fr.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Fr.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*r-a*n,u=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Br.copy(this).projectOnVector(t),this.sub(Br)}reflect(t){return this.sub(Br.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(zn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Nr.prototype.isVector3=!0;const Br=new Nr,Fr=new Ir;class zr{constructor(t=new Nr(1/0,1/0,1/0),e=new Nr(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],u=t[s+1],c=t[s+2];l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),u=t.getY(s),c=t.getZ(s);l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=jr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&void 0!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)jr.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(jr)}else null===n.boundingBox&&n.computeBoundingBox(),Vr.copy(n.boundingBox),Vr.applyMatrix4(t.matrixWorld),this.union(Vr);const r=t.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,jr),jr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Zr),Kr.subVectors(this.max,Zr),Hr.subVectors(t.a,Zr),Wr.subVectors(t.b,Zr),Gr.subVectors(t.c,Zr),qr.subVectors(Wr,Hr),Xr.subVectors(Gr,Wr),Yr.subVectors(Hr,Gr);let e=[0,-qr.z,qr.y,0,-Xr.z,Xr.y,0,-Yr.z,Yr.y,qr.z,0,-qr.x,Xr.z,0,-Xr.x,Yr.z,0,-Yr.x,-qr.y,qr.x,0,-Xr.y,Xr.x,0,-Yr.y,Yr.x,0];return!!$r(e,Hr,Wr,Gr,Kr)&&(e=[1,0,0,0,1,0,0,0,1],!!$r(e,Hr,Wr,Gr,Kr)&&(Jr.crossVectors(qr,Xr),e=[Jr.x,Jr.y,Jr.z],$r(e,Hr,Wr,Gr,Kr)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=jr.copy(t).clamp(this.min,this.max);return e.sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(jr).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ur[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ur[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ur[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ur[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ur[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ur[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ur[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ur[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ur)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}zr.prototype.isBox3=!0;const Ur=[new Nr,new Nr,new Nr,new Nr,new Nr,new Nr,new Nr,new Nr],jr=new Nr,Vr=new zr,Hr=new Nr,Wr=new Nr,Gr=new Nr,qr=new Nr,Xr=new Nr,Yr=new Nr,Zr=new Nr,Kr=new Nr,Jr=new Nr,Qr=new Nr;function $r(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){Qr.fromArray(t,o);const a=i.x*Math.abs(Qr.x)+i.y*Math.abs(Qr.y)+i.z*Math.abs(Qr.z),s=e.dot(Qr),l=n.dot(Qr),u=r.dot(Qr);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const ti=new zr,ei=new Nr,ni=new Nr,ri=new Nr;class ii{constructor(t=new Nr,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):ti.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){ri.subVectors(t,this.center);const e=ri.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(ri.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?ni.set(0,0,1).multiplyScalar(t.radius):ni.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ei.copy(t.center).add(ni)),this.expandByPoint(ei.copy(t.center).sub(ni)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const oi=new Nr,ai=new Nr,si=new Nr,li=new Nr,ui=new Nr,ci=new Nr,hi=new Nr;class di{constructor(t=new Nr,e=new Nr(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,oi)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=oi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(oi.copy(this.direction).multiplyScalar(e).add(this.origin),oi.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){ai.copy(t).add(e).multiplyScalar(.5),si.copy(e).sub(t).normalize(),li.copy(this.origin).sub(ai);const i=.5*t.distanceTo(e),o=-this.direction.dot(si),a=li.dot(this.direction),s=-li.dot(si),l=li.lengthSq(),u=Math.abs(1-o*o);let c,h,d,p;if(u>0)if(c=o*s-a,h=o*a-s,p=i*u,c>=0)if(h>=-p)if(h<=p){const t=1/u;c*=t,h*=t,d=c*(c+o*h+2*a)+h*(o*c+h+2*s)+l}else h=i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;else h=-i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;else h<=-p?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l):h<=p?(c=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(si).multiplyScalar(h).add(ai),d}intersectSphere(t,e){oi.subVectors(t.center,this.origin);const n=oi.dot(this.direction),r=oi.dot(oi)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,oi)}intersectTriangle(t,e,n,r,i){ui.subVectors(e,t),ci.subVectors(n,t),hi.crossVectors(ui,ci);let o,a=this.direction.dot(hi);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}li.subVectors(this.origin,t);const s=o*this.direction.dot(ci.crossVectors(li,ci));if(s<0)return null;const l=o*this.direction.dot(ui.cross(li));if(l<0)return null;if(s+l>a)return null;const u=-o*li.dot(hi);return u<0?null:this.at(u/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class pi{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new pi).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/fi.setFromMatrixColumn(t,0).length(),i=1/fi.setFromMatrixColumn(t,1).length(),o=1/fi.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-a*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*u,e[9]=i-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(gi,t,vi)}lookAt(t,e,n){const r=this.elements;return xi.subVectors(t,e),0===xi.lengthSq()&&(xi.z=1),xi.normalize(),yi.crossVectors(n,xi),0===yi.lengthSq()&&(1===Math.abs(n.z)?xi.x+=1e-4:xi.z+=1e-4,xi.normalize(),yi.crossVectors(n,xi)),yi.normalize(),bi.crossVectors(xi,yi),r[0]=yi.x,r[4]=bi.x,r[8]=xi.x,r[1]=yi.y,r[5]=bi.y,r[9]=xi.y,r[2]=yi.z,r[6]=bi.z,r[10]=xi.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],M=r[12],E=r[1],C=r[5],T=r[9],A=r[13],D=r[2],P=r[6],R=r[10],L=r[14],O=r[3],k=r[7],I=r[11],N=r[15];return i[0]=o*_+a*E+s*D+l*O,i[4]=o*w+a*C+s*P+l*k,i[8]=o*S+a*T+s*R+l*I,i[12]=o*M+a*A+s*L+l*N,i[1]=u*_+c*E+h*D+d*O,i[5]=u*w+c*C+h*P+d*k,i[9]=u*S+c*T+h*R+d*I,i[13]=u*M+c*A+h*L+d*N,i[2]=p*_+f*E+m*D+g*O,i[6]=p*w+f*C+m*P+g*k,i[10]=p*S+f*T+m*R+g*I,i[14]=p*M+f*A+m*L+g*N,i[3]=v*_+y*E+b*D+x*O,i[7]=v*w+y*C+b*P+x*k,i[11]=v*S+y*T+b*R+x*I,i[15]=v*M+y*A+b*L+x*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*d-n*s*d)+f*(+e*s*d-e*l*h+i*o*h-r*o*d+r*l*u-i*s*u)+m*(+e*l*c-e*a*d-i*o*c+n*o*d+i*a*u-n*l*u)+g*(-r*a*u-e*s*c+e*a*h+r*o*c-n*o*h+n*s*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=c*m*l-f*h*l+f*s*d-a*m*d-c*s*g+a*h*g,y=p*h*l-u*m*l-p*s*d+o*m*d+u*s*g-o*h*g,b=u*f*l-p*c*l+p*a*d-o*f*d-u*a*g+o*c*g,x=p*c*s-u*f*s-p*a*h+o*f*h+u*a*m-o*c*m,_=e*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=v*w,t[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*w,t[2]=(a*m*i-f*s*i+f*r*l-n*m*l-a*r*g+n*s*g)*w,t[3]=(c*s*i-a*h*i-c*r*l+n*h*l+a*r*d-n*s*d)*w,t[4]=y*w,t[5]=(u*m*i-p*h*i+p*r*d-e*m*d-u*r*g+e*h*g)*w,t[6]=(p*s*i-o*m*i-p*r*l+e*m*l+o*r*g-e*s*g)*w,t[7]=(o*h*i-u*s*i+u*r*l-e*h*l-o*r*d+e*s*d)*w,t[8]=b*w,t[9]=(p*c*i-u*f*i-p*n*d+e*f*d+u*n*g-e*c*g)*w,t[10]=(o*f*i-p*a*i+p*n*l-e*f*l-o*n*g+e*a*g)*w,t[11]=(u*a*i-o*c*i-u*n*l+e*c*l+o*n*d-e*a*d)*w,t[12]=x*w,t[13]=(u*f*r-p*c*r+p*n*h-e*f*h-u*n*m+e*c*m)*w,t[14]=(p*a*r-o*f*r-p*n*s+e*f*s+o*n*m-e*a*m)*w,t[15]=(o*c*r-u*a*r+u*n*s-e*c*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,l=i+i,u=o+o,c=a+a,h=i*l,d=i*u,p=i*c,f=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,x=n.x,_=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=fi.set(r[0],r[1],r[2]).length();const o=fi.set(r[4],r[5],r[6]).length(),a=fi.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],mi.copy(this);const l=1/i,u=1/o,c=1/a;return mi.elements[0]*=l,mi.elements[1]*=l,mi.elements[2]*=l,mi.elements[4]*=u,mi.elements[5]*=u,mi.elements[6]*=u,mi.elements[8]*=c,mi.elements[9]*=c,mi.elements[10]*=c,e.setFromRotationMatrix(mi),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),l=1/(n-r),u=1/(o-i),c=(e+t)*s,h=(n+r)*l,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}pi.prototype.isMatrix4=!0;const fi=new Nr,mi=new pi,gi=new Nr(0,0,0),vi=new Nr(1,1,1),yi=new Nr,bi=new Nr,xi=new Nr,_i=new pi,wi=new Ir;class Si{constructor(t=0,e=0,n=0,r=Si.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(zn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-zn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(zn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-zn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(zn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return _i.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_i,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return wi.setFromEuler(this),this.setFromQuaternion(wi,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Si.prototype.isEuler=!0,Si.DefaultOrder="XYZ",Si.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Mi{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Ei=0;const Ci=new Nr,Ti=new Ir,Ai=new pi,Di=new Nr,Pi=new Nr,Ri=new Nr,Li=new Ir,Oi=new Nr(1,0,0),ki=new Nr(0,1,0),Ii=new Nr(0,0,1),Ni={type:"added"},Bi={type:"removed"};class Fi extends On{constructor(){super(),Object.defineProperty(this,"id",{value:Ei++}),this.uuid=Fn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fi.DefaultUp.clone();const t=new Nr,e=new Si,n=new Ir,r=new Nr(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pi},normalMatrix:{value:new lr}}),this.matrix=new pi,this.matrixWorld=new pi,this.matrixAutoUpdate=Fi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Mi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ti.setFromAxisAngle(t,e),this.quaternion.multiply(Ti),this}rotateOnWorldAxis(t,e){return Ti.setFromAxisAngle(t,e),this.quaternion.premultiply(Ti),this}rotateX(t){return this.rotateOnAxis(Oi,t)}rotateY(t){return this.rotateOnAxis(ki,t)}rotateZ(t){return this.rotateOnAxis(Ii,t)}translateOnAxis(t,e){return Ci.copy(t).applyQuaternion(this.quaternion),this.position.add(Ci.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Oi,t)}translateY(t){return this.translateOnAxis(ki,t)}translateZ(t){return this.translateOnAxis(Ii,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ai.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Di.copy(t):Di.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Pi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ai.lookAt(Pi,Di,this.up):Ai.lookAt(Di,Pi,this.up),this.quaternion.setFromRotationMatrix(Ai),r&&(Ai.extractRotation(r.matrixWorld),Ti.setFromRotationMatrix(Ai),this.quaternion.premultiply(Ti.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Ni)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Bi)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Bi)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ai.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ai.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ai),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pi,t,Ri),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pi,Li,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Fi.DefaultUp=new Nr(0,1,0),Fi.DefaultMatrixAutoUpdate=!0,Fi.prototype.isObject3D=!0;const zi=new Nr,Ui=new Nr,ji=new Nr,Vi=new Nr,Hi=new Nr,Wi=new Nr,Gi=new Nr,qi=new Nr,Xi=new Nr,Yi=new Nr;class Zi{constructor(t=new Nr,e=new Nr,n=new Nr){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),zi.subVectors(t,e),r.cross(zi);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){zi.subVectors(r,e),Ui.subVectors(n,e),ji.subVectors(t,e);const o=zi.dot(zi),a=zi.dot(Ui),s=zi.dot(ji),l=Ui.dot(Ui),u=Ui.dot(ji),c=o*l-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,d=(l*s-a*u)*h,p=(o*u-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Vi),Vi.x>=0&&Vi.y>=0&&Vi.x+Vi.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Vi),s.set(0,0),s.addScaledVector(i,Vi.x),s.addScaledVector(o,Vi.y),s.addScaledVector(a,Vi.z),s}static isFrontFacing(t,e,n,r){return zi.subVectors(n,e),Ui.subVectors(t,e),zi.cross(Ui).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return zi.subVectors(this.c,this.b),Ui.subVectors(this.a,this.b),.5*zi.cross(Ui).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Zi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Zi.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return Zi.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return Zi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Zi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;Hi.subVectors(r,n),Wi.subVectors(i,n),qi.subVectors(t,n);const s=Hi.dot(qi),l=Wi.dot(qi);if(s<=0&&l<=0)return e.copy(n);Xi.subVectors(t,r);const u=Hi.dot(Xi),c=Wi.dot(Xi);if(u>=0&&c<=u)return e.copy(r);const h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return o=s/(s-u),e.copy(n).addScaledVector(Hi,o);Yi.subVectors(t,i);const d=Hi.dot(Yi),p=Wi.dot(Yi);if(p>=0&&d<=p)return e.copy(i);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(Wi,a);const m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return Gi.subVectors(i,r),a=(c-u)/(c-u+(d-p)),e.copy(r).addScaledVector(Gi,a);const g=1/(m+f+h);return o=f*g,a=h*g,e.copy(n).addScaledVector(Hi,o).addScaledVector(Wi,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Ki=0;class Ji extends On{constructor(){super(),Object.defineProperty(this,"id",{value:Ki++}),this.uuid=Fn(),this.name="",this.type="Material",this.blending=ct,this.side=ot,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Mt,this.blendDst=Et,this.blendEquation=mt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=kt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=An,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tn,this.stencilZFail=Tn,this.stencilZPass=Tn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===lt;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ct&&(n.blending=this.blending),this.side!==ot&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Ji.prototype.isMaterial=!0,Ji.fromType=function(){return null};class Qi extends Ji{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new _r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}Qi.prototype.isMeshBasicMaterial=!0;const $i=new Nr,to=new sr;class eo{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Dn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new _r),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new sr),e[n++]=i.x,e[n++]=i.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Nr),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Ar),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)to.fromBufferAttribute(this,e),to.applyMatrix3(t),this.setXY(e,to.x,to.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)$i.fromBufferAttribute(this,e),$i.applyMatrix3(t),this.setXYZ(e,$i.x,$i.y,$i.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)$i.fromBufferAttribute(this,e),$i.applyMatrix4(t),this.setXYZ(e,$i.x,$i.y,$i.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)$i.fromBufferAttribute(this,e),$i.applyNormalMatrix(t),this.setXYZ(e,$i.x,$i.y,$i.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)$i.fromBufferAttribute(this,e),$i.transformDirection(t),this.setXYZ(e,$i.x,$i.y,$i.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Dn&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}eo.prototype.isBufferAttribute=!0;class no extends eo{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class ro extends eo{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class io extends eo{constructor(t,e,n){super(new Uint16Array(t),e,n)}}io.prototype.isFloat16BufferAttribute=!0;class oo extends eo{constructor(t,e,n){super(new Float32Array(t),e,n)}}let ao=0;const so=new pi,lo=new Fi,uo=new Nr,co=new zr,ho=new zr,po=new Nr;class fo extends On{constructor(){super(),Object.defineProperty(this,"id",{value:ao++}),this.uuid=Fn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ur(t)?ro:no)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new lr).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return so.makeRotationFromQuaternion(t),this.applyMatrix4(so),this}rotateX(t){return so.makeRotationX(t),this.applyMatrix4(so),this}rotateY(t){return so.makeRotationY(t),this.applyMatrix4(so),this}rotateZ(t){return so.makeRotationZ(t),this.applyMatrix4(so),this}translate(t,e,n){return so.makeTranslation(t,e,n),this.applyMatrix4(so),this}scale(t,e,n){return so.makeScale(t,e,n),this.applyMatrix4(so),this}lookAt(t){return lo.lookAt(t),lo.updateMatrix(),this.applyMatrix4(lo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uo).negate(),this.translate(uo.x,uo.y,uo.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new oo(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Nr(-1/0,-1/0,-1/0),new Nr(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];co.setFromBufferAttribute(t),this.morphTargetsRelative?(po.addVectors(this.boundingBox.min,co.min),this.boundingBox.expandByPoint(po),po.addVectors(this.boundingBox.max,co.max),this.boundingBox.expandByPoint(po)):(this.boundingBox.expandByPoint(co.min),this.boundingBox.expandByPoint(co.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ii);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Nr,1/0);if(t){const n=this.boundingSphere.center;if(co.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];ho.setFromBufferAttribute(n),this.morphTargetsRelative?(po.addVectors(co.min,ho.min),co.expandByPoint(po),po.addVectors(co.max,ho.max),co.expandByPoint(po)):(co.expandByPoint(ho.min),co.expandByPoint(ho.max))}co.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)po.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(po));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)po.fromBufferAttribute(o,e),a&&(uo.fromBufferAttribute(t,e),po.add(uo)),r=Math.max(r,n.distanceToSquared(po))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new eo(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let E=0;E<a;E++)l[E]=new Nr,u[E]=new Nr;const c=new Nr,h=new Nr,d=new Nr,p=new sr,f=new sr,m=new sr,g=new Nr,v=new Nr;function y(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),p.fromArray(o,2*t),f.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),d.sub(c),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),u[t].add(v),u[e].add(v),u[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let E=0,C=b.length;E<C;++E){const t=b[E],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)y(n[i+0],n[i+1],n[i+2])}const x=new Nr,_=new Nr,w=new Nr,S=new Nr;function M(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),_.crossVectors(S,e);const n=_.dot(u[t]),r=n<0?-1:1;s[4*t]=x.x,s[4*t+1]=x.y,s[4*t+2]=x.z,s[4*t+3]=r}for(let E=0,C=b.length;E<C;++E){const t=b[E],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new eo(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Nr,i=new Nr,o=new Nr,a=new Nr,s=new Nr,l=new Nr,u=new Nr,c=new Nr;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(u),s.add(u),l.add(u),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r],o=i.array,a=t.attributes[r],s=a.array,l=a.itemSize*e,u=Math.min(s.length,o.length-l);for(let t=0,e=l;t<u;t++,e++)o[e]=s[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)po.fromBufferAttribute(t,e),po.normalize(),t.setXYZ(e,po.x,po.y,po.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let l=0,u=e.length;l<u;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new eo(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new fo,n=this.index.array,r=this.attributes;for(const a in r){const i=r[a],o=t(i,n);e.setAttribute(a,o)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let e=0,i=o.length;e<i;e++){const i=o[e],a=t(i,n);r.push(a)}e.morphAttributes[a]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const t=o[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const s in n){const e=n[s];t.data.attributes[s]=e.toJSON(t.data)}const r={};let i=!1;for(const s in this.morphAttributes){const e=this.morphAttributes[s],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[s]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,u=o.length;l<u;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}fo.prototype.isBufferGeometry=!0;const mo=new pi,go=new di,vo=new ii,yo=new Nr,bo=new Nr,xo=new Nr,_o=new Nr,wo=new Nr,So=new Nr,Mo=new Nr,Eo=new Nr,Co=new Nr,To=new sr,Ao=new sr,Do=new sr,Po=new Nr,Ro=new Nr;class Lo extends Fi{constructor(t=new fo,e=new Qi){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),vo.copy(n.boundingSphere),vo.applyMatrix4(i),!1===t.ray.intersectsSphere(vo))return;if(mo.copy(i).invert(),go.copy(t.ray).applyMatrix4(mo),null!==n.boundingBox&&!1===go.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,u=n.attributes.uv,c=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex],m=Math.max(p.start,d.start),g=Math.min(i.count,Math.min(p.start+p.count,d.start+d.count));for(let n=m,r=g;n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=ko(this,f,t,go,a,s,l,u,c,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,e.push(o))}}else{const n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);for(let d=n,p=h;d<p;d+=3){const n=i.getX(d),h=i.getX(d+1),p=i.getX(d+2);o=ko(this,r,t,go,a,s,l,u,c,n,h,p),o&&(o.faceIndex=Math.floor(d/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const i=h[n],p=r[i.materialIndex],f=Math.max(i.start,d.start),m=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));for(let n=f,r=m;n<r;n+=3){const r=n,h=n+1,d=n+2;o=ko(this,p,t,go,a,s,l,u,c,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{const n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);for(let h=n,d=i;h<d;h+=3){const n=h,i=h+1,d=h+2;o=ko(this,r,t,go,a,s,l,u,c,n,i,d),o&&(o.faceIndex=Math.floor(h/3),e.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Oo(t,e,n,r,i,o,a,s){let l;if(l=e.side===at?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==st,s),null===l)return null;Ro.copy(s),Ro.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Ro);return u<n.near||u>n.far?null:{distance:u,point:Ro.clone(),object:t}}function ko(t,e,n,r,i,o,a,s,l,u,c,h){yo.fromBufferAttribute(i,u),bo.fromBufferAttribute(i,c),xo.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(o&&d){Mo.set(0,0,0),Eo.set(0,0,0),Co.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(_o.fromBufferAttribute(n,u),wo.fromBufferAttribute(n,c),So.fromBufferAttribute(n,h),a?(Mo.addScaledVector(_o,e),Eo.addScaledVector(wo,e),Co.addScaledVector(So,e)):(Mo.addScaledVector(_o.sub(yo),e),Eo.addScaledVector(wo.sub(bo),e),Co.addScaledVector(So.sub(xo),e)))}yo.add(Mo),bo.add(Eo),xo.add(Co)}t.isSkinnedMesh&&(t.boneTransform(u,yo),t.boneTransform(c,bo),t.boneTransform(h,xo));const p=Oo(t,e,n,r,yo,bo,xo,Po);if(p){s&&(To.fromBufferAttribute(s,u),Ao.fromBufferAttribute(s,c),Do.fromBufferAttribute(s,h),p.uv=Zi.getUV(Po,yo,bo,xo,To,Ao,Do,new sr)),l&&(To.fromBufferAttribute(l,u),Ao.fromBufferAttribute(l,c),Do.fromBufferAttribute(l,h),p.uv2=Zi.getUV(Po,yo,bo,xo,To,Ao,Do,new sr));const t={a:u,b:c,c:h,normal:new Nr,materialIndex:0};Zi.getNormal(yo,bo,xo,t.normal),p.face=t}return p}Lo.prototype.isMesh=!0;class Io extends fo{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],u=[],c=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,g,v){const y=o/m,b=p/g,x=o/2,_=p/2,w=f/2,S=m+1,M=g+1;let E=0,C=0;const T=new Nr;for(let a=0;a<M;a++){const o=a*b-_;for(let s=0;s<S;s++){const h=s*y-x;T[t]=h*r,T[e]=o*i,T[n]=w,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=f>0?1:-1,u.push(T.x,T.y,T.z),c.push(s/m),c.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let t=0;t<m;t++){const e=h+t+S*a,n=h+t+S*(a+1),r=h+(t+1)+S*(a+1),i=h+(t+1)+S*a;s.push(e,n,i),s.push(n,r,i),C+=6}a.addGroup(d,C,v),d+=C,h+=E}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new oo(l,3)),this.setAttribute("normal",new oo(u,3)),this.setAttribute("uv",new oo(c,2))}static fromJSON(t){return new Io(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function No(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Bo(t){const e={};for(let n=0;n<t.length;n++){const r=No(t[n]);for(const t in r)e[t]=r[t]}return e}const Fo={clone:No,merge:Bo};var zo="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Uo="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class jo extends Ji{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=zo,this.fragmentShader=Uo,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=No(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}jo.prototype.isShaderMaterial=!0;class Vo extends Fi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new pi,this.projectionMatrix=new pi,this.projectionMatrixInverse=new pi}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Vo.prototype.isCamera=!0;class Ho extends Vo{constructor(t=50,e=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Bn*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Nn*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Bn*Math.atan(Math.tan(.5*Nn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Nn*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Ho.prototype.isPerspectiveCamera=!0;const Wo=90,Go=1;class qo extends Fi{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Ho(Wo,Go,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Nr(1,0,0)),this.add(r);const i=new Ho(Wo,Go,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Nr(-1,0,0)),this.add(i);const o=new Ho(Wo,Go,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Nr(0,1,0)),this.add(o);const a=new Ho(Wo,Go,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Nr(0,-1,0)),this.add(a);const s=new Ho(Wo,Go,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Nr(0,0,1)),this.add(s);const l=new Ho(Wo,Go,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Nr(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,u=t.getRenderTarget(),c=t.toneMapping,h=t.xr.enabled;t.toneMapping=Vt,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=c,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Xo extends Tr{constructor(t,e,n,r,i,o,a,s,l,u){t=void 0!==t?t:[],e=void 0!==e?e:Zt,super(t,e,n,r,i,o,a,s,l,u),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Xo.prototype.isCubeTexture=!0;class Yo extends Dr{constructor(t,e={}){super(t,t,e);const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Xo(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ae}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Io(5,5,5),i=new jo({name:"CubemapFromEquirect",uniforms:No(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:at,blending:ut});i.uniforms.tEquirect.value=e;const o=new Lo(r,i),a=e.minFilter;e.minFilter===le&&(e.minFilter=ae);const s=new qo(1,10,this);return s.update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}Yo.prototype.isWebGLCubeRenderTarget=!0;const Zo=new Nr,Ko=new Nr,Jo=new lr;class Qo{constructor(t=new Nr(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Zo.subVectors(n,e).cross(Ko.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Zo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Jo.getNormalMatrix(t),r=this.coplanarPoint(Zo).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Qo.prototype.isPlane=!0;const $o=new ii,ta=new Nr;class ea{constructor(t=new Qo,e=new Qo,n=new Qo,r=new Qo,i=new Qo,o=new Qo){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,c-s,f-h,y-m).normalize(),e[1].setComponents(a+r,c+s,f+h,y+m).normalize(),e[2].setComponents(a+i,c+l,f+d,y+g).normalize(),e[3].setComponents(a-i,c-l,f-d,y-g).normalize(),e[4].setComponents(a-o,c-u,f-p,y-v).normalize(),e[5].setComponents(a+o,c+u,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),$o.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere($o)}intersectsSprite(t){return $o.center.set(0,0,0),$o.radius=.7071067811865476,$o.applyMatrix4(t.matrixWorld),this.intersectsSphere($o)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){const t=e[i].distanceToPoint(n);if(t<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(ta.x=r.normal.x>0?t.max.x:t.min.x,ta.y=r.normal.y>0?t.max.y:t.min.y,ta.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ta)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function na(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ra(t,e){const n=e.isWebGL2,r=new WeakMap;function i(e,r){const i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}function a(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function s(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:a,remove:s,update:l}}class ia extends fo{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),l=a+1,u=s+1,c=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let g=0;g<u;g++){const t=g*h-o;for(let e=0;e<l;e++){const n=e*c-i;p.push(n,-t,0),f.push(0,0,1),m.push(e/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let t=0;t<a;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new oo(p,3)),this.setAttribute("normal",new oo(f,3)),this.setAttribute("uv",new oo(m,2))}static fromJSON(t){return new ia(t.width,t.height,t.widthSegments,t.heightSegments)}}var oa="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",aa="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",sa="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",la="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",ua="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",ca="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ha="vec3 transformed = vec3( position );",da="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",pa="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",fa="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",ma="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",ga="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",va="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",ya="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",ba="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",xa="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",_a="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",wa="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Sa="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Ma="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Ea="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Ca="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Ta="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Aa="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Da="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Pa="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ra="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",La="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Oa="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",ka="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Ia="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Na="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Ba="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",Fa="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",za="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Ua="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ja="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",Va="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Ha="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Wa="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Ga="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",qa="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",Xa="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Ya="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Za="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Ka="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Ja="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",Qa="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",$a="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",ts="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",es="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",ns="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",rs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",is="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",os="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",as="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",ss="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",ls="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",us="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",cs="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",hs="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ds="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",ps="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",fs="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",ms="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",gs="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",vs="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",ys="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",bs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",xs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",_s="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",ws="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Ss="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",Ms="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Es="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Cs="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Ts="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",As="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ds="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ps="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Rs="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Ls="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Os="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ks="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Is="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",Ns="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Bs="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Fs="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",zs="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Us="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",js="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Vs="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Hs="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Ws="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Gs="#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",qs="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",Xs="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Ys="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Zs="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Ks="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Js="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",Qs="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",$s="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const tl="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",el="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",nl="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",rl="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",il="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",ol="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",al="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",sl="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ll="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ul="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",hl="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",dl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",pl="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",fl="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ml="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",gl="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",vl="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",yl="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",bl="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",xl="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",_l="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",wl="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Sl="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ml="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",El="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Cl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Tl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Al="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Dl="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Pl="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Rl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ll={alphamap_fragment:oa,alphamap_pars_fragment:aa,alphatest_fragment:sa,alphatest_pars_fragment:la,aomap_fragment:ua,aomap_pars_fragment:ca,begin_vertex:ha,beginnormal_vertex:da,bsdfs:pa,bumpmap_pars_fragment:fa,clipping_planes_fragment:ma,clipping_planes_pars_fragment:ga,clipping_planes_pars_vertex:va,clipping_planes_vertex:ya,color_fragment:ba,color_pars_fragment:xa,color_pars_vertex:_a,color_vertex:wa,common:Sa,cube_uv_reflection_fragment:Ma,defaultnormal_vertex:Ea,displacementmap_pars_vertex:Ca,displacementmap_vertex:Ta,emissivemap_fragment:Aa,emissivemap_pars_fragment:Da,encodings_fragment:Pa,encodings_pars_fragment:Ra,envmap_fragment:La,envmap_common_pars_fragment:Oa,envmap_pars_fragment:ka,envmap_pars_vertex:Ia,envmap_physical_pars_fragment:qa,envmap_vertex:Na,fog_vertex:Ba,fog_pars_vertex:Fa,fog_fragment:za,fog_pars_fragment:Ua,gradientmap_pars_fragment:ja,lightmap_fragment:Va,lightmap_pars_fragment:Ha,lights_lambert_vertex:Wa,lights_pars_begin:Ga,lights_toon_fragment:Xa,lights_toon_pars_fragment:Ya,lights_phong_fragment:Za,lights_phong_pars_fragment:Ka,lights_physical_fragment:Ja,lights_physical_pars_fragment:Qa,lights_fragment_begin:$a,lights_fragment_maps:ts,lights_fragment_end:es,logdepthbuf_fragment:ns,logdepthbuf_pars_fragment:rs,logdepthbuf_pars_vertex:is,logdepthbuf_vertex:os,map_fragment:as,map_pars_fragment:ss,map_particle_fragment:ls,map_particle_pars_fragment:us,metalnessmap_fragment:cs,metalnessmap_pars_fragment:hs,morphcolor_vertex:ds,morphnormal_vertex:ps,morphtarget_pars_vertex:fs,morphtarget_vertex:ms,normal_fragment_begin:gs,normal_fragment_maps:vs,normal_pars_fragment:ys,normal_pars_vertex:bs,normal_vertex:xs,normalmap_pars_fragment:_s,clearcoat_normal_fragment_begin:ws,clearcoat_normal_fragment_maps:Ss,clearcoat_pars_fragment:Ms,output_fragment:Es,packing:Cs,premultiplied_alpha_fragment:Ts,project_vertex:As,dithering_fragment:Ds,dithering_pars_fragment:Ps,roughnessmap_fragment:Rs,roughnessmap_pars_fragment:Ls,shadowmap_pars_fragment:Os,shadowmap_pars_vertex:ks,shadowmap_vertex:Is,shadowmask_pars_fragment:Ns,skinbase_vertex:Bs,skinning_pars_vertex:Fs,skinning_vertex:zs,skinnormal_vertex:Us,specularmap_fragment:js,specularmap_pars_fragment:Vs,tonemapping_fragment:Hs,tonemapping_pars_fragment:Ws,transmission_fragment:Gs,transmission_pars_fragment:qs,uv_pars_fragment:Xs,uv_pars_vertex:Ys,uv_vertex:Zs,uv2_pars_fragment:Ks,uv2_pars_vertex:Js,uv2_vertex:Qs,worldpos_vertex:$s,background_vert:tl,background_frag:el,cube_vert:nl,cube_frag:rl,depth_vert:il,depth_frag:ol,distanceRGBA_vert:al,distanceRGBA_frag:sl,equirect_vert:ll,equirect_frag:ul,linedashed_vert:cl,linedashed_frag:hl,meshbasic_vert:dl,meshbasic_frag:pl,meshlambert_vert:fl,meshlambert_frag:ml,meshmatcap_vert:gl,meshmatcap_frag:vl,meshnormal_vert:yl,meshnormal_frag:bl,meshphong_vert:xl,meshphong_frag:_l,meshphysical_vert:wl,meshphysical_frag:Sl,meshtoon_vert:Ml,meshtoon_frag:El,points_vert:Cl,points_frag:Tl,shadow_vert:Al,shadow_frag:Dl,sprite_vert:Pl,sprite_frag:Rl},Ol={common:{diffuse:{value:new _r(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new lr},uv2Transform:{value:new lr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new sr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _r(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _r(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new lr}},sprite:{diffuse:{value:new _r(16777215)},opacity:{value:1},center:{value:new sr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new lr}}},kl={basic:{uniforms:Bo([Ol.common,Ol.specularmap,Ol.envmap,Ol.aomap,Ol.lightmap,Ol.fog]),vertexShader:Ll.meshbasic_vert,fragmentShader:Ll.meshbasic_frag},lambert:{uniforms:Bo([Ol.common,Ol.specularmap,Ol.envmap,Ol.aomap,Ol.lightmap,Ol.emissivemap,Ol.fog,Ol.lights,{emissive:{value:new _r(0)}}]),vertexShader:Ll.meshlambert_vert,fragmentShader:Ll.meshlambert_frag},phong:{uniforms:Bo([Ol.common,Ol.specularmap,Ol.envmap,Ol.aomap,Ol.lightmap,Ol.emissivemap,Ol.bumpmap,Ol.normalmap,Ol.displacementmap,Ol.fog,Ol.lights,{emissive:{value:new _r(0)},specular:{value:new _r(1118481)},shininess:{value:30}}]),vertexShader:Ll.meshphong_vert,fragmentShader:Ll.meshphong_frag},standard:{uniforms:Bo([Ol.common,Ol.envmap,Ol.aomap,Ol.lightmap,Ol.emissivemap,Ol.bumpmap,Ol.normalmap,Ol.displacementmap,Ol.roughnessmap,Ol.metalnessmap,Ol.fog,Ol.lights,{emissive:{value:new _r(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ll.meshphysical_vert,fragmentShader:Ll.meshphysical_frag},toon:{uniforms:Bo([Ol.common,Ol.aomap,Ol.lightmap,Ol.emissivemap,Ol.bumpmap,Ol.normalmap,Ol.displacementmap,Ol.gradientmap,Ol.fog,Ol.lights,{emissive:{value:new _r(0)}}]),vertexShader:Ll.meshtoon_vert,fragmentShader:Ll.meshtoon_frag},matcap:{uniforms:Bo([Ol.common,Ol.bumpmap,Ol.normalmap,Ol.displacementmap,Ol.fog,{matcap:{value:null}}]),vertexShader:Ll.meshmatcap_vert,fragmentShader:Ll.meshmatcap_frag},points:{uniforms:Bo([Ol.points,Ol.fog]),vertexShader:Ll.points_vert,fragmentShader:Ll.points_frag},dashed:{uniforms:Bo([Ol.common,Ol.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ll.linedashed_vert,fragmentShader:Ll.linedashed_frag},depth:{uniforms:Bo([Ol.common,Ol.displacementmap]),vertexShader:Ll.depth_vert,fragmentShader:Ll.depth_frag},normal:{uniforms:Bo([Ol.common,Ol.bumpmap,Ol.normalmap,Ol.displacementmap,{opacity:{value:1}}]),vertexShader:Ll.meshnormal_vert,fragmentShader:Ll.meshnormal_frag},sprite:{uniforms:Bo([Ol.sprite,Ol.fog]),vertexShader:Ll.sprite_vert,fragmentShader:Ll.sprite_frag},background:{uniforms:{uvTransform:{value:new lr},t2D:{value:null}},vertexShader:Ll.background_vert,fragmentShader:Ll.background_frag},cube:{uniforms:Bo([Ol.envmap,{opacity:{value:1}}]),vertexShader:Ll.cube_vert,fragmentShader:Ll.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ll.equirect_vert,fragmentShader:Ll.equirect_frag},distanceRGBA:{uniforms:Bo([Ol.common,Ol.displacementmap,{referencePosition:{value:new Nr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ll.distanceRGBA_vert,fragmentShader:Ll.distanceRGBA_frag},shadow:{uniforms:Bo([Ol.lights,Ol.fog,{color:{value:new _r(0)},opacity:{value:1}}]),vertexShader:Ll.shadow_vert,fragmentShader:Ll.shadow_frag}};function Il(t,e,n,r,i,o){const a=new _r(0);let s,l,u=!0===i?0:1,c=null,h=0,d=null;function p(n,i){let o=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=e.get(p));const m=t.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?f(a,u):p&&p.isColor&&(f(p,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.mapping===$t)?(void 0===l&&(l=new Lo(new Io(1,1,1),new jo({name:"BackgroundCubeMaterial",uniforms:No(kl.cube.uniforms),vertexShader:kl.cube.vertexShader,fragmentShader:kl.cube.fragmentShader,side:at,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&h===p.version&&d===t.toneMapping||(l.material.needsUpdate=!0,c=p,h=p.version,d=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===s&&(s=new Lo(new ia(2,2),new jo({name:"BackgroundMaterial",uniforms:No(kl.background.uniforms),vertexShader:kl.background.vertexShader,fragmentShader:kl.background.fragmentShader,side:ot,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&h===p.version&&d===t.toneMapping||(s.material.needsUpdate=!0,c=p,h=p.version,d=t.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,f(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,f(a,u)},render:p}}function Nl(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=g(null);let u=l,c=!1;function h(e,r,i,o,s){let l=!1;if(a){const t=m(o,i,r);u!==t&&(u=t,p(u.object)),l=v(e,o,i,s),l&&y(e,o,i,s)}else{const t=!0===r.wireframe;u.geometry===o.id&&u.program===i.id&&u.wireframe===t||(u.geometry=o.id,u.program=i.id,u.wireframe=t,l=!0)}null!==s&&n.update(s,34963),(l||c)&&(c=!1,M(e,r,i,o),null!==s&&t.bindBuffer(34963,n.get(s).buffer))}function d(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function p(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function f(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,n){const r=!0===n.wireframe;let i=s[t.id];void 0===i&&(i={},s[t.id]=i);let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let a=o[r];return void 0===a&&(a=g(d()),o[r]=a),a}function g(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function v(t,e,n,r){const i=u.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){const e=s[l];if(e.location>=0){const e=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return u.attributesNum!==a||u.index!==r}function y(t,e,n,r){const i={},o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){const e=s[l];if(e.location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,a++}}u.attributes=i,u.attributesNum=a,u.index=r}function b(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function x(t){_(t,0)}function _(n,i){const o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){const o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function w(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function S(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function M(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;b();const l=s.attributes,u=a.getAttributes(),c=o.defaultAttributeValues;for(const e in u){const r=u[e];if(r.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const e=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const u=l.buffer,c=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)_(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)x(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)S(r.location+t,a/r.locationSize,c,e,l*h,(d+a/r.locationSize*t)*h)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)_(r.location+t,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<r.locationSize;t++)x(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)S(r.location+t,a/r.locationSize,c,e,a*h,a/r.locationSize*t*h)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}w()}function E(){A();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t]}}function C(t){if(void 0===s[t.id])return;const e=s[t.id];for(const n in e){const t=e[n];for(const e in t)f(t[e].object),delete t[e];delete e[n]}delete s[t.id]}function T(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)f(r[t].object),delete r[t];delete n[t.id]}}function A(){D(),c=!0,u!==l&&(u=l,p(u.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:A,resetDefaultState:D,dispose:E,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:b,enableAttribute:x,disableUnusedAttributes:w}}function Bl(t,e,n,r){const i=r.isWebGL2;let o;function a(t){o=t}function s(e,r){t.drawArrays(o,e,r),n.update(r,o,1)}function l(r,a,s){if(0===s)return;let l,u;if(i)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,a,s),n.update(a,o,s)}this.setMode=a,this.render=s,this.renderInstances=l}function Fl(t,e,n){let r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=a||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),d=t.getParameter(35660),p=t.getParameter(3379),f=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),b=d>0,x=a||e.has("OES_texture_float"),_=b&&x,w=a?t.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:_,maxSamples:w}}function zl(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Qo,s=new lr,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(t[n]).applyMatrix4(i,s),a.normal.toArray(u,l),u[l+3]=a.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==r||i;return i=e,n=c(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(e,a,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!p)o?c(null):u();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;l.value=i,i=c(h,a,e,s);for(let r=0;r!==e;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Ul(t){let e=new WeakMap;function n(t,e){return e===Jt?t.mapping=Zt:e===Qt&&(t.mapping=Kt),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===Jt||o===Qt){if(e.has(r)){const t=e.get(r).texture;return n(t,r.mapping)}{const o=r.image;if(o&&o.height>0){const a=new Yo(o.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}kl.physical={uniforms:Bo([kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new sr(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new _r(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new sr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _r(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _r(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ll.meshphysical_vert,fragmentShader:Ll.meshphysical_frag};class jl extends Vo{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}jl.prototype.isOrthographicCamera=!0;const Vl=4,Hl=[.125,.215,.35,.446,.526,.582],Wl=20,Gl=new jl,ql=new _r;let Xl=null;const Yl=(1+Math.sqrt(5))/2,Zl=1/Yl,Kl=[new Nr(1,1,1),new Nr(-1,1,1),new Nr(1,1,-1),new Nr(-1,1,-1),new Nr(0,Yl,Zl),new Nr(0,Yl,-Zl),new Nr(Zl,0,Yl),new Nr(-Zl,0,Yl),new Nr(Yl,Zl,0),new Nr(-Yl,Zl,0)];class Jl{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Xl=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ru(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=nu(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Xl),t.scissorTest=!1,tu(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Zt||t.mapping===Kt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Xl=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ae,minFilter:ae,generateMipmaps:!1,type:ge,format:we,encoding:bn,depthBuffer:!1},r=$l(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=$l(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ql(r)),this._blurMaterial=eu(r,t,e)}return r}_compileMaterial(t){const e=new Lo(this._lodPlanes[0],t);this._renderer.compile(e,Gl)}_sceneToCubeUV(t,e,n,r){const i=90,o=1,a=new Ho(i,o,e,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,h=u.toneMapping;u.getClearColor(ql),u.toneMapping=Vt,u.autoClear=!1;const d=new Qi({name:"PMREM.Background",side:at,depthWrite:!1,depthTest:!1}),p=new Lo(new Io,d);let f=!1;const m=t.background;m?m.isColor&&(d.color.copy(m),t.background=null,f=!0):(d.color.copy(ql),f=!0);for(let g=0;g<6;g++){const e=g%3;0===e?(a.up.set(0,s[g],0),a.lookAt(l[g],0,0)):1===e?(a.up.set(0,0,s[g]),a.lookAt(0,l[g],0)):(a.up.set(0,s[g],0),a.lookAt(0,0,l[g]));const n=this._cubeSize;tu(r,e*n,g>2?n:0,n,n),u.setRenderTarget(r),f&&u.render(p,a),u.render(t,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=c,t.background=m}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Zt||t.mapping===Kt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ru()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=nu());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Lo(this._lodPlanes[0],i),a=i.uniforms;a["envMap"].value=t;const s=this._cubeSize;tu(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(o,Gl)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Kl[(r-1)%Kl.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,c=new Lo(this._lodPlanes[r],l),h=l.uniforms,d=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*Wl-1),f=i/p,m=isFinite(i)?1+Math.floor(u*f):Wl;m>Wl&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Wl}`);const g=[];let v=0;for(let w=0;w<Wl;++w){const t=w/f,e=Math.exp(-t*t/2);g.push(e),0===w?v+=e:w<m&&(v+=2*e)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;h["envMap"].value=t.texture,h["samples"].value=m,h["weights"].value=g,h["latitudinal"].value="latitudinal"===o,a&&(h["poleAxis"].value=a);const{_lodMax:y}=this;h["dTheta"].value=p,h["mipInt"].value=y-n;const b=this._sizeLods[r],x=3*b*(r>y-Vl?r-y+Vl:0),_=4*(this._cubeSize-b);tu(e,x,_,3*b,2*b),s.setRenderTarget(e),s.render(c,Gl)}}function Ql(t){const e=[],n=[],r=[];let i=t;const o=t-Vl+1+Hl.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-Vl?s=Hl[a-t+Vl-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,f*p*t),y.set(h,m*p*t);const i=[t,t,t,t,t,t];b.set(i,g*p*t)}const x=new fo;x.setAttribute("position",new eo(v,f)),x.setAttribute("uv",new eo(y,m)),x.setAttribute("faceIndex",new eo(b,g)),e.push(x),i>Vl&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function $l(t,e,n){const r=new Dr(t,e,n);return r.texture.mapping=$t,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function tu(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function eu(t,e,n){const r=new Float32Array(Wl),i=new Nr(0,1,0),o=new jo({name:"SphericalGaussianBlur",defines:{n:Wl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:iu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1});return o}function nu(){return new jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:iu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1})}function ru(){return new jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:iu(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ut,depthTest:!1,depthWrite:!1})}function iu(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ou(t){let e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const a=r.mapping,s=a===Jt||a===Qt,l=a===Zt||a===Kt;if(s||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new Jl(t)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||l&&a&&i(a)){null===n&&(n=new Jl(t));const i=s?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function a(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:a}}function au(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function su(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e}function l(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}}function u(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(ur(n)?ro:no)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}function c(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&u(t)}else u(t);return o.get(t)}return{get:s,update:l,getWireframeAttribute:c}}function lu(t,e,n,r){const i=r.isWebGL2;let o,a,s;function l(t){o=t}function u(t){a=t.type,s=t.bytesPerElement}function c(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)}function h(r,l,u){if(0===u)return;let c,h;if(i)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,l,a,r*s,u),n.update(l,o,u)}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function uu(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,e,r){switch(n.calls++,e){case 4:n.triangles+=r*(t/3);break;case 1:n.lines+=r*(t/2);break;case 3:n.lines+=r*(t-1);break;case 2:n.lines+=r*t;break;case 0:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function cu(t,e){return t[0]-e[0]}function hu(t,e){return Math.abs(e[1])-Math.abs(t[1])}function du(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function pu(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Ar,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(l,u,c,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const r=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,i=void 0!==r?r.length:0;let s=o.get(u);if(void 0===s||s.count!==i){let t=function(){v.dispose(),o.delete(u),u.removeEventListener("dispose",t)};void 0!==s&&s.texture.dispose();const n=void 0!==u.morphAttributes.position,r=void 0!==u.morphAttributes.normal,l=void 0!==u.morphAttributes.color,c=u.morphAttributes.position||[],h=u.morphAttributes.normal||[],d=u.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===r&&(p=2),!0===l&&(p=3);let f=u.attributes.position.count*p,m=1;f>e.maxTextureSize&&(m=Math.ceil(f/e.maxTextureSize),f=e.maxTextureSize);const g=new Float32Array(f*m*4*i),v=new Pr(g,f,m,i);v.type=me,v.needsUpdate=!0;const y=4*p;for(let e=0;e<i;e++){const t=c[e],i=h[e],o=d[e],s=f*m*4*e;for(let e=0;e<t.count;e++){const u=e*y;!0===n&&(a.fromBufferAttribute(t,e),!0===t.normalized&&du(a,t),g[s+u+0]=a.x,g[s+u+1]=a.y,g[s+u+2]=a.z,g[s+u+3]=0),!0===r&&(a.fromBufferAttribute(i,e),!0===i.normalized&&du(a,i),g[s+u+4]=a.x,g[s+u+5]=a.y,g[s+u+6]=a.z,g[s+u+7]=0),!0===l&&(a.fromBufferAttribute(o,e),!0===o.normalized&&du(a,o),g[s+u+8]=a.x,g[s+u+9]=a.y,g[s+u+10]=a.z,g[s+u+11]=4===o.itemSize?a.w:1)}}s={count:i,texture:v,size:new sr(f,m)},o.set(u,s),u.addEventListener("dispose",t)}let l=0;for(let t=0;t<d.length;t++)l+=d[t];const c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(t,"morphTargetBaseInfluence",c),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",s.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",s.size)}else{const e=void 0===d?0:d.length;let n=r[u.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];r[u.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=d[t]}n.sort(hu);for(let t=0;t<8;t++)t<e&&n[t][1]?(s[t][0]=n[t][0],s[t][1]=n[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(cu);const o=u.morphAttributes.position,a=u.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=s[t],n=e[0],r=e[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&u.getAttribute("morphTarget"+t)!==o[n]&&u.setAttribute("morphTarget"+t,o[n]),a&&u.getAttribute("morphNormal"+t)!==a[n]&&u.setAttribute("morphNormal"+t,a[n]),i[t]=r,l+=r):(o&&!0===u.hasAttribute("morphTarget"+t)&&u.deleteAttribute("morphTarget"+t),a&&!0===u.hasAttribute("morphNormal"+t)&&u.deleteAttribute("morphNormal"+t),i[t]=0)}const c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(t,"morphTargetBaseInfluence",c),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function fu(t,e,n,r){let i=new WeakMap;function o(t){const o=r.render.frame,a=t.geometry,l=e.get(t,a);return i.get(l)!==o&&(e.update(l),i.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l}function a(){i=new WeakMap}function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:a}}const mu=new Tr,gu=new Pr,vu=new Lr,yu=new Xo,bu=[],xu=[],_u=new Float32Array(16),wu=new Float32Array(9),Su=new Float32Array(4);function Mu(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=bu[i];if(void 0===o&&(o=new Float32Array(i),bu[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Eu(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Cu(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Tu(t,e){let n=xu[e];void 0===n&&(n=new Int32Array(e),xu[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Au(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Du(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Eu(n,e))return;t.uniform2fv(this.addr,e),Cu(n,e)}}function Pu(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Eu(n,e))return;t.uniform3fv(this.addr,e),Cu(n,e)}}function Ru(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Eu(n,e))return;t.uniform4fv(this.addr,e),Cu(n,e)}}function Lu(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Eu(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Cu(n,e)}else{if(Eu(n,r))return;Su.set(r),t.uniformMatrix2fv(this.addr,!1,Su),Cu(n,r)}}function Ou(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Eu(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Cu(n,e)}else{if(Eu(n,r))return;wu.set(r),t.uniformMatrix3fv(this.addr,!1,wu),Cu(n,r)}}function ku(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Eu(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Cu(n,e)}else{if(Eu(n,r))return;_u.set(r),t.uniformMatrix4fv(this.addr,!1,_u),Cu(n,r)}}function Iu(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Nu(t,e){const n=this.cache;Eu(n,e)||(t.uniform2iv(this.addr,e),Cu(n,e))}function Bu(t,e){const n=this.cache;Eu(n,e)||(t.uniform3iv(this.addr,e),Cu(n,e))}function Fu(t,e){const n=this.cache;Eu(n,e)||(t.uniform4iv(this.addr,e),Cu(n,e))}function zu(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Uu(t,e){const n=this.cache;Eu(n,e)||(t.uniform2uiv(this.addr,e),Cu(n,e))}function ju(t,e){const n=this.cache;Eu(n,e)||(t.uniform3uiv(this.addr,e),Cu(n,e))}function Vu(t,e){const n=this.cache;Eu(n,e)||(t.uniform4uiv(this.addr,e),Cu(n,e))}function Hu(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||mu,i)}function Wu(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||vu,i)}function Gu(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||yu,i)}function qu(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||gu,i)}function Xu(t){switch(t){case 5126:return Au;case 35664:return Du;case 35665:return Pu;case 35666:return Ru;case 35674:return Lu;case 35675:return Ou;case 35676:return ku;case 5124:case 35670:return Iu;case 35667:case 35671:return Nu;case 35668:case 35672:return Bu;case 35669:case 35673:return Fu;case 5125:return zu;case 36294:return Uu;case 36295:return ju;case 36296:return Vu;case 35678:case 36198:case 36298:case 36306:case 35682:return Hu;case 35679:case 36299:case 36307:return Wu;case 35680:case 36300:case 36308:case 36293:return Gu;case 36289:case 36303:case 36311:case 36292:return qu}}function Yu(t,e){t.uniform1fv(this.addr,e)}function Zu(t,e){const n=Mu(e,this.size,2);t.uniform2fv(this.addr,n)}function Ku(t,e){const n=Mu(e,this.size,3);t.uniform3fv(this.addr,n)}function Ju(t,e){const n=Mu(e,this.size,4);t.uniform4fv(this.addr,n)}function Qu(t,e){const n=Mu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function $u(t,e){const n=Mu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tc(t,e){const n=Mu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ec(t,e){t.uniform1iv(this.addr,e)}function nc(t,e){t.uniform2iv(this.addr,e)}function rc(t,e){t.uniform3iv(this.addr,e)}function ic(t,e){t.uniform4iv(this.addr,e)}function oc(t,e){t.uniform1uiv(this.addr,e)}function ac(t,e){t.uniform2uiv(this.addr,e)}function sc(t,e){t.uniform3uiv(this.addr,e)}function lc(t,e){t.uniform4uiv(this.addr,e)}function uc(t,e,n){const r=e.length,i=Tu(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2D(e[o]||mu,i[o])}function cc(t,e,n){const r=e.length,i=Tu(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(e[o]||vu,i[o])}function hc(t,e,n){const r=e.length,i=Tu(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTextureCube(e[o]||yu,i[o])}function dc(t,e,n){const r=e.length,i=Tu(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||gu,i[o])}function pc(t){switch(t){case 5126:return Yu;case 35664:return Zu;case 35665:return Ku;case 35666:return Ju;case 35674:return Qu;case 35675:return $u;case 35676:return tc;case 5124:case 35670:return ec;case 35667:case 35671:return nc;case 35668:case 35672:return rc;case 35669:case 35673:return ic;case 5125:return oc;case 36294:return ac;case 36295:return sc;case 36296:return lc;case 35678:case 36198:case 36298:case 36306:case 35682:return uc;case 35679:case 36299:case 36307:return cc;case 35680:case 36300:case 36308:case 36293:return hc;case 36289:case 36303:case 36311:case 36292:return dc}}function fc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Xu(e.type)}function mc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=pc(e.type)}function gc(t){this.id=t,this.seq=[],this.map={}}gc.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const vc=/(\w+)(\])?(\[|\.)?/g;function yc(t,e){t.seq.push(e),t.map[e.id]=e}function bc(t,e,n){const r=t.name,i=r.length;vc.lastIndex=0;while(1){const o=vc.exec(r),a=vc.lastIndex;let s=o[1];const l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){yc(n,void 0===u?new fc(s,t,e):new mc(s,t,e));break}{const t=n.map;let e=t[s];void 0===e&&(e=new gc(s),yc(n,e)),n=e}}}function xc(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r),i=t.getUniformLocation(e,n.name);bc(n,i,this)}}function _c(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}xc.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},xc.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},xc.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}},xc.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let wc=0;function Sc(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++)r.push(a+1+": "+n[a]);return r.join("\n")}function Mc(t){switch(t){case bn:return["Linear","( value )"];case xn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Ec(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[0]);return n.toUpperCase()+"\n\n"+i+"\n\n"+Sc(t.getShaderSource(e),r)}return i}function Cc(t,e){const n=Mc(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Tc(t,e){let n;switch(e){case Ht:n="Linear";break;case Wt:n="Reinhard";break;case Gt:n="OptimizedCineon";break;case qt:n="ACESFilmic";break;case Xt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ac(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Rc).join("\n")}function Dc(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Pc(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Rc(t){return""!==t}function Lc(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Oc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ic(t){return t.replace(kc,Nc)}function Nc(t,e){const n=Ll[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ic(n)}const Bc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Fc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zc(t){return t.replace(Fc,jc).replace(Bc,Uc)}function Uc(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),jc(t,e,n,r)}function jc(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Vc(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Hc(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===nt?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===rt?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===it&&(e="SHADOWMAP_TYPE_VSM"),e}function Wc(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Zt:case Kt:e="ENVMAP_TYPE_CUBE";break;case $t:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Gc(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Kt:e="ENVMAP_MODE_REFRACTION";break}return e}function qc(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case zt:e="ENVMAP_BLENDING_MULTIPLY";break;case Ut:e="ENVMAP_BLENDING_MIX";break;case jt:e="ENVMAP_BLENDING_ADD";break}return e}function Xc(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function Yc(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Hc(n),u=Wc(n),c=Gc(n),h=qc(n),d=Xc(n),p=n.isWebGL2?"":Ac(n),f=Dc(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(Rc).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Rc).join("\n"),v.length>0&&(v+="\n")):(g=[Vc(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Rc).join("\n"),v=[p,Vc(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Vt?"#define TONE_MAPPING":"",n.toneMapping!==Vt?Ll["tonemapping_pars_fragment"]:"",n.toneMapping!==Vt?Tc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ll["encodings_pars_fragment"],Cc("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Rc).join("\n")),a=Ic(a),a=Lc(a,n),a=Oc(a,n),s=Ic(s),s=Lc(s,n),s=Oc(s,n),a=zc(a),s=zc(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Rn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Rn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+a,x=y+v+s,_=_c(i,35633,b),w=_c(i,35632,x);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const e=Ec(i,_,"vertex"),n=Ec(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:v}})}let S,M;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new xc(i,m)),S},this.getAttributes=function(){return void 0===M&&(M=Pc(i,m)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=wc++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let Zc=0;class Kc{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Jc(t);e.set(t,n)}return e.get(t)}}class Jc{constructor(t){this.id=Zc++,this.code=t,this.usedTimes=0}}function Qc(t,e,n,r,i,o,a){const s=new Mi,l=new Kc,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(o,s,u,m,g){const v=m.fog,y=g.geometry,b=o.isMeshStandardMaterial?m.environment:null,x=(o.isMeshStandardMaterial?n:e).get(o.envMap||b),_=x&&x.mapping===$t?x.image.height:null,w=f[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==S?S.length:0;let E,C,T,A,D=0;if(void 0!==y.morphAttributes.position&&(D=1),void 0!==y.morphAttributes.normal&&(D=2),void 0!==y.morphAttributes.color&&(D=3),w){const t=kl[w];E=t.vertexShader,C=t.fragmentShader}else E=o.vertexShader,C=o.fragmentShader,l.update(o),T=l.getVertexShaderID(o),A=l.getFragmentShaderID(o);const P=t.getRenderTarget(),R=o.alphaTest>0,L=o.clearcoat>0,O={isWebGL2:c,shaderID:w,shaderName:o.type,vertexShader:E,fragmentShader:C,defines:o.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===P?t.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:bn,map:!!o.map,matcap:!!o.matcap,envMap:!!x,envMapMode:x&&x.mapping,envMapCubeUVHeight:_,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===Mn,tangentSpaceNormalMap:o.normalMapType===Sn,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===xn,clearcoat:L,clearcoatMap:L&&!!o.clearcoatMap,clearcoatRoughnessMap:L&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===ct,alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||!!o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!v,useFog:!0===o.fog,fogExp2:v&&v.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:D,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Vt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===st,flipSided:o.side===at,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return O}function g(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(v(n,e),y(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()}function v(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function y(t,e){s.disableAll(),e.isWebGL2&&s.enable(0),e.supportsVertexTextures&&s.enable(1),e.instancing&&s.enable(2),e.instancingColor&&s.enable(3),e.map&&s.enable(4),e.matcap&&s.enable(5),e.envMap&&s.enable(6),e.lightMap&&s.enable(7),e.aoMap&&s.enable(8),e.emissiveMap&&s.enable(9),e.bumpMap&&s.enable(10),e.normalMap&&s.enable(11),e.objectSpaceNormalMap&&s.enable(12),e.tangentSpaceNormalMap&&s.enable(13),e.clearcoat&&s.enable(14),e.clearcoatMap&&s.enable(15),e.clearcoatRoughnessMap&&s.enable(16),e.clearcoatNormalMap&&s.enable(17),e.displacementMap&&s.enable(18),e.specularMap&&s.enable(19),e.roughnessMap&&s.enable(20),e.metalnessMap&&s.enable(21),e.gradientMap&&s.enable(22),e.alphaMap&&s.enable(23),e.alphaTest&&s.enable(24),e.vertexColors&&s.enable(25),e.vertexAlphas&&s.enable(26),e.vertexUvs&&s.enable(27),e.vertexTangents&&s.enable(28),e.uvsVertexOnly&&s.enable(29),e.fog&&s.enable(30),t.push(s.mask),s.disableAll(),e.useFog&&s.enable(0),e.flatShading&&s.enable(1),e.logarithmicDepthBuffer&&s.enable(2),e.skinning&&s.enable(3),e.morphTargets&&s.enable(4),e.morphNormals&&s.enable(5),e.morphColors&&s.enable(6),e.premultipliedAlpha&&s.enable(7),e.shadowMapEnabled&&s.enable(8),e.physicallyCorrectLights&&s.enable(9),e.doubleSided&&s.enable(10),e.flipSided&&s.enable(11),e.useDepthPacking&&s.enable(12),e.dithering&&s.enable(13),e.specularIntensityMap&&s.enable(14),e.specularColorMap&&s.enable(15),e.transmission&&s.enable(16),e.transmissionMap&&s.enable(17),e.thicknessMap&&s.enable(18),e.sheen&&s.enable(19),e.sheenColorMap&&s.enable(20),e.sheenRoughnessMap&&s.enable(21),e.decodeVideoTexture&&s.enable(22),e.opaque&&s.enable(23),t.push(s.mask)}function b(t){const e=f[t.type];let n;if(e){const t=kl[e];n=Fo.clone(t.uniforms)}else n=t.uniforms;return n}function x(e,n){let r;for(let t=0,i=u.length;t<i;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Yc(t,n,e,o),u.push(r)),r}function _(t){if(0===--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}}function w(t){l.remove(t)}function S(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:b,acquireProgram:x,releaseProgram:_,releaseShaderCache:w,programs:u,dispose:S}}function $c(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function th(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function eh(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function nh(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(n,r,i,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}function s(t,e,o,s,l,u){const c=a(t,e,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)}function l(t,e,o,s,l,u){const c=a(t,e,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)}function u(t,e){n.length>1&&n.sort(t||th),r.length>1&&r.sort(e||eh),i.length>1&&i.sort(e||eh)}function c(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:c,sort:u}}function rh(){let t=new WeakMap;function e(e,n){let r;return!1===t.has(e)?(r=new nh,t.set(e,[r])):n>=t.get(e).length?(r=new nh,t.get(e).push(r)):r=t.get(e)[n],r}function n(){t=new WeakMap}return{get:e,dispose:n}}function ih(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Nr,color:new _r};break;case"SpotLight":n={position:new Nr,direction:new Nr,color:new _r,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Nr,color:new _r,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Nr,skyColor:new _r,groundColor:new _r};break;case"RectAreaLight":n={color:new _r,position:new Nr,halfWidth:new Nr,halfHeight:new Nr};break}return t[e.id]=n,n}}}function oh(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sr};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sr};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let ah=0;function sh(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function lh(t,e){const n=new ih,r=oh(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)i.probe.push(new Nr);const o=new Nr,a=new pi,s=new pi;function l(o,a){let s=0,l=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;o.sort(sh);const y=!0!==a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,b=e.intensity,x=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*b*y,l+=a.g*b*y,u+=a.b*b*y;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(b*y),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=_,i.spotShadowMatrix[d]=e.shadow.matrix,v++}i.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*y),t.groundColor.copy(e.groundColor).multiplyScalar(b*y),i.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ol.LTC_FLOAT_1,i.rectAreaLTC2=Ol.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ol.LTC_HALF_1,i.rectAreaLTC2=Ol.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;const b=i.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v||(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,b.directionalLength=c,b.pointLength=h,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,i.version=ah++)}function u(t,e){let n=0,r=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(e.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),u++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),c++}}}return{setup:l,setupView:u,state:i}}function uh(t,e){const n=new lh(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(t){r.push(t)}function s(t){i.push(t)}function l(t){n.setup(r,t)}function u(t){n.setupView(r,t)}const c={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:c,setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function ch(t,e){let n=new WeakMap;function r(r,i=0){let o;return!1===n.has(r)?(o=new uh(t,e),n.set(r,[o])):i>=n.get(r).length?(o=new uh(t,e),n.get(r).push(o)):o=n.get(r)[i],o}function i(){n=new WeakMap}return{get:r,dispose:i}}class hh extends Ji{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=_n,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}hh.prototype.isMeshDepthMaterial=!0;class dh extends Ji{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Nr,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}dh.prototype.isMeshDistanceMaterial=!0;const ph="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fh="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function mh(t,e,n){let r=new ea;const i=new sr,o=new sr,a=new Ar,s=new hh({depthPacking:wn}),l=new dh,u={},c=n.maxTextureSize,h={0:at,1:ot,2:st},d=new jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sr},radius:{value:4}},vertexShader:ph,fragmentShader:fh}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new fo;f.setAttribute("position",new eo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Lo(f,d),g=this;function v(n,r){const i=e.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,p,m,null)}function y(e,n,r,i,o,a){let c=null;const d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(c=void 0!==d?d:!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const t=c.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=c.clone(),r[e]=i),c=i}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=a===it?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function b(n,i,o,a,s){if(!1===n.visible)return;const l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===it)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=i[u.materialIndex];if(c&&c.visible){const e=y(n,c,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,u)}}}else if(i.visible){const e=y(n,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const u=n.children;for(let t=0,e=u.length;t<e;t++)b(u[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nt,this.render=function(e,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(ut),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=e.length;p<f;p++){const l=e[p],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const h=u.getFrameExtents();if(i.multiply(h),o.copy(u.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/h.x),i.x=o.x*h.x,u.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/h.y),i.y=o.y*h.y,u.mapSize.y=o.y)),null!==u.map||u.isPointLightShadow||this.type!==it||(u.map=new Dr(i.x,i.y),u.map.texture.name=l.name+".shadowMap",u.mapPass=new Dr(i.x,i.y),u.camera.updateProjectionMatrix()),null===u.map){const t={minFilter:re,magFilter:re,format:we};u.map=new Dr(i.x,i.y,t),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const f=u.getViewportCount();for(let t=0;t<f;t++){const e=u.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),u.updateMatrices(l,t),r=u.getFrustum(),b(n,s,u.camera,l,this.type)}u.isPointLightShadow||this.type!==it||v(u,s),u.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,u,h)}}function gh(t,e,n){const r=n.isWebGL2;function i(){let e=!1;const n=new Ar;let r=null;const i=new Ar(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?j(2929):V(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case Rt:t.depthFunc(512);break;case Lt:t.depthFunc(519);break;case Ot:t.depthFunc(513);break;case kt:t.depthFunc(515);break;case It:t.depthFunc(514);break;case Nt:t.depthFunc(518);break;case Bt:t.depthFunc(516);break;case Ft:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function a(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?j(2960):V(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&l===r||(t.stencilOp(e,n,r),a=e,s=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}}const s=new i,l=new o,u=new a;let c={},h={},d=new WeakMap,p=[],f=null,m=!1,g=null,v=null,y=null,b=null,x=null,_=null,w=null,S=!1,M=null,E=null,C=null,T=null,A=null;const D=t.getParameter(35661);let P=!1,R=0;const L=t.getParameter(7938);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(L)[1]),P=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),P=R>=2);let O=null,k={};const I=t.getParameter(3088),N=t.getParameter(2978),B=(new Ar).fromArray(I),F=(new Ar).fromArray(N);function z(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const U={};function j(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function V(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}function H(e,n){return h[e]!==n&&(t.bindFramebuffer(e,n),h[e]=n,r&&(36009===e&&(h[36160]=n),36160===e&&(h[36009]=n)),!0)}function W(r,i){let o=p,a=!1;if(r)if(o=d.get(i),void 0===o&&(o=[],d.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,n=t.length;e<n;e++)o[e]=36064+e;o.length=t.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function G(e){return f!==e&&(t.useProgram(e),f=e,!0)}U[3553]=z(3553,3553,1),U[34067]=z(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),j(2929),l.setFunc(kt),K(!1),J(tt),j(2884),Y(ut);const q={[mt]:32774,[gt]:32778,[vt]:32779};if(r)q[yt]=32775,q[bt]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(q[yt]=t.MIN_EXT,q[bt]=t.MAX_EXT)}const X={[xt]:0,[_t]:1,[wt]:768,[Mt]:770,[Pt]:776,[At]:774,[Ct]:772,[St]:769,[Et]:771,[Dt]:775,[Tt]:773};function Y(e,n,r,i,o,a,s,l){if(e!==ut){if(!1===m&&(j(3042),m=!0),e===ft)o=o||n,a=a||r,s=s||i,n===v&&o===x||(t.blendEquationSeparate(q[n],q[o]),v=n,x=o),r===y&&i===b&&a===_&&s===w||(t.blendFuncSeparate(X[r],X[i],X[a],X[s]),y=r,b=i,_=a,w=s),g=e,S=null;else if(e!==g||l!==S){if(v===mt&&x===mt||(t.blendEquation(32774),v=mt,x=mt),l)switch(e){case ct:t.blendFuncSeparate(1,771,1,771);break;case ht:t.blendFunc(1,1);break;case dt:t.blendFuncSeparate(0,769,0,1);break;case pt:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case ct:t.blendFuncSeparate(770,771,1,771);break;case ht:t.blendFunc(770,1);break;case dt:t.blendFuncSeparate(0,769,0,1);break;case pt:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}y=null,b=null,_=null,w=null,g=e,S=l}}else!0===m&&(V(3042),m=!1)}function Z(t,e){t.side===st?V(2884):j(2884);let n=t.side===at;e&&(n=!n),K(n),t.blending===ct&&!1===t.transparent?Y(ut):Y(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),s.setMask(t.colorWrite);const r=t.stencilWrite;u.setTest(r),r&&(u.setMask(t.stencilWriteMask),u.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),u.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),nt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?j(32926):V(32926)}function K(e){M!==e&&(e?t.frontFace(2304):t.frontFace(2305),M=e)}function J(e){e!==$?(j(2884),e!==E&&(e===tt?t.cullFace(1029):e===et?t.cullFace(1028):t.cullFace(1032))):V(2884),E=e}function Q(e){e!==C&&(P&&t.lineWidth(e),C=e)}function nt(e,n,r){e?(j(32823),T===n&&A===r||(t.polygonOffset(n,r),T=n,A=r)):V(32823)}function rt(t){t?j(3089):V(3089)}function it(e){void 0===e&&(e=33984+D-1),O!==e&&(t.activeTexture(e),O=e)}function ot(e,n){null===O&&it();let r=k[O];void 0===r&&(r={type:void 0,texture:void 0},k[O]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||U[e]),r.type=e,r.texture=n)}function lt(){const e=k[O];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function zt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ut(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function qt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(e){!1===B.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),B.copy(e))}function Yt(e){!1===F.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))}function Zt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},O=null,k={},h={},d=new WeakMap,p=[],f=null,m=!1,g=null,v=null,y=null,b=null,x=null,_=null,w=null,S=!1,M=null,E=null,C=null,T=null,A=null,B.set(0,0,t.canvas.width,t.canvas.height),F.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:j,disable:V,bindFramebuffer:H,drawBuffers:W,useProgram:G,setBlending:Y,setMaterial:Z,setFlipSided:K,setCullFace:J,setLineWidth:Q,setPolygonOffset:nt,setScissorTest:rt,activeTexture:it,bindTexture:ot,unbindTexture:lt,compressedTexImage2D:zt,texImage2D:Gt,texImage3D:qt,texStorage2D:Ht,texStorage3D:Wt,texSubImage2D:Ut,texSubImage3D:jt,compressedTexSubImage2D:Vt,scissor:Xt,viewport:Yt,reset:Zt}}function vh(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(it){}function y(t,e){return v?new OffscreenCanvas(t,e):cr("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?nr:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;s.width=o,s.height=a;const l=s.getContext("2d");return l.drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function x(t){return tr(t.width)&&tr(t.height)}function _(t){return!s&&(t.wrapS!==ee||t.wrapT!==ee||t.minFilter!==re&&t.minFilter!==ae)}function w(t,e){return t.generateMipmaps&&e&&t.minFilter!==re&&t.minFilter!==ae}function S(e){t.generateMipmap(e)}function M(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===xn&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function E(t,e,n){return!0===w(t,n)||t.isFramebufferTexture&&t.minFilter!==re&&t.minFilter!==ae?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function C(t){return t===re||t===ie||t===oe?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T),D(e),e.isVideoTexture&&f.delete(e)}function A(t){const e=t.target;e.removeEventListener("dispose",A),R(e)}function D(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&P(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}function P(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source,o=g.get(i);delete o[n.__cacheKey],a.memory.textures--}function R(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const e=r.get(n[s]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(e)}let L=0;function O(){L=0}function k(){const t=L;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),L+=1,t}function I(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function N(t,e){const i=r.get(t);if(t.isVideoTexture&&nt(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void W(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function B(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))}function F(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))}function z(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?G(i,t,e):(n.activeTexture(33984+e),n.bindTexture(34067,i.__webglTexture))}const U={[te]:10497,[ee]:33071,[ne]:33648},j={[re]:9728,[ie]:9984,[oe]:9986,[ae]:9729,[se]:9985,[le]:9987};function V(n,o,a){if(a?(t.texParameteri(n,10242,U[o.wrapS]),t.texParameteri(n,10243,U[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,U[o.wrapR]),t.texParameteri(n,10240,j[o.magFilter]),t.texParameteri(n,10241,j[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===ee&&o.wrapT===ee||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,C(o.magFilter)),t.texParameteri(n,10241,C(o.minFilter)),o.minFilter!==re&&o.minFilter!==ae&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.type===me&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===ge&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function H(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=I(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&P(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function W(e,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const l=H(e,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),u.version!==u.__currentVersion||!0===l){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const i=_(r)&&!1===x(r.image);let h=b(r.image,i,!1,c);h=rt(r,h);const d=x(h)||s,p=o.convert(r.format,r.encoding);let f,m=o.convert(r.type),g=M(r.internalFormat,p,m,r.encoding,r.isVideoTexture);V(a,r,d);const v=r.mipmaps,y=s&&!0!==r.isVideoTexture,C=void 0===e.__version||!0===l,T=E(r,h,d);if(r.isDepthTexture)g=6402,s?g=r.type===me?36012:r.type===fe?33190:r.type===be?35056:33189:r.type===me&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ee&&6402===g&&r.type!==de&&r.type!==fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=de,m=o.convert(r.type)),r.format===Ce&&6402===g&&(g=34041,r.type!==be&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=be,m=o.convert(r.type))),C&&(y?n.texStorage2D(3553,1,g,h.width,h.height):n.texImage2D(3553,0,g,h.width,h.height,0,p,m,null));else if(r.isDataTexture)if(v.length>0&&d){y&&C&&n.texStorage2D(3553,T,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],y?n.texSubImage2D(3553,t,0,0,f.width,f.height,p,m,f.data):n.texImage2D(3553,t,g,f.width,f.height,0,p,m,f.data);r.generateMipmaps=!1}else y?(C&&n.texStorage2D(3553,T,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,h.width,h.height,p,m,h.data)):n.texImage2D(3553,0,g,h.width,h.height,0,p,m,h.data);else if(r.isCompressedTexture){y&&C&&n.texStorage2D(3553,T,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],r.format!==we?null!==p?y?n.compressedTexSubImage2D(3553,t,0,0,f.width,f.height,p,f.data):n.compressedTexImage2D(3553,t,g,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):y?n.texSubImage2D(3553,t,0,0,f.width,f.height,p,m,f.data):n.texImage2D(3553,t,g,f.width,f.height,0,p,m,f.data)}else if(r.isDataArrayTexture)y?(C&&n.texStorage3D(35866,T,g,h.width,h.height,h.depth),n.texSubImage3D(35866,0,0,0,0,h.width,h.height,h.depth,p,m,h.data)):n.texImage3D(35866,0,g,h.width,h.height,h.depth,0,p,m,h.data);else if(r.isData3DTexture)y?(C&&n.texStorage3D(32879,T,g,h.width,h.height,h.depth),n.texSubImage3D(32879,0,0,0,0,h.width,h.height,h.depth,p,m,h.data)):n.texImage3D(32879,0,g,h.width,h.height,h.depth,0,p,m,h.data);else if(r.isFramebufferTexture){if(C)if(y)n.texStorage2D(3553,T,g,h.width,h.height);else{let t=h.width,e=h.height;for(let r=0;r<T;r++)n.texImage2D(3553,r,g,t,e,0,p,m,null),t>>=1,e>>=1}}else if(v.length>0&&d){y&&C&&n.texStorage2D(3553,T,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],y?n.texSubImage2D(3553,t,0,0,p,m,f):n.texImage2D(3553,t,g,p,m,f);r.generateMipmaps=!1}else y?(C&&n.texStorage2D(3553,T,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,p,m,h)):n.texImage2D(3553,0,g,p,m,h);w(r,d)&&S(a),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function G(e,r,i){if(6!==r.image.length)return;const a=H(e,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===a){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const i=r.isCompressedTexture||r.image[0].isCompressedTexture,a=r.image[0]&&r.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=i||a?a?r.image[t].image:r.image[t]:b(r.image[t],!1,!0,u),c[t]=rt(r,c[t]);const h=c[0],d=x(h)||s,p=o.convert(r.format,r.encoding),f=o.convert(r.type),m=M(r.internalFormat,p,f,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===e.__version;let y,_=E(r,h,d);if(V(34067,r,d),i){g&&v&&n.texStorage2D(34067,_,m,h.width,h.height);for(let t=0;t<6;t++){y=c[t].mipmaps;for(let e=0;e<y.length;e++){const i=y[e];r.format!==we?null!==p?g?n.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+t,e,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+t,e,m,i.width,i.height,0,p,f,i.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&_++,n.texStorage2D(34067,_,m,c[0].width,c[0].height));for(let t=0;t<6;t++)if(a){g?n.texSubImage2D(34069+t,0,0,0,c[t].width,c[t].height,p,f,c[t].data):n.texImage2D(34069+t,0,m,c[t].width,c[t].height,0,p,f,c[t].data);for(let e=0;e<y.length;e++){const r=y[e],i=r.image[t].image;g?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+t,e+1,m,i.width,i.height,0,p,f,i.data)}}else{g?n.texSubImage2D(34069+t,0,0,0,p,f,c[t]):n.texImage2D(34069+t,0,m,p,f,c[t]);for(let e=0;e<y.length;e++){const r=y[e];g?n.texSubImage2D(34069+t,e+1,0,0,p,f,r.image[t]):n.texImage2D(34069+t,e+1,m,p,f,r.image[t])}}}w(r,d)&&S(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function q(e,i,a,s,l){const u=o.convert(a.format,a.encoding),c=o.convert(a.type),h=M(a.internalFormat,u,c,a.encoding),p=r.get(i);p.__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,e),et(i)?d.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,tt(i)):t.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function X(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||et(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===me?i=36012:e.type===fe&&(i=33190));const r=tt(n);et(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=tt(n);r&&!1===et(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(e.format,e.encoding),a=o.convert(e.type),s=M(e.internalFormat,i,a,e.encoding),l=tt(n);r&&!1===et(n)?t.renderbufferStorageMultisample(36161,l,s,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,l,s,n.width,n.height):t.renderbufferStorage(36161,s,n.width,n.height)}t.bindRenderbuffer(36161,null)}function Y(e,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=tt(i);if(i.depthTexture.format===Ee)et(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==Ce)throw new Error("Unknown depthTexture format");et(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):t.framebufferTexture2D(36160,33306,3553,a,0)}}function Z(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");Y(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),X(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),X(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function K(t,e,n){const i=r.get(t);void 0!==e&&q(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&Z(t)}function J(e){const l=e.texture,u=r.get(e),c=r.get(l);e.addEventListener("dispose",A),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=x(e)||s;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else if(u.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(s&&e.samples>0&&!1===et(e)){u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer);const r=o.convert(l.format,l.encoding),i=o.convert(l.type),a=M(l.internalFormat,r,i,l.encoding),s=tt(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),X(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}if(h){n.bindTexture(34067,c.__webglTexture),V(34067,l,p);for(let t=0;t<6;t++)q(u.__webglFramebuffer[t],e,l,36064,34069+t);w(l,p)&&S(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),V(3553,o,p),q(u.__webglFramebuffer,e,o,36064+i,3553),w(o,p)&&S(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),V(t,l,p),q(u.__webglFramebuffer,e,l,36064,t),w(l,p)&&S(t),n.unbindTexture()}e.depthBuffer&&Z(e)}function Q(t){const e=x(t)||s,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(w(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(e,i),S(e),n.unbindTexture()}}}function $(e){if(s&&e.samples>0&&!1===et(e)){const i=e.width,o=e.height;let a=16384;const s=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&s.push(l);const u=r.get(e),c=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;!1===c&&(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024)),n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer),!0===c&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),p&&t.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}}function tt(t){return Math.min(h,t.samples)}function et(t){const n=r.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function nt(t){const e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}function rt(t,n){const r=t.encoding,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Ln||r!==bn&&(r===xn?!1===s?!0===e.has("EXT_sRGB")&&i===we?(t.format=Ln,t.minFilter=ae,t.generateMipmaps=!1):n=Sr.sRGBToLinear(n):i===we&&o===ue||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=k,this.resetTextureUnits=O,this.setTexture2D=N,this.setTexture2DArray=B,this.setTexture3D=F,this.setTextureCube=z,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=$,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=q,this.useMultisampledRTT=et}function yh(t,e,n){const r=n.isWebGL2;function i(n,i=null){let o;if(n===ue)return 5121;if(n===ve)return 32819;if(n===ye)return 32820;if(n===ce)return 5120;if(n===he)return 5122;if(n===de)return 5123;if(n===pe)return 5124;if(n===fe)return 5125;if(n===me)return 5126;if(n===ge)return r?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===xe)return 6406;if(n===we)return 6408;if(n===Se)return 6409;if(n===Me)return 6410;if(n===Ee)return 6402;if(n===Ce)return 34041;if(n===Te)return 6403;if(n===_e)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Ln)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Ae)return 36244;if(n===De)return 33319;if(n===Pe)return 33320;if(n===Re)return 36249;if(n===Le||n===Oe||n===ke||n===Ie)if(i===xn){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Le)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Oe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ke)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ie)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Le)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Oe)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ke)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ie)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ne||n===Be||n===Fe||n===ze){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===Ne)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Be)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Fe)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ze)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ue)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===je||n===Ve){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===je)return i===xn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Ve)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===He||n===We||n===Ge||n===qe||n===Xe||n===Ye||n===Ze||n===Ke||n===Je||n===Qe||n===$e||n===tn||n===en||n===nn){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===He)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===We)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ge)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===qe)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Xe)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Ye)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ze)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ke)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Je)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Qe)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===$e)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===tn)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===en)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===nn)return i===xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===rn){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===rn)return i===xn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===be?r?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}return{convert:i}}class bh extends Ho{constructor(t=[]){super(),this.cameras=t}}bh.prototype.isArrayCamera=!0;class xh extends Fi{constructor(){super(),this.type="Group"}}xh.prototype.isGroup=!0;const _h={type:"move"};class wh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new xh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new xh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Nr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Nr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new xh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Nr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Nr),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_h))),l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const t=new xh;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[o.jointName]=t,l.add(t)}const r=l.joints[o.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&a>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class Sh extends Tr{constructor(t,e,n,r,i,o,a,s,l,u){if(u=void 0!==u?u:Ee,u!==Ee&&u!==Ce)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ee&&(n=de),void 0===n&&u===Ce&&(n=be),super(null,r,i,o,a,s,u,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:re,this.minFilter=void 0!==s?s:re,this.flipY=!1,this.generateMipmaps=!1}}Sh.prototype.isDepthTexture=!0;class Mh extends On{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,l=null,u=null,c=null,h=null,d=null;const p=e.getContextAttributes();let f=null,m=null;const g=[],v=new Map,y=new Ho;y.layers.enable(1),y.viewport=new Ar;const b=new Ho;b.layers.enable(2),b.viewport=new Ar;const x=[y,b],_=new bh;_.layers.enable(1),_.layers.enable(2);let w=null,S=null;function M(t){const e=v.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function E(){v.forEach((function(t,e){t.disconnect(e)})),v.clear(),w=null,S=null,t.setRenderTarget(f),h=null,c=null,u=null,r=null,m=null,O.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(t){const e=r.inputSources;for(let n=0;n<e.length;n++){const t="right"===e[n].handedness?1:0;v.set(e[n],g[t])}for(let n=0;n<t.removed.length;n++){const e=t.removed[n],r=v.get(e);r&&(r.dispatchEvent({type:"disconnected",data:e}),v.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],r=v.get(e);r&&r.dispatchEvent({type:"connected",data:e})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new wh,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new wh,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new wh,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(t){s=t},this.getBaseLayer=function(){return null!==c?c:h},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(s){if(r=s,null!==r){if(f=t.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",E),r.addEventListener("inputsourceschange",C),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),m=new Dr(h.framebufferWidth,h.framebufferHeight,{format:we,type:ue,encoding:t.outputEncoding})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?Ce:Ee,o=p.stencil?be:de);const s={colorFormat:t.outputEncoding===xn?35907:32856,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,e),c=u.createProjectionLayer(s),r.updateRenderState({layers:[c]}),m=new Dr(c.textureWidth,c.textureHeight,{format:we,type:ue,depthTexture:new Sh(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});const l=t.properties.get(m);l.__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=await r.requestReferenceSpace(a),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const T=new Nr,A=new Nr;function D(t,e,n){T.setFromMatrixPosition(e.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=T.distanceTo(A),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=s+f,y=d-m,b=p+(r-m),x=l*s/v*g,_=u*s/v*g;t.projectionMatrix.makePerspective(y,b,x,_,g,v)}function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;_.near=b.near=y.near=t.near,_.far=b.far=y.far=t.far,w===_.near&&S===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);const e=t.parent,n=_.cameras;P(_,e);for(let r=0;r<n.length;r++)P(n[r],e);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.position.copy(_.position),t.quaternion.copy(_.quaternion),t.scale.copy(_.scale),t.matrix.copy(_.matrix),t.matrixWorld.copy(_.matrixWorld);const i=t.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?D(_,y,b):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let R=null;function L(e,n){if(l=n.getViewerPose(s||o),d=n,null!==l){const e=l.views;null!==h&&(t.setRenderTargetFramebuffer(m,h.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==h)o=h.getViewport(i);else{const e=u.getViewSubImage(c,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(m,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}const a=x[r];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&_.matrix.copy(a.matrix),!0===n&&_.cameras.push(a)}}const i=r.inputSources;for(let t=0;t<g.length;t++){const e=i[t],r=v.get(e);void 0!==r&&r.update(e,n,s||o)}R&&R(e,n),d=null}const O=new na;O.setAnimationLoop(L),this.setAnimationLoop=function(t){R=t},this.dispose=function(){}}}function Eh(t,e){function n(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function r(t,e,n,r,m){e.isMeshBasicMaterial||e.isMeshLambertMaterial?i(t,e):e.isMeshToonMaterial?(i(t,e),c(t,e)):e.isMeshPhongMaterial?(i(t,e),u(t,e)):e.isMeshStandardMaterial?(i(t,e),h(t,e),e.isMeshPhysicalMaterial&&d(t,e,m)):e.isMeshMatcapMaterial?(i(t,e),p(t,e)):e.isMeshDepthMaterial?i(t,e):e.isMeshDistanceMaterial?(i(t,e),f(t,e)):e.isMeshNormalMaterial?i(t,e):e.isLineBasicMaterial?(o(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?s(t,e,n,r):e.isSpriteMaterial?l(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===at&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===at&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}function o(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function s(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function l(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function c(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function h(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}function d(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===at&&t.clearcoatNormalScale.value.negate())),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}function p(t,e){e.matcap&&(t.matcap.value=e.matcap)}function f(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Ch(){const t=cr("canvas");return t.style.display="block",t}function Th(t={}){const e=void 0!==t.canvas?t.canvas:Ch(),n=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,i=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,s=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let c;c=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let h=null,d=null;const p=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=bn,this.physicallyCorrectLights=!1,this.toneMapping=Vt,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,x=-1,_=null;const w=new Ar,S=new Ar;let M=null,E=e.width,C=e.height,T=1,A=null,D=null;const P=new Ar(0,0,E,C),R=new Ar(0,0,E,C);let L=!1;const O=new ea;let k=!1,I=!1,N=null;const B=new pi,F=new sr,z=new Nr,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?T:1}let V,H,W,G,q,X,Y,Z,J,Q,$,tt,et,nt,rt,it,lt,ut,ct,ht,dt,pt,ft,mt=n;function gt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${K}`),e.addEventListener("webglcontextlost",bt,!1),e.addEventListener("webglcontextrestored",xt,!1),null===mt){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),mt=gt(e,t),null===mt)throw gt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===mt.getShaderPrecisionFormat&&(mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(zt){throw console.error("THREE.WebGLRenderer: "+zt.message),zt}function vt(){V=new au(mt),H=new Fl(mt,V,t),V.init(H),pt=new yh(mt,V,H),W=new gh(mt,V,H),G=new uu,q=new $c,X=new vh(mt,V,W,q,H,pt,G),Y=new Ul(m),Z=new ou(m),J=new ra(mt,H),ft=new Nl(mt,V,J,H),Q=new su(mt,J,G,ft),$=new fu(mt,Q,J,G),ct=new pu(mt,H,X),it=new zl(q),tt=new Qc(m,Y,Z,V,H,ft,it),et=new Eh(m,q),nt=new rh,rt=new ch(V,H),ut=new Il(m,Y,W,$,c,a),lt=new mh(m,$,H),ht=new Bl(mt,V,G,H),dt=new lu(mt,V,G,H),G.programs=tt.programs,m.capabilities=H,m.extensions=V,m.properties=q,m.renderLists=nt,m.shadowMap=lt,m.state=W,m.info=G}vt();const yt=new Mh(m,mt);function bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=G.autoReset,e=lt.enabled,n=lt.autoUpdate,r=lt.needsUpdate,i=lt.type;vt(),G.autoReset=t,lt.enabled=e,lt.autoUpdate=n,lt.needsUpdate=r,lt.type=i}function _t(t){const e=t.target;e.removeEventListener("dispose",_t),wt(e)}function wt(t){St(t),q.remove(t)}function St(t){const e=q.get(t).programs;void 0!==e&&(e.forEach((function(t){tt.releaseProgram(t)})),t.isShaderMaterial&&tt.releaseShaderCache(t))}this.xr=yt,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){const t=V.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=V.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(t){void 0!==t&&(T=t,this.setSize(E,C,!1))},this.getSize=function(t){return t.set(E,C)},this.setSize=function(t,n,r){yt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,C=n,e.width=Math.floor(t*T),e.height=Math.floor(n*T),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(E*T,C*T).floor()},this.setDrawingBufferSize=function(t,n,r){E=t,C=n,T=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),W.viewport(w.copy(P).multiplyScalar(T).floor())},this.getScissor=function(t){return t.copy(R)},this.setScissor=function(t,e,n,r){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,r),W.scissor(S.copy(R).multiplyScalar(T).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(t){W.setScissorTest(L=t)},this.setOpaqueSort=function(t){A=t},this.setTransparentSort=function(t){D=t},this.getClearColor=function(t){return t.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),mt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",bt,!1),e.removeEventListener("webglcontextrestored",xt,!1),nt.dispose(),rt.dispose(),q.dispose(),Y.dispose(),Z.dispose(),$.dispose(),ft.dispose(),tt.dispose(),yt.dispose(),yt.removeEventListener("sessionstart",Ct),yt.removeEventListener("sessionend",Tt),N&&(N.dispose(),N=null),At.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=U);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Nt(t,e,n,r,i);W.setMaterial(r,a);let l=n.index;const u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c,h=1;!0===r.wireframe&&(l=Q.getWireframeAttribute(n),h=2),ft.setup(i,r,s,n,l);let d=ht;null!==l&&(c=J.get(l),d=dt,d.setIndex(c));const p=null!==l?l.count:u.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),b=Math.min(p,f+m,g+v)-1,x=Math.max(0,b-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),W.setLineWidth(t*j()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,t)}else d.render(y,x)}},this.compile=function(t,e){d=rt.get(t),d.init(),f.push(d),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];kt(i,t,e)}else kt(n,t,e)})),f.pop(),d=null};let Mt=null;function Et(t){Mt&&Mt(t)}function Ct(){At.stop()}function Tt(){At.start()}const At=new na;function Dt(t,e,n,r){if(!1===t.visible)return;const i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||O.intersectsSprite(t)){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=$.update(t),i=t.material;i.visible&&h.push(t,e,i,n,z.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==G.render.frame&&(t.skeleton.update(),t.skeleton.frame=G.render.frame),!t.frustumCulled||O.intersectsObject(t))){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=$.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(t,e,s,n,z.z,a)}}else i.visible&&h.push(t,e,i,n,z.z,null)}const o=t.children;for(let a=0,s=o.length;a<s;a++)Dt(o[a],e,n,r)}function Pt(t,e,n,r){const i=t.opaque,o=t.transmissive,a=t.transparent;d.setupLightsView(n),o.length>0&&Rt(i,e,n),r&&W.viewport(w.copy(r)),i.length>0&&Lt(i,e,n),o.length>0&&Lt(o,e,n),a.length>0&&Lt(a,e,n),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Rt(t,e,n){const r=H.isWebGL2;null===N&&(N=new Dr(1,1,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?ge:ue,minFilter:le,samples:r&&!0===o?4:0})),m.getDrawingBufferSize(F),r?N.setSize(F.x,F.y):N.setSize(nr(F.x),nr(F.y));const i=m.getRenderTarget();m.setRenderTarget(N),m.clear();const a=m.toneMapping;m.toneMapping=Vt,Lt(t,e,n),m.toneMapping=a,X.updateMultisampleRenderTarget(N),X.updateRenderTargetMipmap(N),m.setRenderTarget(i)}function Lt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=null===r?o.material:r,u=o.group;a.layers.test(n.layers)&&Ot(a,e,n,s,l,u)}}function Ot(t,e,n,r,i,o){t.onBeforeRender(m,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(m,e,n,r,t,o),!0===i.transparent&&i.side===st?(i.side=at,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,o),i.side=ot,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,o),i.side=st):m.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(m,e,n,r,i,o)}function kt(t,e,n){!0!==e.isScene&&(e=U);const r=q.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=tt.getParameters(t,i.state,o,e,n),l=tt.getProgramCacheKey(s);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?Z:Y).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",_t),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return It(t,s),c}else s.uniforms=tt.getUniforms(t),t.onBuild(n,s,m),t.onBeforeCompile(s,m),c=tt.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=it.uniform),It(t,s),r.needsLights=Ft(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=c.getUniforms(),f=xc.seqWithValue(p.seq,h);return r.currentProgram=c,r.uniformsList=f,c}function It(t,e){const n=q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function Nt(t,e,n,r,i){!0!==e.isScene&&(e=U),X.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:bn,l=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:Vt,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,w=q.get(r),S=d.state.lights;if(!0===k&&(!0===I||t!==_)){const e=t===_&&r.id===x;it.setState(r,t,e)}let M=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==s||i.isInstancedMesh&&!1===w.instancing?M=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?M=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===r.fog&&w.fog!==o?M=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===it.numPlanes&&w.numIntersection===it.numIntersection?(w.vertexAlphas!==u||w.vertexTangents!==c||w.morphTargets!==h||w.morphNormals!==p||w.morphColors!==f||w.toneMapping!==g||!0===H.isWebGL2&&w.morphTargetsCount!==y)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,w.__version=r.version);let E=w.currentProgram;!0===M&&(E=kt(r,e,i));let A=!1,D=!1,P=!1;const R=E.getUniforms(),L=w.uniforms;if(W.useProgram(E.program)&&(A=!0,D=!0,P=!0),r.id!==x&&(x=r.id,D=!0),A||_!==t){if(R.setValue(mt,"projectionMatrix",t.projectionMatrix),H.logarithmicDepthBuffer&&R.setValue(mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),_!==t&&(_=t,D=!0,P=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=R.map.cameraPosition;void 0!==e&&e.setValue(mt,z.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(mt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(mt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(mt,i,"bindMatrix"),R.setOptional(mt,i,"bindMatrixInverse");const t=i.skeleton;t&&(H.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(mt,"boneTexture",t.boneTexture,X),R.setValue(mt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;return(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===H.isWebGL2)&&ct.update(i,n,r,E),(D||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,R.setValue(mt,"receiveShadow",i.receiveShadow)),D&&(R.setValue(mt,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&Bt(L,P),o&&!0===r.fog&&et.refreshFogUniforms(L,o),et.refreshMaterialUniforms(L,r,T,C,N),xc.upload(mt,w.uniformsList,L,X)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(xc.upload(mt,w.uniformsList,L,X),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&R.setValue(mt,"center",i.center),R.setValue(mt,"modelViewMatrix",i.modelViewMatrix),R.setValue(mt,"normalMatrix",i.normalMatrix),R.setValue(mt,"modelMatrix",i.matrixWorld),E}function Bt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Ft(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}At.setAnimationLoop(Et),"undefined"!==typeof self&&At.setContext(self),this.setAnimationLoop=function(t){Mt=t,yt.setAnimationLoop(t),null===t?At.stop():At.start()},yt.addEventListener("sessionstart",Ct),yt.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===yt.enabled&&!0===yt.isPresenting&&(!0===yt.cameraAutoUpdate&&yt.updateCamera(e),e=yt.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,b),d=rt.get(t,f.length),d.init(),f.push(d),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),O.setFromProjectionMatrix(B),I=this.localClippingEnabled,k=it.init(this.clippingPlanes,I,e),h=nt.get(t,p.length),h.init(),p.push(h),Dt(t,e,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,D),!0===k&&it.beginShadows();const n=d.state.shadowsArray;if(lt.render(n,t,e),!0===k&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(h,t),d.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Pt(h,t,r,r.viewport)}}else Pt(h,t,e);null!==b&&(X.updateMultisampleRenderTarget(b),X.updateRenderTargetMipmap(b)),!0===t.isScene&&t.onAfterRender(m,t,e),ft.resetDefaultState(),x=-1,_=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(t,e,n){q.get(t.texture).__webglTexture=e,q.get(t.depthTexture).__webglTexture=n;const r=q.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){b=t,v=e,y=n;let r=!0;if(t){const e=q.get(t);void 0!==e.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===e.__webglFramebuffer?X.setupRenderTarget(t):e.__hasExternalTextures&&X.rebindTextures(t,q.get(t.texture).__webglTexture,q.get(t.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(t){const n=t.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=r[e],o=!0):i=H.isWebGL2&&t.samples>0&&!1===X.useMultisampledRTT(t)?q.get(t).__webglMultisampledFramebuffer:r,w.copy(t.viewport),S.copy(t.scissor),M=t.scissorTest}else w.copy(P).multiplyScalar(T).floor(),S.copy(R).multiplyScalar(T).floor(),M=L;const s=W.bindFramebuffer(36160,i);if(s&&H.drawBuffers&&r&&W.drawBuffers(t,i),W.viewport(w),W.scissor(S),W.setScissorTest(M),o){const r=q.get(t.texture);mt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(a){const r=q.get(t.texture),i=e||0;mt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}x=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){W.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,l=a.type;if(s!==we&&pt.convert(s)!==mt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===ge&&(V.has("EXT_color_buffer_half_float")||H.isWebGL2&&V.has("EXT_color_buffer_float"));if(l!==ue&&pt.convert(l)!==mt.getParameter(35738)&&(l!==me||!(H.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&mt.readPixels(e,n,r,i,pt.convert(s),pt.convert(l),o)}finally{const t=null!==b?q.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);X.setTexture2D(e,0),mt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,o),W.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=pt.convert(n.format),s=pt.convert(n.type);X.setTexture2D(n,0),mt.pixelStorei(37440,n.flipY),mt.pixelStorei(37441,n.premultiplyAlpha),mt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?mt.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?mt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):mt.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&mt.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=pt.convert(r.format),u=pt.convert(r.type);let c;if(r.isData3DTexture)X.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),c=35866}mt.pixelStorei(37440,r.flipY),mt.pixelStorei(37441,r.premultiplyAlpha),mt.pixelStorei(3317,r.unpackAlignment);const h=mt.getParameter(3314),d=mt.getParameter(32878),p=mt.getParameter(3316),f=mt.getParameter(3315),g=mt.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;mt.pixelStorei(3314,v.width),mt.pixelStorei(32878,v.height),mt.pixelStorei(3316,t.min.x),mt.pixelStorei(3315,t.min.y),mt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?mt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),mt.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,v.data)):mt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v),mt.pixelStorei(3314,h),mt.pixelStorei(32878,d),mt.pixelStorei(3316,p),mt.pixelStorei(3315,f),mt.pixelStorei(32877,g),0===i&&r.generateMipmaps&&mt.generateMipmap(c),W.unbindTexture()},this.initTexture=function(t){X.setTexture2D(t,0),W.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,W.reset(),ft.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Th.prototype.isWebGLRenderer=!0;class Ah extends Th{}Ah.prototype.isWebGL1Renderer=!0;class Dh{constructor(t,e=1,n=1e3){this.name="",this.color=new _r(t),this.near=e,this.far=n}clone(){return new Dh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Dh.prototype.isFog=!0;class Ph extends Fi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}Ph.prototype.isScene=!0;class Rh{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Dn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fn()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Rh.prototype.isInterleavedBuffer=!0;const Lh=new Nr;class Oh{constructor(t,e,n,r=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Lh.fromBufferAttribute(this,e),Lh.applyMatrix4(t),this.setXYZ(e,Lh.x,Lh.y,Lh.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Lh.fromBufferAttribute(this,e),Lh.applyNormalMatrix(t),this.setXYZ(e,Lh.x,Lh.y,Lh.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Lh.fromBufferAttribute(this,e),Lh.transformDirection(t),this.setXYZ(e,Lh.x,Lh.y,Lh.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new eo(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Oh(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Oh.prototype.isInterleavedBufferAttribute=!0;class kh extends Ji{constructor(t){super(),this.type="SpriteMaterial",this.color=new _r(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Ih;kh.prototype.isSpriteMaterial=!0;const Nh=new Nr,Bh=new Nr,Fh=new Nr,zh=new sr,Uh=new sr,jh=new pi,Vh=new Nr,Hh=new Nr,Wh=new Nr,Gh=new sr,qh=new sr,Xh=new sr;class Yh extends Fi{constructor(t){if(super(),this.type="Sprite",void 0===Ih){Ih=new fo;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Rh(t,5);Ih.setIndex([0,1,2,0,2,3]),Ih.setAttribute("position",new Oh(e,3,0,!1)),Ih.setAttribute("uv",new Oh(e,2,3,!1))}this.geometry=Ih,this.material=void 0!==t?t:new kh,this.center=new sr(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bh.setFromMatrixScale(this.matrixWorld),jh.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Fh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Bh.multiplyScalar(-Fh.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Zh(Vh.set(-.5,-.5,0),Fh,o,Bh,r,i),Zh(Hh.set(.5,-.5,0),Fh,o,Bh,r,i),Zh(Wh.set(.5,.5,0),Fh,o,Bh,r,i),Gh.set(0,0),qh.set(1,0),Xh.set(1,1);let a=t.ray.intersectTriangle(Vh,Hh,Wh,!1,Nh);if(null===a&&(Zh(Hh.set(-.5,.5,0),Fh,o,Bh,r,i),qh.set(0,1),a=t.ray.intersectTriangle(Vh,Wh,Hh,!1,Nh),null===a))return;const s=t.ray.origin.distanceTo(Nh);s<t.near||s>t.far||e.push({distance:s,point:Nh.clone(),uv:Zi.getUV(Nh,Vh,Hh,Wh,Gh,qh,Xh,new sr),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Zh(t,e,n,r,i,o){zh.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Uh.x=o*zh.x-i*zh.y,Uh.y=i*zh.x+o*zh.y):Uh.copy(zh),t.copy(e),t.x+=Uh.x,t.y+=Uh.y,t.applyMatrix4(jh)}Yh.prototype.isSprite=!0;const Kh=new Nr,Jh=new Ar,Qh=new Ar,$h=new Nr,td=new pi;class ed extends Lo{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pi,this.bindMatrixInverse=new pi}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ar,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;Jh.fromBufferAttribute(r.attributes.skinIndex,t),Qh.fromBufferAttribute(r.attributes.skinWeight,t),Kh.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=Qh.getComponent(i);if(0!==t){const r=Jh.getComponent(i);td.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector($h.copy(Kh).applyMatrix4(td),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}ed.prototype.isSkinnedMesh=!0;class nd extends Fi{constructor(){super(),this.type="Bone"}}nd.prototype.isBone=!0;class rd extends Tr{constructor(t=null,e=1,n=1,r,i,o,a,s,l=re,u=re,c,h){super(null,o,a,s,l,u,r,i,c,h),this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}rd.prototype.isDataTexture=!0;const id=new pi,od=new pi;class ad{constructor(t=[],e=[]){this.uuid=Fn(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new pi)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new pi;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=t.length;i<o;i++){const r=t[i]?t[i].matrixWorld:od;id.multiplyMatrices(r,e[i]),id.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new ad(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=er(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new rd(e,t,t,we,me);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new nd),this.bones.push(i),this.boneInverses.push((new pi).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class sd extends eo{constructor(t,e,n,r=1){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}sd.prototype.isInstancedBufferAttribute=!0;const ld=new pi,ud=new pi,cd=[],hd=new Lo;class dd extends Lo{constructor(t,e,n){super(t,e),this.instanceMatrix=new sd(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(hd.geometry=this.geometry,hd.material=this.material,void 0!==hd.material)for(let i=0;i<r;i++){this.getMatrixAt(i,ld),ud.multiplyMatrices(n,ld),hd.matrixWorld=ud,hd.raycast(t,cd);for(let t=0,n=cd.length;t<n;t++){const n=cd[t];n.instanceId=i,n.object=this,e.push(n)}cd.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new sd(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}dd.prototype.isInstancedMesh=!0;class pd extends Ji{constructor(t){super(),this.type="LineBasicMaterial",this.color=new _r(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}pd.prototype.isLineBasicMaterial=!0;const fd=new Nr,md=new Nr,gd=new pi,vd=new di,yd=new ii;class bd extends Fi{constructor(t=new fo,e=new pd){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)fd.fromBufferAttribute(e,t-1),md.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=fd.distanceTo(md);t.setAttribute("lineDistance",new oo(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yd.copy(n.boundingSphere),yd.applyMatrix4(r),yd.radius+=i,!1===t.ray.intersectsSphere(yd))return;gd.copy(r).invert(),vd.copy(t.ray).applyMatrix4(gd);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Nr,u=new Nr,c=new Nr,h=new Nr,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes,a=i.position;if(null!==r){const n=Math.max(0,o.start),i=Math.min(r.count,o.start+o.count);for(let o=n,p=i-1;o<p;o+=d){const n=r.getX(o),i=r.getX(o+1);l.fromBufferAttribute(a,n),u.fromBufferAttribute(a,i);const d=vd.distanceSqToSegment(l,u,h,c);if(d>s)continue;h.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(h);p<t.near||p>t.far||e.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,o.start),r=Math.min(a.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=d){l.fromBufferAttribute(a,i),u.fromBufferAttribute(a,i+1);const n=vd.distanceSqToSegment(l,u,h,c);if(n>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}bd.prototype.isLine=!0;const xd=new Nr,_d=new Nr;class wd extends bd{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)xd.fromBufferAttribute(e,t),_d.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+xd.distanceTo(_d);t.setAttribute("lineDistance",new oo(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}wd.prototype.isLineSegments=!0;class Sd extends bd{constructor(t,e){super(t,e),this.type="LineLoop"}}Sd.prototype.isLineLoop=!0;class Md extends Ji{constructor(t){super(),this.type="PointsMaterial",this.color=new _r(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}Md.prototype.isPointsMaterial=!0;const Ed=new pi,Cd=new di,Td=new ii,Ad=new Nr;class Dd extends Fi{constructor(t=new fo,e=new Md){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Td.copy(n.boundingSphere),Td.applyMatrix4(r),Td.radius+=i,!1===t.ray.intersectsSphere(Td))return;Ed.copy(r).invert(),Cd.copy(t.ray).applyMatrix4(Ed);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes,l=a.position;if(null!==i){const n=Math.max(0,o.start),a=Math.min(i.count,o.start+o.count);for(let o=n,u=a;o<u;o++){const n=i.getX(o);Ad.fromBufferAttribute(l,n),Pd(Ad,n,s,r,t,e,this)}}else{const n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);for(let o=n,a=i;o<a;o++)Ad.fromBufferAttribute(l,o),Pd(Ad,o,s,r,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Pd(t,e,n,r,i,o,a){const s=Cd.distanceSqToPoint(t);if(s<n){const n=new Nr;Cd.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}Dd.prototype.isPoints=!0;class Rd extends Tr{constructor(t,e,n,r,i,o,a,s,l){super(t,e,n,r,i,o,a,s,l),this.minFilter=void 0!==o?o:ae,this.magFilter=void 0!==i?i:ae,this.generateMipmaps=!1;const u=this;function c(){u.needsUpdate=!0,t.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image,e="requestVideoFrameCallback"in t;!1===e&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Rd.prototype.isVideoTexture=!0;class Ld extends Tr{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=re,this.minFilter=re,this.generateMipmaps=!1,this.needsUpdate=!0}}Ld.prototype.isFramebufferTexture=!0;class Od extends Tr{constructor(t,e,n,r,i,o,a,s,l,u,c,h){super(null,o,a,s,l,u,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}Od.prototype.isCompressedTexture=!0;class kd extends Tr{constructor(t,e,n,r,i,o,a,s,l){super(t,e,n,r,i,o,a,s,l),this.needsUpdate=!0}}kd.prototype.isCanvasTexture=!0;class Id{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,l=i-1;while(s<=l)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const u=n[r],c=n[r+1],h=c-u,d=(o-u)/h,p=(r+d)/(i-1);return p}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=e||(o.isVector2?new sr:new Nr);return s.copy(a).sub(o).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Nr,r=[],i=[],o=[],a=new Nr,s=new pi;for(let d=0;d<=t;d++){const e=d/t;r[d]=this.getTangentAt(e,new Nr)}i[0]=new Nr,o[0]=new Nr;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(zn(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,t))}o[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(zn(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Nd extends Id{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){const n=e||new sr,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+t*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*t-r*e+this.aX,l=n*e+r*t+this.aY}return n.set(s,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Nd.prototype.isEllipseCurve=!0;class Bd extends Nd{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.type="ArcCurve"}}function Fd(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,u=(n-e)/a-(r-e)/(a+s)+(r-n)/s;l*=a,u*=a,i(e,n,l,u)},calc:function(i){const o=i*i,a=o*i;return t+e*i+n*o+r*a}}}Bd.prototype.isArcCurve=!0;const zd=new Nr,Ud=new Fd,jd=new Fd,Vd=new Fd;class Hd extends Id{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Nr){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let a,s,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===u&&l===i-1&&(l=i-2,u=1),this.closed||l>0?a=r[(l-1)%i]:(zd.subVectors(r[0],r[1]).add(r[0]),a=zd);const c=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?s=r[(l+2)%i]:(zd.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=zd),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Ud.initNonuniformCatmullRom(a.x,c.x,h.x,s.x,e,n,r),jd.initNonuniformCatmullRom(a.y,c.y,h.y,s.y,e,n,r),Vd.initNonuniformCatmullRom(a.z,c.z,h.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(Ud.initCatmullRom(a.x,c.x,h.x,s.x,this.tension),jd.initCatmullRom(a.y,c.y,h.y,s.y,this.tension),Vd.initCatmullRom(a.z,c.z,h.z,s.z,this.tension));return n.set(Ud.calc(u),jd.calc(u),Vd.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Nr).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Wd(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t,l=t*s;return(2*n-2*r+o+a)*l+(-3*n+3*r-2*o-a)*s+o*t+n}function Gd(t,e){const n=1-t;return n*n*e}function qd(t,e){return 2*(1-t)*t*e}function Xd(t,e){return t*t*e}function Yd(t,e,n,r){return Gd(t,e)+qd(t,n)+Xd(t,r)}function Zd(t,e){const n=1-t;return n*n*n*e}function Kd(t,e){const n=1-t;return 3*n*n*t*e}function Jd(t,e){return 3*(1-t)*t*t*e}function Qd(t,e){return t*t*t*e}function $d(t,e,n,r,i){return Zd(t,e)+Kd(t,n)+Jd(t,r)+Qd(t,i)}Hd.prototype.isCatmullRomCurve3=!0;class tp extends Id{constructor(t=new sr,e=new sr,n=new sr,r=new sr){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new sr){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set($d(t,r.x,i.x,o.x,a.x),$d(t,r.y,i.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}tp.prototype.isCubicBezierCurve=!0;class ep extends Id{constructor(t=new Nr,e=new Nr,n=new Nr,r=new Nr){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Nr){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set($d(t,r.x,i.x,o.x,a.x),$d(t,r.y,i.y,o.y,a.y),$d(t,r.z,i.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ep.prototype.isCubicBezierCurve3=!0;class np extends Id{constructor(t=new sr,e=new sr){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new sr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new sr;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}np.prototype.isLineCurve=!0;class rp extends Id{constructor(t=new Nr,e=new Nr){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Nr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ip extends Id{constructor(t=new sr,e=new sr,n=new sr){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new sr){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Yd(t,r.x,i.x,o.x),Yd(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}ip.prototype.isQuadraticBezierCurve=!0;class op extends Id{constructor(t=new Nr,e=new Nr,n=new Nr){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Nr){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Yd(t,r.x,i.x,o.x),Yd(t,r.y,i.y,o.y),Yd(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}op.prototype.isQuadraticBezierCurve3=!0;class ap extends Id{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new sr){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Wd(a,s.x,l.x,u.x,c.x),Wd(a,s.y,l.y,u.y,c.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new sr).fromArray(n))}return this}}ap.prototype.isSplineCurve=!0;var sp=Object.freeze({__proto__:null,ArcCurve:Bd,CatmullRomCurve3:Hd,CubicBezierCurve:tp,CubicBezierCurve3:ep,EllipseCurve:Nd,LineCurve:np,LineCurve3:rp,QuadraticBezierCurve:ip,QuadraticBezierCurve3:op,SplineCurve:ap});class lp extends Id{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new np(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let i=0;while(i<r.length){if(r[i]>=n){const t=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new sp[n.type]).fromJSON(n))}return this}}class up extends lp{constructor(t){super(),this.type="Path",this.currentPoint=new sr,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new np(this.currentPoint.clone(),new sr(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new ip(this.currentPoint.clone(),new sr(t,e),new sr(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,o){const a=new tp(this.currentPoint.clone(),new sr(t,e),new sr(n,r),new sr(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new ap(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}absarc(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}ellipse(t,e,n,r,i,o,a,s){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,n,r,i,o,a,s),this}absellipse(t,e,n,r,i,o,a,s){const l=new Nd(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class cp extends fo{constructor(t=1,e=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},e=Math.max(3,e);const i=[],o=[],a=[],s=[],l=new Nr,u=new sr;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let c=0,h=3;c<=e;c++,h+=3){const i=n+c/e*r;l.x=t*Math.cos(i),l.y=t*Math.sin(i),o.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(o[h]/t+1)/2,u.y=(o[h+1]/t+1)/2,s.push(u.x,u.y)}for(let c=1;c<=e;c++)i.push(c,c+1,0);this.setIndex(i),this.setAttribute("position",new oo(o,3)),this.setAttribute("normal",new oo(a,3)),this.setAttribute("uv",new oo(s,2))}static fromJSON(t){return new cp(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class hp extends fo{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(){const o=new Nr,v=new Nr;let y=0;const b=(e-t)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,y=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*s+a,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,c.push(v.x,v.y,v.z),o.set(l,b,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),u.push(p++)}f.push(u)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=f[e][t],r=f[e+1][t],i=f[e+1][t+1],o=f[e][t+1];u.push(n,r,o),u.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}function y(n){const i=p,o=new sr,f=new Nr;let v=0;const y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)c.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=r;t++){const e=t/r,n=e*s+a,i=Math.cos(n),l=Math.sin(n);f.x=y*l,f.y=m*b,f.z=y*i,c.push(f.x,f.y,f.z),h.push(0,b,0),o.x=.5*i+.5,o.y=.5*l*b+.5,d.push(o.x,o.y),p++}for(let t=0;t<r;t++){const e=i+t,r=x+t;!0===n?u.push(r,r+1,e):u.push(r+1,r,e),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new oo(c,3)),this.setAttribute("normal",new oo(h,3)),this.setAttribute("uv",new oo(d,2))}static fromJSON(t){return new hp(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class dp extends hp{constructor(t=1,e=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(t){return new dp(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class pp extends fo{constructor(t=[],e=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};const i=[],o=[];function a(t){const n=new Nr,r=new Nr,i=new Nr;for(let o=0;o<e.length;o+=3)d(e[o+0],n),d(e[o+1],r),d(e[o+2],i),s(n,r,i,t)}function s(t,e,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=t.clone().lerp(n,a/i),s=e.clone().lerp(n,a/i),l=i-a;for(let t=0;t<=l;t++)o[a][t]=0===t&&a===i?r:r.clone().lerp(s,t/l)}for(let a=0;a<i;a++)for(let t=0;t<2*(i-a)-1;t++){const e=Math.floor(t/2);t%2===0?(h(o[a][e+1]),h(o[a+1][e]),h(o[a][e])):(h(o[a][e+1]),h(o[a+1][e+1]),h(o[a+1][e]))}}function l(t){const e=new Nr;for(let n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}function u(){const t=new Nr;for(let e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];const n=m(t)/2/Math.PI+.5,r=g(t)/Math.PI+.5;o.push(n,1-r)}p(),c()}function c(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}function h(t){i.push(t.x,t.y,t.z)}function d(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function p(){const t=new Nr,e=new Nr,n=new Nr,r=new Nr,a=new sr,s=new sr,l=new sr;for(let u=0,c=0;u<i.length;u+=9,c+=6){t.set(i[u+0],i[u+1],i[u+2]),e.set(i[u+3],i[u+4],i[u+5]),n.set(i[u+6],i[u+7],i[u+8]),a.set(o[c+0],o[c+1]),s.set(o[c+2],o[c+3]),l.set(o[c+4],o[c+5]),r.copy(t).add(e).add(n).divideScalar(3);const h=m(r);f(a,c+0,t,h),f(s,c+2,e,h),f(l,c+4,n,h)}}function f(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function g(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}a(r),l(n),u(),this.setAttribute("position",new oo(i,3)),this.setAttribute("normal",new oo(i.slice(),3)),this.setAttribute("uv",new oo(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new pp(t.vertices,t.indices,t.radius,t.details)}}new Nr,new Nr,new Nr,new Zi;class fp extends up{constructor(t){super(t),this.uuid=Fn(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new up).fromJSON(n))}return this}}const mp={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=gp(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,u,c,h,d,p;if(r&&(o=Sp(t,e,o,n)),t.length>80*n){s=u=t[0],l=c=t[1];for(let e=n;e<i;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);p=Math.max(u-s,c-l),p=0!==p?1/p:0}return yp(o,a,n,s,l,p),a}};function gp(t,e,n,r,i){let o,a;if(i===qp(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Hp(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Hp(o,t[o],t[o+1],a);return a&&Ip(a,a.next)&&(Wp(a),a=a.next),a}function vp(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!Ip(r,r.next)&&0!==kp(r.prev,r,r.next))r=r.next;else{if(Wp(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function yp(t,e,n,r,i,o,a){if(!t)return;!a&&o&&Ap(t,r,i,o);let s,l,u=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,o?xp(t,r,i,o):bp(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Wp(t),t=l.next,u=l.next;else if(t=l,t===u){a?1===a?(t=_p(vp(t),e,n),yp(t,e,n,r,i,o,2)):2===a&&wp(t,e,n,r,i,o):yp(vp(t),e,n,r,i,o,1);break}}function bp(t){const e=t.prev,n=t,r=t.next;if(kp(e,n,r)>=0)return!1;let i=t.next.next;while(i!==t.prev){if(Lp(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&kp(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function xp(t,e,n,r){const i=t.prev,o=t,a=t.next;if(kp(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Pp(s,l,e,n,r),d=Pp(u,c,e,n,r);let p=t.prevZ,f=t.nextZ;while(p&&p.z>=h&&f&&f.z<=d){if(p!==t.prev&&p!==t.next&&Lp(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&kp(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&Lp(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&kp(f.prev,f,f.next)>=0)return!1;f=f.nextZ}while(p&&p.z>=h){if(p!==t.prev&&p!==t.next&&Lp(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&kp(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(f&&f.z<=d){if(f!==t.prev&&f!==t.next&&Lp(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&kp(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function _p(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!Ip(i,o)&&Np(i,r,r.next,o)&&Up(i,o)&&Up(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Wp(r),Wp(r.next),r=t=o),r=r.next}while(r!==t);return vp(r)}function wp(t,e,n,r,i,o){let a=t;do{let t=a.next.next;while(t!==a.prev){if(a.i!==t.i&&Op(a,t)){let s=Vp(a,t);return a=vp(a,a.next),s=vp(s,s.next),yp(a,e,n,r,i,o),void yp(s,e,n,r,i,o)}t=t.next}a=a.next}while(a!==t)}function Sp(t,e,n,r){const i=[];let o,a,s,l,u;for(o=0,a=e.length;o<a;o++)s=e[o]*r,l=o<a-1?e[o+1]*r:t.length,u=gp(t,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Rp(u));for(i.sort(Mp),o=0;o<i.length;o++)Ep(i[o],n),n=vp(n,n.next);return n}function Mp(t,e){return t.x-e.x}function Ep(t,e){if(e=Cp(t,e),e){const n=Vp(e,t);vp(e,e.next),vp(n,n.next)}}function Cp(t,e){let n=e;const r=t.x,i=t.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>a){if(a=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===a)return o;const s=o,l=o.x,u=o.y;let c,h=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&Lp(i<u?r:a,i,l,u,i<u?a:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),Up(n,t)&&(c<h||c===h&&(n.x>o.x||n.x===o.x&&Tp(o,n)))&&(o=n,h=c)),n=n.next}while(n!==s);return o}function Tp(t,e){return kp(t.prev,t,e.prev)<0&&kp(e.next,t,t.next)<0}function Ap(t,e,n,r){let i=t;do{null===i.z&&(i.z=Pp(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Dp(i)}function Dp(t){let e,n,r,i,o,a,s,l,u=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<u;e++)if(s++,r=r.nextZ,!r)break;l=u;while(s>0||l>0&&r)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return t}function Pp(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Rp(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Lp(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Op(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!zp(t,e)&&(Up(t,e)&&Up(e,t)&&jp(t,e)&&(kp(t.prev,t,e.prev)||kp(t,e.prev,e))||Ip(t,e)&&kp(t.prev,t,t.next)>0&&kp(e.prev,e,e.next)>0)}function kp(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ip(t,e){return t.x===e.x&&t.y===e.y}function Np(t,e,n,r){const i=Fp(kp(t,e,n)),o=Fp(kp(t,e,r)),a=Fp(kp(n,r,t)),s=Fp(kp(n,r,e));return i!==o&&a!==s||(!(0!==i||!Bp(t,n,e))||(!(0!==o||!Bp(t,r,e))||(!(0!==a||!Bp(n,t,r))||!(0!==s||!Bp(n,e,r)))))}function Bp(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Fp(t){return t>0?1:t<0?-1:0}function zp(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Np(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Up(t,e){return kp(t.prev,t,t.next)<0?kp(t,e,t.next)>=0&&kp(t,t.prev,e)>=0:kp(t,e,t.prev)<0||kp(t,t.next,e)<0}function jp(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function Vp(t,e){const n=new Gp(t.i,t.x,t.y),r=new Gp(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Hp(t,e,n,r){const i=new Gp(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Gp(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qp(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}class Xp{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return Xp.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];Yp(t),Zp(n,t);let o=t.length;e.forEach(Yp);for(let s=0;s<e.length;s++)r.push(o),o+=e[s].length,Zp(n,e[s]);const a=mp.triangulate(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function Yp(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Zp(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Kp extends fo{constructor(t=new fp([new sr(.5,.5),new sr(-.5,.5),new sr(-.5,-.5),new sr(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let a=0,s=t.length;a<s;a++){const e=t[a];o(e)}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,u=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:c-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Jp;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,v,y,b,x,_=!1;f&&(g=f.getSpacedPoints(s),_=!0,u=!1,v=f.computeFrenetFrames(s,!1),y=new Nr,b=new Nr,x=new Nr),u||(p=0,c=0,h=0,d=0);const w=t.extractPoints(a);let S=w.shape;const M=w.holes,E=!Xp.isClockWise(S);if(E){S=S.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];Xp.isClockWise(e)&&(M[t]=e.reverse())}}const C=Xp.triangulateShape(S,M),T=S;for(let e=0,n=M.length;e<n;e++){const t=M[e];S=S.concat(t)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const D=S.length,P=C.length;function R(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,u=n.y-t.y,c=a*a+s*s,h=a*u-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=e.x-s/h,f=e.y+a/h,m=n.x-u/d,g=n.y+l/d,v=((m-p)*u-(g-f)*l)/(a*u-s*l);r=p+a*v-t.x,i=f+s*v-t.y;const y=r*r+i*i;if(y<=2)return new sr(r,i);o=Math.sqrt(y/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(u)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new sr(r/o,i/o)}const L=[];for(let e=0,n=T.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[e]=R(T[e],T[r],T[i]);const O=[];let k,I=L.concat();for(let e=0,n=M.length;e<n;e++){const t=M[e];k=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),k[e]=R(t[e],t[r],t[i]);O.push(k),I=I.concat(k)}for(let e=0;e<p;e++){const t=e/p,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=T.length;e<i;e++){const t=A(T[e],L[e],r);U(t.x,t.y,-n)}for(let e=0,i=M.length;e<i;e++){const t=M[e];k=O[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],k[e],r);U(i.x,i.y,-n)}}}const N=h+d;for(let e=0;e<D;e++){const t=u?A(S[e],I[e],N):S[e];_?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),x.copy(g[0]).add(b).add(y),U(x.x,x.y,x.z)):U(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<D;t++){const n=u?A(S[t],I[t],N):S[t];_?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),x.copy(g[e]).add(b).add(y),U(x.x,x.y,x.z)):U(n.x,n.y,l/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,i=T.length;e<i;e++){const t=A(T[e],L[e],r);U(t.x,t.y,l+n)}for(let e=0,i=M.length;e<i;e++){const t=M[e];k=O[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],k[e],r);_?U(i.x,i.y+g[s-1].y,g[s-1].x+n):U(i.x,i.y,l+n)}}}function B(){const t=r.length/3;if(u){let t=0,e=D*t;for(let n=0;n<P;n++){const t=C[n];j(t[2]+e,t[1]+e,t[0]+e)}t=s+2*p,e=D*t;for(let n=0;n<P;n++){const t=C[n];j(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<P;t++){const e=C[t];j(e[2],e[1],e[0])}for(let t=0;t<P;t++){const e=C[t];j(e[0]+D*s,e[1]+D*s,e[2]+D*s)}}n.addGroup(t,r.length/3-t,0)}function F(){const t=r.length/3;let e=0;z(T,e),e+=T.length;for(let n=0,r=M.length;n<r;n++){const t=M[n];z(t,e),e+=t.length}n.addGroup(t,r.length/3-t,1)}function z(t,e){let n=t.length;while(--n>=0){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=D*t,o=D*(t+1),a=e+r+n,s=e+i+n,l=e+i+o,u=e+r+o;V(a,s,l,u)}}}function U(t,e,n){o.push(t),o.push(e),o.push(n)}function j(t,e,i){H(t),H(e),H(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);W(a[0]),W(a[1]),W(a[2])}function V(t,e,i,o){H(t),H(e),H(o),H(e),H(i),H(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);W(s[0]),W(s[1]),W(s[3]),W(s[1]),W(s[2]),W(s[3])}function H(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function W(t){i.push(t.x),i.push(t.y)}B(),F()}this.setAttribute("position",new oo(r,3)),this.setAttribute("uv",new oo(i,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return Qp(e,n,t)}static fromJSON(t,e){const n=[];for(let i=0,o=t.shapes.length;i<o;i++){const r=e[t.shapes[i]];n.push(r)}const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new sp[r.type]).fromJSON(r)),new Kp(n,t.options)}}const Jp={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],l=e[3*r+1],u=e[3*i],c=e[3*i+1];return[new sr(o,a),new sr(s,l),new sr(u,c)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],l=e[3*n+2],u=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],p=e[3*i+1],f=e[3*i+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-c)<Math.abs(a-u)?[new sr(a,1-l),new sr(u,1-h),new sr(d,1-f),new sr(m,1-v)]:[new sr(s,1-l),new sr(c,1-h),new sr(p,1-f),new sr(g,1-v)]}};function Qp(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const e=t[r];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class $p extends pp{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new $p(t.radius,t.detail)}}class tf extends fo{constructor(t=new fp([new sr(0,.5),new sr(-.5,-.5),new sr(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))l(t);else for(let u=0;u<t.length;u++)l(t[u]),this.addGroup(a,s,u),a+=s,s=0;function l(t){const a=r.length/3,l=t.extractPoints(e);let u=l.shape;const c=l.holes;!1===Xp.isClockWise(u)&&(u=u.reverse());for(let e=0,n=c.length;e<n;e++){const t=c[e];!0===Xp.isClockWise(t)&&(c[e]=t.reverse())}const h=Xp.triangulateShape(u,c);for(let e=0,n=c.length;e<n;e++){const t=c[e];u=u.concat(t)}for(let e=0,n=u.length;e<n;e++){const t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,r=h.length;e<r;e++){const t=h[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new oo(r,3)),this.setAttribute("normal",new oo(i,3)),this.setAttribute("uv",new oo(o,2))}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return ef(e,t)}static fromJSON(t,e){const n=[];for(let r=0,i=t.shapes.length;r<i;r++){const i=e[t.shapes[r]];n.push(i)}return new tf(n,t.curveSegments)}}function ef(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class nf extends fo{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const u=[],c=new Nr,h=new Nr,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0==g&&0==o?y=.5/e:g==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;c.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=t*Math.cos(o+v*a),c.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}u.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=u[g][t+1],r=u[g][t],i=u[g+1][t],a=u[g+1][t+1];(0!==g||o>0)&&d.push(e,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new oo(p,3)),this.setAttribute("normal",new oo(f,3)),this.setAttribute("uv",new oo(m,2))}static fromJSON(t){return new nf(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class rf extends pp{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new rf(t.radius,t.detail)}}class of extends fo{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],u=new Nr,c=new Nr,h=new Nr;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const p=o/r*i,f=d/n*Math.PI*2;c.x=(t+e*Math.cos(f))*Math.cos(p),c.y=(t+e*Math.cos(f))*Math.sin(p),c.z=e*Math.sin(f),a.push(c.x,c.y,c.z),u.x=t*Math.cos(p),u.y=t*Math.sin(p),h.subVectors(c,u).normalize(),s.push(h.x,h.y,h.z),l.push(o/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=r;t++){const e=(r+1)*d+t-1,n=(r+1)*(d-1)+t-1,i=(r+1)*(d-1)+t,a=(r+1)*d+t;o.push(e,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new oo(a,3)),this.setAttribute("normal",new oo(s,3)),this.setAttribute("uv",new oo(l,2))}static fromJSON(t){return new of(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class af extends Ji{constructor(t){super(),this.type="ShadowMaterial",this.color=new _r(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}af.prototype.isShadowMaterial=!0;class sf extends jo{constructor(t){super(t),this.type="RawShaderMaterial"}}sf.prototype.isRawShaderMaterial=!0;class lf extends Ji{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _r(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sn,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}lf.prototype.isMeshStandardMaterial=!0;class uf extends lf{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new _r(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new _r(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _r(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}uf.prototype.isMeshPhysicalMaterial=!0;class cf extends Ji{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new _r(16777215),this.specular=new _r(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sn,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}cf.prototype.isMeshPhongMaterial=!0;class hf extends Ji{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _r(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sn,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}hf.prototype.isMeshToonMaterial=!0;class df extends Ji{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sn,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}df.prototype.isMeshNormalMaterial=!0;class pf extends Ji{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new _r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}pf.prototype.isMeshLambertMaterial=!0;class ff extends Ji{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _r(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sn,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}ff.prototype.isMeshMatcapMaterial=!0;class mf extends pd{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}mf.prototype.isLineDashedMaterial=!0;const gf={ShadowMaterial:af,SpriteMaterial:kh,RawShaderMaterial:sf,ShaderMaterial:jo,PointsMaterial:Md,MeshPhysicalMaterial:uf,MeshStandardMaterial:lf,MeshPhongMaterial:cf,MeshToonMaterial:hf,MeshNormalMaterial:df,MeshLambertMaterial:pf,MeshDepthMaterial:hh,MeshDistanceMaterial:dh,MeshBasicMaterial:Qi,MeshMatcapMaterial:ff,LineDashedMaterial:mf,LineBasicMaterial:pd,Material:Ji};Ji.fromType=function(t){return new gf[t]};const vf={arraySlice:function(t,e,n){return vf.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];while(void 0!==o&&void 0===o[r])o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const t=o.tracks[l],e=t.getValueSize(),s=[],u=[];for(let o=0;o<t.times.length;++o){const a=t.times[o]*i;if(!(a<n||a>=r)){s.push(t.times[o]);for(let n=0;n<e;++n)u.push(t.values[o*e+n])}}0!==s.length&&(t.times=vf.convertArray(s,t.times.constructor),t.values=vf.convertArray(u,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let a=0;a<i;++a){const e=n.tracks[a],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let u=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=e.times.length-1;let d;if(o<=e.times[0]){const t=s,n=l-s;d=vf.arraySlice(e.values,t,n)}else if(o>=e.times[h]){const t=h*l+s,n=t+l-s;d=vf.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=s,r=l-s;t.evaluate(o),d=vf.arraySlice(t.resultBuffer,n,r)}if("quaternion"===r){const t=(new Ir).fromArray(d).normalize().conjugate();t.toArray(d)}const p=i.times.length;for(let t=0;t<p;++t){const e=t*c+u;if("quaternion"===r)Ir.multiplyQuaternionsFlat(i.values,e,d,0,i.values,e);else{const t=c-2*u;for(let n=0;n<t;++n)i.values[e+n]-=d[n]}}}return t.blendMode=mn,t}};class yf{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}while(n<o){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}yf.prototype.beforeStart_=yf.prototype.copySampleValue_,yf.prototype.afterEnd_=yf.prototype.copySampleValue_;class bf extends yf{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:hn,endingEnd:hn}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case dn:i=t,a=2*e-n;break;case pn:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case dn:o=t,s=2*n-e;break;case pn:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==a;++x)i[x]=g*o[u+x]+v*o[l+x]+y*o[s+x]+b*o[c+x];return i}}class xf extends yf{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=(n-e)/(r-e),c=1-u;for(let h=0;h!==a;++h)i[h]=o[l+h]*c+o[s+h]*u;return i}}class _f extends yf{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class wf{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=vf.convertArray(e,this.TimeBufferType),this.values=vf.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:vf.convertArray(t.times,Array),values:vf.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new _f(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new xf(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new bf(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ln:e=this.InterpolantFactoryMethodDiscrete;break;case un:e=this.InterpolantFactoryMethodLinear;break;case cn:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ln;case this.InterpolantFactoryMethodLinear:return un;case this.InterpolantFactoryMethodSmooth:return cn}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=vf.arraySlice(n,i,o),this.values=vf.arraySlice(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==i;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==r&&vf.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const e=r[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){const t=vf.arraySlice(this.times),e=vf.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===cn,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a],l=t[a+1];if(s!==l&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=vf.arraySlice(t,0,o),this.values=vf.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=vf.arraySlice(this.times,0),e=vf.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}wf.prototype.TimeBufferType=Float32Array,wf.prototype.ValueBufferType=Float32Array,wf.prototype.DefaultInterpolation=un;class Sf extends wf{}Sf.prototype.ValueTypeName="bool",Sf.prototype.ValueBufferType=Array,Sf.prototype.DefaultInterpolation=ln,Sf.prototype.InterpolantFactoryMethodLinear=void 0,Sf.prototype.InterpolantFactoryMethodSmooth=void 0;class Mf extends wf{}Mf.prototype.ValueTypeName="color";class Ef extends wf{}Ef.prototype.ValueTypeName="number";class Cf extends yf{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let l=t*a;for(let u=l+a;l!==u;l+=4)Ir.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Tf extends wf{InterpolantFactoryMethodLinear(t){return new Cf(this.times,this.values,this.getValueSize(),t)}}Tf.prototype.ValueTypeName="quaternion",Tf.prototype.DefaultInterpolation=un,Tf.prototype.InterpolantFactoryMethodSmooth=void 0;class Af extends wf{}Af.prototype.ValueTypeName="string",Af.prototype.ValueBufferType=Array,Af.prototype.DefaultInterpolation=ln,Af.prototype.InterpolantFactoryMethodLinear=void 0,Af.prototype.InterpolantFactoryMethodSmooth=void 0;class Df extends wf{}Df.prototype.ValueTypeName="vector";class Pf{constructor(t,e=-1,n,r=fn){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Fn(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(Lf(n[o]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,o=n.length;i!==o;++i)e.push(wf.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let a=0;a<i;a++){let t=[],s=[];t.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const l=vf.getKeyframeOrder(t);t=vf.sortedArray(t,1,l),s=vf.sortedArray(s,1,l),r||0!==t[0]||(t.push(i),s.push(s[0])),o.push(new Ef(".morphTargetInfluences["+e[a].name+"]",t,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=t.length;a<s;a++){const e=t[a],n=e.name.match(i);if(n&&n.length>1){const t=n[1];let i=r[t];i||(r[t]=i=[]),i.push(e)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];vf.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let r=0;r<t[n].morphTargets.length;r++)e[t[n].morphTargets[r]]=-1;for(const i in e){const e=[],o=[];for(let r=0;r!==t[n].morphTargets.length;++r){const r=t[n];e.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new Ef(".morphTargetInfluence["+i+"]",e,o))}s=e.length*o}else{const i=".bones["+e[c].name+"]";n(Df,i+".position",t,"pos",r),n(Tf,i+".quaternion",t,"rot",r),n(Df,i+".scale",t,"scl",r)}}if(0===r.length)return null;const u=new this(i,s,r,a);return u}resetDuration(){const t=this.tracks;let e=0;for(let n=0,r=t.length;n!==r;++n){const t=this.tracks[n];e=Math.max(e,t.times[t.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Rf(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ef;case"vector":case"vector2":case"vector3":case"vector4":return Df;case"color":return Mf;case"quaternion":return Tf;case"bool":case"boolean":return Sf;case"string":return Af}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Lf(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Rf(t.type);if(void 0===t.times){const e=[],n=[];vf.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Of={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class kf{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const If=new kf;class Nf{constructor(t){this.manager=void 0!==t?t:If,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Bf={};class Ff extends Nf{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=Of.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==Bf[t])return void Bf[t].push({onLoad:e,onProgress:n,onError:r});Bf[t]=[],Bf[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Bf[t],r=e.body.getReader(),i=e.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(t){function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}e()}});return new Response(l)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>{const e=new DOMParser;return e.parseFromString(t,a)}));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i,n=e.exec(a),r=n&&n[1]?n[1].toLowerCase():void 0,i=new TextDecoder(r);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{Of.add(t,e);const n=Bf[t];delete Bf[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=Bf[t];if(void 0===n)throw this.manager.itemError(t),e;delete Bf[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class zf extends Nf{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Of.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=cr("img");function s(){u(),Of.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){u(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function u(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class Uf extends Nf{constructor(t){super(t)}load(t,e,n,r){const i=new Xo,o=new zf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let l=0;l<t.length;++l)s(l);return i}}class jf extends Nf{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new rd,a=new Ff(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(t,(function(t){const n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ee,o.wrapT=void 0!==n.wrapT?n.wrapT:ee,o.magFilter=void 0!==n.magFilter?n.magFilter:ae,o.minFilter=void 0!==n.minFilter?n.minFilter:ae,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=le),1===n.mipmapCount&&(o.minFilter=ae),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}class Vf extends Nf{constructor(t){super(t)}load(t,e,n,r){const i=new Tr,o=new zf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class Hf extends Fi{constructor(t,e=1){super(),this.type="Light",this.color=new _r(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}Hf.prototype.isLight=!0;class Wf extends Hf{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Fi.DefaultUp),this.updateMatrix(),this.groundColor=new _r(e)}copy(t){return Hf.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}Wf.prototype.isHemisphereLight=!0;const Gf=new pi,qf=new Nr,Xf=new Nr;class Yf{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sr(512,512),this.map=null,this.mapPass=null,this.matrix=new pi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ea,this._frameExtents=new sr(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;qf.setFromMatrixPosition(t.matrixWorld),e.position.copy(qf),Xf.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Xf),e.updateMatrixWorld(),Gf.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gf),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Zf extends Yf{constructor(){super(new Ho(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*Bn*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Zf.prototype.isSpotLightShadow=!0;class Kf extends Hf{constructor(t,e,n=0,r=Math.PI/3,i=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(Fi.DefaultUp),this.updateMatrix(),this.target=new Fi,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new Zf}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}Kf.prototype.isSpotLight=!0;const Jf=new pi,Qf=new Nr,$f=new Nr;class tm extends Yf{constructor(){super(new Ho(90,1,.5,500)),this._frameExtents=new sr(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new Nr(1,0,0),new Nr(-1,0,0),new Nr(0,0,1),new Nr(0,0,-1),new Nr(0,1,0),new Nr(0,-1,0)],this._cubeUps=[new Nr(0,1,0),new Nr(0,1,0),new Nr(0,1,0),new Nr(0,1,0),new Nr(0,0,1),new Nr(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Qf.setFromMatrixPosition(t.matrixWorld),n.position.copy(Qf),$f.copy(n.position),$f.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt($f),n.updateMatrixWorld(),r.makeTranslation(-Qf.x,-Qf.y,-Qf.z),Jf.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jf)}}tm.prototype.isPointLightShadow=!0;class em extends Hf{constructor(t,e,n=0,r=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new tm}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}em.prototype.isPointLight=!0;class nm extends Yf{constructor(){super(new jl(-5,5,5,-5,.5,500))}}nm.prototype.isDirectionalLightShadow=!0;class rm extends Hf{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Fi.DefaultUp),this.updateMatrix(),this.target=new Fi,this.shadow=new nm}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}rm.prototype.isDirectionalLight=!0;class im extends Hf{constructor(t,e){super(t,e),this.type="AmbientLight"}}im.prototype.isAmbientLight=!0;class om extends Hf{constructor(t,e,n=10,r=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}om.prototype.isRectAreaLight=!0;class am{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Nr)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}am.prototype.isSphericalHarmonics3=!0;class sm extends Hf{constructor(t=new am,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}sm.prototype.isLightProbe=!0;class lm{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let r=0,i=t.length;r<i;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class um extends fo{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}um.prototype.isInstancedBufferGeometry=!0;class cm extends Nf{constructor(t){super(t),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Of.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Of.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}let hm;cm.prototype.isImageBitmapLoader=!0;const dm={getContext:function(){return void 0===hm&&(hm=new(window.AudioContext||window.webkitAudioContext)),hm},setContext:function(t){hm=t}};class pm extends Nf{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new Ff(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{const t=n.slice(0),r=dm.getContext();r.decodeAudioData(t,(function(t){e(t)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(t)}}),n,r)}}class fm extends sm{constructor(t,e,n=1){super(void 0,n);const r=(new _r).set(t),i=(new _r).set(e),o=new Nr(r.r,r.g,r.b),a=new Nr(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}}fm.prototype.isHemisphereLightProbe=!0;class mm extends sm{constructor(t,e=1){super(void 0,e);const n=(new _r).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}mm.prototype.isAmbientLightProbe=!0;class gm{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=vm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=vm();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function vm(){return("undefined"===typeof performance?Date:performance).now()}const ym=new Nr,bm=new Ir,xm=new Nr,_m=new Nr;class wm extends Fi{constructor(){super(),this.type="AudioListener",this.context=dm.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ym,bm,xm),_m.set(0,0,-1).applyQuaternion(bm),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ym.x,t),e.positionY.linearRampToValueAtTime(ym.y,t),e.positionZ.linearRampToValueAtTime(ym.z,t),e.forwardX.linearRampToValueAtTime(_m.x,t),e.forwardY.linearRampToValueAtTime(_m.y,t),e.forwardZ.linearRampToValueAtTime(_m.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(ym.x,ym.y,ym.z),e.setOrientation(_m.x,_m.y,_m.z,n.x,n.y,n.z)}}class Sm extends Fi{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Mm=new Nr,Em=new Ir,Cm=new Nr,Tm=new Nr;class Am extends Sm{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Mm,Em,Cm),Tm.set(0,0,1).applyQuaternion(Em);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Mm.x,t),e.positionY.linearRampToValueAtTime(Mm.y,t),e.positionZ.linearRampToValueAtTime(Mm.z,t),e.orientationX.linearRampToValueAtTime(Tm.x,t),e.orientationY.linearRampToValueAtTime(Tm.y,t),e.orientationZ.linearRampToValueAtTime(Tm.z,t)}else e.setPosition(Mm.x,Mm.y,Mm.z),e.setOrientation(Tm.x,Tm.y,Tm.z)}}class Dm{constructor(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)t[e+o]=t[n+o]}_slerp(t,e,n,r){Ir.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const o=this._workIndex*i;Ir.multiplyQuaternionsFlat(t,o,t,e,t,n),Ir.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}}const Pm="\\[\\]\\.:\\/",Rm=new RegExp("["+Pm+"]","g"),Lm="[^"+Pm+"]",Om="[^"+Pm.replace("\\.","")+"]",km=/((?:WC+[\/:])*)/.source.replace("WC",Lm),Im=/(WCOD+)?/.source.replace("WCOD",Om),Nm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Lm),Bm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Lm),Fm=new RegExp("^"+km+Im+Nm+Bm+"$"),zm=["material","materials","bones"];class Um{constructor(t,e,n){const r=n||jm.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class jm{constructor(t,e,n){this.path=e,this.parsedPath=n||jm.parseTrackName(e),this.node=jm.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new jm.Composite(t,e,n):new jm(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Rm,"")}static parseTrackName(t){const e=Fm.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==zm.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=jm.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jm.Composite=Um,jm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jm.prototype.GetterByBindingType=[jm.prototype._getValue_direct,jm.prototype._getValue_array,jm.prototype._getValue_arrayElement,jm.prototype._getValue_toArray],jm.prototype.SetterByBindingTypeAndVersioning=[[jm.prototype._setValue_direct,jm.prototype._setValue_direct_setNeedsUpdate,jm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jm.prototype._setValue_array,jm.prototype._setValue_array_setNeedsUpdate,jm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jm.prototype._setValue_arrayElement,jm.prototype._setValue_arrayElement_setNeedsUpdate,jm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jm.prototype._setValue_fromArray,jm.prototype._setValue_fromArray_setNeedsUpdate,jm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Vm{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:hn,endingEnd:hn};for(let l=0;l!==o;++l){const t=i[l].createInterpolant(null);a[l]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=an,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case mn:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case fn:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=n===sn;if(0===t)return-1===i?r:o&&1===(1&i)?e-r:r;if(n===on){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=dn,r.endingEnd=dn):(r.endingStart=t?this.zeroSlopeAtStart?dn:hn:pn,r.endingEnd=e?this.zeroSlopeAtEnd?dn:hn:pn)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}class Hm extends On{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let u=l[s];void 0===u&&(u={},l[s]=u);for(let c=0;c!==i;++c){const t=r[c],i=t.name;let l=u[i];if(void 0!==l)++l.referenceCount,o[c]=l;else{if(l=o[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=e&&e._propertyBindings[c].binding.parsedPath;l=new Dm(jm.create(n,i,r),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[c]=l}a[c].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null;const c=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete c[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,r=e.length;n!==r;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new xf(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let o="string"===typeof t?Pf.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:fn),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new Vm(this,o,e,n);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"===typeof t?Pf.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let l=0;l!==n;++l){const n=e[l];n._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const t=n[o].actionByRoot,r=t[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName,i=r[e];if(void 0!==i)for(const o in i){const t=i[o];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Hm.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Wm{constructor(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Wm(void 0===this.value.clone?this.value:this.value.clone())}}class Gm extends Rh{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}Gm.prototype.isInstancedInterleavedBuffer=!0;class qm{constructor(t,e,n=0,r=1/0){this.ray=new di(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Mi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Ym(t,this,n,e),n.sort(Xm),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Ym(t[r],this,n,e);return n.sort(Xm),n}}function Xm(t,e){return t.distance-e.distance}function Ym(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Ym(r[t],e,n,!0)}}class Zm{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(zn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Km=new sr;class Jm{constructor(t=new sr(1/0,1/0),e=new sr(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Km.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=Km.copy(t).clamp(this.min,this.max);return e.sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Jm.prototype.isBox2=!0;const Qm=new Nr,$m=new Nr;class tg{constructor(t=new Nr,e=new Nr){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Qm.subVectors(t,this.start),$m.subVectors(this.end,this.start);const n=$m.dot($m),r=$m.dot(Qm);let i=r/n;return e&&(i=zn(i,0,1)),i}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const eg=new Nr;class ng extends Fi{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new fo,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const t=o/s*Math.PI*2,e=a/s*Math.PI*2;r.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new oo(r,3));const i=new pd({fog:!1,toneMapped:!1});this.cone=new wd(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),eg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(eg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rg=new Nr,ig=new pi,og=new pi;class ag extends wd{constructor(t){const e=sg(t),n=new fo,r=[],i=[],o=new _r(0,0,1),a=new _r(0,1,0);for(let l=0;l<e.length;l++){const t=e[l];t.parent&&t.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new oo(r,3)),n.setAttribute("color",new oo(i,3));const s=new pd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,s),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");og.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<e.length;i++){const t=e[i];t.parent&&t.parent.isBone&&(ig.multiplyMatrices(og,t.matrixWorld),rg.setFromMatrixPosition(ig),r.setXYZ(o,rg.x,rg.y,rg.z),ig.multiplyMatrices(og,t.parent.matrixWorld),rg.setFromMatrixPosition(ig),r.setXYZ(o+1,rg.x,rg.y,rg.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function sg(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,sg(t.children[n]));return e}class lg extends Lo{constructor(t,e,n){const r=new nf(e,4,2),i=new Qi({wireframe:!0,fog:!1,toneMapped:!1});super(r,i),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ug=new Nr,cg=new _r,hg=new _r;class dg extends Fi{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new $p(e);r.rotateY(.5*Math.PI),this.material=new Qi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new eo(o,3)),this.add(new Lo(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");cg.copy(this.light.color),hg.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?cg:hg;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(ug.setFromMatrixPosition(this.light.matrixWorld).negate())}}class pg extends wd{constructor(t=10,e=10,n=4473924,r=8947848){n=new _r(n),r=new _r(r);const i=e/2,o=t/e,a=t/2,s=[],l=[];for(let h=0,d=0,p=-a;h<=e;h++,p+=o){s.push(-a,0,p,a,0,p),s.push(p,0,-a,p,0,a);const t=h===i?n:r;t.toArray(l,d),d+=3,t.toArray(l,d),d+=3,t.toArray(l,d),d+=3,t.toArray(l,d),d+=3}const u=new fo;u.setAttribute("position",new oo(s,3)),u.setAttribute("color",new oo(l,3));const c=new pd({vertexColors:!0,toneMapped:!1});super(u,c),this.type="GridHelper"}}const fg=new Nr,mg=new Nr,gg=new Nr;class vg extends Fi{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new fo;r.setAttribute("position",new oo([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new pd({fog:!1,toneMapped:!1});this.lightPlane=new bd(r,i),this.add(this.lightPlane),r=new fo,r.setAttribute("position",new oo([0,0,0,0,0,1],3)),this.targetLine=new bd(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){fg.setFromMatrixPosition(this.light.matrixWorld),mg.setFromMatrixPosition(this.light.target.matrixWorld),gg.subVectors(mg,fg),this.lightPlane.lookAt(mg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mg),this.targetLine.scale.z=gg.length()}}const yg=new Nr,bg=new Vo;class xg extends wd{constructor(t){const e=new fo,n=new pd({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new _r(16755200),s=new _r(16711680),l=new _r(43775),u=new _r(16777215),c=new _r(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.setAttribute("position",new oo(r,3)),e.setAttribute("color",new oo(i,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap,n=1,r=1;bg.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_g("c",e,t,bg,0,0,-1),_g("t",e,t,bg,0,0,1),_g("n1",e,t,bg,-n,-r,-1),_g("n2",e,t,bg,n,-r,-1),_g("n3",e,t,bg,-n,r,-1),_g("n4",e,t,bg,n,r,-1),_g("f1",e,t,bg,-n,-r,1),_g("f2",e,t,bg,n,-r,1),_g("f3",e,t,bg,-n,r,1),_g("f4",e,t,bg,n,r,1),_g("u1",e,t,bg,.7*n,1.1*r,-1),_g("u2",e,t,bg,.7*-n,1.1*r,-1),_g("u3",e,t,bg,0,2*r,-1),_g("cf1",e,t,bg,-n,0,1),_g("cf2",e,t,bg,n,0,1),_g("cf3",e,t,bg,0,-r,1),_g("cf4",e,t,bg,0,r,1),_g("cn1",e,t,bg,-n,0,-1),_g("cn2",e,t,bg,n,0,-1),_g("cn3",e,t,bg,0,-r,-1),_g("cn4",e,t,bg,0,r,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _g(t,e,n,r,i,o,a){yg.set(i,o,a).unproject(r);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],yg.x,yg.y,yg.z)}}const wg=new zr;class Sg extends wd{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new fo;i.setIndex(new eo(n,1)),i.setAttribute("position",new eo(r,3)),super(i,new pd({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&wg.setFromObject(this.object),wg.isEmpty())return;const e=wg.min,n=wg.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return wd.prototype.copy.call(this,t),this.object=t.object,this}}class Mg{constructor(){this.type="ShapePath",this.color=new _r,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new up,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new fp;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],a=e[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[o],s=-s,a=e[i],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return r}const i=Xp.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,l;const u=[];if(1===o.length)return s=o[0],l=new fp,l.curves=s.curves,u.push(l),u;let c=!i(o[0].getPoints());c=t?!c:c;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let v=0,y=o.length;v<y;v++)s=o[v],p=s.getPoints(),a=i(p),a=t?!a:a,a?(!c&&d[g]&&g++,d[g]={s:new fp,p:p},d[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let t=!1,e=0;for(let n=0,r=d.length;n<r;n++)h[n]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&e++,s?(s=!1,h[i].push(a)):t=!0);s&&h[n].push(a)}}e>0&&!1===t&&(m=h)}for(let v=0,y=d.length;v<y;v++){l=d[v].s,u.push(l),f=m[v];for(let t=0,e=f.length;t<e;t++)l.holes.push(f[t].h)}return u}}class Eg{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=zn(t,-65504,65504),Tg[0]=t;const e=Ag[0],n=e>>23&511;return Dg[n]+((8388607&e)>>Pg[n])}static fromHalfFloat(t){const e=t>>10;return Ag[0]=Rg[Og[e]+(1023&t)]+Lg[e],Tg[0]}}const Cg=new ArrayBuffer(4),Tg=new Float32Array(Cg),Ag=new Uint32Array(Cg),Dg=new Uint32Array(512),Pg=new Uint32Array(512);for(let FI=0;FI<256;++FI){const t=FI-127;t<-27?(Dg[FI]=0,Dg[256|FI]=32768,Pg[FI]=24,Pg[256|FI]=24):t<-14?(Dg[FI]=1024>>-t-14,Dg[256|FI]=1024>>-t-14|32768,Pg[FI]=-t-1,Pg[256|FI]=-t-1):t<=15?(Dg[FI]=t+15<<10,Dg[256|FI]=t+15<<10|32768,Pg[FI]=13,Pg[256|FI]=13):t<128?(Dg[FI]=31744,Dg[256|FI]=64512,Pg[FI]=24,Pg[256|FI]=24):(Dg[FI]=31744,Dg[256|FI]=64512,Pg[FI]=13,Pg[256|FI]=13)}const Rg=new Uint32Array(2048),Lg=new Uint32Array(64),Og=new Uint32Array(64);for(let FI=1;FI<1024;++FI){let t=FI<<13,e=0;while(0===(8388608&t))t<<=1,e-=8388608;t&=-8388609,e+=947912704,Rg[FI]=t|e}for(let FI=1024;FI<2048;++FI)Rg[FI]=939524096+(FI-1024<<13);for(let FI=1;FI<31;++FI)Lg[FI]=FI<<23;Lg[31]=1199570944,Lg[32]=2147483648;for(let FI=33;FI<63;++FI)Lg[FI]=2147483648+(FI-32<<23);Lg[63]=3347054592;for(let FI=1;FI<64;++FI)32!==FI&&(Og[FI]=1024);Id.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Id.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},up.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},pg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ag.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Nf.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),lm.extractUrlBase(t)},Nf.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Jm.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Jm.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Jm.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Jm.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},zr.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},zr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},zr.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},zr.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},zr.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},Si.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},ii.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ea.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},tg.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},lr.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},lr.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},lr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},lr.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},lr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},lr.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},pi.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},pi.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},pi.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Nr).setFromMatrixColumn(this,3)},pi.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},pi.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},pi.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pi.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pi.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},pi.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},pi.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pi.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},pi.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},pi.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},pi.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},pi.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},pi.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},pi.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},pi.prototype.makeFrustum=function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},pi.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Qo.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ir.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Ir.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},di.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},di.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},di.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Zi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Zi.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Zi.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Zi.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Zi.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Zi.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Zi.getBarycoord(t,e,n,r,i)},Zi.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Zi.getNormal(t,e,n,r)},fp.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},fp.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Kp(this,t)},fp.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new tf(this,t)},sr.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},sr.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},sr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nr.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Nr.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Nr.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Nr.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Nr.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Nr.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Nr.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Nr.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Nr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ar.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ar.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Fi.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Fi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Fi.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Fi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Fi.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Fi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Lo.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Lo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),gn},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ed.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ho.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Hf.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(eo.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Pn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Pn)}}}),eo.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Pn:Dn),this},eo.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},eo.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},fo.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},fo.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new eo(arguments[1],arguments[2])))},fo.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},fo.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},fo.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},fo.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},fo.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(fo.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Rh.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Pn:Dn),this},Rh.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Kp.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Kp.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Kp.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Ph.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Wm.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ji.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _r}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===lt}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(jo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Th.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},Th.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},Th.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Th.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Th.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Th.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Th.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Th.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Th.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Th.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Th.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Th.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Th.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Th.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Th.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},Th.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Th.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Th.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Th.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Th.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Th.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Th.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Th.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Th.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Th.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Th.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?xn:bn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(mh.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Dr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Sm.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this,n=new pm;return n.load(t,(function(t){e.setBuffer(t)})),this},qo.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},qo.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},Sr.crossOrigin=void 0,Sr.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Vf;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Sr.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Uf;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Sr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Sr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:K}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=K);const kg=100,Ig=1/kg,Ng=kg,Bg=.1,Fg=1e4,zg=Number.EPSILON,Ug=100*Ig,jg=.5*Ug;var Vg=new Ho(75,1,Bg,Fg),Hg=new Ho(75,1,Bg,Fg);const[Wg,Gg]=F([Hg]),qg=z(Wg,Gg),Xg=U(Wg,Gg),Yg=[0],Zg=new gm,Kg=()=>{requestAnimationFrame(Kg),Yg[0]=Zg.getDelta()};Kg();const[Jg,Qg]=F(!1);var $g=!!window.chrome;const[tv,ev]=F("#000000"),[nv,rv]=F(!1),iv=()=>{const t=navigator.userAgent;return!!/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)||!!/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)},[ov,av]=F(iv());window.addEventListener("resize",C((()=>ov(iv())),100,"trailing"));const[sv,lv]=F(void 0);X((()=>{const t=new Th({powerPreference:"high-performance",alpha:"transparent"===ev(),logarithmicDepthBuffer:!(!$g||av())&&rv(),antialias:!0});return sv(t),()=>{t.dispose()}}),[ev,rv,av]);let uv=Qg();Qg((t=>uv=t));const cv=(t,e,n)=>{let r=0;const i=setInterval((()=>{document.hidden||uv||(n(),-1!==e&&++r>=e&&clearInterval(i))}),t);return new L((()=>clearInterval(i)))};let hv=0,dv=[];const pv=(t,e)=>e-t,fv=new Set;lv((t=>{null==t||t.setAnimationLoop((()=>{const t=1/Yg[0];if(dv.push(t),60===dv.length&&(dv.sort(pv),dv[Math.floor(.5*dv.length)],dv=[]),!(uv||++hv<Math.round(t/60))){hv=0;for(const t of fv)t()}}))}));const mv=t=>(fv.add(t),new L((()=>fv.delete(t)))),[gv,vv]=F(void 0),[yv,bv]=F(!1);X((()=>{const t=bv(),e=vv(),n=S(Gg());if(!t||!e||e===n)return;const r=e.getWorldPosition(new Nr),i=e.getWorldQuaternion(new Ir);let o=0;const a=mv((()=>{const t=n.getWorldPosition(new Nr),e=n.getWorldQuaternion(new Ir);Vg.position.lerpVectors(r,t,o),Vg.quaternion.slerpQuaternions(i,e,o),o=.1*(1-o)+o,o>.999&&yv(!1)}));return()=>{a.cancel()}}),[bv,vv,Gg]);const[xv,_v]=F(Hg);X((()=>{xv(bv()?Vg:S(Gg()))}),[Gg,bv]);const[wv,Sv]=F([]),Mv=z(wv,Sv),Ev=U(wv,Sv),Cv=j(wv,Sv),Tv=new WeakSet,[Av,Dv]=F(void 0),[Pv,Rv]=N(),Lv=C(Pv,0,"trailing"),Ov=new Set,kv=new WeakSet;class Iv extends O{constructor(t){super(),m(this,"outerObject3d"),m(this,"parent"),m(this,"children"),this.outerObject3d=t,t.userData.manager=this,Ov.add(this),Lv()}get uuid(){return this.outerObject3d.uuid}_append(t){var e,n,r;Ov.delete(t),Lv(),null==(n=null==(e=t.parent)?void 0:e.children)||n.delete(t),t.parent=this,(null!=(r=this.children)?r:this.children=new Set).add(t)}append(t){this._append(t),this.outerObject3d.add(t.outerObject3d)}attach(t){this._append(t),this.outerObject3d.attach(t.outerObject3d)}dispose(){var t,e,n;if(this.done)return this;if(super.dispose(),Ov.delete(this),Lv(),null==(e=null==(t=this.parent)?void 0:t.children)||e.delete(this),this.parent=void 0,null==(n=this.outerObject3d.parent)||n.remove(this.outerObject3d),this.children)for(const r of this.children)r.dispose();return this}}const[Nv,Bv]=F([]),Fv=z(Nv,Bv),zv=U(Nv,Bv),Uv={onLoop:Function,proxy:Object},jv={},Vv=f(p({},Uv),{texture:String}),Hv=p({},jv);class Wv extends Iv{constructor(){super(...arguments),m(this,"_proxy"),m(this,"_loopHandle"),m(this,"_onLoop")}get proxy(){return this._proxy}set proxy(t){this._proxy!==t&&(this._proxy&&(this._proxy.__target=void 0),this._proxy=t,t&&(t.__target=this))}timer(t,e,n){return this.watch(cv(t,e,n))}loop(t){return this.watch(mv(t))}queueMicrotask(t){queueMicrotask((()=>!this.done&&t()))}cancellable(t){return this.watch(new L(t))}createEffect(t,e){return this.watch(X(t,e))}get onLoop(){return this._onLoop}set onLoop(t){var e;this._onLoop=t,null==(e=this._loopHandle)||e.cancel(),t&&(this._loopHandle=this.loop(t))}}class Gv extends Wv{constructor(){super(new xh),m(this,"_texture"),Fv(this)}dispose(){return this.done||(super.dispose(),zv(this)),this}get texture(){return this._texture}set texture(t){this._texture=t,Nv([...Bv()])}}m(Gv,"componentName","environment"),m(Gv,"defaults",Hv),m(Gv,"schema",Vv);const[qv,Xv]=F(0),Yv=()=>qv(Xv()+1),Zv=()=>qv(Xv()-1),Kv=[0],Jv=t=>Kv[0]+=t.loaded;class Qv extends jf{constructor(t){super(t),this.type=ge}parse(t){const e=-1,n=1,r=2,i=3,o=4,a=function(t,a){switch(t){case n:console.error("THREE.RGBELoader Read Error: "+(a||""));break;case r:console.error("THREE.RGBELoader Write Error: "+(a||""));break;case i:console.error("THREE.RGBELoader Bad File Format: "+(a||""));break;default:case o:console.error("THREE.RGBELoader: Error: "+(a||""))}return e},s=1,l=2,u=4,c="\n",h=function(t,e,n){const r=128;e=e||1024;let i=t.pos,o=-1,a=0,s="",l=String.fromCharCode.apply(null,new Uint16Array(t.subarray(i,i+r)));while(0>(o=l.indexOf(c))&&a<e&&i<t.byteLength)s+=l,a+=l.length,i+=r,l+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(i,i+r)));return-1<o&&(!1!==n&&(t.pos+=a+o+1),s+l.slice(0,o))},d=function(t){const e=/^#\?(\S+)/,r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*FORMAT=(\S+)\s*$/,d=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,p={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let f,m;if(t.pos>=t.byteLength||!(f=h(t)))return a(n,"no header found");if(!(m=f.match(e)))return a(i,"bad initial token");p.valid|=s,p.programtype=m[1],p.string+=f+"\n";while(1){if(f=h(t),!1===f)break;if(p.string+=f+"\n","#"!==f.charAt(0)){if((m=f.match(r))&&(p.gamma=parseFloat(m[1])),(m=f.match(o))&&(p.exposure=parseFloat(m[1])),(m=f.match(c))&&(p.valid|=l,p.format=m[1]),(m=f.match(d))&&(p.valid|=u,p.height=parseInt(m[1],10),p.width=parseInt(m[2],10)),p.valid&l&&p.valid&u)break}else p.comments+=f+"\n"}return p.valid&l?p.valid&u?p:a(i,"missing image size specifier"):a(i,"missing format specifier")},p=function(t,e,r){const s=e;if(s<8||s>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(s!==(t[2]<<8|t[3]))return a(i,"wrong scanline width");const l=new Uint8Array(4*e*r);if(!l.length)return a(o,"unable to allocate buffer space");let u=0,c=0;const h=4*s,d=new Uint8Array(4),p=new Uint8Array(h);let f=r;while(f>0&&c<t.byteLength){if(c+4>t.byteLength)return a(n);if(d[0]=t[c++],d[1]=t[c++],d[2]=t[c++],d[3]=t[c++],2!=d[0]||2!=d[1]||(d[2]<<8|d[3])!=s)return a(i,"bad rgbe scanline format");let e,r=0;while(r<h&&c<t.byteLength){e=t[c++];const n=e>128;if(n&&(e-=128),0===e||r+e>h)return a(i,"bad scanline data");if(n){const n=t[c++];for(let t=0;t<e;t++)p[r++]=n}else p.set(t.subarray(c,c+e),r),r+=e,c+=e}const o=s;for(let t=0;t<o;t++){let e=0;l[u]=p[t+e],e+=s,l[u+1]=p[t+e],e+=s,l[u+2]=p[t+e],e+=s,l[u+3]=p[t+e],u+=4}f--}return l},f=function(t,e,n,r){const i=t[e+3],o=Math.pow(2,i-128)/255;n[r+0]=t[e+0]*o,n[r+1]=t[e+1]*o,n[r+2]=t[e+2]*o,n[r+3]=1},m=function(t,e,n,r){const i=t[e+3],o=Math.pow(2,i-128)/255;n[r+0]=Eg.toHalfFloat(Math.min(t[e+0]*o,65504)),n[r+1]=Eg.toHalfFloat(Math.min(t[e+1]*o,65504)),n[r+2]=Eg.toHalfFloat(Math.min(t[e+2]*o,65504)),n[r+3]=Eg.toHalfFloat(1)},g=new Uint8Array(t);g.pos=0;const v=d(g);if(e!==v){const t=v.width,n=v.height,r=p(g.subarray(g.pos),t,n);if(e!==r){let e,i,o,a;switch(this.type){case me:a=r.length/4;const t=new Float32Array(4*a);for(let e=0;e<a;e++)f(r,4*e,t,4*e);e=t,o=me;break;case ge:a=r.length/4;const n=new Uint16Array(4*a);for(let e=0;e<a;e++)m(r,4*e,n,4*e);e=n,o=ge;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:t,height:n,data:e,header:v.string,gamma:v.gamma,exposure:v.exposure,format:i,type:o}}}return null}setDataType(t){return this.type=t,this}load(t,e,n,r){function i(t,n){switch(t.type){case me:t.encoding=bn,t.minFilter=ae,t.magFilter=ae,t.generateMipmaps=!1,t.flipY=!0;break;case ge:t.encoding=bn,t.minFilter=ae,t.magFilter=ae,t.generateMipmaps=!1,t.flipY=!0;break}e&&e(t,n)}return super.load(t,i,n,r)}}const $v=new Map,ty=new Vf,ey=new Qv,ny=new k;var ry=(t,e)=>(e&&ny.once(t,(()=>queueMicrotask(e))),b($v,t,(()=>{Yv();const e=t.toLowerCase().toLowerCase().endsWith(".hdr"),n=e?ey:ty;return n.load(t,(e=>{e.wrapS=e.wrapT=te,ny.setState(t),Zv()}),Jv,(()=>{ny.setState(t),Zv()}))})));const[iy,oy]=F("default"),[ay,sy]=F(1);var ly=new Ph;const uy=new Gv;Ov.delete(uy),X((()=>{var t;const e=null==(t=S(Bv()))?void 0:t.texture;if(!e)return;let n=!0;const r=ry(e,(()=>n&&(ly.environment=r)));return r.mapping=Jt,()=>{n=!1,ly.environment=null}}),[Bv]),X((()=>{const t=oy();if(!t)return;if("string"===typeof t&&"default"!==t)return uy.texture="studio"===t?"https://unpkg.com/lingo3d-textures@1.0.0/assets/studio.jpg":t,()=>{uy.texture=void 0};const e=new Wf(16777215,6710886);ly.add(e);const n=new rm(16777215,.5);n.position.set(0,1,1),ly.add(n);const r=sy((t=>{e.intensity=t,n.intensity=.5*t}));return()=>{e.dispose(),ly.remove(e),n.dispose(),ly.remove(n),r.cancel()}}),[oy]);const[cy,hy]=F(void 0);X((()=>{const t=hy();if(t)return ly.fog=new Dh(t,0,100),()=>{ly.fog=null}}),[hy]);const dy=new Map,py=new Uf;var fy=t=>b(dy,t.join(","),(()=>(Yv(),py.load(t,Zv,Jv,Zv))));const[my,gy]=F(void 0),[vy,yy]=F([]),by=z(vy,yy),xy=U(vy,yy);X((()=>{var t;const e=gy(),n=ev(),r=null==(t=S(yy()))?void 0:t.texture;if(r){if(!Array.isArray(r)){let t=!0;const e=ry(r,(()=>t&&(ly.background=e)));return e.mapping=Jt,()=>{t=!1}}ly.background=fy(r)}else ly.background=e?ry(e):n?"transparent"===n?null:new _r(n):new _r("black")}),[ev,gy,yy]),X((()=>{var t;const e=Dv();if(!e||_v()!==Hg)return;const n=new Sg(null!=(t=e.object3d)?t:e.outerObject3d),r=requestAnimationFrame((()=>ly.add(n))),i=mv((()=>n.update()));return()=>{cancelAnimationFrame(r),ly.remove(n),i.cancel()}}),[Dv,_v]),X((()=>{const t=Sv();if(!t.length||_v()!==Hg)return;const e=[];for(const r of t){const t=new Sg(r.outerObject3d);ly.add(t),e.push(t)}const n=mv((()=>{for(const t of e)t.update()}));return()=>{for(const t of e)ly.remove(t);n.cancel()}}),[Sv,_v]);class _y{constructor(t,e){this.x=t,this.y=e}}class wy{constructor(t,e,n){this.x=t,this.y=e,this.z=n}}const Sy=180/Math.PI,My=Math.PI/180,Ey=(t,e,n,r,i,o)=>Math.sqrt((t-r)**2+(e-i)**2+(n-o)**2),Cy=(t,e,n)=>{const r=n*My,i=t.x-e.x,o=t.y-e.y,a=i*Math.cos(r)-o*Math.sin(r),s=i*Math.sin(r)+o*Math.cos(r);return new _y(a+e.x,s+e.y)},Ty=(t,e,n,r)=>{const i=n*=My;return new _y(t+r*Math.cos(i),e+r*Math.sin(i))},Ay=new Nr,Dy=new Nr,Py=new Nr,Ry=new Ir,Ly=new Ir,Oy=new Nr(Ug,Ug,Ug);Object.freeze(Oy);const ky=new Nr(jg,jg,jg);Object.freeze(ky);const Iy=new zr,Ny=new di,By=new Si(0,0,0,"YXZ"),Fy=new tg,zy=new Qi({wireframe:!0}),Uy=new ea,jy=new pi,Vy=t=>new wy(t.x*Ng,t.y*Ng,t.z*Ng),Hy=t=>new Nr(t.x*Ig,t.y*Ig,t.z*Ig);var Wy=t=>t instanceof nd?t.getWorldPosition(Ay):Iy.setFromObject(t).getCenter(Ay);const[Gy,qy]=F(1),Xy=375,Yy=667,Zy=5,Ky=175,[Jy,Qy]=F([Xy,Yy]),$y=([t,e])=>Jy([Math.max(t,1),Math.max(e,1)]),[tb,eb]=F("balanced"),[nb,rb]=F(1),[ib,ob]=F(!1),[ab,sb]=F(!1),[lb,ub]=F(void 0),[cb,hb]=F(void 0),db={createButton(t,e){e&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function r(){let e=null;async function r(r){r.addEventListener("end",i),await t.xr.setSession(r),n.textContent="EXIT VR",e=r}function i(){e.removeEventListener("end",i),n.textContent="ENTER VR",e=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===e){const t={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",t).then(r)}else e.end()}}function i(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function o(){i(),n.textContent="VR NOT SUPPORTED"}function a(t){i(),console.warn("Exception when trying to call xr.isSessionSupported",t),n.textContent="VR NOT ALLOWED"}function s(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #fff",t.style.borderRadius="4px",t.style.background="rgba(0,0,0,0.1)",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",s(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){t?r():o(),t&&db.xrSessionIsGranted&&n.click()})).catch(a),n;{const t=document.createElement("a");return!1===window.isSecureContext?(t.href=document.location.href.replace(/^http:/,"https:"),t.innerHTML="WEBXR NEEDS HTTPS"):(t.href="https://immersiveweb.dev/",t.innerHTML="WEBXR NOT AVAILABLE"),t.style.left="calc(50% - 90px)",t.style.width="180px",t.style.textDecoration="none",s(t),t}},xrSessionIsGranted:!1,registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",(()=>{db.xrSessionIsGranted=!0}))}}};db.registerSessionGrantedListener();const[pb,fb]=F(!1),[mb,gb]=N(),vb=C(mb,0,"trailing"),yb=document.createElement("div");Object.assign(yb.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"});const bb=document.createElement("div");Object.assign(bb.style,{position:"absolute",left:"0px",top:"0px",width:"100%",zIndex:"10"}),yb.appendChild(bb),hb((t=>bb.style.height=t?"50%":"100%"));const xb=[bb.getBoundingClientRect()],_b=t=>{q((()=>{const e=()=>{xb[0]=bb.getBoundingClientRect(),$y(t===document.body?[window.innerWidth,window.innerHeight]:[t.clientWidth,t.clientHeight])};e();const n=C(e,100,"trailing");window.addEventListener("resize",n);const r=gb(n);return()=>{window.removeEventListener("resize",e),r.cancel()}}),[])};X((()=>{const t=fb();if(t){if("string"===typeof t){const e=document.querySelector(t);if(!e)return;return e.appendChild(yb),_b(e),()=>{e.removeChild(yb)}}return!0===t?(document.body.appendChild(yb),_b(document.body),()=>{document.body.removeChild(yb)}):(t.appendChild(yb),_b(t),()=>{t.removeChild(yb)})}}),[fb]);const wb=document.createElement("div");Object.assign(wb.style,{border:"1px solid blue",position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)",pointerEvents:"none"}),bb.appendChild(wb),X((()=>{var t;const[e,n]=null!=(t=ub())?t:Qy(),[r,i]=Qy();wb.style.display=hb()||r===e&&i===n?"none":"block"}),[Qy,ub,hb]),X((()=>{const t=lv();if(!t)return;const e=t.domElement;return yb.appendChild(e),Object.assign(e.style,{position:"absolute",left:"0px",top:"0px"}),()=>{yb.removeChild(e)}}),[lv]),X((()=>{const t=lv();if(!t)return;const[e,n]=Qy();t.setSize(e,n),t.setPixelRatio(rb())}),[lv,Qy,rb]),X((()=>{const t=lv();t&&(t.shadowMap.enabled="speed"!==eb())}),[lv,eb]),X((()=>{const t=lv();t&&(t.physicallyCorrectLights=sb())}),[lv,sb]),X((()=>{const t=lv();if(!t)return;const e=oy(),n="string"===typeof e&&"default"!==e?qy()*sy()*("studio"===e?2:1):qy();t.toneMapping=1!==n?Ht:Vt,t.toneMappingExposure=n}),[qy,lv,oy,sy]),X((()=>{if("webxr"!==ob())return;const t=lv();if(!t)return;t.xr.enabled=!0;const e=db.createButton(t);return bb.appendChild(e),e.ontouchstart=()=>{var t;return null==(t=e.onclick)?void 0:t.call(e,new MouseEvent("click"))},()=>{t.xr.enabled=!1,bb.removeChild(e)}}),[ob,lv]);class Sb{constructor(t=0,e=0,n=0,r=0,i=0,o=0,a=0){m(this,"clientX"),m(this,"clientY"),m(this,"x"),m(this,"y"),m(this,"z"),m(this,"xNorm"),m(this,"yNorm"),this.clientX=t,this.clientY=e,this.x=n,this.y=r,this.z=i,this.xNorm=o,this.yNorm=a}}class Mb extends Sb{constructor(t,e,n,r,i,o,a,s,l){super(n,r,i,t,e,o,a),m(this,"point"),m(this,"distance"),this.point=s,this.distance=l}}const Eb=f(p({},Uv),{onClick:Function,onMouseMove:Function,onMouseDown:Function,onMouseUp:Function,onMousePress:Function}),Cb=p({},jv),[Tb,Ab]=F(!0),[Db,Pb]=F("mouse");var Rb=(t,e)=>{const n=xb[0],r=t.clientX-n.x,i=t.clientY-n.y;if("camera"===Pb()&&!e)return new Sb(r,i);const o=r/n.width*2-1,a=-i/n.height*2+1,s=_v();Ay.set(o,a,.5),Ay.unproject(s),Ay.sub(s.position).normalize();const{x:l,y:u,z:c}=s.position.clone().add(Ay.multiplyScalar(5));return new Sb(r,i,l,u,c,o,a)};const[Lb,Ob]=F(!1),[kb,Ib]=F(!1);X((()=>{kb(Ob()&&_v()===Hg)}),[Ob,_v]);const Nb=new k;let Bb=0,Fb=0,zb=0,Ub=!1;bb.addEventListener("contextmenu",(t=>{t.preventDefault(),Ub=!0})),Nb.on("down",(t=>{Bb=Date.now(),Fb=t.clientX,zb=t.clientY})),Nb.on("up",(t=>{const e=Date.now(),n=e-Bb,r=Math.abs(t.clientX-Fb),i=Math.abs(t.clientY-zb);Bb=e,Fb=t.clientX,zb=t.clientY,n<300&&r<5&&i<5&&Nb.emit(Ub?"rightClick":"click",t),Ub=!1}));const jb=M(Rb,0,"leading");bb.addEventListener("pointermove",(t=>{Nb.emit("move",jb(t))}));let Vb=!1;bb.addEventListener("pointerdown",(t=>{Vb=!0;const e=jb(t);Nb.emit("down",e),Nb.emit("move",e)}));const Hb=t=>{Vb&&Nb.emit("up",jb(t)),Vb=!1};bb.addEventListener("pointerup",Hb),bb.addEventListener("pointercancel",Hb),bb.addEventListener("pointerleave",Hb);class Wb extends Wv{constructor(){super(new xh),m(this,"onClick"),m(this,"onMouseMove"),m(this,"onMouseDown"),m(this,"onMouseUp"),m(this,"onMousePress");let t=new Sb;const[e,n]=F(!1);this.createEffect((()=>{const e=this.onMousePress;if(!n()||!e)return;const r=mv((()=>e(t)));return()=>{r.cancel()}}),[n]),this.createEffect((()=>{if(Ib()&&Ab())return;const n=Nb.on("move",(e=>{var n;null==(n=this.onMouseMove)||n.call(this,e),t=e})),r=Nb.on("click",(e=>{var n;null==(n=this.onClick)||n.call(this,e),t=e})),i=Nb.on("down",(n=>{var r;null==(r=this.onMouseDown)||r.call(this,n),t=n,e(!0)})),o=Nb.on("up",(n=>{var r;null==(r=this.onMouseUp)||r.call(this,n),t=n,e(!1)}));return()=>{n.cancel(),r.cancel(),i.cancel(),o.cancel()}}),[Ib,Ab])}}m(Wb,"componentName","mouse"),m(Wb,"defaults",Cb),m(Wb,"schema",Eb);const Gb=new Wb;Ov.delete(Gb);const[qb,Xb]=F(!1),[Yb,Zb]=N(),Kb=C(((t,e)=>Yb({target:t,rightClick:e})),0,"trailing");_v((()=>Kb()));const[Jb,Qb]=F(!1),[$b,tx]=N(),[ex,nx]=F([new Set]),rx=t=>{const[e]=nx();e.add(t),ex([e]),$b()},ix=()=>{const[t]=nx();t.clear(),ex([t]),$b()},ox=new qm,ax=new Set,sx=C((()=>{ax.clear();const[t]=nx();ly.traverse((e=>{const{manager:n}=e.userData;n&&!t.has(n)&&ax.add($_(n))}))}),0,"trailing"),lx=(t,e,n)=>(ox.setFromCamera({x:t,y:e},_v()),ox.intersectObjects([...n])[0]),ux=(t,e,n)=>Nb.on(t,(t=>{const r=lx(t.xNorm,t.yNorm,e);if(!r)return;const i=Vy(r.point),o=r.distance*Ng;n(r.object.userData.manager,new Mb(t.clientX,t.clientY,t.x,t.y,t.z,t.xNorm,t.yNorm,i,o))})),cx=new Set,hx=new Set,dx=new Set,px=new Set,fx=new Set,mx=new Set,gx=()=>{const t=new L;t.watch(ux("click",cx,((t,e)=>{var n;return null==(n=t.onClick)?void 0:n.call(t,e)}))),t.watch(ux("down",hx,((t,e)=>{var n;return null==(n=t.onMouseDown)?void 0:n.call(t,e)}))),t.watch(ux("up",dx,((t,e)=>{var n;return null==(n=t.onMouseUp)?void 0:n.call(t,e)})));let e=new Set,n=new Set;return t.watch(ux("move",px,((t,n)=>{e.add(t),t.outerObject3d.userData.eMove=n}))),t.watch(ux("move",fx,((t,n)=>{e.add(t),t.outerObject3d.userData.eMove=n}))),t.watch(ux("move",mx,((t,n)=>{e.add(t),t.outerObject3d.userData.eMove=n}))),t.watch(Nb.on("move",(()=>{var t,r,i;for(const o of e)n.has(o)||null==(t=o.onMouseOver)||t.call(o,o.outerObject3d.userData.eMove),null==(r=o.onMouseMove)||r.call(o,o.outerObject3d.userData.eMove);for(const o of n)e.has(o)||null==(i=o.onMouseOut)||i.call(o,o.outerObject3d.userData.eMove);n=e,e=new Set}))),t};X((()=>{const t=Ob(),e=Xb(),n=Y(!0);if(q((()=>{!e&&(n.current=!0)}),[e]),t&&!Qb()&&_v()===Hg){const t=new L;sx(),t.watch(Rv(sx)),t.watch(tx((()=>(sx(),Kb())))),t.watch(Nb.on("click",(()=>Kb())));let r=!1;return t.watch(Nb.on("rightClick",(()=>{r=!0,queueMicrotask((()=>{r&&(r=!1,Kb(void 0,!0))}))}))),t.watch(ux(["click","rightClick"],ax,(t=>{Kb(t,r),r=!1}))),t.watch(Zb((({target:t,rightClick:r})=>{if(e){if(!ew(t)||r)return;if(n.current){const t=Dv();ew(t)&&Mv(t)}return n.current=!1,void(Sv().includes(t)?Ev(t):Mv(t))}Cv(),Av(r?t:t===Dv()?void 0:t)}))),e||Ab()||t.watch(gx()),()=>{t.cancel()}}if(t)return;Cv(),Av(void 0);const r=gx();return()=>{r.cancel()}}),[Ob,Ab,Qb,_v,Xb]);const vx={c:null,u:[new Nr,new Nr,new Nr],e:[]},yx={c:null,u:[new Nr,new Nr,new Nr],e:[]},bx=[[],[],[]],xx=[[],[],[]],_x=[],wx=new Nr,Sx=new Nr,Mx=new Nr,Ex=new Nr,Cx=new Nr,Tx=new Nr,Ax=new lr,Dx=new zr,Px=new pi,Rx=new pi,Lx=new di;class Ox{constructor(t=new Nr,e=new Nr,n=new lr){this.center=t,this.halfSize=e,this.rotation=n}set(t,e,n){return this.center=t,this.halfSize=e,this.rotation=n,this}copy(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this}clone(){return(new this.constructor).copy(this)}getSize(t){return t.copy(this.halfSize).multiplyScalar(2)}clampPoint(t,e){const n=this.halfSize;Ex.subVectors(t,this.center),this.rotation.extractBasis(wx,Sx,Mx),e.copy(this.center);const r=ar.clamp(Ex.dot(wx),-n.x,n.x);e.add(wx.multiplyScalar(r));const i=ar.clamp(Ex.dot(Sx),-n.y,n.y);e.add(Sx.multiplyScalar(i));const o=ar.clamp(Ex.dot(Mx),-n.z,n.z);return e.add(Mx.multiplyScalar(o)),e}containsPoint(t){return Ex.subVectors(t,this.center),this.rotation.extractBasis(wx,Sx,Mx),Math.abs(Ex.dot(wx))<=this.halfSize.x&&Math.abs(Ex.dot(Sx))<=this.halfSize.y&&Math.abs(Ex.dot(Mx))<=this.halfSize.z}intersectsBox3(t){return this.intersectsOBB(kx.fromBox3(t))}intersectsSphere(t){return this.clampPoint(t.center,Tx),Tx.distanceToSquared(t.center)<=t.radius*t.radius}intersectsOBB(t,e=Number.EPSILON){vx.c=this.center,vx.e[0]=this.halfSize.x,vx.e[1]=this.halfSize.y,vx.e[2]=this.halfSize.z,this.rotation.extractBasis(vx.u[0],vx.u[1],vx.u[2]),yx.c=t.center,yx.e[0]=t.halfSize.x,yx.e[1]=t.halfSize.y,yx.e[2]=t.halfSize.z,t.rotation.extractBasis(yx.u[0],yx.u[1],yx.u[2]);for(let i=0;i<3;i++)for(let t=0;t<3;t++)bx[i][t]=vx.u[i].dot(yx.u[t]);Ex.subVectors(yx.c,vx.c),_x[0]=Ex.dot(vx.u[0]),_x[1]=Ex.dot(vx.u[1]),_x[2]=Ex.dot(vx.u[2]);for(let i=0;i<3;i++)for(let t=0;t<3;t++)xx[i][t]=Math.abs(bx[i][t])+e;let n,r;for(let i=0;i<3;i++)if(n=vx.e[i],r=yx.e[0]*xx[i][0]+yx.e[1]*xx[i][1]+yx.e[2]*xx[i][2],Math.abs(_x[i])>n+r)return!1;for(let i=0;i<3;i++)if(n=vx.e[0]*xx[0][i]+vx.e[1]*xx[1][i]+vx.e[2]*xx[2][i],r=yx.e[i],Math.abs(_x[0]*bx[0][i]+_x[1]*bx[1][i]+_x[2]*bx[2][i])>n+r)return!1;return n=vx.e[1]*xx[2][0]+vx.e[2]*xx[1][0],r=yx.e[1]*xx[0][2]+yx.e[2]*xx[0][1],!(Math.abs(_x[2]*bx[1][0]-_x[1]*bx[2][0])>n+r)&&(n=vx.e[1]*xx[2][1]+vx.e[2]*xx[1][1],r=yx.e[0]*xx[0][2]+yx.e[2]*xx[0][0],!(Math.abs(_x[2]*bx[1][1]-_x[1]*bx[2][1])>n+r)&&(n=vx.e[1]*xx[2][2]+vx.e[2]*xx[1][2],r=yx.e[0]*xx[0][1]+yx.e[1]*xx[0][0],!(Math.abs(_x[2]*bx[1][2]-_x[1]*bx[2][2])>n+r)&&(n=vx.e[0]*xx[2][0]+vx.e[2]*xx[0][0],r=yx.e[1]*xx[1][2]+yx.e[2]*xx[1][1],!(Math.abs(_x[0]*bx[2][0]-_x[2]*bx[0][0])>n+r)&&(n=vx.e[0]*xx[2][1]+vx.e[2]*xx[0][1],r=yx.e[0]*xx[1][2]+yx.e[2]*xx[1][0],!(Math.abs(_x[0]*bx[2][1]-_x[2]*bx[0][1])>n+r)&&(n=vx.e[0]*xx[2][2]+vx.e[2]*xx[0][2],r=yx.e[0]*xx[1][1]+yx.e[1]*xx[1][0],!(Math.abs(_x[0]*bx[2][2]-_x[2]*bx[0][2])>n+r)&&(n=vx.e[0]*xx[1][0]+vx.e[1]*xx[0][0],r=yx.e[1]*xx[2][2]+yx.e[2]*xx[2][1],!(Math.abs(_x[1]*bx[0][0]-_x[0]*bx[1][0])>n+r)&&(n=vx.e[0]*xx[1][1]+vx.e[1]*xx[0][1],r=yx.e[0]*xx[2][2]+yx.e[2]*xx[2][0],!(Math.abs(_x[1]*bx[0][1]-_x[0]*bx[1][1])>n+r)&&(n=vx.e[0]*xx[1][2]+vx.e[1]*xx[0][2],r=yx.e[0]*xx[2][1]+yx.e[1]*xx[2][0],!(Math.abs(_x[1]*bx[0][2]-_x[0]*bx[1][2])>n+r)))))))))}intersectsPlane(t){this.rotation.extractBasis(wx,Sx,Mx);const e=this.halfSize.x*Math.abs(t.normal.dot(wx))+this.halfSize.y*Math.abs(t.normal.dot(Sx))+this.halfSize.z*Math.abs(t.normal.dot(Mx)),n=t.normal.dot(this.center)-t.constant;return Math.abs(n)<=e}intersectRay(t,e){return this.getSize(Cx),Dx.setFromCenterAndSize(Ex.set(0,0,0),Cx),Px.setFromMatrix3(this.rotation),Px.setPosition(this.center),Rx.copy(Px).invert(),Lx.copy(t).applyMatrix4(Rx),Lx.intersectBox(Dx,e)?e.applyMatrix4(Px):null}intersectsRay(t){return null!==this.intersectRay(t,Ex)}fromBox3(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)}applyMatrix4(t){const e=t.elements;let n=Ex.set(e[0],e[1],e[2]).length();const r=Ex.set(e[4],e[5],e[6]).length(),i=Ex.set(e[8],e[9],e[10]).length(),o=t.determinant();o<0&&(n=-n),Ax.setFromMatrix4(t);const a=1/n,s=1/r,l=1/i;return Ax.elements[0]*=a,Ax.elements[1]*=a,Ax.elements[2]*=a,Ax.elements[3]*=s,Ax.elements[4]*=s,Ax.elements[5]*=s,Ax.elements[6]*=l,Ax.elements[7]*=l,Ax.elements[8]*=l,this.rotation.multiply(Ax),this.halfSize.x*=n,this.halfSize.y*=r,this.halfSize.z*=i,Ex.setFromMatrixPosition(t),this.center.add(Ex),this}}const kx=new Ox,Ix={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class Nx{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const Bx=new jl(-1,1,1,-1,0,1),Fx=new fo;Fx.setAttribute("position",new oo([-1,3,0,-1,-1,0,3,-1,0],3)),Fx.setAttribute("uv",new oo([0,2,0,0,2,0],2));class zx{constructor(t){this._mesh=new Lo(Fx,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,Bx)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class Ux extends Nx{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof jo?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Fo.clone(t.uniforms),this.material=new jo({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new zx(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}class jx extends Nx{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class Vx extends Nx{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Hx{constructor(t,e){if(this.renderer=t,void 0===e){const n=t.getSize(new sr);this._pixelRatio=t.getPixelRatio(),this._width=n.width,this._height=n.height,e=new Dr(this._width*this._pixelRatio,this._height*this._pixelRatio),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Ix&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Ux&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Ux(Ix),this.clock=new gm}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const e=this.passes[r];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==jx&&(e instanceof jx?n=!0:e instanceof Vx&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new sr);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new jl(-1,1,1,-1,0,1);const Wx=new fo;Wx.setAttribute("position",new oo([-1,3,0,-1,-1,0,3,-1,0],3)),Wx.setAttribute("uv",new oo([0,2,0,0,2,0],2));const[Gx,qx]=F(void 0);X((()=>{const t=lv();if(!t)return;const e=new Hx(t);e.renderToScreen=!1,Gx(e)}),[lv]),X((()=>{const t=qx();if(!t)return;const[e,n]=Qy();t.setSize(e,n),t.setPixelRatio(rb())}),[qx,Qy,rb]);const Xx=[!1],Yx=t=>{t.userData.bloom=!0,Xx[0]=!0},Zx=t=>{t.userData.bloom=!1};let Kx;const Jx=t=>{for(const e of t)e.userData.bloom?e.renderOrder=1:e.visible&&(Jx(e.children),e.material&&(e.material.colorWrite=!1),e.renderOrder=0)},Qx=()=>{Jx(ly.children),ly.background&&(Kx=ly.background,ly.background=null)},$x=t=>t.material&&(t.material.colorWrite=!0),t_=()=>{ly.traverse($x),Kx&&(ly.background=Kx)};var e_=()=>{var t;Qx(),null==(t=qx())||t.render(),t_()};const n_=new WeakMap;var r_=t=>{if(n_.has(t))return n_.get(t);Wy(t);const e=_v();Ay.project(e);const n=(.5*Ay.x+.5)*bb.clientWidth,r=(-.5*Ay.y+.5)*bb.clientHeight,i={x:n,y:r};return n_.set(t,i),setTimeout((()=>n_.delete(t))),i};const i_={defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new sr},cameraProjectionMatrix:{value:new pi},cameraInverseProjectionMatrix:{value:new pi},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:'\n\t\t// precision highp float;\n\t\tprecision highp sampler2D;\n\t\tvarying vec2 vUv;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tMetalness;\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float cameraRange;\n\t\tuniform vec2 resolution;\n\t\tuniform float opacity;\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float maxDistance;\n\t\tuniform float thickness;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\t\t#include <packing>\n\t\tfloat pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {\n\t\t\t//x0: point, x1: linePointA, x2: linePointB\n\t\t\t//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html\n\t\t\treturn length(cross(x0-x1,x0-x2))/length(x2-x1);\n\t\t}\n\t\tfloat pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){\n\t\t\t// https://mathworld.wolfram.com/Point-PlaneDistance.html\n\t\t\t//// https://en.wikipedia.org/wiki/Plane_(geometry)\n\t\t\t//// http://paulbourke.net/geometry/pointlineplane/\n\t\t\tfloat a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;\n\t\t\tfloat x0=point.x,y0=point.y,z0=point.z;\n\t\t\tfloat x=planePoint.x,y=planePoint.y,z=planePoint.z;\n\t\t\tfloat d=-(a*x+b*y+c*z);\n\t\t\tfloat distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);\n\t\t\treturn distance;\n\t\t}\n\t\tfloat getDepth( const in vec2 uv ) {\n\t\t\treturn texture2D( tDepth, uv ).x;\n\t\t}\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\n\t\t\tclipPosition *= clipW; //clip\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view\n\t\t}\n\t\tvec3 getViewNormal( const in vec2 uv ) {\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, uv ).xyz );\n\t\t}\n\t\tvec2 viewPositionToXY(vec3 viewPosition){\n\t\t\tvec2 xy;\n\t\t\tvec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);\n\t\t\txy=clip.xy;//clip\n\t\t\tfloat clipW=clip.w;\n\t\t\txy/=clipW;//NDC\n\t\t\txy=(xy+1.)/2.;//uv\n\t\t\txy*=resolution;//screen\n\t\t\treturn xy;\n\t\t}\n\t\tvoid main(){\n\t\t\t#ifdef SELECTIVE\n\t\t\t\tfloat metalness=texture2D(tMetalness,vUv).r;\n\t\t\t\tif(metalness==0.) return;\n\t\t\t#endif\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\t\t\tif(-viewZ>=cameraFar) return;\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];\n\t\t\tvec3 viewPosition=getViewPosition( vUv, depth, clipW );\n\n\t\t\tvec2 d0=gl_FragCoord.xy;\n\t\t\tvec2 d1;\n\n\t\t\tvec3 viewNormal=getViewNormal( vUv );\n\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tvec3 viewIncidentDir=normalize(viewPosition);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#else\n\t\t\t\tvec3 viewIncidentDir=vec3(0,0,-1);\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);\n\t\t\t#endif\n\n\t\t\tfloat maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);\n\t\t\t// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html\n\t\t\t// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen=cos(theta)\n\t\t\t// maxDistance/maxReflectRayLen==dot(a,b)\n\t\t\t// maxReflectRayLen==maxDistance/dot(a,b)\n\n\t\t\tvec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;\n\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\tif(d1viewPosition.z>-cameraNear){\n\t\t\t\t\t//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx\n\t\t\t\t\tfloat t=(-cameraNear-viewPosition.z)/viewReflectDir.z;\n\t\t\t\t\td1viewPosition=viewPosition+viewReflectDir*t;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\td1=viewPositionToXY(d1viewPosition);\n\n\t\t\tfloat totalLen=length(d1-d0);\n\t\t\tfloat xLen=d1.x-d0.x;\n\t\t\tfloat yLen=d1.y-d0.y;\n\t\t\tfloat totalStep=max(abs(xLen),abs(yLen));\n\t\t\tfloat xSpan=xLen/totalStep;\n\t\t\tfloat ySpan=yLen/totalStep;\n\t\t\tfor(float i=0.;i<float(MAX_STEP);i++){\n\t\t\t\tif(i>=totalStep) break;\n\t\t\t\tvec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);\n\t\t\t\tif(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;\n\t\t\t\tfloat s=length(xy-d0)/totalLen;\n\t\t\t\tvec2 uv=xy/resolution;\n\n\t\t\t\tfloat d = getDepth(uv);\n\t\t\t\tfloat vZ = getViewZ( d );\n\t\t\t\tif(-vZ>=cameraFar) continue;\n\t\t\t\tfloat cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];\n\t\t\t\tvec3 vP=getViewPosition( uv, d, cW );\n\n\t\t\t\t#ifdef PERSPECTIVE_CAMERA\n\t\t\t\t\t// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf\n\t\t\t\t\tfloat recipVPZ=1./viewPosition.z;\n\t\t\t\t\tfloat viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));\n\t\t\t\t#else\n\t\t\t\t\tfloat viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);\n\t\t\t\t#endif\n\n\t\t\t\t// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.\n\t\t\t\t// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164\n\t\t\t\tif(viewReflectRayZ<=vZ){\n\n\t\t\t\t\tbool hit;\n\t\t\t\t\t#ifdef INFINITE_THICK\n\t\t\t\t\t\thit=true;\n\t\t\t\t\t#else\n\t\t\t\t\t\tfloat away=pointToLineDistance(vP,viewPosition,d1viewPosition);\n\n\t\t\t\t\t\tfloat minThickness;\n\t\t\t\t\t\tvec2 xyNeighbor=xy;\n\t\t\t\t\t\txyNeighbor.x+=1.;\n\t\t\t\t\t\tvec2 uvNeighbor=xyNeighbor/resolution;\n\t\t\t\t\t\tvec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);\n\t\t\t\t\t\tminThickness=vPNeighbor.x-vP.x;\n\t\t\t\t\t\tminThickness*=3.;\n\t\t\t\t\t\tfloat tk=max(minThickness,thickness);\n\n\t\t\t\t\t\thit=away<=tk;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tif(hit){\n\t\t\t\t\t\tvec3 vN=getViewNormal( uv );\n\t\t\t\t\t\tif(dot(viewReflectDir,vN)>=0.) continue;\n\t\t\t\t\t\tfloat distance=pointPlaneDistance(vP,viewPosition,viewNormal);\n\t\t\t\t\t\tif(distance>maxDistance) break;\n\t\t\t\t\t\tfloat op=opacity;\n\t\t\t\t\t\t#ifdef DISTANCE_ATTENUATION\n\t\t\t\t\t\t\tfloat ratio=1.-(distance/maxDistance);\n\t\t\t\t\t\t\tfloat attenuation=ratio*ratio;\n\t\t\t\t\t\t\top=opacity*attenuation;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef FRESNEL\n\t\t\t\t\t\t\tfloat fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;\n\t\t\t\t\t\t\top*=fresnelCoe;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec4 reflectColor=texture2D(tDiffuse,uv);\n\t\t\t\t\t\tgl_FragColor.xyz=reflectColor.xyz;\n\t\t\t\t\t\tgl_FragColor.a=op;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t'},o_={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 uv ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, uv ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, uv ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tfloat d = 1.0 - depth;\n\t\t\t// d=(d-.999)*1000.;\n\t\t\tgl_FragColor = vec4( vec3( d ), 1.0 );\n\n\t\t}\n\n\t"},a_={uniforms:{tDiffuse:{value:null},resolution:{value:new sr},opacity:{value:.5}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 resolution;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\t//reverse engineering from PhotoShop blur filter, then change coefficient\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\n\t\t\tvec4 c=texture2D(tDiffuse,vUv);\n\n\t\t\tvec2 offset;\n\n\t\t\toffset=(vec2(-1,0))*texelSize;\n\t\t\tvec4 cl=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(1,0))*texelSize;\n\t\t\tvec4 cr=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,-1))*texelSize;\n\t\t\tvec4 cb=texture2D(tDiffuse,vUv+offset);\n\n\t\t\toffset=(vec2(0,1))*texelSize;\n\t\t\tvec4 ct=texture2D(tDiffuse,vUv+offset);\n\n\t\t\t// float coeCenter=.5;\n\t\t\t// float coeSide=.125;\n\t\t\tfloat coeCenter=.2;\n\t\t\tfloat coeSide=.2;\n\t\t\tfloat a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;\n\t\t\tvec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;\n\t\t\tgl_FragColor=vec4(rgb,a);\n\n\t\t}\n\t"};class s_ extends Nx{constructor({renderer:t,scene:e,camera:n,width:r,height:i,selects:o,bouncing:a=!1,groundReflector:s}){super(),this.width=void 0!==r?r:512,this.height=void 0!==i?i:512,this.clear=!0,this.renderer=t,this.scene=e,this.camera=n,this.groundReflector=s,this.opacity=i_.uniforms.opacity.value,this.output=0,this.maxDistance=i_.uniforms.maxDistance.value,this.thickness=i_.uniforms.thickness.value,this.tempColor=new _r,this._selects=o,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(t){this._selects!==t&&(this._selects=t,Array.isArray(t)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=a,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(t){this._bouncing!==t&&(this._bouncing=t,this.ssrMaterial.uniforms["tDiffuse"].value=t?this.prevRenderTarget.texture:this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=i_.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(t){this._distanceAttenuation!==t&&(this._distanceAttenuation=t,this.ssrMaterial.defines.DISTANCE_ATTENUATION=t,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=i_.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(t){this._fresnel!==t&&(this._fresnel=t,this.ssrMaterial.defines.FRESNEL=t,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=i_.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(t){this._infiniteThick!==t&&(this._infiniteThick=t,this.ssrMaterial.defines.INFINITE_THICK=t,this.ssrMaterial.needsUpdate=!0)}});const l=new Sh;l.type=de,l.minFilter=re,l.magFilter=re,this.beautyRenderTarget=new Dr(this.width,this.height,{minFilter:re,magFilter:re,depthTexture:l,depthBuffer:!0}),this.prevRenderTarget=new Dr(this.width,this.height,{minFilter:re,magFilter:re}),this.normalRenderTarget=new Dr(this.width,this.height,{minFilter:re,magFilter:re,type:ge}),this.metalnessRenderTarget=new Dr(this.width,this.height,{minFilter:re,magFilter:re}),this.ssrRenderTarget=new Dr(this.width,this.height,{minFilter:re,magFilter:re}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),void 0===i_&&console.error("THREE.SSRPass: The pass relies on SSRShader."),this.ssrMaterial=new jo({defines:Object.assign({},i_.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:Fo.clone(i_.uniforms),vertexShader:i_.vertexShader,fragmentShader:i_.fragmentShader,blending:ut}),this.ssrMaterial.uniforms["tDiffuse"].value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms["tNormal"].value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms["tMetalness"].value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms["tDepth"].value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms["cameraNear"].value=this.camera.near,this.ssrMaterial.uniforms["cameraFar"].value=this.camera.far,this.ssrMaterial.uniforms["thickness"].value=this.thickness,this.ssrMaterial.uniforms["resolution"].value.set(this.width,this.height),this.ssrMaterial.uniforms["cameraProjectionMatrix"].value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms["cameraInverseProjectionMatrix"].value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new df,this.normalMaterial.blending=ut,this.metalnessOnMaterial=new Qi({color:"white"}),this.metalnessOffMaterial=new Qi({color:"black"}),this.blurMaterial=new jo({defines:Object.assign({},a_.defines),uniforms:Fo.clone(a_.uniforms),vertexShader:a_.vertexShader,fragmentShader:a_.fragmentShader}),this.blurMaterial.uniforms["tDiffuse"].value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms["resolution"].value.set(this.width,this.height),this.blurMaterial2=new jo({defines:Object.assign({},a_.defines),uniforms:Fo.clone(a_.uniforms),vertexShader:a_.vertexShader,fragmentShader:a_.fragmentShader}),this.blurMaterial2.uniforms["tDiffuse"].value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms["resolution"].value.set(this.width,this.height),this.depthRenderMaterial=new jo({defines:Object.assign({},o_.defines),uniforms:Fo.clone(o_.uniforms),vertexShader:o_.vertexShader,fragmentShader:o_.fragmentShader,blending:ut}),this.depthRenderMaterial.uniforms["tDepth"].value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms["cameraNear"].value=this.camera.near,this.depthRenderMaterial.uniforms["cameraFar"].value=this.camera.far,this.copyMaterial=new jo({uniforms:Fo.clone(Ix.uniforms),vertexShader:Ix.vertexShader,fragmentShader:Ix.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Mt,blendDst:Et,blendEquation:mt,blendSrcAlpha:Mt,blendDstAlpha:Et,blendEquationAlpha:mt}),this.fsQuad=new zx(null),this.originalClearColor=new _r}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,e){switch(t.setRenderTarget(this.beautyRenderTarget),t.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),t.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(t,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms["opacity"].value=this.opacity,this.ssrMaterial.uniforms["maxDistance"].value=this.maxDistance,this.ssrMaterial.uniforms["thickness"].value=this.thickness,this.renderPass(t,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.renderPass(t,this.blurMaterial2,this.blurRenderTarget2)),this.output){case s_.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms["tDiffuse"].value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms["tDiffuse"].value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms["tDiffuse"].value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ct,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms["tDiffuse"].value=this.prevRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e)):(this.copyMaterial.uniforms["tDiffuse"].value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.blur?this.copyMaterial.uniforms["tDiffuse"].value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms["tDiffuse"].value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ct,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e));break;case s_.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms["tDiffuse"].value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms["tDiffuse"].value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e),this.bouncing&&(this.blur?this.copyMaterial.uniforms["tDiffuse"].value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms["tDiffuse"].value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms["tDiffuse"].value=this.ssrRenderTarget.texture,this.copyMaterial.blending=ct,this.renderPass(t,this.copyMaterial,this.prevRenderTarget));break;case s_.OUTPUT.Beauty:this.copyMaterial.uniforms["tDiffuse"].value=this.beautyRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case s_.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:e);break;case s_.OUTPUT.Normal:this.copyMaterial.uniforms["tDiffuse"].value=this.normalRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;case s_.OUTPUT.Metalness:this.copyMaterial.uniforms["tDiffuse"].value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=ut,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:e);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(t,e,n,r,i){this.originalClearColor.copy(t.getClearColor(this.tempColor));const o=t.getClearAlpha(this.tempColor),a=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,void 0!==r&&null!==r&&(t.setClearColor(r),t.setClearAlpha(i||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=a,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)}renderOverride(t,e,n,r,i){this.originalClearColor.copy(t.getClearColor(this.tempColor));const o=t.getClearAlpha(this.tempColor),a=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,r=e.clearColor||r,i=e.clearAlpha||i,void 0!==r&&null!==r&&(t.setClearColor(r),t.setClearAlpha(i||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=a,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)}renderMetalness(t,e,n,r,i){this.originalClearColor.copy(t.getClearColor(this.tempColor));const o=t.getClearAlpha(this.tempColor),a=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,r=e.clearColor||r,i=e.clearAlpha||i,void 0!==r&&null!==r&&(t.setClearColor(r),t.setClearAlpha(i||0),t.clear()),this.scene.traverseVisible((t=>{t._SSRPassBackupMaterial=t.material,this._selects.includes(t)?t.material=this.metalnessOnMaterial:t.material=this.metalnessOffMaterial})),t.render(this.scene,this.camera),this.scene.traverseVisible((t=>{t.material=t._SSRPassBackupMaterial})),t.autoClear=a,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)}setSize(t,e){this.width=t,this.height=e,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(t*t+e*e),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(t,e),this.prevRenderTarget.setSize(t,e),this.ssrRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.metalnessRenderTarget.setSize(t,e),this.blurRenderTarget.setSize(t,e),this.blurRenderTarget2.setSize(t,e),this.ssrMaterial.uniforms["resolution"].value.set(t,e),this.ssrMaterial.uniforms["cameraProjectionMatrix"].value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms["cameraInverseProjectionMatrix"].value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms["resolution"].value.set(t,e),this.blurMaterial2.uniforms["resolution"].value.set(t,e)}}s_.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7};const l_=[!1],u_=[],c_=t=>{t.userData.ssr||(t.userData.ssr=!0,u_.push(t),l_[0]=!0)},h_=t=>{t.userData.ssr&&(t.userData.ssr=!1,w(u_,t))},d_=new s_({renderer:void 0,scene:ly,camera:_v(),width:Xy,height:Yy,groundReflector:null,selects:u_});lv((t=>t&&(d_.renderer=t))),_v((t=>d_.camera=t));class p_ extends Nx{constructor(t,e,n,r){super(),this.renderScene=e,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new _r(1,1,1),this.hiddenEdgeColor=new _r(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==t?new sr(t.x,t.y):new sr(256,256);const i=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Dr(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new hh,this.depthMaterial.side=st,this.depthMaterial.depthPacking=wn,this.depthMaterial.blending=ut,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=st,this.prepareMaskMaterial.fragmentShader=u(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Dr(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Dr(i,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Dr(i,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Dr(Math.round(i/2),Math.round(o/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Dr(i,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Dr(Math.round(i/2),Math.round(o/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,s=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms["texSize"].value.set(i,o),this.separableBlurMaterial1.uniforms["kernelRadius"].value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(s),this.separableBlurMaterial2.uniforms["texSize"].value.set(Math.round(i/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms["kernelRadius"].value=s,this.overlayMaterial=this.getOverlayMaterial(),void 0===Ix&&console.error("THREE.OutlinePass relies on CopyShader");const l=Ix;function u(t,e){const n=e.isPerspectiveCamera?"perspective":"orthographic";return t.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}this.copyUniforms=Fo.clone(l.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new jo({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:ut,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new _r,this.oldClearAlpha=1,this.fsQuad=new zx(null),this.tempPulseColor1=new _r,this.tempPulseColor2=new _r,this.textureMatrix=new pi}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(t,e){this.renderTargetMaskBuffer.setSize(t,e),this.renderTargetDepthBuffer.setSize(t,e);let n=Math.round(t/this.downSampleRatio),r=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms["texSize"].value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms["texSize"].value.set(n,r)}changeVisibilityOfSelectedObjects(t){const e=this._visibilityCache;function n(n){n.isMesh&&(!0===t?n.visible=e.get(n):(e.set(n,n.visible),n.visible=t))}for(let r=0;r<this.selectedObjects.length;r++){const t=this.selectedObjects[r];t.traverse(n)}}changeVisibilityOfNonSelectedObjects(t){const e=this._visibilityCache,n=[];function r(t){t.isMesh&&n.push(t)}for(let o=0;o<this.selectedObjects.length;o++){const t=this.selectedObjects[o];t.traverse(r)}function i(r){if(r.isMesh||r.isSprite){let i=!1;for(let t=0;t<n.length;t++){const e=n[t].id;if(e===r.id){i=!0;break}}if(!1===i){const n=r.visible;!1!==t&&!0!==e.get(r)||(r.visible=t),e.set(r,n)}}else(r.isPoints||r.isLine)&&(!0===t?r.visible=e.get(r):(e.set(r,r.visible),r.visible=t))}this.renderScene.traverse(i)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(t,e,n,r,i){if(this.selectedObjects.length>0){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const e=t.autoClear;t.autoClear=!1,i&&t.state.buffers.stencil.setTest(!1),t.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const r=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,t.setRenderTarget(this.renderTargetDepthBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms["cameraNearFar"].value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms["depthTexture"].value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms["textureMatrix"].value=this.textureMatrix,t.setRenderTarget(this.renderTargetMaskBuffer),t.clear(),t.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=r,this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetMaskBuffer.texture,t.setRenderTarget(this.renderTargetMaskDownSampleBuffer),t.clear(),this.fsQuad.render(t),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const t=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(t),this.tempPulseColor2.multiplyScalar(t)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms["maskTexture"].value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms["texSize"].value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms["visibleEdgeColor"].value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms["hiddenEdgeColor"].value=this.tempPulseColor2,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms["colorTexture"].value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms["direction"].value=p_.BlurDirectionX,this.separableBlurMaterial1.uniforms["kernelRadius"].value=this.edgeThickness,t.setRenderTarget(this.renderTargetBlurBuffer1),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial1.uniforms["colorTexture"].value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms["direction"].value=p_.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer1),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms["colorTexture"].value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms["direction"].value=p_.BlurDirectionX,t.setRenderTarget(this.renderTargetBlurBuffer2),t.clear(),this.fsQuad.render(t),this.separableBlurMaterial2.uniforms["colorTexture"].value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms["direction"].value=p_.BlurDirectionY,t.setRenderTarget(this.renderTargetEdgeBuffer2),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms["maskTexture"].value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms["edgeTexture1"].value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms["edgeTexture2"].value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms["patternTexture"].value=this.patternTexture,this.overlayMaterial.uniforms["edgeStrength"].value=this.edgeStrength,this.overlayMaterial.uniforms["edgeGlow"].value=this.edgeGlow,this.overlayMaterial.uniforms["usePatternTexture"].value=this.usePatternTexture,i&&t.state.buffers.stencil.setTest(!0),t.setRenderTarget(n),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=e}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=n.texture,t.setRenderTarget(null),this.fsQuad.render(t))}getPrepareMaskMaterial(){return new jo({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new sr(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new jo({uniforms:{maskTexture:{value:null},texSize:{value:new sr(.5,.5)},visibleEdgeColor:{value:new Nr(1,1,1)},hiddenEdgeColor:{value:new Nr(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(t){return new jo({defines:{MAX_RADIUS:t},uniforms:{colorTexture:{value:null},texSize:{value:new sr(.5,.5)},direction:{value:new sr(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new jo({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:ht,depthTest:!1,depthWrite:!1,transparent:!0})}}p_.BlurDirectionX=new sr(1,0),p_.BlurDirectionY=new sr(0,1);const[f_,m_]=F("#ffffff"),[g_,v_]=F(void 0),[y_,b_]=F(void 0),[x_,__]=F(0),[w_,S_]=F(3),[M_,E_]=F(1),C_=[!1],T_=[],A_=t=>{t.userData.outline||(t.userData.outline=!0,T_.push(t),C_[0]=!0)},D_=t=>{t.userData.outline&&(t.userData.outline=!1,w(T_,t))},P_=new p_(new sr,ly,_v(),T_);_v((t=>P_.renderCamera=t)),X((()=>{var t;const e=m_(),n=null!=(t=v_())?t:e;P_.visibleEdgeColor=new _r(e),P_.hiddenEdgeColor=new _r(n)}),[m_,v_]),X((()=>{const t=b_();if(t)return P_.patternTexture=ry(t),P_.usePatternTexture=!0,()=>{P_.usePatternTexture=!1}}),[b_]),__((t=>P_.pulsePeriod=.001*t)),S_((t=>P_.edgeStrength=t)),E_((t=>P_.edgeThickness=t));const R_=new WeakMap,L_=new WeakMap,O_=new WeakMap;class k_ extends O{constructor(t,e){super(),m(this,"clip"),m(this,"name"),m(this,"mixer"),m(this,"action"),this.mixer=b(R_,e,(()=>new Hm(e))),"string"===typeof t?this.name=t:(this.name=t.name,this.loadClip(t))}retarget(t){const e=this.clip.clone(),n=t.name+".";return e.tracks=e.tracks.filter((t=>t.name.startsWith(n))),new k_(e,t)}dispose(){return this.done||(super.dispose(),this.stop()),this}get duration(){var t,e;return null!=(e=null==(t=this.clip)?void 0:t.duration)?e:0}loadClip(t){this.clip=t,this.action=this.mixer.clipAction(t)}setTracks(t){const e=Object.entries(t).map((([t,e])=>new Ef("."+t,Object.keys(e).map((t=>Number(t))),Object.values(e))));this.clip&&this.mixer.uncacheClip(this.clip),this.loadClip(new Pf(this.name,-1,e))}play({crossFade:t=.25,repeat:e=!0,onFinish:n}={}){var r,i;const[o,a]=null!=(r=L_.get(this.mixer))?r:[];if((null==o?void 0:o.isRunning())&&this.action===o)return void(e!==a&&o.setLoop(e?an:on,1/0));null==(i=O_.get(this.mixer))||i.cancel();const s=this.watch(mv((()=>this.mixer.update(Yg[0]))));O_.set(this.mixer,s);const{action:l}=this;if(!l)return;o&&t?(l.time=0,l.enabled=!0,l.crossFadeFrom(o,t,!0)):this.mixer.stopAllAction(),L_.set(this.mixer,[l,e]),l.setLoop(e?an:on,1/0),l.clampWhenFinished=!0;const u=()=>null==n?void 0:n();this.mixer.addEventListener("finished",u),s.then((()=>this.mixer.removeEventListener("finished",u))),l.paused&&l.stop(),l.play()}stop(){var t;this.action&&(this.action.paused=!0),null==(t=O_.get(this.mixer))||t.cancel()}getPaused(){var t;return null==(t=this.action)?void 0:t.paused}setPaused(t){this.action&&(this.action.paused=t)}update(t){this.mixer.time=0,this.action&&(this.action.time=0),this.mixer.update(t)}}const I_=C((t=>{const e=Object.entries(t);let n=0;for(const[,{length:a}]of e)a>n&&(n=a);const r=1e3,i=.001*r/n,o={};for(const[a,s]of e)o[a]=Object.fromEntries(s.map(((t,e)=>[(e*i).toFixed(2),t])));return o}),0,"trailingPromise");class N_ extends Wv{constructor(){super(...arguments),m(this,"animationManagers"),m(this,"loadingAnims"),m(this,"animationManager"),m(this,"animationName"),m(this,"_animation")}get animations(){var t;return null!=(t=this.animationManagers)?t:this.animationManagers={}}set animations(t){this.animationManagers=t}createAnimation(t){if(t in this.animations){const e=this.animations[t];if("string"!==typeof e)return e}const e=this.watch(new k_(t,this));return this.animations[t]=e,e}buildAnimation(t){I_(t).then((t=>{const e="lingo3d-animation";this.createAnimation(e).setTracks(t),this.playAnimation(e)}))}makeAnimationProxy(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(t[e]=n,this.buildAnimation(t),!0)})}async playAnimation(t,e){var n;await Promise.resolve(),this.loadingAnims&&(await Promise.all(this.loadingAnims),this.loadingAnims=void 0),this.done||(this.animationManager="string"===typeof t?this.animations[t]:Object.values(this.animations)[null!=t?t:0],null==(n=this.animationManager)||n.play(e))}stopAnimation(){var t;null==(t=this.animationManager)||t.stop()}get animationPaused(){var t;return!!(null==(t=this.animationManager)?void 0:t.getPaused())}set animationPaused(t){(async()=>{var e;await Promise.resolve(),this.loadingAnims&&await Promise.all(this.loadingAnims),this.done||null==(e=this.animationManager)||e.setPaused(t)})()}setAnimation(t,e){if(this._animation=t,"string"===typeof t||"number"===typeof t)return this.animationName=t,void this.playAnimation(t,e);"boolean"!==typeof t?t?(this._animation=this.makeAnimationProxy(t),this.buildAnimation(t)):this.stopAnimation():t?this.playAnimation(void 0,e):this.stopAnimation()}get animation(){return this._animation}set animation(t){if(Array.isArray(t)){let e=0;const n={onFinish:()=>{++e>=t.length&&(e=0),this.setAnimation(t[e],n)},repeat:!1};this.setAnimation(t[0],n)}else this.queueMicrotask((()=>this.setAnimation(t)))}}const B_=["name","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","alphaToCoverage","premultipliedAlpha","visible","toneMapped"];var F_=(t,e)=>{for(const i of B_){const n=t[i];null!=n&&(e[i]=n)}const n=t.clippingPlanes;let r=null;if(n){const t=n.length;r=new Array(t);for(let e=0;e!==t;++e)r[e]=n[e].clone()}e.clippingPlanes=r};const z_=["roughness","metalness","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveMap","emissiveIntensity","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","alphaMap","envMap","envMapIntensity","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","flatShading","fog"];var U_=(t,e)=>{F_(t,e);for(const n of z_){const r=t[n];null!=r&&(e[n]=r)}e.defines={STANDARD:""},t.color&&e.color.copy(t.color),t.emissive&&e.emissive.copy(t.emissive),t.normalScale&&e.normalScale.copy(t.normalScale)};const j_=["map","gradientMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveMap","emissiveIntensity","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","alphaMap","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fog"];var V_=(t,e)=>{F_(t,e);for(const n of j_){const r=t[n];null!=r&&(e[n]=r)}t.color&&e.color.copy(t.color),t.emissive&&e.emissive.copy(t.emissive),t.normalScale&&e.normalScale.copy(t.normalScale)};const H_=new Ox,W_=new Ox,G_=M((()=>{const t=_v();Uy.setFromProjectionMatrix(jy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse))}),200,"leading"),q_=new WeakSet,X_=(t,e,n)=>{var r,i;const o=null!=(i=(r=t.userData)[e])?i:r[e]=t.material[e];t.material[e]=void 0===n?o:(o||(q_.has(t.material)?1:0))*n},Y_=(t,e,n)=>{var r,i;const o=null!=(i=(r=t.userData)[e])?i:r[e]=t.material[e];t.material[e]=void 0===n?o:n},Z_=new Map,K_=()=>new Set;class J_ extends Wv{constructor(t){super(t),m(this,"object3d"),m(this,"_id"),m(this,"clickHandle"),m(this,"_onClick"),m(this,"mouseDownHandle"),m(this,"_onMouseDown"),m(this,"mouseUpHandle"),m(this,"_onMouseUp"),m(this,"mouseOverHandle"),m(this,"_onMouseOver"),m(this,"mouseOutHandle"),m(this,"_onMouseOut"),m(this,"mouseMoveHandle"),m(this,"_onMouseMove"),m(this,"_visible"),m(this,"_refreshFactors"),m(this,"_metalnessFactor"),m(this,"_roughnessFactor"),m(this,"_opacityFactor"),m(this,"_toon"),m(this,"_pbr"),this.object3d=t}dispose(){return this.done||(super.dispose(),h_(this.object3d),void 0!==this._id&&Z_.get(this._id).delete(this)),this}get id(){return this._id}set id(t){void 0!==this._id&&Z_.get(this._id).delete(this),this._id=t,void 0!==t&&b(Z_,t,K_).add(this)}addToRaycastSet(t,e){t.add(this.object3d),e.then((()=>t.delete(this.object3d)))}get onClick(){return this._onClick}set onClick(t){var e;null==(e=this.clickHandle)||e.cancel(),this._onClick=t,t&&this.addToRaycastSet(cx,this.clickHandle=new L)}get onMouseDown(){return this._onMouseDown}set onMouseDown(t){var e;null==(e=this.mouseDownHandle)||e.cancel(),this._onMouseDown=t,t&&this.addToRaycastSet(hx,this.mouseDownHandle=new L)}get onMouseUp(){return this._onMouseUp}set onMouseUp(t){var e;null==(e=this.mouseUpHandle)||e.cancel(),this._onMouseUp=t,t&&this.addToRaycastSet(dx,this.mouseUpHandle=new L)}get onMouseOver(){return this._onMouseOver}set onMouseOver(t){var e;null==(e=this.mouseOverHandle)||e.cancel(),this._onMouseOver=t,t&&this.addToRaycastSet(px,this.mouseOverHandle=new L)}get onMouseOut(){return this._onMouseOut}set onMouseOut(t){var e;null==(e=this.mouseOutHandle)||e.cancel(),this._onMouseOut=t,t&&this.addToRaycastSet(fx,this.mouseOutHandle=new L)}get onMouseMove(){return this._onMouseMove}set onMouseMove(t){var e;null==(e=this.mouseMoveHandle)||e.cancel(),this._onMouseMove=t,t&&this.addToRaycastSet(mx,this.mouseMoveHandle=new L)}get name(){return this.outerObject3d.name}set name(t){this.outerObject3d.name=jm.sanitizeNodeName(t)}getRay(){return Ny.set(this.object3d.getWorldPosition(Dy),this.object3d.getWorldDirection(Ay))}pointAt(t){return Vy(this.getRay().at(t*Ig,Ay))}rayIntersectsAt(t,e){if(this.done)return;if(t.done)return;if(this===t)return;W_.set(t.object3d.getWorldPosition(Py),ky,(new lr).setFromMatrix4(t.object3d.matrixWorld));const n=W_.intersectRay(this.getRay(),Ay);if(n){if(e){const{x:t,y:r,z:i}=this.object3d.getWorldPosition(Dy);if(Ey(n.x,n.y,n.z,t,r,i)*Ng>e)return}return Vy(n)}}rayIntersects(t){return!!this.rayIntersectsAt(t)}intersects(t){return!this.done&&(!t.done&&(this!==t&&(H_.set(this.object3d.getWorldPosition(Ay),Oy.clone(),new lr),H_.applyMatrix4(this.object3d.matrixWorld),W_.set(t.object3d.getWorldPosition(Dy),Oy.clone(),new lr),W_.applyMatrix4(t.object3d.matrixWorld),H_.intersectsOBB(W_,0))))}get clientX(){return r_(this.object3d).x}get clientY(){return r_(this.object3d).y}get reflection(){return!!this.object3d.userData.ssr}set reflection(t){t?c_(this.object3d):h_(this.object3d)}get bloom(){return!!this.outerObject3d.userData.bloom}set bloom(t){t?Yx(this.outerObject3d):Zx(this.outerObject3d)}get outline(){return!!this.object3d.userData.outline}set outline(t){t?A_(this.object3d):D_(this.object3d)}get visible(){return!1!==this._visible}set visible(t){this._visible=t,this.outerObject3d.visible=t}get frustumCulled(){return this.outerObject3d.frustumCulled}set frustumCulled(t){this.outerObject3d.traverse((e=>e.frustumCulled=t))}refreshFactors(){this._refreshFactors?this._refreshFactors.set({}):(this._refreshFactors=new Z({}),this.createEffect((()=>{const t=new L,{_toon:e,_pbr:n,_metalnessFactor:r,_roughnessFactor:i,_opacityFactor:o}=this;return this.outerObject3d.traverse((a=>{let{material:s}=a;s&&(Array.isArray(s)&&(s=s[0]),e?(a.material=new hf,V_(s,a.material)):n&&(q_.add(a.material=new lf),U_(s,a.material)),void 0!==r&&0!==r&&X_(a,"metalness",r),void 0!==i&&1!==i&&X_(a,"roughness",i),void 0!==o&&1!==o&&(X_(a,"opacity",o),Y_(a,"transparent",o<1)),t.then((()=>{if(a.material===s)return X_(a,"metalness",void 0),X_(a,"roughness",void 0),X_(a,"opacity",void 0),void Y_(a,"transparent",void 0);a.material.dispose(),a.material=s})))})),()=>{t.cancel()}}),[this._refreshFactors.get]))}get metalnessFactor(){var t;return null!=(t=this._metalnessFactor)?t:0}set metalnessFactor(t){this._metalnessFactor=t,this.refreshFactors()}get roughnessFactor(){var t;return null!=(t=this._roughnessFactor)?t:1}set roughnessFactor(t){this._roughnessFactor=t,this.refreshFactors()}get opacityFactor(){var t;return null!=(t=this._opacityFactor)?t:1}set opacityFactor(t){this._opacityFactor=t,this.refreshFactors()}get toon(){var t;return null!=(t=this._toon)&&t}set toon(t){this._toon=t,this.refreshFactors()}get pbr(){var t;return null!=(t=this._pbr)&&t}set pbr(t){this._pbr=t,this.refreshFactors()}get frustumVisible(){return G_(),Uy.containsPoint(Wy(this.object3d))}lookAt(t){"outerObject3d"in t?this.outerObject3d.lookAt($_(t).getWorldPosition(Ay)):this.outerObject3d.lookAt(Hy(t))}}D(J_,[N_]);const Q_=t=>!!t&&(ew(t)||t instanceof J_),$_=t=>"object3d"in t?t.object3d:t.outerObject3d;class tw extends Wv{get x(){return this.outerObject3d.position.x*Ng}set x(t){this.outerObject3d.position.x=t*Ig}get y(){return this.outerObject3d.position.y*Ng}set y(t){this.outerObject3d.position.y=t*Ig}get z(){return this.outerObject3d.position.z*Ng}set z(t){this.outerObject3d.position.z=t*Ig}getWorldPosition(){return Vy($_(this).getWorldPosition(Dy))}}const ew=t=>t instanceof Wv&&"getWorldPosition"in t,nw=new WeakMap;var rw=t=>{if(nw.has(t))return nw.get(t);const e=$_(t).scale.clone().multiply(t.outerObject3d.scale);return nw.set(t,e),setTimeout((()=>nw.delete(t))),e};const[iw,ow]=F(20),[aw,sw]=F(void 0);var lw=A((async()=>{const{World:t,GSSolver:e,SplitSolver:r,NaiveBroadphase:i,Material:o,ContactMaterial:a,Body:s,Vec3:l,Box:u,Sphere:c,Cylinder:h}=await n.e(904).then(n.bind(n,2904)),d=new t;ow((t=>d.gravity.set(0,-t,0))),d.quatNormalizeSkip=0,d.quatNormalizeFast=!1;const p=new e;d.defaultContactMaterial.contactEquationStiffness=1e9,d.defaultContactMaterial.contactEquationRelaxation=4,p.iterations=7,p.tolerance=.1,d.solver=new r(p),d.broadphase=new i;const[f]=d.defaultContactMaterial.materials,m=new o("slipperyMaterial");return d.addContactMaterial(new a(m,m,{friction:0,restitution:0})),d.addContactMaterial(new a(m,f,{friction:.001,restitution:0})),aw(d),{world:d,defaultMaterial:f,slipperyMaterial:m,Body:s,Vec3:l,Box:u,Sphere:c,Cylinder:h}}));async function uw(){const{Box:t}=await lw();this.cannonBody.addShape(new t(rw(this).multiplyScalar(.5)))}class cw extends tw{constructor(){super(...arguments),m(this,"_mAV"),m(this,"_mV"),m(this,"physicsUpdate"),m(this,"cannonBody"),m(this,"_noTumble"),m(this,"_slippery"),m(this,"_mass"),m(this,"_physicsGroup"),m(this,"_ignorePhysicsGroups"),m(this,"_physicsShape"),m(this,"bvhVelocity"),m(this,"bvhOnGround"),m(this,"bvhRadius"),m(this,"bvhHalfHeight"),m(this,"bvhMap"),m(this,"bvhCharacter"),m(this,"physicsHandle"),m(this,"_physics")}getMAV(){var t;return null!=(t=this._mAV)?t:this._mAV=new wy(1/0,1/0,1/0)}get maxAngularVelocityX(){var t,e;return null!=(e=null==(t=this._mAV)?void 0:t.x)?e:1/0}set maxAngularVelocityX(t){this.getMAV().x=t}get maxAngularVelocityY(){var t,e;return null!=(e=null==(t=this._mAV)?void 0:t.y)?e:1/0}set maxAngularVelocityY(t){this.getMAV().y=t}get maxAngularVelocityZ(){var t,e;return null!=(e=null==(t=this._mAV)?void 0:t.z)?e:1/0}set maxAngularVelocityZ(t){this.getMAV().z=t}getMV(){var t;return null!=(t=this._mV)?t:this._mV=new wy(1/0,1/0,1/0)}get maxVelocityX(){var t,e;return null!=(e=null==(t=this._mV)?void 0:t.x)?e:1/0}set maxVelocityX(t){this.getMV().x=t}get maxVelocityY(){var t,e;return null!=(e=null==(t=this._mV)?void 0:t.y)?e:1/0}set maxVelocityY(t){this.getMV().y=t}get maxVelocityZ(){var t,e;return null!=(e=null==(t=this._mV)?void 0:t.z)?e:1/0}set maxVelocityZ(t){this.getMV().z=t}physicsRotate(){var t,e;if(!this.physicsUpdate)return;const n=null!=(e=(t=this.physicsUpdate).rotation)?e:t.rotation={};n.x=!0,n.y=!0,n.z=!0}physicsMove(){var t,e;if(!this.physicsUpdate)return;const n=null!=(e=(t=this.physicsUpdate).position)?e:t.position={};n.x=!0,n.y=!0,n.z=!0}physicsMoveXZ(){var t,e;if(!this.physicsUpdate)return;const n=null!=(e=(t=this.physicsUpdate).position)?e:t.position={};n.x=!0,n.z=!0}applyForce(t,e,n){setTimeout((()=>{var r;return null==(r=this.cannonBody)?void 0:r.applyForce({x:t,y:e,z:n})}))}applyImpulse(t,e,n){setTimeout((()=>{var r;return null==(r=this.cannonBody)?void 0:r.applyImpulse({x:t,y:e,z:n})}))}applyLocalForce(t,e,n){setTimeout((()=>{var r;return null==(r=this.cannonBody)?void 0:r.applyLocalForce({x:t,y:e,z:n})}))}applyLocalImpulse(t,e,n){setTimeout((()=>{var r;return null==(r=this.cannonBody)?void 0:r.applyLocalImpulse({x:t,y:e,z:n})}))}applyTorque(t,e,n){setTimeout((()=>{var r;return null==(r=this.cannonBody)?void 0:r.applyTorque({x:t,y:e,z:n})}))}get velocity(){return this.bvhVelocity?this.bvhVelocity:this.cannonBody?this.cannonBody.velocity:new wy(0,0,0)}set velocity(t){this.bvhVelocity?Object.assign(this.bvhVelocity,t):this.cannonBody&&Object.assign(this.cannonBody.velocity,t)}refreshCannon(){var t;this.physicsUpdate&&(this.physics=null!=(t=this._physics)&&t)}get noTumble(){return this._noTumble}set noTumble(t){this._noTumble=t,this.refreshCannon()}get slippery(){return this._slippery}set slippery(t){this._slippery=t,this.refreshCannon()}get mass(){return this._mass}set mass(t){this._mass=t,this.refreshCannon()}get physicsGroup(){return this._physicsGroup}set physicsGroup(t){this._physicsGroup=t,this.refreshCannon()}get ignorePhysicsGroups(){return this._ignorePhysicsGroups}set ignorePhysicsGroups(t){this._ignorePhysicsGroups=t,this.refreshCannon()}get physicsShape(){var t;return null!=(t=this._physicsShape)?t:this._physicsShape=uw}set physicsShape(t){this._physicsShape=t,this.refreshCannon()}initPhysics(t,e){if(t&&!e.done)switch(t){case!0:case"2d":n.e(549).then(n.bind(n,7549)).then((t=>t.default.call(this,e)));break;case"map":this.bvhMap=!0,Promise.all([n.e(127),n.e(579)]).then(n.bind(n,579)).then((t=>t.default.call(this,e,!1)));break;case"map-debug":this.bvhMap=!0,Promise.all([n.e(127),n.e(579)]).then(n.bind(n,579)).then((t=>t.default.call(this,e,!0)));break;case"character":this.bvhCharacter=!0,Promise.all([n.e(127),n.e(169)]).then(n.bind(n,4321)).then((t=>t.default.call(this,e)));break;default:x(t)}}get physics(){var t;return null!=(t=this._physics)&&t}set physics(t){var e;if(this._physics===t)return;this._physics=t,null==(e=this.physicsHandle)||e.cancel();const n=this.physicsHandle=this.cancellable();this.initPhysics(t,n)}}var hw=new Map;const dw=new Set,pw=new Map,fw=new WeakSet,mw=()=>new WeakSet,gw=1/60;X((function(){if(Ib())return;const t=sw();if(!t)return;const e=mv((()=>{for(const t of dw){const e=t.cannonBody;if("_mAV"in t){const{x:n,y:r,z:i}=t._mAV,{angularVelocity:o}=e;o.x>n?o.x=n:o.x<-n&&(o.x=-n),o.y>r?o.y=r:o.y<-r&&(o.y=-r),o.z>i?o.z=i:o.z<-i&&(o.z=-i)}if("_mV"in t){const{x:n,y:r,z:i}=t._mV,{velocity:o}=e;o.x>n?o.x=n:o.x<-n&&(o.x=-n),o.y>r?o.y=r:o.y<-r&&(o.y=-r),o.z>i?o.z=i:o.z<-i&&(o.z=-i)}const{position:n,rotation:r}=t.physicsUpdate;t.physicsUpdate={},n&&(n.x&&(e.position.x=t.outerObject3d.position.x,e.velocity.x=0,e.force.x=0),n.y&&(e.position.y=t.outerObject3d.position.y,e.velocity.y=0,e.force.y=0),n.z&&(e.position.z=t.outerObject3d.position.z,e.velocity.z=0,e.force.z=0)),t.outerObject3d.position.copy(e.position),r?(r.x&&(e.angularVelocity.x=0,e.torque.x=0),r.y&&(e.angularVelocity.y=0,e.torque.y=0),r.z&&(e.angularVelocity.z=0,e.torque.z=0),e.quaternion.copy(t.outerObject3d.quaternion)):t.outerObject3d.quaternion.copy(e.quaternion)}t.step(gw),pw.clear();for(const e of t.contacts)b(pw,e.bi,mw).add(e.bj)}));return()=>{e.cancel()}}),[sw,Ib]);const vw=new Map,yw=()=>new Set,bw=new WeakMap,xw=(t,e)=>{const n=bw.get(t);if(n)return n;const r=Ey(t.x,t.y,t.z,e.x*Ng,e.y*Ng,e.z*Ng);return bw.set(t,r),r};class _w extends J_{constructor(){super(...arguments),m(this,"onIntersectState"),m(this,"onIntersectOutState"),m(this,"intersectIdsState"),m(this,"onRotationY")}get id(){return this._id}set id(t){void 0!==this._id&&(Z_.get(this._id).delete(this),vw.get(this._id).delete(this)),this._id=t,void 0!==t&&(b(Z_,t,yw).add(this),b(vw,t,yw).add(this))}getRayIntersectionsAt(t,e){var n;const r=[];for(const i of null!=(n=vw.get(t))?n:[]){if(i===this)continue;const t=this.rayIntersectsAt(i,e);t&&r.push([i,t])}return this.object3d.getWorldPosition(Dy),r.sort(((t,e)=>xw(t[1],Dy)-xw(e[1],Dy)))}getRayIntersections(t,e){return this.getRayIntersectionsAt(t,e).map((t=>t[0]))}listenToRayIntersection(t,e,n){return this.loop((()=>{for(const[r,i]of this.getRayIntersectionsAt(t,n))e(r,i)}))}getIntersections(t){var e;const n=[];for(const r of null!=(e=vw.get(t))?e:[])r!==this&&this.intersects(r)&&n.push(r);return n}listenToIntersection(t,e,n){let r=[];return this.loop((()=>{const i=this.getIntersections(t);if(e)for(const t of i)r.includes(t)||e(t);if(n)for(const t of r)i.includes(t)||n(t);r=i}))}initIntersect(){this.onIntersectState||(this.onIntersectState=new Z(void 0),this.onIntersectOutState=new Z(void 0),this.intersectIdsState=new Z(void 0),this.createEffect((()=>{const{onIntersect:t,onIntersectOut:e,intersectIds:n}=this;if(!n||!t&&!e)return;const r=[];for(const i of n)r.push(this.listenToIntersection(i,t,e));return()=>{for(const t of r)t.cancel()}}),[this.onIntersectState.get,this.onIntersectOutState.get,this.intersectIdsState.get]))}get onIntersect(){var t;return null==(t=this.onIntersectState)?void 0:t.get()}set onIntersect(t){var e;this.initIntersect(),null==(e=this.onIntersectState)||e.set(t)}get onIntersectOut(){var t;return null==(t=this.onIntersectOutState)?void 0:t.get()}set onIntersectOut(t){var e;this.initIntersect(),null==(e=this.onIntersectOutState)||e.set(t)}get intersectIds(){var t;return null==(t=this.intersectIdsState)?void 0:t.get()}set intersectIds(t){var e;this.initIntersect(),null==(e=this.intersectIdsState)||e.set(t)}dispose(){return this.done||(super.dispose(),void 0!==this._id&&vw.get(this._id).delete(this)),this}intersects(t){var e,n,r,i;return!this.done&&(!t.done&&(this!==t&&(this.bvhMap&&t.bvhCharacter||this.bvhCharacter&&t.bvhMap?(null==(e=hw.get(this))?void 0:e.has(t))||(null==(n=hw.get(t))?void 0:n.has(this))||!1:this.cannonBody&&t.cannonBody?(fw.add(this.cannonBody),fw.add(t.cannonBody),(null==(r=pw.get(this.cannonBody))?void 0:r.has(t.cannonBody))||(null==(i=pw.get(t.cannonBody))?void 0:i.has(this.cannonBody))||!1):super.intersects(t))))}get width(){return this.object3d.scale.x*Ng}set width(t){this.object3d.scale.x=t*Ig}get height(){return this.object3d.scale.y*Ng}set height(t){this.object3d.scale.y=t*Ig}get depth(){return this.object3d.scale.z*Ng}set depth(t){this.object3d.scale.z=t*Ig}get x(){return this.outerObject3d.position.x*Ng}set x(t){var e,n;this.outerObject3d.position.x=t*Ig,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).position)?n:e.position={}).x=!0)}get y(){return this.outerObject3d.position.y*Ng}set y(t){var e,n;this.outerObject3d.position.y=t*Ig,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).position)?n:e.position={}).y=!0)}get z(){return this.outerObject3d.position.z*Ng}set z(t){var e,n;this.outerObject3d.position.z=t*Ig,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).position)?n:e.position={}).z=!0)}get scaleX(){return this.outerObject3d.scale.x}set scaleX(t){this.outerObject3d.scale.x=t}get scaleY(){return this.outerObject3d.scale.y}set scaleY(t){this.outerObject3d.scale.y=t}get scaleZ(){return this.outerObject3d.scale.z}set scaleZ(t){this.outerObject3d.scale.z=t}get scale(){return this.scaleX}set scale(t){this.scaleX=t,this.scaleY=t,this.scaleZ=t}get rotationX(){return this.outerObject3d.rotation.x*Sy}set rotationX(t){var e,n;this.outerObject3d.rotation.x=t*My,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).rotation)?n:e.rotation={}).x=!0)}get rotationY(){return this.outerObject3d.rotation.y*Sy}set rotationY(t){var e,n,r;this.outerObject3d.rotation.y=t*My,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).rotation)?n:e.rotation={}).y=!0),null==(r=this.onRotationY)||r.call(this)}get rotationZ(){return this.outerObject3d.rotation.z*Sy}set rotationZ(t){var e,n;this.outerObject3d.rotation.z=t*My,this.physicsUpdate&&((null!=(n=(e=this.physicsUpdate).rotation)?n:e.rotation={}).z=!0)}get rotation(){return this.rotationZ}set rotation(t){this.rotationZ=t}get innerVisible(){return this.object3d.visible}set innerVisible(t){this.object3d.visible=t}lookAt(t){var e;super.lookAt(t),this.physicsRotate(),null==(e=this.onRotationY)||e.call(this)}translateX(t){this.outerObject3d.translateX(t*Ig),this.physicsMove()}translateY(t){this.outerObject3d.translateY(t*Ig),this.physicsMove()}translateZ(t){this.outerObject3d.translateZ(t*Ig),this.physicsMove()}placeAt(t){var e;"outerObject3d"in t?(this.outerObject3d.position.copy(Wy($_(t))),this.outerObject3d.quaternion.copy(t.outerObject3d.getWorldQuaternion(Ry))):this.outerObject3d.position.copy(Hy(t)),this.physicsMove(),this.physicsRotate(),null==(e=this.onRotationY)||e.call(this)}moveForward(t){0!==t&&(Ay.setFromMatrixColumn(this.outerObject3d.matrix,0),Ay.crossVectors(this.outerObject3d.up,Ay),this.outerObject3d.position.addScaledVector(Ay,t*Ig),this.physicsMoveXZ())}moveRight(t){0!==t&&(Ay.setFromMatrixColumn(this.outerObject3d.matrix,0),this.outerObject3d.position.addScaledVector(Ay,t*Ig),this.physicsMoveXZ())}}D(_w,[tw,cw]);const ww={animations:Object,animation:[String,Number,Array,Boolean,Object],animationPaused:Boolean},Sw={animations:{},animationPaused:!1},Mw=f(p(p({},Uv),ww),{onClick:Function,onMouseDown:Function,onMouseUp:Function,onMouseOver:Function,onMouseOut:Function,onMouseMove:Function,name:String,id:String,bloom:Boolean,reflection:Boolean,outline:Boolean,visible:Boolean,frustumCulled:Boolean,metalnessFactor:Number,roughnessFactor:Number,opacityFactor:Number,toon:Boolean,pbr:Boolean}),Ew=f(p(p({},jv),Sw),{name:"",bloom:!1,reflection:!1,outline:!1,visible:!0,frustumCulled:!0,metalnessFactor:0,roughnessFactor:1,opacityFactor:1,toon:!1,pbr:!1}),Cw={color:String,vertexColors:Boolean,fog:Boolean,opacity:Number,texture:[String,Object],videoTexture:[String,Object],alphaMap:String,textureRepeat:[Object,Number]},Tw={color:"#ffffff",vertexColors:!1,fog:!0,opacity:1},Aw={color:String,flatShading:Boolean,wireframe:Boolean,envMap:String,aoMap:String,aoMapIntensity:Number,bumpMap:String,bumpScale:Number,displacementMap:String,displacementScale:Number,displacementBias:Number,emissiveColor:String,emissiveMap:String,emissiveIntensity:Number,lightMap:String,lightMapIntensity:Number,metalnessMap:String,metalness:Number,roughnessMap:String,roughness:Number,normalMap:String,normalScale:[Object,Number],normalMapType:String},Dw={color:"#ffffff",flatShading:!1,wireframe:!1,aoMapIntensity:1,bumpScale:1,displacementScale:1,displacementBias:0,emissiveColor:"#000000",emissiveIntensity:1,lightMapIntensity:1,metalness:0,roughness:1,normalScale:{x:1,y:1}},Pw=p(p(p({},Mw),Cw),Aw),Rw=p(p(p({},Ew),Tw),Dw),Lw=[t=>t],Ow=["map","alphaMap"],kw=new Map,Iw=C((function(){for(const[t,e]of kw)for(const n of Ow){const r=t.material[n];r&&(r.repeat=e)}kw.clear()}),0,"trailing");class Nw{constructor(){m(this,"_opacity"),m(this,"videoTextureState"),m(this,"textureState"),m(this,"_alphaMap"),m(this,"_textureRepeat")}get color(){return"#"+this.material.color.getHexString()}set color(t){this.material.color=new _r(t)}get vertexColors(){return this.material.vertexColors}set vertexColors(t){this.material.vertexColors=t}get fog(){return this.material.fog}set fog(t){this.material.fog=t}get opacity(){var t;return null!=(t=this._opacity)?t:this._opacity=1}set opacity(t){var e;this._opacity=t,this.material.opacity=t,this.material.transparent=null!=(e=this.transparent)?e:t<1,this.object3d.visible=!!t}basicTextureRepeat(){this.material.needsUpdate=!0,this._textureRepeat&&(kw.set(this,this._textureRepeat),Iw())}initTexture(){var t,e;if(this.textureState)return;const n=null!=(t=this.videoTextureState)?t:this.videoTextureState=new Z(void 0),r=null!=(e=this.textureState)?e:this.textureState=new Z(void 0);this.createEffect((()=>{const t=r.get();let e=n.get();if(!e&&("string"===typeof t&&Lw[0](t).toLowerCase().endsWith(".mp4")||t&&t instanceof HTMLVideoElement)&&(e=t),e){let t;e instanceof HTMLVideoElement?t=e:(t=document.createElement("video"),t.crossOrigin="anonymous",t.src=e,t.loop=!0,t.autoplay=!0,t.muted=!0,t.playsInline=!0,t.play());const n=new Rd(t);n.wrapS=n.wrapT=te;const{material:r}=this,{map:i}=r;return r.map=n,r.needsUpdate=!0,this.basicTextureRepeat(),()=>{t.pause(),n.dispose(),r.map=i,r.needsUpdate=!0}}if(!t)return;const{material:i}=this,{map:o}=i;return i.map=ry(t),this.basicTextureRepeat(),()=>{i.map=o,this.material.needsUpdate=!0}}),[n.get,r.get])}get videoTexture(){var t;return null==(t=this.videoTextureState)?void 0:t.get()}set videoTexture(t){this.initTexture(),this.videoTextureState.set(t)}get texture(){var t;return null==(t=this.textureState)?void 0:t.get()}set texture(t){this.initTexture(),this.textureState.set(t)}get alphaMap(){return this._alphaMap}set alphaMap(t){this._alphaMap=t,this.material.alphaMap=t?ry(t):null,this.basicTextureRepeat()}get textureRepeat(){return this._textureRepeat}set textureRepeat(t){"number"===typeof t&&(t=new sr(t,t)),this._textureRepeat=t,this.basicTextureRepeat()}}const Bw=["map","alphaMap","envMap","aoMap","bumpMap","displacementMap","emissiveMap","lightMap","metalnessMap","roughnessMap","normalMap"],Fw=new Map,zw=C((function(){for(const[t,e]of Fw)for(const n of Bw){const r=t.material[n];r&&(r.repeat=e)}Fw.clear()}),0,"trailing");class Uw{constructor(){m(this,"_envMap"),m(this,"_aoMap"),m(this,"_bumpMap"),m(this,"_displacementMap"),m(this,"_emissiveMap"),m(this,"_lightMap"),m(this,"_metalnessMap"),m(this,"_roughnessMap"),m(this,"_normalMap"),m(this,"_normalMapType")}get color(){return"#"+this.material.color.getHexString()}set color(t){this.material.color=new _r(t)}get flatShading(){return this.material.flatShading}set flatShading(t){this.material.flatShading=t}get wireframe(){return this.material.wireframe}set wireframe(t){this.material.wireframe=t}standardTextureRepeat(){this.material.needsUpdate=!0,this._textureRepeat&&(Fw.set(this,this._textureRepeat),zw())}get envMap(){return this._envMap}set envMap(t){this._envMap=t,this.material.envMap=t?ry(t):null,this.standardTextureRepeat()}get aoMap(){return this._aoMap}set aoMap(t){this._aoMap=t,this.material.aoMap=t?ry(t):null,this.standardTextureRepeat()}get aoMapIntensity(){return this.material.aoMapIntensity}set aoMapIntensity(t){this.material.aoMapIntensity=t}get bumpMap(){return this._bumpMap}set bumpMap(t){this._bumpMap=t,this.material.bumpMap=t?ry(t):null,this.standardTextureRepeat()}get bumpScale(){return this.material.bumpScale}set bumpScale(t){this.material.bumpScale=t}get displacementMap(){return this._displacementMap}set displacementMap(t){this._displacementMap=t,this.material.displacementMap=t?ry(t):null,this.standardTextureRepeat()}get displacementScale(){return this.material.displacementScale}set displacementScale(t){this.material.displacementScale=t}get displacementBias(){return this.material.displacementBias}set displacementBias(t){this.material.displacementBias=t}get emissiveColor(){return"#"+this.material.emissive.getHexString()}set emissiveColor(t){this.material.emissive=new _r(t)}get emissiveMap(){return this._emissiveMap}set emissiveMap(t){this._emissiveMap=t,this.material.emissiveMap=t?ry(t):null,this.standardTextureRepeat()}get emissiveIntensity(){return this.material.emissiveIntensity}set emissiveIntensity(t){this.material.emissiveIntensity=t}get lightMap(){return this._lightMap}set lightMap(t){this._lightMap=t,this.material.lightMap=t?ry(t):null,this.standardTextureRepeat()}get lightMapIntensity(){return this.material.lightMapIntensity}set lightMapIntensity(t){this.material.lightMapIntensity=t}get metalnessMap(){return this._metalnessMap}set metalnessMap(t){this._metalnessMap=t,this.material.metalnessMap=t?ry(t):null,this.standardTextureRepeat()}get metalness(){return this.material.metalness}set metalness(t){this.material.metalness=t}get roughnessMap(){return this._roughnessMap}set roughnessMap(t){this._roughnessMap=t,this.material.roughnessMap=t?ry(t):null,this.standardTextureRepeat()}get roughness(){return this.material.roughness}set roughness(t){this.material.roughness=t}get normalMap(){return this._normalMap}set normalMap(t){this._normalMap=t,this.material.normalMap=t?ry(t):null,this.standardTextureRepeat()}get normalScale(){return this.material.normalScale}set normalScale(t){this.material.normalScale="number"===typeof t?new sr(t,t):t}get normalMapType(){return this._normalMapType}set normalMapType(t){this._normalMapType=t,this.material.normalMapType="objectSpace"===t?Mn:Sn}}class jw extends J_{constructor(t){var e;super(t),m(this,"material"),m(this,"model"),m(this,"managerSet"),this.material=null!=(e=t.material)?e:t.material=new lf,Ov.delete(this)}retargetAnimations(){var t;if(null==(t=this.model)?void 0:t.animationManagers){for(const t of Object.values(this.model.animationManagers))this.animations[t.name]=this.watch(t.retarget(this.object3d));this.model=void 0}}get animation(){return super.animation}set animation(t){this.retargetAnimations(),super.animation=t}dispose(){return this.done||(super.dispose(),this.material.dispose()),this}addToRaycastSet(t,e){this.managerSet||(this.managerSet=!0,this.object3d.traverse((t=>t.userData.manager=this))),t.add(this.object3d),e.then((()=>t.delete(this.object3d)))}}m(jw,"componentName","find"),m(jw,"defaults",Rw),m(jw,"schema",Pw),D(jw,[Uw,Nw]);class Vw extends _w{constructor(t){super(t);const e=this.outerObject3d=new xh;e.userData.manager=this,ly.add(e),e.add(t)}get innerRotationX(){return this.object3d.rotation.x*Sy}set innerRotationX(t){this.object3d.rotation.x=t*My}get innerRotationY(){return this.object3d.rotation.y*Sy}set innerRotationY(t){this.object3d.rotation.y=t*My}get innerRotationZ(){return this.object3d.rotation.z*Sy}set innerRotationZ(t){this.object3d.rotation.z=t*My}get innerRotation(){return this.innerRotationZ}set innerRotation(t){this.innerRotationZ=t}get innerX(){return this.object3d.position.x*Ng}set innerX(t){this.object3d.position.x=t*Ig}get innerY(){return this.object3d.position.y*Ng}set innerY(t){this.object3d.position.y=t*Ig}get innerZ(){return this.object3d.position.z*Ng}set innerZ(t){this.object3d.position.z=t*Ig}find(t,e){var n,r;const i=this.outerObject3d.getObjectByName(jm.sanitizeNodeName(t));if(!i)return;const o=null!=(r=(n=i.userData).manager)?r:n.manager=new jw(i);return!e&&this._append(o),o}findAll(t){const e=[];return this.outerObject3d.traverse((n=>{var r,i;n.name===t&&e.push(null!=(i=(r=n.userData).manager)?i:r.manager=new jw(n))})),e}}const Hw={maxAngularVelocityX:Number,maxAngularVelocityY:Number,maxAngularVelocityZ:Number,maxVelocityX:Number,maxVelocityY:Number,maxVelocityZ:Number,velocity:Object,noTumble:Boolean,slippery:Boolean,mass:Number,physicsGroup:Number,ignorePhysicsGroups:Array,physics:[String,Boolean],physicsShape:Function},Ww={maxAngularVelocityX:1/0,maxAngularVelocityY:1/0,maxAngularVelocityZ:1/0,maxVelocityX:1/0,maxVelocityY:1/0,maxVelocityZ:1/0,velocity:{x:0,y:0,z:0},physics:!1,physicsShape:uw},Gw=f(p({},Uv),{x:Number,y:Number,z:Number}),qw=f(p({},jv),{x:0,y:0,z:0}),Xw=f(p(p(p({},Mw),Gw),Hw),{onIntersect:Function,onIntersectOut:Function,intersectIds:Array,width:Number,height:Number,depth:Number,scaleX:Number,scaleY:Number,scaleZ:Number,scale:Number,rotationX:Number,rotationY:Number,rotationZ:Number,rotation:Number,innerVisible:Boolean}),Yw=f(p(p(p({},Ew),qw),Ww),{width:100,height:100,depth:100,scaleX:1,scaleY:1,scaleZ:1,scale:1,rotationX:0,rotationY:0,rotationZ:0,rotation:0,innerVisible:!0}),Zw=f(p({},Xw),{innerRotationX:Number,innerRotationY:Number,innerRotationZ:Number,innerRotation:Number,innerX:Number,innerY:Number,innerZ:Number}),Kw=f(p({},Yw),{innerRotationX:0,innerRotationY:0,innerRotationZ:0,innerRotation:0,innerX:0,innerY:0,innerZ:0}),Jw=p(p(p({},Zw),Cw),Aw),Qw=p(p(p({},Kw),Tw),Dw);class $w extends Vw{constructor(t,e){const n=new lf(e?{transparent:!0}:void 0),r=new Lo(t,n);super(r),m(this,"material"),m(this,"transparent"),this.material=n,this.transparent=e}dispose(){return this.done||(super.dispose(),this.material.dispose()),this}}m($w,"defaults",Qw),m($w,"schema",Jw),D($w,[Uw,Nw]);const tS=new Io(Ug,Ug,Ug,1,1,1);class eS extends $w{constructor(){super(tS)}}m(eS,"componentName","cube");class nS extends Vw{constructor(){super(new Lo(tS,zy)),m(this,"loadedGroup",new xh),m(this,"loaded",new R),m(this,"_src"),m(this,"loadedHandle"),m(this,"_onLoad"),m(this,"widthSet"),m(this,"heightSet"),m(this,"depthSet"),m(this,"_boxVisible"),m(this,"_outline"),m(this,"_outlineHandle"),m(this,"_bloom"),m(this,"_bloomHandle"),m(this,"_reflection"),m(this,"_reflectionHandle"),m(this,"managerSet"),this.outerObject3d.add(this.loadedGroup)}get src(){return this._src}set src(t){this._src!==t&&(this._src=t,t&&(this.loaded.done&&(this.loaded=new R,this.loadedGroup.clear()),this.load(t).then((e=>{this.done||this._src!==t||(this.object3d.visible=!!this._boxVisible,this.resolveLoaded(e))}))))}get onLoad(){return this._onLoad}set onLoad(t){var e;this._onLoad=t,null==(e=this.loadedHandle)||e.cancel(),t&&(this.loadedHandle=this.loaded.then(t))}get width(){return super.width}set width(t){super.width=t,this.widthSet=!0}get height(){return super.height}set height(t){super.height=t,this.heightSet=!0}get depth(){return super.depth}set depth(t){super.depth=t,this.depthSet=!0}get innerRotationX(){return super.innerRotationX}set innerRotationX(t){super.innerRotationX=t,this.loadedGroup.rotation.x=this.object3d.rotation.x}get innerRotationY(){return super.innerRotationY}set innerRotationY(t){super.innerRotationY=t,this.loadedGroup.rotation.y=this.object3d.rotation.y}get innerRotationZ(){return super.innerRotationZ}set innerRotationZ(t){super.innerRotationZ=t,this.loadedGroup.rotation.z=this.object3d.rotation.z}get innerX(){return super.innerX}set innerX(t){super.innerX=t,this.loadedGroup.position.x=this.object3d.position.x}get innerY(){return super.innerY}set innerY(t){super.innerY=t,this.loadedGroup.position.y=this.object3d.position.y}get innerZ(){return super.innerZ}set innerZ(t){super.innerZ=t,this.loadedGroup.position.z=this.object3d.position.z}get innerVisible(){return this.loadedGroup.visible}set innerVisible(t){this.loadedGroup.visible=t}get frustumCulled(){return this.outerObject3d.frustumCulled}set frustumCulled(t){this.outerObject3d.frustumCulled!==t&&(this.outerObject3d.frustumCulled=t,this.loaded.then((()=>super.frustumCulled=t)))}get physics(){var t;return null!=(t=this._physics)&&t}set physics(t){var e;if(this._physics===t)return;this._physics=t,null==(e=this.physicsHandle)||e.cancel();const n=this.physicsHandle=this.cancellable();this.loaded.then((()=>this.initPhysics(t,n)))}get boxVisible(){var t;return null!=(t=this._boxVisible)?t:this.object3d.visible}set boxVisible(t){this._boxVisible=t,this.object3d.visible=t}get outline(){return!!this._outline}set outline(t){var e;this._outline!==t&&(this._outline=t,null==(e=this._outlineHandle)||e.cancel(),this._outlineHandle=this.loaded.then((e=>{t?A_(e):D_(e)})))}get bloom(){return!!this._bloom}set bloom(t){var e;this._bloom!==t&&(this._bloom=t,null==(e=this._bloomHandle)||e.cancel(),this._bloomHandle=this.loaded.then((e=>{t?Yx(e):Zx(e)})))}get reflection(){return!!this._reflection}set reflection(t){var e;this._reflection!==t&&(this._reflection=t,null==(e=this._reflectionHandle)||e.cancel(),this._reflectionHandle=this.loaded.then((e=>{t?c_(e):h_(e)})))}addToRaycastSet(t,e){e.watch(this.loaded.then((n=>{this.managerSet||(this.managerSet=!0,n.traverse((t=>{var e,n;return null!=(n=(e=t.userData).manager)?n:e.manager=this}))),t.add(n),e.then((()=>t.delete(n)))})))}refreshFactors(){this.loaded.then((()=>super.refreshFactors()))}}function rS(t){const e=new Map,n=new Map,r=t.clone();return iS(t,r,(function(t,r){e.set(r,t),n.set(t,r)})),r.traverse((function(t){if(!t.isSkinnedMesh)return;const r=t,i=e.get(t),o=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=o.map((function(t){return n.get(t)})),r.bind(r.skeleton,r.bindMatrix)})),r}function iS(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)iS(t.children[r],e.children[r],n)}const oS=new WeakSet;var aS=(t,e,n=t.animations)=>{const r=e?t.clone():rS(t);return!e&&oS.add(r),r.animations=n,r};X((()=>{const t=Dv();if(!(t instanceof nS)||_v()!==Hg)return;const e=t.loadedGroup.children[0];if(!oS.has(e))return;const n=new ag(e);return ly.add(n),()=>{ly.remove(n)}}),[Dv,_v]);const[sS,lS]=F(!1),[uS,cS]=F(!0),hS={type:"change"},dS={type:"start"},pS={type:"end"};class fS extends On{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Nr,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:J.ROTATE,MIDDLE:J.DOLLY,RIGHT:J.PAN},this.touches={ONE:Q.ROTATE,TWO:Q.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",it),this._domElementKeyEvents=t},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(hS),n.update(),i=r.NONE},this.update=function(){const e=new Nr,h=(new Ir).setFromUnitVectors(t.up,new Nr(0,1,0)),d=h.clone().invert(),p=new Nr,f=new Ir,m=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(h),a.setFromVector3(e),n.autoRotate&&i===r.NONE&&M(w()),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),a.theta=g<=v?Math.max(g,Math.min(v,a.theta)):a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),e.setFromSpherical(a),e.applyQuaternion(d),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),u.set(0,0,0)),l=1,!!(c||p.distanceToSquared(n.object.position)>o||8*(1-f.dot(n.object.quaternion))>o)&&(n.dispatchEvent(hS),p.copy(n.object.position),f.copy(n.object.quaternion),c=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",st),n.domElement.removeEventListener("pointerdown",Z),n.domElement.removeEventListener("pointercancel",tt),n.domElement.removeEventListener("wheel",rt),n.domElement.removeEventListener("pointermove",K),n.domElement.removeEventListener("pointerup",$),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",it)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const o=1e-6,a=new Zm,s=new Zm;let l=1;const u=new Nr;let c=!1;const h=new sr,d=new sr,p=new sr,f=new sr,m=new sr,g=new sr,v=new sr,y=new sr,b=new sr,x=[],_={};function w(){return 2*Math.PI/60/60*n.autoRotateSpeed}function S(){return Math.pow(.95,n.zoomSpeed)}function M(t){s.theta-=t}function E(t){s.phi-=t}const C=function(){const t=new Nr;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),u.add(t)}}(),T=function(){const t=new Nr;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),u.add(t)}}(),A=function(){const t=new Nr;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),C(2*e*a/i.clientHeight,n.object.matrix),T(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function D(t){n.object.isPerspectiveCamera?l/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(t){n.object.isPerspectiveCamera?l*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){h.set(t.clientX,t.clientY)}function L(t){v.set(t.clientX,t.clientY)}function O(t){f.set(t.clientX,t.clientY)}function k(t){d.set(t.clientX,t.clientY),p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*p.x/e.clientHeight),E(2*Math.PI*p.y/e.clientHeight),h.copy(d),n.update()}function I(t){y.set(t.clientX,t.clientY),b.subVectors(y,v),b.y>0?D(S()):b.y<0&&P(S()),v.copy(y),n.update()}function N(t){m.set(t.clientX,t.clientY),g.subVectors(m,f).multiplyScalar(n.panSpeed),A(g.x,g.y),f.copy(m),n.update()}function B(t){t.deltaY<0?P(S()):t.deltaY>0&&D(S()),n.update()}function F(t){let e=!1;switch(t.code){case n.keys.UP:A(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:A(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:A(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:A(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function z(){if(1===x.length)h.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),e=.5*(x[0].pageY+x[1].pageY);h.set(t,e)}}function U(){if(1===x.length)f.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),e=.5*(x[0].pageY+x[1].pageY);f.set(t,e)}}function j(){const t=x[0].pageX-x[1].pageX,e=x[0].pageY-x[1].pageY,n=Math.sqrt(t*t+e*e);v.set(0,n)}function V(){n.enableZoom&&j(),n.enablePan&&U()}function H(){n.enableZoom&&j(),n.enableRotate&&z()}function W(t){if(1==x.length)d.set(t.pageX,t.pageY);else{const e=ht(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);d.set(n,r)}p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*p.x/e.clientHeight),E(2*Math.PI*p.y/e.clientHeight),h.copy(d)}function G(t){if(1===x.length)m.set(t.pageX,t.pageY);else{const e=ht(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);m.set(n,r)}g.subVectors(m,f).multiplyScalar(n.panSpeed),A(g.x,g.y),f.copy(m)}function q(t){const e=ht(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);y.set(0,o),b.set(0,Math.pow(y.y/v.y,n.zoomSpeed)),D(b.y),v.copy(y)}function X(t){n.enableZoom&&q(t),n.enablePan&&G(t)}function Y(t){n.enableZoom&&q(t),n.enableRotate&&W(t)}function Z(t){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",K),n.domElement.addEventListener("pointerup",$)),lt(t),"touch"===t.pointerType?ot(t):et(t))}function K(t){!1!==n.enabled&&("touch"===t.pointerType?at(t):nt(t))}function $(t){ut(t),0===x.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",K),n.domElement.removeEventListener("pointerup",$)),n.dispatchEvent(pS),i=r.NONE}function tt(t){ut(t)}function et(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case J.DOLLY:if(!1===n.enableZoom)return;L(t),i=r.DOLLY;break;case J.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;O(t),i=r.PAN}else{if(!1===n.enableRotate)return;R(t),i=r.ROTATE}break;case J.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;R(t),i=r.ROTATE}else{if(!1===n.enablePan)return;O(t),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(dS)}function nt(t){if(!1!==n.enabled)switch(i){case r.ROTATE:if(!1===n.enableRotate)return;k(t);break;case r.DOLLY:if(!1===n.enableZoom)return;I(t);break;case r.PAN:if(!1===n.enablePan)return;N(t);break}}function rt(t){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(t.preventDefault(),n.dispatchEvent(dS),B(t),n.dispatchEvent(pS))}function it(t){!1!==n.enabled&&!1!==n.enablePan&&F(t)}function ot(t){switch(ct(t),x.length){case 1:switch(n.touches.ONE){case Q.ROTATE:if(!1===n.enableRotate)return;z(),i=r.TOUCH_ROTATE;break;case Q.PAN:if(!1===n.enablePan)return;U(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case Q.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;V(),i=r.TOUCH_DOLLY_PAN;break;case Q.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;H(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(dS)}function at(t){switch(ct(t),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;W(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;G(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;X(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;Y(t),n.update();break;default:i=r.NONE}}function st(t){!1!==n.enabled&&t.preventDefault()}function lt(t){x.push(t)}function ut(t){delete _[t.pointerId];for(let e=0;e<x.length;e++)if(x[e].pointerId==t.pointerId)return void x.splice(e,1)}function ct(t){let e=_[t.pointerId];void 0===e&&(e=new sr,_[t.pointerId]=e),e.set(t.pageX,t.pageY)}function ht(t){const e=t.pointerId===x[0].pointerId?x[1]:x[0];return _[e.pointerId]}n.domElement.addEventListener("contextmenu",st),n.domElement.addEventListener("pointerdown",Z),n.domElement.addEventListener("pointercancel",tt),n.domElement.addEventListener("wheel",rt,{passive:!1}),this.update()}}const[mS,gS]=F({}),vS=!1,[yS,bS]=F(vS);X((()=>{var t;yS(null!=(t=_v().userData.bokeh)?t:vS)}),[_v,gS]);const xS=.025,[_S,wS]=F(xS);X((()=>{var t;_S(null!=(t=_v().userData.bokehAperture)?t:xS)}),[_v,gS]);const SS=1,[MS,ES]=F(SS);X((()=>{var t;MS(null!=(t=_v().userData.bokehFocus)?t:SS)}),[_v,gS]);const CS=.01,[TS,AS]=F(CS);X((()=>{var t;TS(null!=(t=_v().userData.bokehMaxBlur)?t:CS)}),[_v,gS]);const[DS,PS]=F([]),RS=z(DS,PS),LS=U(DS,PS),OS=p(p({},Zw),Cw),kS=f(p(p({},Kw),Tw),{scaleZ:0,depth:0});class IS extends Vw{constructor(){const t=new kh({transparent:!0});super(new Yh(t)),m(this,"material"),this.material=t}dispose(){return this.done||(super.dispose(),this.material.dispose()),this}get depth(){return 0}set depth(t){}get scaleZ(){return 0}set scaleZ(t){}}m(IS,"componentName","sprite"),m(IS,"defaults",kS),m(IS,"schema",OS),D(IS,[Nw]);var NS=()=>{const t=new IS;return t.texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABnNJREFUaEPtWVmoVlUU/r5zNItModEGQinLMkqbyDLqoR6K0gZMEsxIkh6iEYSEZiR9iDTyoZEkqeylsoFeKmkwKOhGRaE5VIo0kVOIej37i3XY62f7e+//n//e44DcA//DvXuftde3hm+tvQ5xiDzcVzgk5QBMvno4w/8fSPa03rFatQORZDJJMlTRRlJWdW8rebUCSZWSdHUI4SoAx0XPmB5mfTtzW5ZlKwAsNY+Y90gWVYD3tqc2IOYJV0rSGwCmVFCsi+Qkkhv665k6gZQhEkJ4G8ANALoBDG4BZieAIQB+JjmO5C43RgUD7LWlFiAeGpKuk/QegF0ADgNglv4IwKB4sp23yxQHcBGAHQAOJ3kfyYWSBpHcfSCBDCbZHUJ4B8BkV1DSk3meP9KsmKTxkr4FYHlh7Laa5BkxNMsQ7RTMXh6xWAVgPxfWTqglareksZJ+iMlchhXJOSSfkmTesf9Z+BWSxkj6Ke41D5gnHiI5L9K2E0MznpIRTbdmctgDSF/ZQ9JwSR8AuCxa2RTIJb2eZdl0AEdEwxiQ/yTdImkpAKNoV844expJI4q2T6R5e6c0dAOIs4akU41xQgjnkTzWYjihzd4OOBfAMVEx82b6/BVDLfXyCTGHfJ/Tsv1tIbcpRkXz+k5JG7Mse5+kkQqcIEogSbLeFKnTQqHTx6zbDCJVsJ08D+FKBCRpSZ7n0xtAEv4/WtKvAI6KrGNKVRIaAaR7DZT9nK2aQfi6tzHpuq21yktbs5/l4N0kF5Vs55QnaaqkNyvwfzvLlsmbbFoHYCOALQCOB3AKgBHJujNXO7npur/TlWXZ+aUzJJXUKelhSU8AaFak6gFp4q4j+SyAjwGstGLXCHZpGIBxIYSpJO+K3uz0TA/ZP0iONgJpeKQoimesMPURSCM/JM3PsuxRkla5y2SMHrJQtW7XaLh8JI2W9AKAKzs814FsJjmK5OYUyAKS93YosNQn4fYbSb4blTS26+6pGbRwNnp2sEVRvEzyjqRAtouCfQKk9AbJ6SSXxOJnBau0vKRLAFwAYDiAfwF8TdIo1taGOJikR6sSZg5kC8mRdXikPFTSK3mez7R8i1V3d2xDFgGY0IN5l1t+kFzpYCQNlbQagNWYnqg8FVMrEBe2neRZJH83b8Qu1ptHO9yp1hXxFmgnyQkkuyRZ47hD0ixJz1cIsVqBuDcW53l+ewJilKSVsYXvrZX37ng9ybEkt3leRa+c3MYrtQIpuZzkZJLLPESKoniV5IwK9agE4x2ye6UoipdIzmxDOrUBcUE7Yvu9Plp0mKRfYuFr1554HqwhOcY7Wkl3RkpulfS1AXElNpA8k+T2COQcSd8n05NWLY4rY7kyhqS1R8ZkkyQZhbeq+LUDsQpuie7Fb5ykrnZFwOthBGw3xrNJrolArpH04f4C0piGxBbhz6jECEmrYuPZLrR8/W+Sp5PcGmXcJmnx/gLSqOgkLyX5lfdsIYRPK7YcJaPZtSHP82kJWcy1m+X+SnYD4vT7eJ7njyW1wGuIrXvNaI62RsEjOZ7kd96FhxCs6o/fn/Trylh3a7XA7uLloK0oiqdJPhC1L+/qCQHYe+WYiOT9JBck1X2ipM8r3EhrS3a3sA8O/ILT6J0kzZY0r5fLmSX4gySfi8MOm5wUIYTPAFze38relzY+bVMsRFaZdePsykaho0MIs0hOBHAkgK2SlmdZ9iLJ3+LExLxowzkDPr8CiLTjrrWNT2dTF5PcFJtHs3J6odpjXmU5BcBqiAGeIumtJlpuxeItQ2s+ydl9uI80Et8miyRvJflFpFLLDRtkGFjLjfKO7nUn7pkjaW4HIFKP/EPyNKPu9M5+j6SFfQRiwhuV2CYcWZZZqJb3juZHkoXZtZKMZm18mipXpZ460ayNXUG3ASmZRtKFkr6JQHqablQ9oDFwA/CjpBVZltkAYlMI4SQANhq9AsCJUaAZoJOJjb1WDsAlvZbnuRXQQT7XKuM3hLAMwPWR/tqNZVoBc+XaTePt/OZZWBWD2VXZ8stam7XlcDHGqX/bGBpCsPvzzTGeqwg9EHusY55B8kuPqL1GphHYSAA2BjX3G7tUHdTta1D2GWItgE/s80M6q24eYnf0/W9fa92Sf5s+1/Voaa+2B5EnUkxWQ/b6GnywhEy/nTsApN8mrFnAgEdqNmi/xQ14pN8mrFnAgEdqNmi/xR0yHvkfVPFBbg9BWmoAAAAASUVORK5CYII=",Ov.delete(t),t.scale=.5,t};class BS extends Wv{initCamera(){this.camera.userData.manager=this,RS(this.camera),this.then((()=>{this.active&&(gv(void 0),yv(!1)),Xg(this.camera),LS(this.camera)})),this.createEffect((()=>{if(_v()!==Hg||_v()===this.camera)return;const t=new xg(this.camera);ly.add(t);const e=NS();t.add(e.outerObject3d);const n=Zb((({target:t})=>{t===e&&Kb(this)}));return()=>{t.dispose(),ly.remove(t),e.dispose(),n.cancel()}}),[_v])}get fov(){return this.camera.fov}set fov(t){var e,n;this.camera.fov=t,null==(n=(e=this.camera).updateProjectionMatrix)||n.call(e)}get zoom(){return this.camera.zoom}set zoom(t){var e,n;this.camera.zoom=t,null==(n=(e=this.camera).updateProjectionMatrix)||n.call(e)}get near(){return this.camera.near}set near(t){var e,n;this.camera.near=t,null==(n=(e=this.camera).updateProjectionMatrix)||n.call(e)}get far(){return this.camera.far}set far(t){var e,n;this.camera.far=t,null==(n=(e=this.camera).updateProjectionMatrix)||n.call(e)}activate(t){const e=S(Gg());e!==this.camera&&(Xg(this.camera),qg(this.camera),gv(e),yv(!!t))}get active(){return S(Gg())===this.camera}set active(t){t&&this.activate("transition"===t)}get bokeh(){var t;return null!=(t=this.camera.userData.bokeh)?t:vS}set bokeh(t){this.camera.userData.bokeh=t,mS({})}get bokehFocus(){var t;return null!=(t=this.camera.userData.bokehFocus)?t:SS}set bokehFocus(t){this.camera.userData.bokehFocus=t,mS({})}get bokehMaxBlur(){var t;return null!=(t=this.camera.userData.bokehMaxBlur)?t:CS}set bokehMaxBlur(t){this.camera.userData.bokehMaxBlur=t,mS({})}get bokehAperture(){var t;return null!=(t=this.camera.userData.bokehAperture)?t:xS}set bokehAperture(t){this.camera.userData.bokehAperture=t,mS({})}}const FS={fov:Number,zoom:Number,near:Number,far:Number,active:[Boolean,String],bokeh:Boolean,bokehFocus:Number,bokehMaxBlur:Number,bokehAperture:Number,minPolarAngle:Number,maxPolarAngle:Number},zS={fov:75,zoom:1,near:Bg,far:Fg,active:!1,bokeh:vS,bokehFocus:SS,bokehMaxBlur:CS,bokehAperture:xS,minPolarAngle:Zy,maxPolarAngle:Ky},US=f(p(p({},Gw),FS),{targetX:Number,targetY:Number,targetZ:Number,targetId:String,enabled:Boolean,enableDamping:Boolean,enablePan:Boolean,enableZoom:Boolean,autoRotate:Boolean,autoRotateSpeed:Number,minAzimuthAngle:Number,maxAzimuthAngle:Number,azimuthAngle:Number,polarAngle:Number}),jS=f(p(p({},qw),zS),{targetX:0,targetY:0,targetZ:0,z:500,enabled:!0,enableDamping:!1,enablePan:!1,enableZoom:!1,autoRotate:!1,autoRotateSpeed:2,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,azimuthAngle:0,polarAngle:0}),[VS,HS]=N();window.addEventListener("blur",(()=>VS())),window.addEventListener("focus",(()=>VS())),document.addEventListener("visibilitychange",(()=>VS()));const WS=new Set;HS((()=>WS.clear()));let GS=!1;document.addEventListener("keydown",(t=>{"Shift"!==t.key&&"Meta"!==t.key||WS.add(t.key),WS.has("Meta")&&WS.has("Shift")&&(VS(),GS=!0)})),document.addEventListener("keyup",(t=>{"Shift"!==t.key&&"Meta"!==t.key||WS.delete(t.key)})),document.addEventListener("mousedown",(()=>{GS&&(GS=!1,VS())}));const[qS,XS]=N();class YS extends tw{constructor(t=new Ho(75,1,Bg,Fg)){super(t),m(this,"camera"),m(this,"controls"),m(this,"_targetX"),m(this,"_targetY"),m(this,"_targetZ"),m(this,"targetState",new Z(void 0)),m(this,"targetIdState",new Z(void 0)),m(this,"enableZoomState",new Z(!1)),m(this,"enableFlyState",new Z(!1)),m(this,"enabledState",new Z(!0)),m(this,"_minPolarAngle",Zy*My),m(this,"_maxPolarAngle",Ky*My),m(this,"_minAzimuthAngle",-1/0),m(this,"_maxAzimuthAngle",1/0),this.camera=t,this.initCamera(),this.createEffect((()=>{const t=this.targetState.get();if(!t){const t=XS((()=>this.controls.update()));return()=>{t.cancel()}}const e=XS((()=>{this.controls.target.copy(t.outerObject3d.getWorldPosition(Ay)),this.controls.update()})),n=Rv((()=>t.parent!==this&&this.targetState.set(void 0)));return()=>{e.cancel,n.cancel()}}),[this.targetState.get]),this.createEffect((()=>{const t=this.targetIdState.get();if(!t)return;const e=new L;return setTimeout((()=>{if(e.done)return;const n=()=>{var e;const n=[...null!=(e=Z_.get(t))?e:[void 0]][0];return n&&this.targetState.set(n),n};n()||e.watch(Rv((()=>setTimeout((()=>n()&&e.cancel())))))})),()=>{e.cancel()}}),[this.targetIdState.get]);const e=this.controls=new fS(t,bb);e.enabled=!1,e.enablePan=!1,e.enableZoom=!1,e.minPolarAngle=this._minPolarAngle,e.maxPolarAngle=this._maxPolarAngle,e.minAzimuthAngle=this._minAzimuthAngle,e.maxAzimuthAngle=this._maxAzimuthAngle,t.position.z=5,e.update(),this.createEffect((()=>{if(Qb()||_v()!==t||!this.enabledState.get())return;const n=new L;if(e.enabled=!0,this.enableZoomState.get()){const r=n=>{n.preventDefault();const r=t.getWorldDirection(Ay);let i=t.position.clone().add(r.clone().multiplyScalar(-n.deltaY*Ig));const o=t.worldToLocal(i.clone()),a=t.worldToLocal(e.target.clone());o.z-a.z<=1&&(i=e.target.clone().add(r.multiplyScalar(-1))),t.position.copy(i)};bb.addEventListener("wheel",r),n.then((()=>bb.removeEventListener("wheel",r)))}if(this.enableFlyState.get()){const r=new Set,i=n=>{const r=t.getWorldDirection(Ay);t.position.add(r.clone().multiplyScalar(n*Ig)),e.target.copy(t.position).add(r)},o=n=>{Ay.setFromMatrixColumn(this.outerObject3d.matrix,0),t.position.addScaledVector(Ay,n*Ig),e.target.addScaledVector(Ay,n*Ig)},a=n=>{const r=n*Ig;t.position.y+=r,e.target.y+=r};n.watch(XS((()=>{r.has("w")?i(r.has("Shift")?50:10):r.has("s")&&i(r.has("Shift")?-50:-10),r.has("a")?o(-10):r.has("d")&&o(10),r.has("ArrowDown")?a(-10):r.has("ArrowUp")&&a(10)})));const s=t=>{r.add(1===t.key.length?t.key.toLowerCase():t.key)},l=t=>{r.delete(1===t.key.length?t.key.toLowerCase():t.key)};document.addEventListener("keydown",s),document.addEventListener("keyup",l),n.watch(HS((()=>r.clear()))),n.then((()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",l)}))}return()=>{n.cancel(),e.enabled=!1}}),[_v,Qb,this.enableZoomState.get,this.enableFlyState.get,this.enabledState.get]),ly.add(t),this.then((()=>{e.dispose(),ly.remove(t)}))}get targetX(){var t;return null!=(t=this._targetX)?t:this._targetX=0}set targetX(t){this._targetX=t,this.controls.target.x=t*Ig,this.controls.update()}get targetY(){var t;return null!=(t=this._targetY)?t:this._targetY=0}set targetY(t){this._targetY=t,this.controls.target.y=t*Ig,this.controls.update()}get targetZ(){var t;return null!=(t=this._targetZ)?t:this._targetZ=0}set targetZ(t){this._targetZ=t,this.controls.target.z=t*Ig,this.controls.update()}append(t){var e;this.targetState.get()?super.append(t):(this._append(t),null==(e=this.outerObject3d.parent)||e.add(t.outerObject3d),this.targetState.set(t))}attach(t){var e;this.targetState.get()?super.attach(t):(this._append(t),null==(e=this.outerObject3d.parent)||e.attach(t.outerObject3d),this.targetState.set(t))}get targetId(){return this.targetIdState.get()}set targetId(t){this.targetIdState.set(t)}get x(){return this.camera.position.x*Ng}set x(t){this.camera.position.x=t*Ig}get y(){return this.camera.position.y*Ng}set y(t){this.camera.position.y=t*Ig}get z(){return this.camera.position.z*Ng}set z(t){this.camera.position.z=t*Ig}get rotationX(){return this.camera.rotation.x*Sy}get rotationY(){return this.camera.rotation.y*Sy}get rotationZ(){return this.camera.rotation.z*Sy}get enableDamping(){return this.controls.enableDamping}set enableDamping(t){this.controls.enableDamping=t}get enablePan(){return this.controls.enablePan}set enablePan(t){this.controls.enablePan=t}get enableZoom(){return this.enableZoomState.get()}set enableZoom(t){this.enableZoomState.set(t)}get enableFly(){return this.enableFlyState.get()}set enableFly(t){this.enableFlyState.set(t)}get enabled(){return this.enabledState.get()}set enabled(t){this.enabledState.set(t)}get autoRotate(){return this.controls.autoRotate}set autoRotate(t){this.controls.autoRotate=t}get autoRotateSpeed(){return this.controls.autoRotateSpeed}set autoRotateSpeed(t){this.controls.autoRotateSpeed=t}get minPolarAngle(){return this._minPolarAngle*Sy}set minPolarAngle(t){this.controls.minPolarAngle=this._minPolarAngle=t*My}get maxPolarAngle(){return this._maxPolarAngle*Sy}set maxPolarAngle(t){this.controls.maxPolarAngle=this._maxPolarAngle=t*My}get minAzimuthAngle(){return this._minAzimuthAngle*Sy}set minAzimuthAngle(t){this.controls.minAzimuthAngle=this._minAzimuthAngle=t*My}get maxAzimuthAngle(){return this._maxAzimuthAngle*Sy}set maxAzimuthAngle(t){this.controls.maxAzimuthAngle=this._maxAzimuthAngle=t*My}get azimuthAngle(){return this.controls.getAzimuthalAngle()*Sy}set azimuthAngle(t){this.controls.minAzimuthAngle=this.controls.maxAzimuthAngle=t*My,this.controls.update(),this.queueMicrotask((()=>{this.controls.minAzimuthAngle=this._minAzimuthAngle,this.controls.maxAzimuthAngle=this._maxAzimuthAngle}))}get polarAngle(){return this.controls.getPolarAngle()*Sy}set polarAngle(t){this.controls.minPolarAngle=this.controls.maxPolarAngle=t*My,this.controls.update(),this.queueMicrotask((()=>{this.controls.minPolarAngle=this._minPolarAngle,this.controls.maxPolarAngle=this._maxPolarAngle}))}get distance(){return this.controls.getDistance()*Ng}set distance(t){this.controls.minDistance=this.controls.maxDistance=t*Ig,this.controls.update(),this.queueMicrotask((()=>{this.controls.minDistance=-1/0,this.controls.maxDistance=1/0}))}}m(YS,"componentName","orbitCamera"),m(YS,"defaults",jS),m(YS,"schema",US),D(YS,[BS]);const[ZS,KS]=N(),[JS,QS]=F(0),$S=new YS(Hg);$S.enablePan=!0,$S.enableZoom=!0,$S.enableFly=!0,$S.enabled=!1,Ov.delete($S),KS((t=>{const e=t.getWorldPosition();$S.targetX=e.x,$S.targetY=e.y,$S.targetZ=e.z}));const{controls:tM}=$S;cS((t=>tM.screenSpacePanning=t)),X((()=>{if(lS()&&_v()===Hg&&!Qb())return $S.enabled=!0,bb.style.cursor="grab",()=>{$S.enabled=!1,bb.style.cursor="auto"}}),[lS,Qb,_v]),X((()=>{if(!lS())return;let t=!0;return queueMicrotask((()=>t&&($S.polarAngle=60))),()=>{t=!1,tM.reset(),$S.polarAngle=90,$S.azimuthAngle=0}}),[lS]),X((()=>{if(_v()!==Hg||lS())return;const t=QS((t=>Hg.position.z=t));return()=>{t.cancel()}}),[_v,lS]);const[eM,nM]=N(),[rM,iM]=F("translate"),[oM,aM]=F("world"),[sM,lM]=F(null),uM=A((async()=>{const{TransformControls:t}=await n.e(731).then(n.bind(n,2731)),e=new t(_v(),bb);_v((t=>e.camera=t)),e.enabled=!1;let r=!1;return e.addEventListener("dragging-changed",(({value:t})=>{r=t,Jb(r),eM(r?"start":"stop")})),e.addEventListener("change",(()=>r&&eM("move"))),e}));X((()=>{const t=Dv(),e=iM(),n=aM(),r=lM();if(!t||_v()!==Hg)return;const i=new L;return uM().then((o=>{"select"!==e?(o.setMode(e),o.setSpace(n),o.setScaleSnap(r),o.setRotationSnap(r),o.setTranslationSnap(r),ly.add(o),o.attach(t.outerObject3d),o.enabled=!0,i.then((()=>{ly.remove(o),o.detach(),o.enabled=!1}))):o.enabled=!1})),()=>{i.cancel()}}),[Dv,iM,aM,lM,_v]);const[cM,hM]=F(!1),[dM,pM]=F(10);X((()=>{if(!hM())return;const t=pM(),e=new pg(t,t);return ly.add(e),()=>{ly.remove(e)}}),[hM,pM]);const[fM,mM]=F(!1),gM=new Lo(new ia(Ug,Ug,4,4),zy);X((()=>{var t;if(!mM()||_v()!==Hg)return;ly.add(gM);const[e,n]=null!=(t=ub())?t:Qy();gM.scale.x=e*Ig,gM.scale.y=n*Ig;const r=XS((()=>{gM.quaternion.copy(Hg.quaternion),gM.position.copy(Hg.position),gM.translateZ(-4.9)}));return()=>{r.cancel(),ly.remove(gM)}}),[mM,ub,Qy,_v]);const[vM,yM]=F({turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.5,inclination:.49,azimuth:.25});class bM extends Lo{constructor(){const t=bM.SkyShader,e=new jo({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:Fo.clone(t.uniforms),side:at,depthWrite:!1});super(new Io(1,1,1),e)}}bM.prototype.isSky=!0,bM.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Nr},up:{value:new Nr(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};const[xM,_M]=F(!1),wM=A((()=>{const t=new bM;return t.scale.setScalar(45e4),yM((e=>{const{uniforms:n}=t.material;n["turbidity"].value=e.turbidity,n["rayleigh"].value=e.rayleigh,n["mieCoefficient"].value=e.mieCoefficient,n["mieDirectionalG"].value=e.mieDirectionalG;const r=Math.PI*(e.inclination-.5),i=2*Math.PI*(e.azimuth-.5);Ay.x=Math.cos(i),Ay.y=Math.sin(i)*Math.sin(r),Ay.z=Math.sin(i)*Math.cos(r),n["sunPosition"].value.copy(Ay)})),t}));let SM=!1;_M((t=>{SM!==t&&(SM=t,t?ly.add(wM()):ly.remove(wM()))}));const[MM,EM]=N(),[CM,TM]=F(!1),[AM,DM]=F(!1),[PM,RM]=F(!1);async function LM(){const{Sphere:t,Cylinder:e,Vec3:n}=await lw(),{x:r,y:i}=rw(this),o=.5*r,a=.5*i,s=new t(o),l=new t(o),u=new e(o,o,Math.abs(i-r));this.cannonBody.addShape(s,new n(0,-a+o,0)),this.cannonBody.addShape(l,new n(0,a-o,0)),this.cannonBody.addShape(u)}const OM=.5*Math.PI;class kM extends Vw{constructor(t){super(new xh),m(this,"camera"),m(this,"_physicsShape",LM),m(this,"updatePolarAngle",C((()=>this.gyrate(0,0)),0,"trailing")),m(this,"_minPolarAngle",Zy*My),m(this,"_maxPolarAngle",Ky*My),m(this,"mouseControlMode"),m(this,"mouseControlState",new Z(!1)),m(this,"mouseControlInit"),this.camera=t,this.object3d.add(t),this.initCamera()}getRay(){return Ny.set(this.camera.getWorldPosition(Dy),this.camera.getWorldDirection(Ay))}append(t){this._append(t),this.camera.add(t.outerObject3d)}attach(t){this._append(t),this.camera.attach(t.outerObject3d)}get width(){return this.object3d.scale.x*Ng}set width(t){const e=t*Ig;this.object3d.scale.x=e,this.camera.scale.x=1/e}get height(){return this.object3d.scale.y*Ng}set height(t){const e=t*Ig;this.object3d.scale.y=e,this.camera.scale.y=1/e}get depth(){return this.object3d.scale.z*Ng}set depth(t){const e=t*Ig;this.object3d.scale.z=e,this.camera.scale.z=1/e}lookAt(t){super.lookAt(t),this.rotationY+=180}_gyrate(t,e,n){const r=n?this.object3d:this.outerObject3d;By.setFromQuaternion(r.quaternion),By.y-=.002*t,By.x-=.002*e,By.x=Math.max(OM-this._maxPolarAngle,Math.min(OM-this._minPolarAngle,By.x)),r.setRotationFromEuler(By),!n&&this.physicsRotate()}gyrate(t,e){"orbit"===this.mouseControlMode?this._gyrate(t,e):(this._gyrate(t,0),this._gyrate(0,e,!0))}get minPolarAngle(){return this._minPolarAngle*Sy}set minPolarAngle(t){this._minPolarAngle=t*My,this.updatePolarAngle()}get maxPolarAngle(){return this._maxPolarAngle*Sy}set maxPolarAngle(t){this._maxPolarAngle=t*My,this.updatePolarAngle()}get mouseControl(){return this.mouseControlState.get()}set mouseControl(t){this.mouseControlState.set(t),t&&!this.mouseControlInit&&(this.mouseControlInit=!0,n.e(372).then(n.bind(n,8372)).then((t=>t.default.call(this))))}}D(kM,[BS]);const IM=5.7,NM=(t,e)=>Math.abs(.5*t/Math.cos(.6*e.fov*My));X((()=>{var t;const[e,n]=Qy(),[r,i]=null!=(t=ub())?t:Qy(),o=_v(),a=e/n;o instanceof Ho&&!ob()?(o.aspect=a,o.updateProjectionMatrix()):o instanceof jl&&([o.left,o.right,o.top,o.bottom]=[a*IM*-.5,a*IM*.5,.5*IM,-.5*IM],o.updateProjectionMatrix());const s={width:e,height:i-(r-e)*i/r},l={width:r-(i-n)*r/i,height:n},u=Math.min(e-s.width,n-s.height),c=Math.min(e-l.width,n-l.height);u>c?(JS(NM(r/a,Hg)*Ig),Object.assign(wb.style,{width:s.width+"px",height:s.height+"px"})):(JS(NM(i,Hg)*Ig),Object.assign(wb.style,{width:l.width+"px",height:l.height+"px"}))}),[Qy,ub,_v,ob]);const[BM,FM]=F(!1),[zM,UM]=F(!1),jM={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new _r(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class VM extends Nx{constructor(t,e,n,r){super(),this.strength=void 0!==e?e:1,this.radius=n,this.threshold=r,this.resolution=void 0!==t?new sr(t.x,t.y):new sr(256,256),this.clearColor=new _r(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Dr(i,o),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let c=0;c<this.nMips;c++){const t=new Dr(i,o);t.texture.name="UnrealBloomPass.h"+c,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const e=new Dr(i,o);e.texture.name="UnrealBloomPass.v"+c,e.texture.generateMipmaps=!1,this.renderTargetsVertical.push(e),i=Math.round(i/2),o=Math.round(o/2)}void 0===jM&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const a=jM;this.highPassUniforms=Fo.clone(a.uniforms),this.highPassUniforms["luminosityThreshold"].value=r,this.highPassUniforms["smoothWidth"].value=.01,this.materialHighPassFilter=new jo({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const s=[3,5,7,9,11];i=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(s[c])),this.separableBlurMaterials[c].uniforms["texSize"].value=new sr(i,o),i=Math.round(i/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms["blurTexture1"].value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms["blurTexture2"].value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms["blurTexture3"].value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms["blurTexture4"].value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms["blurTexture5"].value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms["bloomStrength"].value=e,this.compositeMaterial.uniforms["bloomRadius"].value=.1,this.compositeMaterial.needsUpdate=!0;const l=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms["bloomFactors"].value=l,this.bloomTintColors=[new Nr(1,1,1),new Nr(1,1,1),new Nr(1,1,1),new Nr(1,1,1),new Nr(1,1,1)],this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,void 0===Ix&&console.error("THREE.UnrealBloomPass relies on CopyShader");const u=Ix;this.copyUniforms=Fo.clone(u.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new jo({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:ht,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new _r,this.oldClearAlpha=1,this.basic=new Qi,this.fsQuad=new zx(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()}setSize(t,e){let n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms["texSize"].value=new sr(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(t,e,n,r,i){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),i&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms["tDiffuse"].value=n.texture,this.highPassUniforms["luminosityThreshold"].value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let a=this.renderTargetBright;for(let s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms["colorTexture"].value=a.texture,this.separableBlurMaterials[s].uniforms["direction"].value=VM.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[s]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[s].uniforms["colorTexture"].value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms["direction"].value=VM.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[s]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms["bloomStrength"].value=this.strength,this.compositeMaterial.uniforms["bloomRadius"].value=this.radius,this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetsHorizontal[0].texture,i&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}getSeperableBlurMaterial(t){return new jo({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new sr(.5,.5)},direction:{value:new sr(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(t){return new jo({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}VM.BlurDirectionX=new sr(1,0),VM.BlurDirectionY=new sr(0,1);const[HM,WM]=F(0),[GM,qM]=F(1.5),[XM,YM]=F(0),ZM=new VM(new sr,1.5,0,0);WM((t=>ZM.radius=t)),qM((t=>ZM.strength=t)),YM((t=>ZM.threshold=t));const KM={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform sampler2D tColor;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float maxblur; // max blur amount\n\t\tuniform float aperture; // aperture - bigger values for shallower depth of field\n\n\t\tuniform float nearClip;\n\t\tuniform float farClip;\n\n\t\tuniform float focus;\n\t\tuniform float aspect;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#endif\n\t\t}\n\n\n\t\tvoid main() {\n\n\t\t\tvec2 aspectcorrect = vec2( 1.0, aspect );\n\n\t\t\tfloat viewZ = getViewZ( getDepth( vUv ) );\n\n\t\t\tfloat factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation\n\n\t\t\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\n\n\t\t\tvec2 dofblur9 = dofblur * 0.9;\n\t\t\tvec2 dofblur7 = dofblur * 0.7;\n\t\t\tvec2 dofblur4 = dofblur * 0.4;\n\n\t\t\tvec4 col = vec4( 0.0 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\n\n\t\t\tgl_FragColor = col / 41.0;\n\t\t\tgl_FragColor.a = 1.0;\n\n\t\t}"};class JM extends Nx{constructor(t,e,n){super(),this.scene=t,this.camera=e;const r=void 0!==n.focus?n.focus:1,i=void 0!==n.aspect?n.aspect:e.aspect,o=void 0!==n.aperture?n.aperture:.025,a=void 0!==n.maxblur?n.maxblur:1,s=n.width||window.innerWidth||1,l=n.height||window.innerHeight||1;this.renderTargetDepth=new Dr(s,l,{minFilter:re,magFilter:re}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new hh,this.materialDepth.depthPacking=wn,this.materialDepth.blending=ut,void 0===KM&&console.error("THREE.BokehPass relies on BokehShader");const u=KM,c=Fo.clone(u.uniforms);c["tDepth"].value=this.renderTargetDepth.texture,c["focus"].value=r,c["aspect"].value=i,c["aperture"].value=o,c["maxblur"].value=a,c["nearClip"].value=e.near,c["farClip"].value=e.far,this.materialBokeh=new jo({defines:Object.assign({},u.defines),uniforms:c,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.uniforms=c,this.needsSwap=!1,this.fsQuad=new zx(this.materialBokeh),this._oldClearColor=new _r}render(t,e,n){this.scene.overrideMaterial=this.materialDepth,t.getClearColor(this._oldClearColor);const r=t.getClearAlpha(),i=t.autoClear;t.autoClear=!1,t.setClearColor(16777215),t.setClearAlpha(1),t.setRenderTarget(this.renderTargetDepth),t.clear(),t.render(this.scene,this.camera),this.uniforms["tColor"].value=n.texture,this.uniforms["nearClip"].value=this.camera.near,this.uniforms["farClip"].value=this.camera.far,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),t.clear(),this.fsQuad.render(t)),this.scene.overrideMaterial=null,t.setClearColor(this._oldClearColor),t.setClearAlpha(r),t.autoClear=i}}const QM=new JM(ly,_v(),{});_v((t=>QM.camera=t));const $M=QM.uniforms;ES((t=>$M["focus"].value=t)),wS((t=>$M["aperture"].value=t)),AS((t=>$M["maxblur"].value=t));class tE extends Nx{constructor(t,e,n,r,i){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new _r}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}const eE=new tE(ly,_v());_v((t=>eE.camera=t)),X((()=>{const t=qx();if(t)return t.addPass(eE),t.addPass(ZM),()=>{t.removePass(eE),t.removePass(ZM)}}),[qx]);const nE=new Ux(new jo({uniforms:{baseTexture:{value:null},bloomTexture:{value:null}},vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n        ",fragmentShader:"\n            uniform sampler2D baseTexture;\n            uniform sampler2D bloomTexture;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(baseTexture, vUv) + texture2D(bloomTexture, vUv);\n            }\n        ",defines:{}}),"baseTexture"),{uniforms:rE}=nE;qx((t=>t&&(rE["bloomTexture"].value=t.renderTarget2.texture)));const iE={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new sr(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new pi},cameraInverseProjectionMatrix:{value:new pi},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float bias;\n\t\tuniform float kernelRadius;\n\t\tuniform float minResolution;\n\t\tuniform vec2 size;\n\t\tuniform float randomSeed;\n\n\t\t// RGBA depth\n\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\n\t\t\t#if NORMAL_TEXTURE == 1\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\t\t\t#else\n\t\t\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n\t\t\t#endif\n\t\t}\n\n\t\tfloat scaleDividedByCameraFar;\n\t\tfloat minResolutionMultipliedByCameraFar;\n\n\t\tfloat getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length( viewDelta );\n\t\t\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\n\t\t}\n\n\t\t// moving costly divides into consts\n\t\tconst float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n\t\tconst float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n\t\tfloat getAmbientOcclusion( const in vec3 centerViewPosition ) {\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\tscaleDividedByCameraFar = scale / cameraFar;\n\t\t\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\n\t\t\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\tfloat angle = rand( vUv + randomSeed ) * PI2;\n\t\t\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\n\t\t\tvec2 radiusStep = radius;\n\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n\t\t\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += ANGLE_STEP;\n\n\t\t\t\tfloat sampleDepth = getDepth( sampleUv );\n\t\t\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfloat sampleViewZ = getViewZ( sampleDepth );\n\t\t\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\n\t\t\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\n\t\t\tif( weightSum == 0.0 ) discard;\n\n\t\t\treturn occlusionSum * ( intensity / weightSum );\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = getDepth( vUv );\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"},oE={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new sr(512,512)},sampleUvOffsets:{value:[new sr(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"},aE={createSampleWeights:function(t,e){const n=[];for(let r=0;r<=t;r++)n.push(sE(r,e));return n},createSampleOffsets:function(t,e){const n=[];for(let r=0;r<=t;r++)n.push(e.clone().multiplyScalar(r));return n},configure:function(t,e,n,r){t.defines["KERNEL_RADIUS"]=e,t.uniforms["sampleUvOffsets"].value=aE.createSampleOffsets(e,r),t.uniforms["sampleWeights"].value=aE.createSampleWeights(e,n),t.needsUpdate=!0}};function sE(t,e){return Math.exp(-t*t/(e*e*2))/(Math.sqrt(2*Math.PI)*e)}const lE={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}"};class uE extends Nx{constructor(t,e,n=!1,r=!1,i=new sr(256,256)){let o;super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=n,this.supportsNormalTexture=r,this.originalClearColor=new _r,this._oldClearColor=new _r,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new sr(i.x,i.y),this.saoRenderTarget=new Dr(this.resolution.x,this.resolution.y),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Dr(this.resolution.x,this.resolution.y,{minFilter:re,magFilter:re}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&(o=new Sh,o.type=de,this.beautyRenderTarget.depthTexture=o,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new hh,this.depthMaterial.depthPacking=wn,this.depthMaterial.blending=ut,this.normalMaterial=new df,this.normalMaterial.blending=ut,void 0===iE&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new jo({defines:Object.assign({},iE.defines),fragmentShader:iE.fragmentShader,vertexShader:iE.vertexShader,uniforms:Fo.clone(iE.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines["DEPTH_PACKING"]=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines["NORMAL_TEXTURE"]=this.supportsNormalTexture?1:0,this.saoMaterial.defines["PERSPECTIVE_CAMERA"]=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms["tDepth"].value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.saoMaterial.uniforms["tNormal"].value=this.normalRenderTarget.texture,this.saoMaterial.uniforms["size"].value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms["cameraInverseProjectionMatrix"].value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms["cameraProjectionMatrix"].value=this.camera.projectionMatrix,this.saoMaterial.blending=ut,void 0===oE&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new jo({uniforms:Fo.clone(oE.uniforms),defines:Object.assign({},oE.defines),vertexShader:oE.vertexShader,fragmentShader:oE.fragmentShader}),this.vBlurMaterial.defines["DEPTH_PACKING"]=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines["PERSPECTIVE_CAMERA"]=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms["tDiffuse"].value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms["tDepth"].value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms["size"].value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=ut,this.hBlurMaterial=new jo({uniforms:Fo.clone(oE.uniforms),defines:Object.assign({},oE.defines),vertexShader:oE.vertexShader,fragmentShader:oE.fragmentShader}),this.hBlurMaterial.defines["DEPTH_PACKING"]=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines["PERSPECTIVE_CAMERA"]=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms["tDiffuse"].value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms["tDepth"].value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms["size"].value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=ut,void 0===Ix&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new jo({uniforms:Fo.clone(Ix.uniforms),vertexShader:Ix.vertexShader,fragmentShader:Ix.fragmentShader,blending:ut}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=ft,this.materialCopy.blendSrc=At,this.materialCopy.blendDst=xt,this.materialCopy.blendEquation=mt,this.materialCopy.blendSrcAlpha=Ct,this.materialCopy.blendDstAlpha=xt,this.materialCopy.blendEquationAlpha=mt,void 0===lE&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new jo({uniforms:Fo.clone(lE.uniforms),vertexShader:lE.vertexShader,fragmentShader:lE.fragmentShader,blending:ut}),this.fsQuad=new zx(null)}render(t,e,n){if(this.renderToScreen&&(this.materialCopy.blending=ut,this.materialCopy.uniforms["tDiffuse"].value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(t,this.materialCopy,null)),1===this.params.output)return;t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const r=t.autoClear;t.autoClear=!1,t.setRenderTarget(this.depthRenderTarget),t.clear(),this.saoMaterial.uniforms["bias"].value=this.params.saoBias,this.saoMaterial.uniforms["intensity"].value=this.params.saoIntensity,this.saoMaterial.uniforms["scale"].value=this.params.saoScale,this.saoMaterial.uniforms["kernelRadius"].value=this.params.saoKernelRadius,this.saoMaterial.uniforms["minResolution"].value=this.params.saoMinResolution,this.saoMaterial.uniforms["cameraNear"].value=this.camera.near,this.saoMaterial.uniforms["cameraFar"].value=this.camera.far;const i=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms["depthCutoff"].value=i,this.hBlurMaterial.uniforms["depthCutoff"].value=i,this.vBlurMaterial.uniforms["cameraNear"].value=this.camera.near,this.vBlurMaterial.uniforms["cameraFar"].value=this.camera.far,this.hBlurMaterial.uniforms["cameraNear"].value=this.camera.near,this.hBlurMaterial.uniforms["cameraFar"].value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(aE.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new sr(0,1)),aE.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new sr(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),t.setClearColor(0),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(t,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(t,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(t,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(t,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let o=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms["tDiffuse"].value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms["tDiffuse"].value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,o=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms["tDiffuse"].value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms["tDiffuse"].value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?o.blending=ft:o.blending=ut,this.renderPass(t,o,this.renderToScreen?null:n),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=r}renderPass(t,e,n,r,i){t.getClearColor(this.originalClearColor);const o=t.getClearAlpha(),a=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,void 0!==r&&null!==r&&(t.setClearColor(r),t.setClearAlpha(i||0),t.clear()),this.fsQuad.material=e,this.fsQuad.render(t),t.autoClear=a,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)}renderOverride(t,e,n,r,i){t.getClearColor(this.originalClearColor);const o=t.getClearAlpha(),a=t.autoClear;t.setRenderTarget(n),t.autoClear=!1,r=e.clearColor||r,i=e.clearAlpha||i,void 0!==r&&null!==r&&(t.setClearColor(r),t.setClearAlpha(i||0),t.clear()),this.scene.overrideMaterial=e,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=a,t.setClearColor(this.originalClearColor),t.setClearAlpha(o)}setSize(t,e){this.beautyRenderTarget.setSize(t,e),this.saoRenderTarget.setSize(t,e),this.blurIntermediateRenderTarget.setSize(t,e),this.normalRenderTarget.setSize(t,e),this.depthRenderTarget.setSize(t,e),this.saoMaterial.uniforms["size"].value.set(t,e),this.saoMaterial.uniforms["cameraInverseProjectionMatrix"].value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms["cameraProjectionMatrix"].value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms["size"].value.set(t,e),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms["size"].value.set(t,e),this.hBlurMaterial.needsUpdate=!0}}uE.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};const cE=new uE(ly,_v(),!1,!0);cE.params.saoKernelRadius=80,cE.params.saoBlurStdDev=5,UM((t=>cE.params.saoScale="light"===t?3e3:2e3)),_v((t=>cE.camera=t));const hE={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new sr(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},dE={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new sr(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},pE={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new sr(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"};class fE extends Nx{constructor(t,e){super(),this.edgesRT=new Dr(t,e,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Dr(t,e,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new Tr,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=ae,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const i=new Image;i.src=this.getSearchTexture(),i.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new Tr,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=i,this.searchTexture.magFilter=re,this.searchTexture.minFilter=re,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,void 0===hE&&console.error("THREE.SMAAPass relies on SMAAShader"),this.uniformsEdges=Fo.clone(hE.uniforms),this.uniformsEdges["resolution"].value.set(1/t,1/e),this.materialEdges=new jo({defines:Object.assign({},hE.defines),uniforms:this.uniformsEdges,vertexShader:hE.vertexShader,fragmentShader:hE.fragmentShader}),this.uniformsWeights=Fo.clone(dE.uniforms),this.uniformsWeights["resolution"].value.set(1/t,1/e),this.uniformsWeights["tDiffuse"].value=this.edgesRT.texture,this.uniformsWeights["tArea"].value=this.areaTexture,this.uniformsWeights["tSearch"].value=this.searchTexture,this.materialWeights=new jo({defines:Object.assign({},dE.defines),uniforms:this.uniformsWeights,vertexShader:dE.vertexShader,fragmentShader:dE.fragmentShader}),this.uniformsBlend=Fo.clone(pE.uniforms),this.uniformsBlend["resolution"].value.set(1/t,1/e),this.uniformsBlend["tDiffuse"].value=this.weightsRT.texture,this.materialBlend=new jo({uniforms:this.uniformsBlend,vertexShader:pE.vertexShader,fragmentShader:pE.fragmentShader}),this.needsSwap=!1,this.fsQuad=new zx(null)}render(t,e,n){this.uniformsEdges["tDiffuse"].value=n.texture,this.fsQuad.material=this.materialEdges,t.setRenderTarget(this.edgesRT),this.clear&&t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialWeights,t.setRenderTarget(this.weightsRT),this.clear&&t.clear(),this.fsQuad.render(t),this.uniformsBlend["tColor"].value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))}setSize(t,e){this.edgesRT.setSize(t,e),this.weightsRT.setSize(t,e),this.materialEdges.uniforms["resolution"].value.set(1/t,1/e),this.materialWeights.uniforms["resolution"].value.set(1/t,1/e),this.materialBlend.uniforms["resolution"].value.set(1/t,1/e)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}}var mE=new fE(Xy,Yy);const[gE,vE]=F(.8),[yE,bE]=F(.01),xE=new Ux(new jo({defines:{BAND_MODE:2,CHROMA_SAMPLES:1},uniforms:{tDiffuse:{value:null},baseIor:{value:.8},bandOffset:{value:.01},jitterIntensity:{value:1},jitterOffset:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tviewDir = normalize( ( modelViewMatrix * vec4( position, 1.0 ) ).xyz );\n\n\t\t}\n\n\t",fragmentShader:"\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 viewDir;\n\t\tuniform float baseIor;\n\t\tuniform float bandOffset;\n\t\tuniform float jitterIntensity;\n\t\tuniform float jitterOffset;\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <common>\n\t\tvoid main() {\n\n\t\t\tvec3 normal = vec3( ( 2.0 * vUv - vec2( 1.0 ) ), 1.0 );\n\t\t\tnormal.z = 1.0;\n\t\t\tnormal = normalize( normal );\n\n\t\t\tvec3 color;\n\n\t\t\t// if NO BANDS\n\t\t\t#if BAND_MODE == 0\n\n\t\t\tvec3 refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor );\n\t\t\tcolor = texture2D( tDiffuse, vUv + refracted.xy ).rgb;\n\n\t\t\t// if RGB or RYGCBV BANDS\n\t\t\t#else\n\n\t\t\tfloat index, randValue, offsetValue;\n\t\t\tfloat r, g, b, r_ior, g_ior, b_ior;\n\t\t\tvec3 r_refracted, g_refracted, b_refracted;\n\t\t\tvec4 r_sample, g_sample, b_sample;\n\n\t\t\t#if BAND_MODE == 2\n\t\t\tfloat y, c, v, y_ior, c_ior, v_ior;\n\t\t\tvec3 y_refracted, c_refracted, v_refracted;\n\t\t\tvec4 y_sample, c_sample, v_sample;\n\t\t\t#endif\n\n\t\t\tfor ( int i = 0; i < CHROMA_SAMPLES; i ++ ) {\n\n\t\t\t\tindex = float( i );\n\t\t\t\trandValue = rand( sin( index + 1. ) * gl_FragCoord.xy + vec2( jitterOffset, - jitterOffset ) ) - 0.5;\n\t\t\t\toffsetValue = index / float( CHROMA_SAMPLES ) + randValue * jitterIntensity;\n\t\t\t\t#if BAND_MODE == 1\n\t\t\t\trandValue *= 2.0;\n\t\t\t\t#endif\n\n\t\t\t\t// Paper describing functions for creating yellow, cyan, and violet bands and reforming\n\t\t\t\t// them into RGB:\n\t\t\t\t// https://web.archive.org/web/20061108181225/http://home.iitk.ac.in/~shankars/reports/dispersionraytrace.pdf\n\t\t\t\tr_ior = 1.0 + bandOffset * ( 0.0 + offsetValue );\n\t\t\t\tg_ior = 1.0 + bandOffset * ( 2.0 + offsetValue );\n\t\t\t\tb_ior = 1.0 + bandOffset * ( 4.0 + offsetValue );\n\n\t\t\t\tr_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / r_ior );\n\t\t\t\tg_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / g_ior );\n\t\t\t\tb_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / b_ior );\n\n\t\t\t\tr_sample = texture2D( tDiffuse, vUv + r_refracted.xy );\n\t\t\t\tg_sample = texture2D( tDiffuse, vUv + g_refracted.xy );\n\t\t\t\tb_sample = texture2D( tDiffuse, vUv + b_refracted.xy );\n\n\t\t\t\t#if BAND_MODE == 2\n\t\t\t\ty_ior = 1.0 + bandOffset * ( 1.0 + offsetValue );\n\t\t\t\tc_ior = 1.0 + bandOffset * ( 3.0 + offsetValue );\n\t\t\t\tv_ior = 1.0 + bandOffset * ( 5.0 + offsetValue );\n\n\t\t\t\ty_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / y_ior );\n\t\t\t\tc_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / c_ior );\n\t\t\t\tv_refracted = refract( vec3( 0.0, 0.0, - 1.0 ), normal, baseIor / v_ior );\n\n\t\t\t\ty_sample = texture2D( tDiffuse, vUv + y_refracted.xy );\n\t\t\t\tc_sample = texture2D( tDiffuse, vUv + c_refracted.xy );\n\t\t\t\tv_sample = texture2D( tDiffuse, vUv + v_refracted.xy );\n\n\t\t\t\tr = r_sample.r / 2.0;\n\t\t\t\ty = ( 2.0 * y_sample.r + 2.0 * y_sample.g - y_sample.b ) / 6.0;\n\t\t\t\tg = g_sample.g / 2.0;\n\t\t\t\tc = ( 2.0 * c_sample.g + 2.0 * c_sample.b - c_sample.r ) / 6.0;\n\t\t\t\tb = b_sample.b / 2.0;\n\t\t\t\tv = ( 2.0 * v_sample.b + 2.0 * v_sample.r - v_sample.g ) / 6.0;\n\n\t\t\t\tcolor.r += r + ( 2.0 * v + 2.0 * y - c ) / 3.0;\n\t\t\t\tcolor.g += g + ( 2.0 * y + 2.0 * c - v ) / 3.0;\n\t\t\t\tcolor.b += b + ( 2.0 * c + 2.0 * v - y ) / 3.0;\n\t\t\t\t#else\n\t\t\t\tcolor.r += r_sample.r;\n\t\t\t\tcolor.g += g_sample.g;\n\t\t\t\tcolor.b += b_sample.b;\n\t\t\t\t#endif\n\n\t\t\t}\n\n\t\t\tcolor /= float( CHROMA_SAMPLES );\n\n\t\t\t#endif\n\n\t\t\tgl_FragColor = vec4( color, 1.0 );\n\n\t\t}\n\n\t"})),{uniforms:_E}=xE;vE((t=>_E["baseIor"].value=t)),bE((t=>_E["bandOffset"].value=t));const[wE,SE]=F(!1);var ME=!!window.safari;const[EE,CE]=F(ME),[TE,AE]=F(void 0);async function DE(){const{Sphere:t}=await lw(),e=new t(.5*rw(this).x);this.cannonBody.addShape(e)}X((()=>{const t=lv();if(!t)return;if(CE())return void TE(new Hx(t));const e=new Dr(Xy,Yy,{samples:4}),n=Qy((([t,n])=>e.setSize(t,n)));return TE(new Hx(t,e)),()=>{e.dispose(),n.cancel()}}),[lv,CE]),X((()=>{const t=AE();if(!t)return;const[e,n]=Qy();t.setSize(e,n),t.setPixelRatio(rb())}),[AE,Qy,rb]),X((()=>{const t=AE();if(!t)return;const e=[eE];RM()&&e.push(d_),UM()&&e.push(cE),FM()&&e.push(ZM),DM()&&e.push(nE),bS()&&e.push(QM),TM()&&e.push(P_),SE()&&e.push(xE),CE()&&e.push(mE);for(const n of e)t.addPass(n);return()=>{for(const n of e)t.removePass(n)}}),[AE,RM,UM,FM,DM,bS,TM,SE,CE]),X((()=>{const t=lv();if(!t)return;const e=_v(),n=hb();if(n){const[r,i]=Qy(),o=1*r,a=.5*i;n.aspect=e.aspect=o/a,e.updateProjectionMatrix(),n.updateProjectionMatrix();const s=mv((()=>{qS(),t.setViewport(0,0,o,a),t.setScissor(0,0,o,a),t.setScissorTest(!0),t.render(ly,n),t.setViewport(0,a,o,a),t.setScissor(0,a,o,a),t.render(ly,e),MM()}));return()=>{s.cancel(),t.setViewport(0,0,r,i),t.setScissor(0,0,r,i),t.setScissorTest(!1),e.aspect=r/i,e.updateProjectionMatrix()}}const r=ob();if("speed"===eb()||"webxr"===r){const n=mv((()=>{qS(),t.render(ly,e),MM()}));return()=>{n.cancel()}}if(r){const n=new eS;n.scale=.5,n.visible=!1;const r=1e3,i=.5*-r,[o,a]=Qy(),s=.5*o,l=1*a;e.aspect=s/l,e.updateProjectionMatrix();const u=new _w(e),c=mv((()=>{qS(),t.setViewport(0,0,s,l),t.setScissor(0,0,s,l),t.setScissorTest(!0),n.outerObject3d.position.copy(e.getWorldPosition(Ay)),n.outerObject3d.quaternion.copy(e.quaternion),n.translateZ(-r);const o=n.outerObject3d.position.clone(),a=e.quaternion.clone(),c=e.position.clone();n.moveRight(i),u.moveRight(-3),e.lookAt(n.outerObject3d.position),t.render(ly,e),n.outerObject3d.position.copy(o),e.quaternion.copy(a),e.position.copy(c),t.setViewport(s,0,s,l),t.setScissor(s,0,s,l),n.moveRight(-i),u.moveRight(3),e.lookAt(n.outerObject3d.position),t.render(ly,e),n.outerObject3d.position.copy(o),e.quaternion.copy(a),e.position.copy(c),MM()}));return()=>{n.dispose(),c.cancel(),t.setViewport(0,0,o,a),t.setScissor(0,0,o,a),t.setScissorTest(!1),e.aspect=o/a,e.updateProjectionMatrix()}}const i=AE();if(!i)return;let o=!1,a=!1,s=!1;const l=mv((()=>{qS(),Xx[0]&&(o||(AM(!0),o=!0),e_()),l_[0]&&!a&&(PM(!0),a=!0),C_[0]&&!s&&(CM(!0),s=!0),i.render(),MM()}));return()=>{l.cancel()}}),[eb,ob,_v,hb,Qy,lv,AE]);const PE=new nf(jg,16,16);class RE extends $w{constructor(){super(PE),m(this,"_physicsShape",DE)}}m(RE,"componentName","sphere");const LE=new dp(jg,Ug,16);class OE extends $w{constructor(){super(LE)}}async function kE(){const{Cylinder:t}=await lw(),{x:e,y:n}=rw(this),r=.5*e,i=new t(r,r,n);this.cannonBody.addShape(i)}m(OE,"componentName","cone");const IE=new hp(jg,jg,Ug,16);class NE extends $w{constructor(){super(IE),m(this,"_physicsShape",kE)}}m(NE,"componentName","cylinder");const BE=new $p(jg);class FE extends $w{constructor(){super(BE)}}m(FE,"componentName","octahedron");const zE=new rf(61*Ig);zE.rotateY(45*My),zE.rotateX(125*My),zE.translate(0,-.2,.2);class UE extends $w{constructor(){super(zE)}}async function jE(){const{Box:t,Vec3:e}=await lw(),n=rw(this),r=n.clone().multiply(Ay.set(.15,.5,.1)),i=n.clone().multiply(Dy.set(.5,.15,.1)),o=new t(r),a=new t(i);this.cannonBody.addShape(o,new e(-i.x,0,0)),this.cannonBody.addShape(o,new e(i.x,0,0)),this.cannonBody.addShape(a,new e(0,-r.y,0)),this.cannonBody.addShape(a,new e(0,r.y,0))}m(UE,"componentName","tetrahedron");const VE=new of(40*Ig,10*Ig,8,16);class HE extends $w{constructor(){super(VE),m(this,"_physicsShape",jE)}}m(HE,"componentName","torus");const WE=p({},Jw),GE=f(p({},Qw),{scaleZ:0,depth:0}),qE=new ia(Ug,Ug,1,1);class XE extends $w{constructor(){super(qE,!0),this.object3d.scale.z=zg}get depth(){return 0}set depth(t){}get scaleZ(){return 0}set scaleZ(t){}}async function YE(){const{Sphere:t}=await lw();this.cannonBody.addShape(new t(.5*rw(this).x))}m(XE,"componentName","plane"),m(XE,"defaults",GE),m(XE,"schema",WE);const ZE=p({},Jw),KE=f(p({},Qw),{scaleZ:0,depth:0}),JE=new cp(jg,32);class QE extends $w{constructor(){super(JE,!0),m(this,"_physicsShape",YE),this.object3d.scale.z=zg}get depth(){return 0}set depth(t){}get scaleZ(){return 0}set scaleZ(t){}}m(QE,"componentName","circle"),m(QE,"defaults",KE),m(QE,"schema",ZE),new _r,new _r;const $E=new Set;mv((()=>{for(const t of $E)t.update()}));var tC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAErklEQVRoQ92aiZNUNRDGu9NJRgUKESguFZQVEFg5ZAWLv9+SZZH7dhEQQSxEpcDjJem09Y1vqGFh2cNZljepSqVezZskv/elO52DacTJzISIekMZz0hKRM0gMzOeR5Z4FDWZ2Xoi2kRE60opa4noXWYGTCAi17ZRiSibGWD+9t4/I6KnRPQrMz/5v/1YNoiZRSLaTkSbSykba63vA6jWutbM3oMizPwCiJllKMLMfznnngHAOfeH9/4xET0iogfMnJYDtWQQM0PnPi6lbKu1bjWzzaq6ycw2ENF6M1tba10DEMAyc18RM6ttJxvn3J/MDEWeMPPvIgJVHjnnHnrvfyaiH5kZ0ItOSwIxs22ASCl9ZGbbVRUgW2qtAPmgVWWdma0xs3faoTVsI5mZ/2FmgDyFGsz8m3MOIL+IyENmfhBjvNfCAGpRaVEgrQFPlFI+UdWdqgqQHaq6vda6BarUWjeaGexi0YmZoc7jVg2AYGjdF5F7InLXe3+biGYX4xgWBGm/7L6U0oSZAWRXKWVnrfXDWusOqLHonr/mRajinLvvnPvJe39XRO4w8+0Y4ywRXYeSr2vntSAYIkS0P6W0p9Y6kXPeDZhSyi6AjAJgbh0tSB8ihHDLOTcbY7xJRFcxJOdrc16QVonJnPO+nPNeVd2jqhO11k9rrXC3K5acc/BmP4jIrIjcDCHcCCFcJ6JL8ynzSpDWJiZTSgdKKZ+r6j5VBcxnS7WD5dLCfkTkexG5ISLXvffXYoxXWpiXJtP5QPamlCZrrQdyzgdUtQ9jZn65HVvO/5i5AEJEroUQrjjnrsQYocqNufW9BAIXW0o5pKpQZFJVD6rq/jelxEsd/E+ZqyJyGRAicsl7f4GZX3DNL4C0k93RpmkOq+oXpRRkKLOiNrGQWrAZ7z0ALorIxV6vd56Izg5PmnNBdqeUjpRSDrf50Ep5p4U6P483u+C9P48cYzzHzLcG7z0HQThRSvlKVY+WUo7knAF0aKkNruT7GFIhhHPe+3MictZ7f3oQmw2D7EopHSulAORLlKOa7EYFh0nTew+A71DGGM8w8x3UPwwy1TQNQI7lnAHyVqkx+BitKgA50+v1ADLzHAThdynl65TSlKr2YRBHjepLjrIexGOAEJEzMcYZ7/23WA70FTEzGPlUzhk2gnJqtdztQtCYKEMIMyIyE0I4DRgY/QDkcNM0x2HsgCmlHFyowtX83Xt/GRAw9l6vN83M5xnhCIZVzvm4qgIE5c7V7OhCbSPEDyFMi8hplP3hhWVpKeVkSulEKQWqHH/bvNUr5hR4LwBMxxhPee+/AcgGVT3ZNE0fJOd8AsvVhb7Kav6OZXIIAQDTvV7vlIj0QbaqKjzWiYEqb6uhP5/FmZuBGlBERPpDC0vWPgTUaBV5o1HuUtVFVAxFkFuQU2MFMjZDa2yMfWzc73hMiG2s1f0QZdyCxvEI41tVur+wakHGZqk7HpsPQ0bf7e2gFgSnUd3foGthur9lOginzaz7m9itKjj36/6xQguDw8xuH/QMDbHuH70NwUCZbh+GDsHAZrp9PD28MdD5CwNzYLp/hWMOULcv1bxqD6rT15zm21RbrYtn/wLboDECn0+AWAAAAABJRU5ErkJggg==";ty.load(tC);var eC=t=>{const e=new Nr;return Iy.setFromObject(t).getSize(e),e};const nC=new Map;var rC=(t,e)=>{const n=nC.get(e);if(n){const[e,r,i]=n;return t.scale.multiplyScalar(e),t.position.copy(r).multiplyScalar(-1),i}const r=eC(t),i=1/r.y;t.scale.multiplyScalar(i);const o=Wy(t);t.position.copy(o).multiplyScalar(-1);const a=r.multiplyScalar(i);return nC.set(e,[i,o.clone(),a.clone()]),a};const iC=f(p({},Zw),{src:String,onLoad:Function,boxVisible:Boolean}),oC=f(p({},Kw),{boxVisible:!1}),aC=f(p({},iC),{loadedScale:Number,loadedX:Number,loadedY:Number,loadedZ:Number}),sC=p({},oC),lC=A((()=>n.e(51).then(n.bind(n,8051)))),uC=A((()=>n.e(19).then(n.bind(n,738))));class cC extends nS{constructor(){super(...arguments),m(this,"loadedAnims"),m(this,"_loadedScale"),m(this,"_loadedPos"),m(this,"_loadedX"),m(this,"_loadedY"),m(this,"_loadedZ")}async loadAnimation(t,e=t){var n,r;(null!=(n=this.loadedAnims)?n:this.loadedAnims={})[e]=t;const i=new R;let o;(null!=(r=this.loadingAnims)?r:this.loadingAnims=[]).push(i);try{o=await this.load(t)}catch{return void i.resolve()}const a=o.animations[0];a&&(this.animations[e]=this.watch(new k_(a,await this.loaded))),i.resolve()}get animations(){var t;return null!=(t=this.animationManagers)?t:this.animationManagers={}}set animations(t){for(const[e,n]of Object.entries(t))"string"===typeof n?this.loadAnimation(n,e):this.animations[e]=n}async load(t){var e;const n=new R;let r;(null!=(e=this.loadingAnims)?e:this.loadingAnims=[]).push(n);try{r=Lw[0](t).toLowerCase().endsWith(".fbx")?await(await lC()).default(t,!0):await(await uC()).default(t,!0)}catch{return n.resolve(),new xh}return n.resolve(),r}get loadedScale(){return this._loadedScale}set loadedScale(t){this._loadedScale=t}get loadedX(){return this._loadedX}set loadedX(t){this._loadedX=t,this._loadedPos=!0}get loadedY(){return this._loadedY}set loadedY(t){this._loadedY=t,this._loadedPos=!0}get loadedZ(){return this._loadedZ}set loadedZ(t){this._loadedZ=t,this._loadedPos=!0}resolveLoaded(t){for(const e of t.animations)this.animations[e.name]=this.watch(new k_(e,t));if(this._loadedScale)t.scale.multiplyScalar(this._loadedScale);else{const e=rC(t,this._src);!this.widthSet&&(this.object3d.scale.x=e.x),!this.heightSet&&(this.object3d.scale.y=e.y),!this.depthSet&&(this.object3d.scale.z=e.z)}if(this._loadedPos){let{x:e,y:n,z:r}=t.position;this._loadedX&&(e=this._loadedX*Ig),this._loadedY&&(n=this._loadedY*Ig),this._loadedZ&&(r=this._loadedZ*Ig),t.position.set(e,n,r)}this.loadedGroup.add(t),this.loaded.resolve(t)}find(t,e){const n=super.find(t,e);return n&&(n.model=this),n}findAll(t){const e=super.findAll(t);for(const n of e)n.model=this;return e}}m(cC,"componentName","model"),m(cC,"defaults",sC),m(cC,"schema",aC);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hC,dC,pC=function(){return pC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pC.apply(this,arguments)};function fC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function mC(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gC(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function vC(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}(function(t){t["Start"]="xstate.start",t["Stop"]="xstate.stop",t["Raise"]="xstate.raise",t["Send"]="xstate.send",t["Cancel"]="xstate.cancel",t["NullEvent"]="",t["Assign"]="xstate.assign",t["After"]="xstate.after",t["DoneState"]="done.state",t["DoneInvoke"]="done.invoke",t["Log"]="xstate.log",t["Init"]="xstate.init",t["Invoke"]="xstate.invoke",t["ErrorExecution"]="error.execution",t["ErrorCommunication"]="error.communication",t["ErrorPlatform"]="error.platform",t["ErrorCustom"]="xstate.error",t["Update"]="xstate.update",t["Pure"]="xstate.pure",t["Choose"]="xstate.choose"})(hC||(hC={})),function(t){t["Parent"]="#_parent",t["Internal"]="#_internal"}(dC||(dC={}));var yC=hC.Start,bC=hC.Stop,xC=hC.Raise,_C=hC.Send,wC=hC.Cancel,SC=hC.NullEvent,MC=hC.Assign;hC.After,hC.DoneState;var EC=hC.Log,CC=hC.Init,TC=hC.Invoke;hC.ErrorExecution;var AC,DC=hC.ErrorPlatform,PC=hC.ErrorCustom,RC=hC.Update,LC=hC.Choose,OC=hC.Pure,kC=".",IC={},NC="xstate.guard",BC="",FC=!0;function zC(t,e,n){void 0===n&&(n=kC);var r=HC(t,n),i=HC(e,n);return cT(i)?!!cT(r)&&i===r:cT(r)?r in i:Object.keys(r).every((function(t){return t in i&&zC(r[t],i[t])}))}function UC(t){try{return cT(t)||"number"===typeof t?"".concat(t):t.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function jC(t,e){try{return lT(t)?t:t.toString().split(e)}catch(n){throw new Error("'".concat(t,"' is not a valid state path."))}}function VC(t){return"object"===typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function HC(t,e){if(VC(t))return t.value;if(lT(t))return WC(t);if("string"!==typeof t)return t;var n=jC(t,e);return WC(n)}function WC(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function GC(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function qC(t,e,n){var r,i,o={};try{for(var a=mC(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];n(u)&&(o[l]=e(u,l,t))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var XC=function(t){return function(e){var n,r,i=e;try{for(var o=mC(t),a=o.next();!a.done;a=o.next()){var s=a.value;i=i[s]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function YC(t,e){return function(n){var r,i,o=n;try{for(var a=mC(t),s=a.next();!s.done;s=a.next()){var l=s.value;o=o[e][l]}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}}function ZC(t){if(!t)return[[]];if(cT(t))return[[t]];var e=KC(Object.keys(t).map((function(e){var n=t[e];return"string"===typeof n||n&&Object.keys(n).length?ZC(t[e]).map((function(t){return[e].concat(t)})):[[e]]})));return e}function KC(t){var e;return(e=[]).concat.apply(e,vC([],gC(t),!1))}function JC(t){return lT(t)?t:[t]}function QC(t){return void 0===t?[]:JC(t)}function $C(t,e,n){var r,i;if(uT(t))return t(e,n.data);var o={};try{for(var a=mC(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];uT(u)?o[l]=u(e,n.data):o[l]=u}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function tT(t){return/^(done|error)\./.test(t)}function eT(t){return t instanceof Promise||!(null===t||!uT(t)&&"object"!==typeof t||!uT(t.then))}function nT(t){return null!==t&&"object"===typeof t&&"transition"in t&&"function"===typeof t.transition}function rT(t,e){var n,r,i=gC([[],[]],2),o=i[0],a=i[1];try{for(var s=mC(t),l=s.next();!l.done;l=s.next()){var u=l.value;e(u)?o.push(u):a.push(u)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}function iT(t,e){return GC(t.states,(function(t,n){if(t){var r=(cT(e)?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:iT(t,r)}}}))}function oT(t,e){return{current:e,states:iT(t,e)}}function aT(t,e,n,r){var i=t?n.reduce((function(t,n){var i,o,a=n.assignment,s={state:r,action:n,_event:e},l={};if(uT(a))l=a(t,e.data,s);else try{for(var u=mC(Object.keys(a)),c=u.next();!c.done;c=u.next()){var h=c.value,d=a[h];l[h]=uT(d)?d(t,e.data,s):d}}catch(p){i={error:p}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return Object.assign({},t,l)}),t):t;return i}var sT=function(){};function lT(t){return Array.isArray(t)}function uT(t){return"function"===typeof t}function cT(t){return"string"===typeof t}function hT(t,e){if(t)return cT(t)?{type:NC,name:t,predicate:e?e[t]:void 0}:uT(t)?{type:NC,name:t.name,predicate:t}:t}function dT(t){try{return"subscribe"in t&&uT(t.subscribe)}catch(e){return!1}}var pT=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function fT(t){return!!t&&"__xstatenode"in t}function mT(t){return!!t&&"function"===typeof t.send}function gT(t,e){return cT(t)||"number"===typeof t?pC({type:t},e):t}function vT(t,e){if(!cT(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=gT(t);return pC({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function yT(t,e){var n=JC(e).map((function(e){return"undefined"===typeof e||"string"===typeof e||fT(e)?{target:e,event:t}:pC(pC({},e),{event:t})}));return n}function bT(t){if(void 0!==t&&t!==BC)return QC(t)}function xT(t,e,n,r,i){var o=t.options.guards,a={state:i,cond:e,_event:r};if(e.type===NC)return((null===o||void 0===o?void 0:o[e.name])||e.predicate)(n,r.data,a);var s=null===o||void 0===o?void 0:o[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(n,r.data,a)}function _T(t){return"string"===typeof t?{type:t}:t}function wT(t,e,n){if("object"===typeof t)return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function ST(t,e){return"".concat(t,":invocation[").concat(e,"]")}AC={},AC[pT]=function(){return this},AC[Symbol.observable]=function(){return this};var MT=vT({type:CC});function ET(t,e){return e&&e[t]||void 0}function CT(t,e){var n;if(cT(t)||"number"===typeof t){var r=ET(t,e);n=uT(r)?{type:t,exec:r}:r||{type:t,exec:void 0}}else if(uT(t))n={type:t.name||t.toString(),exec:t};else{r=ET(t.type,e);if(uT(r))n=pC(pC({},t),{exec:r});else if(r){var i=r.type||t.type;n=pC(pC(pC({},r),t),{type:i})}else n=t}return n}var TT=function(t,e){if(!t)return[];var n=lT(t)?t:[t];return n.map((function(t){return CT(t,e)}))};function AT(t){var e=CT(t);return pC(pC({id:cT(t)?t:e.id},e),{type:e.type})}function DT(t){return cT(t)?{type:xC,event:t}:RT(t,{to:dC.Internal})}function PT(t){return{type:xC,_event:vT(t.event)}}function RT(t,e){return{to:e?e.to:void 0,type:_C,event:uT(t)?t:gT(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:uT(t)?t.name:UC(t)}}function LT(t,e,n,r){var i,o={_event:n},a=vT(uT(t.event)?t.event(e,n.data,o):t.event);if(cT(t.delay)){var s=r&&r[t.delay];i=uT(s)?s(e,n.data,o):s}else i=uT(t.delay)?t.delay(e,n.data,o):t.delay;var l=uT(t.to)?t.to(e,n.data,o):t.to;return pC(pC({},t),{to:l,_event:a,event:a.data,delay:i})}var OT=function(t,e,n){return pC(pC({},t),{value:cT(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},kT=function(t){return{type:wC,sendId:t}};function IT(t){var e=AT(t);return{type:hC.Start,activity:e,exec:void 0}}function NT(t){var e=uT(t)?t:AT(t);return{type:hC.Stop,activity:e,exec:void 0}}function BT(t,e,n){var r=uT(t.activity)?t.activity(e,n.data):t.activity,i="string"===typeof r?{id:r}:r,o={type:hC.Stop,activity:i};return o}function FT(t,e){var n=e?"#".concat(e):"";return"".concat(hC.After,"(").concat(t,")").concat(n)}function zT(t,e){var n="".concat(hC.DoneState,".").concat(t),r={type:n,data:e,toString:function(){return n}};return r}function UT(t,e){var n="".concat(hC.DoneInvoke,".").concat(t),r={type:n,data:e,toString:function(){return n}};return r}function jT(t,e){var n="".concat(hC.ErrorPlatform,".").concat(t),r={type:n,data:e,toString:function(){return n}};return r}function VT(t,e,n,r,i,o){void 0===o&&(o=!1);var a=gC(o?[[],i]:rT(i,(function(t){return t.type===MC})),2),s=a[0],l=a[1],u=s.length?aT(n,r,s,e):n,c=o?[n]:void 0,h=KC(l.map((function(n){var i;switch(n.type){case xC:return PT(n);case _C:var a=LT(n,u,r,t.options.delays);return a;case EC:return OT(n,u,r);case LC:var s=n,l=null===(i=s.conds.find((function(n){var i=hT(n.cond,t.options.guards);return!i||xT(t,i,u,r,e)})))||void 0===i?void 0:i.actions;if(!l)return[];var h=gC(VT(t,e,u,r,TT(QC(l),t.options.actions),o),2),d=h[0],p=h[1];return u=p,null===c||void 0===c||c.push(u),d;case OC:l=n.get(u,r.data);if(!l)return[];var f=gC(VT(t,e,u,r,TT(QC(l),t.options.actions),o),2),m=f[0],g=f[1];return u=g,null===c||void 0===c||c.push(u),m;case bC:return BT(n,u,r);case MC:u=aT(u,r,[n],e),null===c||void 0===c||c.push(u);break;default:var v=CT(n,t.options.actions),y=v.exec;if(y&&c){var b=c.length-1;v=pC(pC({},v),{exec:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.apply(void 0,vC([c[b]],gC(e),!1))}})}return v}})).filter((function(t){return!!t})));return[h,u]}var HT=function(t,e){var n=e(t);return n};function WT(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[pT]=function(){return this},e}function GT(t,e,n,r){var i,o=_T(t.src),a=null===(i=null===e||void 0===e?void 0:e.options.services)||void 0===i?void 0:i[o.type],s=t.data?$C(t.data,n,r):void 0,l=a?qT(a,t.id,s):WT(t.id);return l.meta=t,l}function qT(t,e,n){var r=WT(e);if(r.deferred=!0,fT(t)){var i=r.state=HT(void 0,(function(){return(n?t.withContext(n):t).initialState}));r.getSnapshot=function(){return i}}return r}function XT(t){try{return"function"===typeof t.send}catch(e){return!1}}function YT(t){return XT(t)&&"id"in t}function ZT(t){var e;return pC((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[pT]=function(){return this},e),t)}var KT=function(t){return"atomic"===t.type||"final"===t.type};function JT(t){return Object.keys(t.states).map((function(e){return t.states[e]})).filter((function(t){return"history"!==t.type}))}function QT(t){var e=[t];return KT(t)?e:e.concat(KC(JT(t).map(QT)))}function $T(t,e){var n,r,i,o,a,s,l,u,c=new Set(t),h=eA(c),d=new Set(e);try{for(var p=mC(d),f=p.next();!f.done;f=p.next()){var m=f.value,g=m.parent;while(g&&!d.has(g))d.add(g),g=g.parent}}catch(E){n={error:E}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var v=eA(d);try{for(var y=mC(d),b=y.next();!b.done;b=y.next()){m=b.value;if("compound"!==m.type||v.get(m)&&v.get(m).length){if("parallel"===m.type)try{for(var x=(a=void 0,mC(JT(m))),_=x.next();!_.done;_=x.next()){var w=_.value;d.has(w)||(d.add(w),h.get(w)?h.get(w).forEach((function(t){return d.add(t)})):w.initialStateNodes.forEach((function(t){return d.add(t)})))}}catch(C){a={error:C}}finally{try{_&&!_.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}}else h.get(m)?h.get(m).forEach((function(t){return d.add(t)})):m.initialStateNodes.forEach((function(t){return d.add(t)}))}}catch(T){i={error:T}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var S=mC(d),M=S.next();!M.done;M=S.next()){m=M.value,g=m.parent;while(g&&!d.has(g))d.add(g),g=g.parent}}catch(A){l={error:A}}finally{try{M&&!M.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}return d}function tA(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var r=n[0];if(!r)return{};if(KT(r))return r.key}var i={};return n.forEach((function(t){i[t.key]=tA(t,e)})),i}function eA(t){var e,n,r=new Map;try{for(var i=mC(t),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function nA(t,e){var n=$T([t],e);return tA(t,eA(n))}function rA(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function iA(t){return vC([],gC(new Set(KC(vC([],gC(t.map((function(t){return t.ownEvents}))),!1)))),!1)}function oA(t,e){return"compound"===e.type?JT(e).some((function(e){return"final"===e.type&&rA(t,e)})):"parallel"===e.type&&JT(e).every((function(e){return oA(t,e)}))}function aA(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})}function sA(t){return new Set(KC(t.map((function(t){return t.tags}))))}function lA(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(cT(t)||cT(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return lA(t[n],e[n])}))}function uA(t){return"object"===typeof t&&null!==t&&("value"in t&&"_event"in t)}function cA(t,e){var n=t.exec,r=pC(pC({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var hA=function(){function t(t){var e,n=this;this.actions=[],this.activities=IC,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||IC,this.meta=aA(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return iA(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var r=MT;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=MT;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),cT(t))return[t];var r=Object.keys(t);return r.concat.apply(r,vC([],gC(r.map((function(r){return n.toStrings(t[r],e).map((function(t){return r+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var n=fC(t,["configuration","transitions","tags","machine"]);return pC(pC({},n),{tags:Array.from(e)})},t.prototype.matches=function(t){return zC(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e;sT(!!this.machine);var n=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!(null===n||void 0===n?void 0:n.transitions.length)&&n.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}(),dA={deferEvents:!1},pA=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=pC(pC({},dA),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){var t=this.queue.shift();while(t)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},t}(),fA=new Map,mA=0,gA={bookId:function(){return"x:".concat(mA++)},register:function(t,e){return fA.set(t,e),t},get:function(t){return fA.get(t)},free:function(t){fA.delete(t)}};function vA(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:void 0}function yA(){var t=vA();if(t&&"__xstate__"in t)return t.__xstate__}function bA(t){if(vA()){var e=yA();e&&e.register(t)}}function xA(t,e){void 0===e&&(e={});var n=t.initialState,r=new Set,i=[],o=!1,a=function(){if(!o){o=!0;while(i.length>0){var e=i.shift();n=t.transition(n,e,l),r.forEach((function(t){return t.next(n)}))}o=!1}},s=ZT({id:e.id,send:function(t){i.push(t),a()},getSnapshot:function(){return n},subscribe:function(t,e,i){var o=wT(t,e,i);return r.add(o),o.next(n),{unsubscribe:function(){r.delete(o)}}}}),l={parent:e.parent,self:s,id:e.id||"anonymous",observers:r};return n=t.start?t.start(l):n,s}var _A,wA={sync:!1,autoForward:!1};(function(t){t[t["NotStarted"]=0]="NotStarted",t[t["Running"]=1]="Running",t[t["Stopped"]=2]="Stopped"})(_A||(_A={}));var SA=function(){function t(e,n){var r=this;void 0===n&&(n=t.defaultOptions),this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=_A.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if(lT(t))return r.batch(t),r.state;var n=vT(gT(t,e));if(r.status===_A.Stopped)return r.state;if(r.status!==_A.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(r.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(n.data)));return r.scheduler.schedule((function(){r.forward(n);var t=r.nextState(n);r.update(t,n)})),r._state},this.sendTo=function(t,e){var n=r.parent&&(e===dC.Parent||r.parent.id===e),i=n?r.parent:cT(e)?r.children.get(e)||gA.get(e):mT(e)?e:void 0;if(i)"machine"in i?i.send(pC(pC({},t),{name:t.name===PC?"".concat(jT(r.id)):t.name,origin:r.sessionId})):i.send(t.data);else if(!n)throw new Error("Unable to send event to child '".concat(e,"' from service '").concat(r.id,"'."))};var i=pC(pC({},t.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,l=i.id,u=void 0!==l?l:e.id;this.id=u,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new pA({deferEvents:this.options.deferEvents}),this.sessionId=gA.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:HT(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){var n,r;try{for(var i=mC(t.actions),o=i.next();!o.done;o=i.next()){var a=o.value;this.exec(a,t,e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.update=function(t,e){var n,r,i,o,a,s,l,u,c=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach((function(t){c.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var h=mC(this.eventListeners),d=h.next();!d.done;d=h.next()){var p=d.value;p(t.event)}}catch(M){n={error:M}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}try{for(var f=mC(this.listeners),m=f.next();!m.done;m=f.next()){p=m.value;p(t,t.event)}}catch(E){i={error:E}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}try{for(var g=mC(this.contextListeners),v=g.next();!v.done;v=g.next()){var y=v.value;y(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(C){a={error:C}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}var b=oA(t.configuration||[],this.machine);if(this.state.configuration&&b){var x=t.configuration.find((function(t){return"final"===t.type&&t.parent===c.machine})),_=x&&x.doneData?$C(x.doneData,t.context,e):void 0;try{for(var w=mC(this.doneListeners),S=w.next();!S.done;S=w.next()){p=S.value;p(UT(this.id,_))}}catch(T){l={error:T}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}this.stop()}},t.prototype.onTransition=function(t){return this.listeners.add(t),this.status===_A.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,n){var r,i=this;if(!t)return{unsubscribe:function(){}};var o=n;return"function"===typeof t?r=t:(r=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(r),this.status!==_A.NotStarted&&r(this.state),o&&(this.status===_A.Stopped?o():this.onDone(o)),{unsubscribe:function(){r&&i.listeners.delete(r),o&&i.doneListeners.delete(o)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e=this;if(this.status===_A.Running)return this;this.machine._init(),gA.register(this.sessionId,this),this.initialized=!0,this.status=_A.Running;var n=void 0===t?this.initialState:HT(this,(function(){return uA(t)?e.machine.resolveState(t):e.machine.resolveState(hA.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(n,MT)})),this},t.prototype.stop=function(){var t,e,n,r,i,o,a,s,l,u,c=this;try{for(var h=mC(this.listeners),d=h.next();!d.done;d=h.next()){var p=d.value;this.listeners.delete(p)}}catch(S){t={error:S}}finally{try{d&&!d.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}try{for(var f=mC(this.stopListeners),m=f.next();!m.done;m=f.next()){p=m.value;p(),this.stopListeners.delete(p)}}catch(M){n={error:M}}finally{try{m&&!m.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var g=mC(this.contextListeners),v=g.next();!v.done;v=g.next()){p=v.value;this.contextListeners.delete(p)}}catch(E){i={error:E}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}try{for(var y=mC(this.doneListeners),b=y.next();!b.done;b=y.next()){p=b.value;this.doneListeners.delete(p)}}catch(C){a={error:C}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}if(!this.initialized)return this;vC([],gC(this.state.configuration),!1).sort((function(t,e){return e.order-t.order})).forEach((function(t){var e,n;try{for(var r=mC(t.definition.exit),i=r.next();!i.done;i=r.next()){var o=i.value;c.exec(o,c.state)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}})),this.children.forEach((function(t){uT(t.stop)&&t.stop()})),this.children.clear();try{for(var x=mC(Object.keys(this.delayedEventsMap)),_=x.next();!_.done;_=x.next()){var w=_.value;this.clock.clearTimeout(this.delayedEventsMap[w])}}catch(T){l={error:T}}finally{try{_&&!_.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}return this.scheduler.clear(),this.scheduler=new pA({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=_A.Stopped,this._initialState=void 0,gA.free(this.sessionId),this},t.prototype.batch=function(t){var e=this;if(this.status===_A.NotStarted&&this.options.deferEvents);else if(this.status!==_A.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var n,r,i=e.state,o=!1,a=[],s=function(t){var n=vT(t);e.forward(n),i=HT(e,(function(){return e.machine.transition(i,n)})),a.push.apply(a,vC([],gC(i.actions.map((function(t){return cA(t,i)}))),!1)),o=o||!!i.changed};try{for(var l=mC(t),u=l.next();!u.done;u=l.next()){var c=u.value;s(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}i.changed=o,i.actions=a,e.update(i,vT(t[t.length-1]))}))},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype.nextState=function(t){var e=this,n=vT(t);if(0===n.name.indexOf(DC)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(DC)})))throw n.data.data;var r=HT(this,(function(){return e.machine.transition(e.state,n)}));return r},t.prototype.forward=function(t){var e,n;try{for(var r=mC(this.forwardTo),i=r.next();!i.done;i=r.next()){var o=i.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(t)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout((function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)}),t.delay)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions);var r=e.context,i=e._event,o=t.exec||ET(t.type,n),a=uT(o)?o:o?o.exec:t.exec;if(a)try{return a(r,i.data,{action:t,state:this.state,_event:i})}catch(b){throw this.parent&&this.parent.send({type:"xstate.error",data:b}),b}switch(t.type){case _C:var s=t;if("number"===typeof s.delay)return void this.defer(s);s.to?this.sendTo(s._event,s.to):this.send(s._event);break;case wC:this.cancel(t.sendId);break;case yC:if(this.status!==_A.Running)return;var l=t.activity;if(!this.state.activities[l.id||l.type])break;if(l.type===hC.Invoke){var u=_T(l.src),c=this.machine.options.services?this.machine.options.services[u.type]:void 0,h=l.id,d=l.data,p="autoForward"in l?l.autoForward:!!l.forward;if(!c)return;var f=d?$C(d,r,i):void 0;if("string"===typeof c)return;var m=uT(c)?c(r,i.data,{data:f,src:u,meta:l.meta}):c;if(!m)return;var g=void 0;fT(m)&&(m=f?m.withContext(f):m,g={autoForward:p}),this.spawn(m,h,g)}else this.spawnActivity(l);break;case bC:this.stopChild(t.activity.id);break;case EC:var v=t.label,y=t.value;v?this.logger(v,y):this.logger(y);break}},t.prototype.removeChild=function(t){var e;this.children.delete(t),this.forwardTo.delete(t),null===(e=this.state)||void 0===e||delete e.children[t]},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),uT(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,n){if(eT(t))return this.spawnPromise(Promise.resolve(t),e);if(uT(t))return this.spawnCallback(t,e);if(YT(t))return this.spawnActor(t,e);if(dT(t))return this.spawnObservable(t,e);if(fT(t))return this.spawnMachine(t,pC(pC({},n),{id:e}));if(nT(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'.concat(e,'" of type "').concat(typeof t,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;void 0===n&&(n={});var i=new t(e,pC(pC({},this.options),{parent:this,id:n.id||e.id})),o=pC(pC({},wA),n);o.sync&&i.onTransition((function(t){r.send(RC,{state:t,id:i.id})}));var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone((function(t){r.removeChild(i.id),r.send(vT(t,{origin:i.id}))})).start(),a},t.prototype.spawnBehavior=function(t,e){var n=xA(t,{id:e,parent:this});return this.children.set(e,n),n},t.prototype.spawnPromise=function(t,e){var n,r,i=this,o=!1;t.then((function(t){o||(r=t,i.removeChild(e),i.send(vT(UT(e,t),{origin:e})))}),(function(t){if(!o){i.removeChild(e);var n=jT(e,t);try{i.send(vT(n,{origin:e}))}catch(r){i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=(n={id:e,send:function(){},subscribe:function(e,n,r){var i=wT(e,n,r),o=!1;return t.then((function(t){o||(i.next(t),o||i.complete())}),(function(t){o||i.error(t)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return r}},n[pT]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnCallback=function(t,e){var n,r,i,o=this,a=!1,s=new Set,l=new Set,u=function(t){r=t,l.forEach((function(e){return e(t)})),a||o.send(vT(t,{origin:e}))};try{i=t(u,(function(t){s.add(t)}))}catch(h){this.send(jT(e,h))}if(eT(i))return this.spawnPromise(i,e);var c=(n={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){var e=wT(t);return l.add(e.next),{unsubscribe:function(){l.delete(e.next)}}},stop:function(){a=!0,uT(i)&&i()},toJSON:function(){return{id:e}},getSnapshot:function(){return r}},n[pT]=function(){return this},n);return this.children.set(e,c),c},t.prototype.spawnObservable=function(t,e){var n,r,i=this,o=t.subscribe((function(t){r=t,i.send(vT(t,{origin:e}))}),(function(t){i.removeChild(e),i.send(vT(jT(e,t),{origin:e}))}),(function(){i.removeChild(e),i.send(vT(UT(e),{origin:e}))})),a=(n={id:e,send:function(){},subscribe:function(e,n,r){return t.subscribe(e,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:e}}},n[pT]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}},t.prototype.spawnEffect=function(t,e){var n;this.children.set(t,(n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},n[pT]=function(){return this},n))},t.prototype.attachDev=function(){var t=vA();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"===typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(pC(pC({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:pC({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}bA(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[pT]=function(){return this},t.prototype.getSnapshot=function(){return this.status===_A.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},t.interpret=MA,t}();function MA(t,e){var n=new SA(t,e);return n}function EA(t){if("string"===typeof t){var e={type:t,toString:function(){return t}};return e}return t}function CA(t){return pC(pC({type:TC},t),{toJSON:function(){t.onDone,t.onError;var e=fC(t,["onDone","onError"]);return pC(pC({},e),{type:TC,src:EA(t.src)})}})}var TA="",AA="#",DA="*",PA={},RA=function(t){return t[0]===AA},LA=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},OA=function(t,e,n){var r=n.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&(cT(t.target)||fT(t.target))})),i=e===TA?"the transient event":"event '".concat(e,"'");sT(!r,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},kA=function(){function t(e,n,r,i){var o,a=this;void 0===r&&(r="context"in e?e.context:void 0),this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(LA(),n),this.parent=null===i||void 0===i?void 0:i.parent,this.key=this.config.key||(null===i||void 0===i?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:kC),this.id=this.config.id||vC([this.machine.key],gC(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?GC(this.config.states,(function(e,n){var r,i=new t(e,{},void 0,{parent:a,key:n});return Object.assign(a.idMap,pC((r={},r[i.id]=i,r),i.idMap)),i})):PA;var s=0;function l(t){var e,n;t.order=s++;try{for(var r=mC(JT(t)),i=r.next();!i.done;i=r.next()){var o=i.value;l(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}l(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){var e=t.event;return e===TA})):TA in this.config.on),this.strict=!!this.config.strict,this.onEntry=QC(this.config.entry||this.config.onEntry).map((function(t){return CT(t)})),this.onExit=QC(this.config.exit||this.config.onExit).map((function(t){return CT(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=QC(this.config.invoke).map((function(t,e){var n,r;if(fT(t)){var i=ST(a.id,e);return a.machine.options.services=pC((n={},n[i]=t,n),a.machine.options.services),CA({src:i,id:i})}if(cT(t.src)){i=t.id||ST(a.id,e);return CA(pC(pC({},t),{id:i,src:t.src}))}if(fT(t.src)||uT(t.src)){i=t.id||ST(a.id,e);return a.machine.options.services=pC((r={},r[i]=t.src,r),a.machine.options.services),CA(pC(pC({id:i},t),{src:i}))}var o=t.src;return CA(pC(pC({id:ST(a.id,e)},t),{src:o}))})),this.activities=QC(this.config.activities).concat(this.invoke).map((function(t){return AT(t)})),this.transition=this.transition.bind(this),this.tags=QC(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||QT(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,l=r.delays;return new t(this.config,{actions:pC(pC({},i),e.actions),activities:pC(pC({},o),e.activities),guards:pC(pC({},a),e.guards),services:pC(pC({},s),e.services),delays:pC(pC({},l),e.delays)},null!==n&&void 0!==n?n:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return uT(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:GC(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===TA,n=this.transitions.filter((function(n){var r=n.eventType===t;return e?r:r||n.eventType===DA}));return this.__cache.candidates[t]=n,n},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var n=function(e,n){var r=uT(e)?"".concat(t.id,":delay[").concat(n,"]"):e,i=FT(r,t.id);return t.onEntry.push(RT(i,{delay:e})),t.onExit.push(kT(i)),i},r=lT(e)?e.map((function(t,e){var r=n(t.delay,e);return pC(pC({},t),{event:r})})):KC(Object.keys(e).map((function(t,r){var i=e[t],o=cT(i)?{target:i}:i,a=isNaN(+t)?t:+t,s=n(a,r);return QC(o).map((function(t){return pC(pC({},t),{event:s,delay:a})}))})));return r.map((function(e){var n=e.delay;return pC(pC({},t.formatTransition(e)),{delay:n})}))},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof hA?t.value:HC(t,this.delimiter);if(cT(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes((e={},e[r]=i,e)):[this,this.states[r]]}var o=Object.keys(r),a=[this];return a.push.apply(a,vC([],gC(KC(o.map((function(t){return n.getStateNode(t).getStateNodes(r[t])})))),!1)),a},t.prototype.handles=function(t){var e=UC(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=t instanceof hA?t:hA.create(t),n=Array.from($T([],this.getStateNodes(e.value)));return new hA(pC(pC({},e),{value:this.resolve(e.value),configuration:n,done:oA(n,this),tags:sA(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t),i=r.next(e,n);return i&&i.transitions.length?i:this.next(e,n)},t.prototype.transitionCompoundNode=function(t,e,n){var r=Object.keys(t),i=this.getStateNode(r[0]),o=i._transition(t[r[0]],e,n);return o&&o.transitions.length?o:this.next(e,n)},t.prototype.transitionParallelNode=function(t,e,n){var r,i,o={};try{for(var a=mC(Object.keys(t)),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];if(u){var c=this.getStateNode(l),h=c._transition(u,e,n);h&&(o[l]=h)}}}catch(v){r={error:v}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var d=Object.keys(o).map((function(t){return o[t]})),p=KC(d.map((function(t){return t.transitions}))),f=d.some((function(t){return t.transitions.length>0}));if(!f)return this.next(e,n);var m=KC(d.map((function(t){return t.entrySet}))),g=KC(Object.keys(o).map((function(t){return o[t].configuration})));return{transitions:p,entrySet:m,exitSet:KC(d.map((function(t){return t.exitSet}))),configuration:g,source:e,actions:KC(Object.keys(o).map((function(t){return o[t].actions})))}},t.prototype._transition=function(t,e,n){return cT(t)?this.transitionLeafNode(t,e,n):1===Object.keys(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,vT(e))},t.prototype.next=function(t,e){var n,r,i,o=this,a=e.name,s=[],l=[];try{for(var u=mC(this.getCandidates(a)),c=u.next();!c.done;c=u.next()){var h=c.value,d=h.cond,p=h.in,f=t.context,m=!p||(cT(p)&&RA(p)?t.matches(HC(this.getStateNodeById(p).path,this.delimiter)):zC(HC(p,this.delimiter),XC(this.path.slice(0,-2))(t.value))),g=!1;try{g=!d||xT(this.machine,d,f,e,t)}catch(x){throw new Error("Unable to evaluate guard '".concat(d.name||d.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(x.message))}if(g&&m){void 0!==h.target&&(l=h.target),s.push.apply(s,vC([],gC(h.actions),!1)),i=h;break}}}catch(_){n={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i){if(!l.length)return{transitions:[i],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var v=KC(l.map((function(e){return o.getRelativeStateNodes(e,t.historyValue)}))),y=!!i.internal,b=y?[]:KC(v.map((function(t){return o.nodesFromChild(t)})));return{transitions:[i],entrySet:b,exitSet:y?[]:[this],configuration:v,source:t,actions:s}}},t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];var e=[],n=t;while(n&&n!==this)e.push(n),n=n.parent;return e.push(this),e},t.prototype.escapes=function(t){if(this===t)return!1;var e=this.parent;while(e){if(e===t)return!1;e=e.parent}return!0},t.prototype.getActions=function(t,e,n,r){var i,o,a,s,l=$T([],r?this.getStateNodes(r.value):[this]),u=t.configuration.length?$T(l,t.configuration):l;try{for(var c=mC(u),h=c.next();!h.done;h=c.next()){var d=h.value;rA(l,d)||t.entrySet.push(d)}}catch(w){i={error:w}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}try{for(var p=mC(l),f=p.next();!f.done;f=p.next()){d=f.value;rA(u,d)&&!rA(t.exitSet,d.parent)||t.exitSet.push(d)}}catch(S){a={error:S}}finally{try{f&&!f.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}var m=KC(t.entrySet.map((function(r){var i=[];if("final"!==r.type)return i;var o=r.parent;if(!o.parent)return i;i.push(zT(r.id,r.doneData),zT(o.id,r.doneData?$C(r.doneData,e,n):void 0));var a=o.parent;return"parallel"===a.type&&JT(a).every((function(e){return oA(t.configuration,e)}))&&i.push(zT(a.id)),i})));t.exitSet.sort((function(t,e){return e.order-t.order})),t.entrySet.sort((function(t,e){return t.order-e.order}));var g=new Set(t.entrySet),v=new Set(t.exitSet),y=gC([KC(Array.from(g).map((function(t){return vC(vC([],gC(t.activities.map((function(t){return IT(t)}))),!1),gC(t.onEntry),!1)}))).concat(m.map(DT)),KC(Array.from(v).map((function(t){return vC(vC([],gC(t.onExit),!1),gC(t.activities.map((function(t){return NT(t)}))),!1)})))],2),b=y[0],x=y[1],_=TT(x.concat(t.actions).concat(b),this.machine.options.actions);return _},t.prototype.transition=function(t,e,n){void 0===t&&(t=this.initialState);var r,i=vT(e);if(t instanceof hA)r=void 0===n?t:this.resolveState(hA.from(t,n));else{var o=cT(t)?this.resolve(WC(this.getResolvedPath(t))):this.resolve(t),a=null!==n&&void 0!==n?n:this.machine.context;r=this.resolveState(hA.from(o,a))}if(!FC&&i.name===DA)throw new Error("An event cannot have the wildcard type ('".concat(DA,"')"));if(this.strict&&!this.events.includes(i.name)&&!tT(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var s=this._transition(r.value,r,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:r,actions:[]},l=$T([],this.getStateNodes(r.value)),u=s.configuration.length?$T(l,s.configuration):l;return s.configuration=vC([],gC(u),!1),this.resolveTransition(s,r,r.context,i)},t.prototype.resolveRaisedTransition=function(t,e,n){var r,i=t.actions;return t=this.transition(t,e),t._event=n,t.event=n.data,(r=t.actions).unshift.apply(r,vC([],gC(i),!1)),t},t.prototype.resolveTransition=function(t,e,n,r){var i,o,a=this;void 0===r&&(r=MT);var s=t.configuration,l=!e||t.transitions.length>0,u=l?nA(this.machine,s):void 0,c=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,h=this.getActions(t,n,r,e),d=e?pC({},e.activities):{};try{for(var p=mC(h),f=p.next();!f.done;f=p.next()){var m=f.value;m.type===yC?d[m.activity.id||m.activity.type]=m:m.type===bC&&(d[m.activity.id||m.activity.type]=!1)}}catch(O){i={error:O}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var g=gC(VT(this,e,n,r,h,this.machine.config.preserveActionOrder),2),v=g[0],y=g[1],b=gC(rT(v,(function(t){return t.type===xC||t.type===_C&&t.to===dC.Internal})),2),x=b[0],_=b[1],w=v.filter((function(t){var e;return t.type===yC&&(null===(e=t.activity)||void 0===e?void 0:e.type)===TC})),S=w.reduce((function(t,e){return t[e.activity.id]=GT(e.activity,a.machine,y,r),t}),e?pC({},e.children):{}),M=l?t.configuration:e?e.configuration:[],E=oA(M,this),C=new hA({value:u||e.value,context:y,_event:r,_sessionid:e?e._sessionid:null,historyValue:u?c?oT(c,u):void 0:e?e.historyValue:void 0,history:!u||t.source?e:void 0,actions:u?_:[],activities:u?d:e?e.activities:{},events:[],configuration:M,transitions:t.transitions,children:S,done:E,tags:sA(M),machine:this}),T=n!==y;C.changed=r.name===RC||T;var A=C.history;A&&delete A.history;var D=!E&&(this._transient||s.some((function(t){return t._transient})));if(!l&&(!D||r.name===TA))return C;var P=C;if(!E){D&&(P=this.resolveRaisedTransition(P,{type:SC},r));while(x.length){var R=x.shift();P=this.resolveRaisedTransition(P,R._event,r)}}var L=P.changed||(A?!!P.actions.length||T||typeof A.value!==typeof P.value||!lA(P.value,A.value):void 0);return P.changed=L,P.history=A,P},t.prototype.getStateNode=function(t){if(RA(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},t.prototype.getStateNodeById=function(t){var e=RA(t)?t.slice(AA.length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(t){if("string"===typeof t&&RA(t))try{return this.getStateNodeById(t.slice(1))}catch(i){}var e=jC(t,this.delimiter).slice(),n=this;while(e.length){var r=e.shift();if(!r.length)break;n=n.getStateNode(r)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||PA;switch(this.type){case"parallel":return GC(this.initialStateValue,(function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):PA}));case"compound":if(cT(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?(e={},e[t]=r.initialStateValue,e):t}return Object.keys(t).length?GC(t,(function(t,e){return t?n.getStateNode(e).resolve(t):PA})):this.initialStateValue||{};default:return t||PA}},t.prototype.getResolvedPath=function(t){if(RA(t)){var e=this.machine.idMap[t.slice(AA.length)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return jC(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=qC(this.states,(function(t){return t.initialStateValue||PA}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=KT(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(t,e){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!==e&&void 0!==e?e:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=cT(e.target)&&RA(e.target)?WC(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if(KT(this))return[this];if("compound"===this.type&&!this.initial)return FC||sT(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var e=ZC(this.initialStateValue);return KC(e.map((function(e){return t.getFromRelativePath(e)})))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=gC(t),n=e[0],r=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},t.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:qC(this.states,(function(e,n){if(!t)return e.historyValue();var r=cT(t)?void 0:t[n];return e.historyValue(r||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var r=this.target;return r?KC(ZC(r).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var i=YC(n.path,"states")(t).current;return cT(i)?[n.getStateNode(i)]:KC(ZC(i).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=KC(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,o=new Set(this.ownEvents);if(i)try{for(var a=mC(Object.keys(i)),s=a.next();!s.done;s=a.next()){var l=s.value,u=i[l];if(u.states)try{for(var c=(n=void 0,mC(u.events)),h=c.next();!h.done;h=c.next()){var d=h.value;o.add("".concat(d))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!cT(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{var i=e.parent.getStateNodeByPath(r);return i}catch(o){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(o.message))}}))},t.prototype.formatTransition=function(t){var e=this,n=bT(t.target),r="internal"in t?t.internal:!n||n.some((function(t){return cT(t)&&t[0]===e.delimiter})),i=this.machine.options.guards,o=this.resolveTarget(n),a=pC(pC({},t),{actions:TT(QC(t.actions)),cond:hT(t.cond,i),target:o,source:this,internal:r,eventType:t.event,toJSON:function(){return pC(pC({},a),{target:a.target?a.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return a},t.prototype.formatTransitions=function(){var t,e,n,r=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var i=this.config.on,o=DA,a=i[o],s=void 0===a?[]:a,l=fC(i,["symbol"===typeof o?o:o+""]);n=KC(Object.keys(l).map((function(t){FC||t!==TA||sT(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var e=yT(t,l[t]);return FC||OA(r,t,e),e})).concat(yT(DA,s)))}else n=[];var u=this.config.always?yT("",this.config.always):[],c=this.config.onDone?yT(String(zT(this.id)),this.config.onDone):[];FC||sT(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var h=KC(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,vC([],gC(yT(String(UT(t.id)),t.onDone)),!1)),t.onError&&e.push.apply(e,vC([],gC(yT(String(jT(t.id)),t.onError)),!1)),e}))),d=this.after,p=KC(vC(vC(vC(vC([],gC(c),!1),gC(h),!1),gC(n),!1),gC(u),!1).map((function(t){return QC(t).map((function(t){return r.formatTransition(t)}))})));try{for(var f=mC(d),m=f.next();!m.done;m=f.next()){var g=m.value;p.push(g)}}catch(v){t={error:v}}finally{try{m&&!m.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}return p},t}();function IA(t,e){return new kA(t,e)}const NA=f(p({},aC),{preset:String,strideForward:Number,strideRight:Number,strideMove:Boolean}),BA=f(p({},sC),{preset:"default",strideForward:0,strideRight:0,strideMove:!1});var FA=IA({states:{idle:{on:{RUN_START:"running",RUN_BACKWARDS_START:"runningBackwards",JUMP_START:"jumping"}},running:{on:{RUN_STOP:"idle",RUN_BACKWARDS_START:"runningBackwards",JUMP_START:"jumping"}},runningBackwards:{on:{RUN_STOP:"idle",RUN_START:"running",JUMP_START:"jumping"}},jumping:{on:{JUMP_STOP:"idle"}}},initial:"idle"});const zA="https://unpkg.com/lingo3d-dummy@1.0.1/assets/";class UA extends cC{constructor(){super(),m(this,"poseService",MA(FA)),m(this,"srcState",new Z(zA+"ybot.fbx")),m(this,"presetState",new Z("default")),m(this,"strideForwardState",new Z(0)),m(this,"strideRightState",new Z(0)),m(this,"strideMoveState",new Z(!1)),m(this,"jumpHeight",10),this.width=20,this.depth=20,this.scale=1.7,this.pbr=!0,this.createEffect((()=>{super.src=this.srcState.get();const t=this.presetState.get(),e="rifle"===t?"rifle-":"";this.animations={idle:zA+e+"idle.fbx",running:zA+e+"running.fbx",runningBackwards:zA+e+"running-backwards.fbx",jumping:zA+e+"falling.fbx"},this.animation="idle"}),[this.presetState.get,this.srcState.get]);const{poseService:t}=this,[e,n]=F("idle");this.createEffect((()=>{const e=this.animation=n();if("jumping"!==e)return;this.velocity.y=this.jumpHeight;const r=mv((()=>{0===this.velocity.y&&t.send("JUMP_STOP")}));return()=>{r.cancel()}}),[n]),t.onTransition((t=>t.changed&&e(t.value))).start(),this.then((()=>t.stop()));const[r,i]=F(void 0);this.loaded.then((()=>r({spine:this.find("mixamorigSpine",!0)}))),this.createEffect((()=>{const e=i();if(!e)return;const{spine:n}=e,{strideForward:r,strideRight:o,strideMove:a}=this;if(!r&&!o){const e=this.pointAt(1e3);return this.loadedGroup.lookAt(Hy(e)),void t.send("RUN_STOP")}const s=r>0,l=s?-r:r,u=s?-o:o,c=90-Math.atan2(-l,-u)*Sy,h=XS((()=>{t.send(s?"RUN_BACKWARDS_START":"RUN_START");const e=this.pointAt(1e3);this.loadedGroup.lookAt(Hy(e));const i=n.pointAt(1e3),l=this.getWorldPosition(),u=Cy({x:e.x,y:e.z},{x:l.x,y:l.z},c),h=new wy(u.x,e.y,u.y);if(this.loadedGroup.lookAt(Hy(h)),n.lookAt(i),!a)return;const{x:d,y:p}=Ty(0,0,c+90,Math.max(Math.abs(r),Math.abs(o)));this.moveForward(s?p:-p),this.moveRight(s?-d:d)}));return()=>{h.cancel()}}),[this.strideMoveState.get,this.strideForwardState.get,this.strideRightState.get,i])}get src(){return this.srcState.get()}set src(t){this.srcState.set(t)}get preset(){return this.presetState.get()}set preset(t){this.presetState.set(t)}get strideForward(){return this.strideForwardState.get()}set strideForward(t){this.strideForwardState.set(t)}get strideRight(){return this.strideRightState.get()}set strideRight(t){this.strideRightState.set(t)}get strideMove(){return this.strideMoveState.get()}set strideMove(t){this.strideMoveState.set(t)}jump(t=10){this.jumpHeight=t,this.poseService.send("JUMP_START")}}m(UA,"componentName","dummy"),m(UA,"defaults",BA),m(UA,"schema",NA);const jA=f(p({},Zw),{preset:String,repeatX:Number,repeatZ:Number}),VA=f(p({},Kw),{preset:"industrial0",repeatX:1,repeatZ:1}),HA=f(p({},jA),{repeatY:Number}),WA=f(p({},VA),{repeatY:1}),GA="https://unpkg.com/lingo3d-facade@1.0.0/assets/",qA=(t,e,n)=>{const r=new cC;return r.src=t,r.rotationY=n,e.append(r),r},XA=(t,e,n,r,i,o)=>{const a=n*t.length*.5-e;let s=0;if(o)for(const l of t)l.z+=e*r,l.x+=s++*n-a;else for(const l of t)l.x+=e*i,l.z+=s++*n-a};class YA extends Vw{constructor(t){const e=new xh;super(e),m(this,"presetState",new Z("industrial0")),m(this,"repeatXState",new Z(1)),m(this,"repeatZState",new Z(1)),t.append(this),kv.add(this),this.createEffect((()=>{const t=Math.max(Math.floor(this.repeatXState.get()),1),e=Math.max(Math.floor(this.repeatZState.get()),1),n=GA+this.presetState.get()+".glb",r=y.exports.range(t).map((()=>qA(n,this,0))),i=y.exports.range(t).map((()=>qA(n,this,180))),o=y.exports.range(e).map((()=>qA(n,this,90))),a=y.exports.range(e).map((()=>qA(n,this,270))),s=r[0].loaded.then((()=>{const n=r[0].depth,s=.5*n;XA(r,s,n,t,e,!1),XA(i,-s,-n,t,e,!1),XA(o,-s,-n,t,e,!0),XA(a,s,n,t,e,!0)}));return()=>{s.cancel();for(const t of r)t.dispose();for(const t of i)t.dispose();for(const t of o)t.dispose();for(const t of a)t.dispose()}}),[this.presetState.get,this.repeatXState.get,this.repeatZState.get])}get preset(){return this.presetState.get()}set preset(t){this.presetState.set(t)}get repeatX(){return this.repeatXState.get()}set repeatX(t){this.repeatXState.set(t)}get repeatZ(){return this.repeatZState.get()}set repeatZ(t){this.repeatZState.set(t)}}class ZA extends Vw{constructor(){const t=new xh;super(t),m(this,"presetState",new Z("industrial0")),m(this,"repeatXState",new Z(1)),m(this,"repeatZState",new Z(1)),m(this,"repeatYState",new Z(1)),this.scale=10,this.createEffect((()=>{const t=this.presetState.get(),e=this.repeatXState.get(),n=this.repeatZState.get(),r=Math.max(Math.floor(this.repeatYState.get()),1),i=y.exports.range(r).map((r=>{const i=new YA(this);return i.preset=t,i.repeatX=e,i.repeatZ=n,i.y=100*r,i}));return()=>{for(const t of i)t.dispose()}}),[this.presetState.get,this.repeatXState.get,this.repeatZState.get,this.repeatYState.get])}get preset(){return this.presetState.get()}set preset(t){this.presetState.set(t)}get repeatX(){return this.repeatXState.get()}set repeatX(t){this.repeatXState.set(t)}get repeatZ(){return this.repeatZState.get()}set repeatZ(t){this.repeatZState.set(t)}get repeatY(){return this.repeatYState.get()}set repeatY(t){this.repeatYState.set(t)}}m(ZA,"componentName","building"),m(ZA,"defaults",WA),m(ZA,"schema",HA);const KA=p(p(p({},iC),Cw),Aw),JA=p(p(p({},oC),Tw),Dw),QA=A((()=>n.e(582).then(n.bind(n,4582)))),$A=new WeakMap;class tD extends nS{constructor(){super(...arguments),m(this,"material",new lf)}dispose(){return this.done||(super.dispose(),this.material.dispose()),this}load(t){return QA().then((e=>e.default(t)))}resolveLoaded(t){const e=new xh;e.scale.y*=-1;const n=b($A,t,(()=>{const e=[];for(const o of t.paths)for(const t of o.toShapes(!0))e.push(t);if(!e.length)return[];const n=new xh;for(const t of e){const e=new Kp(t,{depth:0,bevelEnabled:!1});e.dispose(),n.add(new Lo(e))}const r=eC(n),i=[];for(const t of e)i.push(new Kp(t,{depth:r.y,bevelEnabled:!1}));return i}));for(const i of n){const t=new Lo(i,this.material);e.add(t)}const r=rC(e,this._src);!this.widthSet&&(this.object3d.scale.x=r.x),!this.heightSet&&(this.object3d.scale.y=r.y),!this.depthSet&&(this.object3d.scale.z=r.z),this.loadedGroup.add(e),this.loaded.resolve(e)}}m(tD,"componentName","svgMesh"),m(tD,"defaults",JA),m(tD,"schema",KA),D(tD,[Uw,Nw]);const eD=f(p({},WE),{resolution:Number,blur:Number,contrast:Number,mirror:Number}),nD=f(p({},GE),{resolution:512,blur:1024,contrast:1.5,mirror:1});class rD extends XE{constructor(){super(),m(this,"resolutionState",new Z(512)),m(this,"blurState",new Z(1024)),m(this,"contrastState",new Z(1.5)),m(this,"mirrorState",new Z(1)),this.rotationX=-90;const[t,e]=F(void 0);n.e(673).then(n.bind(n,4673)).then((e=>t(e.default))),this.createEffect((()=>{if(this.done)return;const t=lv(),n=e();if(!n||!t)return;const r=new n(t,_v(),ly,this.object3d,{resolution:this.resolutionState.get(),blur:[this.blurState.get(),this.blurState.get()],mixBlur:2.5,mixContrast:this.contrastState.get(),mirror:this.mirrorState.get()});U_(this.material,r),this.material.dispose(),this.material=this.object3d.material=r;const i=XS((()=>{r.update()}));return()=>{r.dispose(),i.cancel()}}),[lv,e,_v,this.resolutionState.get,this.blurState.get,this.contrastState.get,this.mirrorState.get])}get resolution(){return this.resolutionState.get()}set resolution(t){this.resolutionState.set(t)}get blur(){return this.blurState.get()}set blur(t){this.blurState.set(t)}get contrast(){return this.contrastState.get()}set contrast(t){this.contrastState.set(t)}get mirror(){return this.mirrorState.get()}set mirror(t){this.mirrorState.set(t)}}m(rD,"componentName","reflector"),m(rD,"defaults",nD),m(rD,"schema",eD);const iD=new WeakMap;var oD=t=>{if(iD.has(t))return iD.get(t);const e=t.getWorldPosition(new Nr);return iD.set(t,e),setTimeout((()=>iD.delete(t))),e};const aD=f(p({},Gw),{onEnter:Function,onExit:Function,targetIds:[String,Array],pad:Boolean,radius:Number,interval:Number,helper:Boolean}),sD=f(p({},qw),{onEnter:void 0,onExit:void 0,pad:!1,radius:50,interval:300,helper:!0}),lD=t=>{var e;return[...null!=(e=vw.get(t))?e:[]]};class uD extends tw{constructor(){const t=new xh;let e;super(t),m(this,"refresh",new Z({})),m(this,"onEnter"),m(this,"onExit"),m(this,"_pad",sD.pad),m(this,"_radius",sD.radius),m(this,"_interval",sD.interval),m(this,"_helper",sD.helper),m(this,"_targetIds",sD.targetIds),ly.add(t),this.createEffect((()=>{const{_radius:t,_interval:n,_targetIds:r,_pad:i}=this;if(!r)return;const o=t*Ig,a=.2*o;let s=!1;const l=cv(n,-1,(()=>{var t,n;const{x:l,y:u,z:c}=oD(this.outerObject3d),h="string"===typeof r?lD(r):r.map(lD).flat();let d=!1;for(const e of h){const{x:t,y:n,z:r}=oD(e.object3d);if(i){const{y:i}=rw(e);d=Math.abs(l-t)<o&&Math.abs(u-(n-.5*i))<a&&Math.abs(c-r)<o}else d=Math.abs(l-t)<o&&Math.abs(u-n)<o&&Math.abs(c-r)<o;if(d)break}s!==d&&(d?(null==(t=this.onEnter)||t.call(this),e&&(e.color="blue")):(null==(n=this.onExit)||n.call(this),e&&(e.color="white"))),s=d}));return()=>{l.cancel()}}),[this.refresh.get]),this.createEffect((()=>{const{_radius:n,_helper:r,_pad:i}=this;if(!r)return;if(_v()!==Hg)return;const o=e=i?new NE:new RE;Ov.delete(o),t.add(o.outerObject3d),o.scale=n*Ig*2,o.opacity=.5,o.height=i?10:100;const a=Zb((({target:t})=>t===o&&Kb(this)));return()=>{o.dispose(),e=void 0,a.cancel()}}),[this.refresh.get,_v])}get pad(){return this._pad}set pad(t){this._pad=t,this.refresh.set({})}get radius(){return this._radius}set radius(t){this._radius=t,this.refresh.set({})}get interval(){return this._interval}set interval(t){this._interval=t,this.refresh.set({})}get helper(){return this._helper}set helper(t){this._helper=t,this.refresh.set({})}get targetIds(){return this._targetIds}set targetIds(t){this._targetIds=t,this.refresh.set({})}}m(uD,"componentName","trigger"),m(uD,"defaults",sD),m(uD,"schema",aD);const cD=f(p({},Gw),{src:String}),hD=p({},qw),dD=new Map,pD=new pm;var fD=t=>b(dD,t,(()=>new Promise(((e,n)=>{Yv(),pD.load(t,(t=>{Zv(),e(Object.freeze(t))}),Jv,(()=>{Zv(),n()}))}))));const mD=new wm;X((()=>{const t=_v();return t.add(mD),()=>{t.remove(mD)}}),[_v]);class gD extends tw{constructor(){const t=new Am(mD);super(t),m(this,"sound"),m(this,"_src"),m(this,"srcCount",0),this.sound=t,ly.add(t)}dispose(){return this.done||(super.dispose(),this.sound.disconnect()),this}get src(){return this._src}set src(t){this._src=t;const e=++this.srcCount;t&&fD(t).then((t=>{e===this.srcCount&&(this.sound.setBuffer(t),this.sound.setRefDistance(20),this.sound.play())}))}}m(gD,"componentName","audio"),m(gD,"defaults",hD),m(gD,"schema",cD);const[vD,yD]=N(),bD=p({},Zw),xD=p({},Kw),[_D,wD]=F(!0),SD=new Set,MD=M((()=>{for(const t of SD){const{parent:e}=t.outerObject3d;null==e||e.remove(t.outerObject3d),Iy.setFromObject(t.outerObject3d),t.object3d.scale.copy(Iy.getSize(Ay)),null==e||e.add(t.outerObject3d)}SD.clear()}),0,"trailing");var ED=t=>{SD.add(t),MD()};class CD extends Vw{constructor(){super(new xh)}append(t){super.append(t),ED(this)}attach(t){super.attach(t),ED(this)}}m(CD,"componentName","group"),m(CD,"defaults",xD),m(CD,"schema",bD),X((()=>{const t=wD(),e=Sv();if(!e.length||!t)return;const n=new xh;ly.add(n);const r=new _w(n);Tv.add(r),Av(r);const i=[];for(const{outerObject3d:s}of e)s.parent&&(i.push([s,s.parent]),n.attach(s));Iy.setFromObject(n);for(const[s,l]of i)l.attach(s);n.position.copy(Iy.getCenter(Ay));for(const[s]of i)n.attach(s);let o=!1;const a=yD((()=>{if(!e.length||o)return;o=!0;const t=new CD;t.outerObject3d.position.copy(n.position);for(const n of e)t.attach(n);Kb(t)}));return()=>{if(Kb(),!r.done&&!o)for(const[t,e]of i)e.attach(t);Av(void 0),r.dispose(),ly.remove(n),a.cancel()}}),[Sv,wD]);const TD=f(p({},Uv),{texture:[String,Array]}),AD=p({},jv);class DD extends Wv{constructor(){super(new xh),m(this,"_texture"),by(this)}dispose(){return this.done||(super.dispose(),xy(this)),this}get texture(){return this._texture}set texture(t){this._texture=t,vy([...yy()])}}m(DD,"componentName","skybox"),m(DD,"defaults",AD),m(DD,"schema",TD);const PD=f(p(p({},Zw),FS),{mouseControl:[Boolean,String],mouseControlMode:String}),RD=f(p(p({},Kw),zS),{mouseControl:!1}),LD=p({},PD),OD=p({},RD);class kD extends kM{constructor(t=new Ho(75,1,Bg,Fg)){super(t)}}m(kD,"componentName","camera"),m(kD,"defaults",OD),m(kD,"schema",LD);const ID=f(p({},LD),{target:Object,lockTargetRotation:[Boolean,String]}),ND=f(p({},OD),{lockTargetRotation:!0}),BD=new WeakSet;class FD extends kD{constructor(){super(),m(this,"lockTargetRotation",!0),m(this,"targetState",new Z(void 0)),m(this,"retarget",C((()=>{var t;let e;for(const n of null!=(t=this.children)?t:[])if(e)n.outerObject3d.parent!==this.camera&&this.camera[BD.has(n)?"attach":"add"](n.outerObject3d);else if(Q_(n)){e=n;const{parent:t}=this.outerObject3d;t&&n.outerObject3d.parent!==t&&t[BD.has(e)?"attach":"add"](e.outerObject3d)}this.targetState.set(e)}),0,"trailing")),m(this,"gyroControlHandle"),m(this,"_gyroControl");const t=this.camera;ly.attach(t),this.then((()=>ly.remove(t))),this.createEffect((()=>{const t=this.targetState.get();if(!t)return;"frustumCulled"in t&&(t.frustumCulled=!1);const e=Rv((()=>t.parent!==this&&this.retarget()));return()=>{e.cancel()}}),[this.targetState.get]);const e=t=>{By.setFromQuaternion(t.outerObject3d.quaternion),By.y+=Math.PI,this.outerObject3d.setRotationFromEuler(By),this.updatePolarAngle()};let n=!1;this.createEffect((()=>{const t=this.targetState.get();if(!t)return;e(t);let r=!1;t.onRotationY=()=>r=!0;const i=mv((()=>{if(this.outerObject3d.position.copy(t.outerObject3d.position),this.lockTargetRotation){if("follow"===this.lockTargetRotation||n||r)return r=!1,void e(t);By.setFromQuaternion(this.outerObject3d.quaternion),By.x=0,By.z=0,By.y+=Math.PI,t.outerObject3d.setRotationFromEuler(By)}}));return()=>{i.cancel(),t.onRotationY=void 0}}),[this.targetState.get]),this.createEffect((()=>{const t=this.targetState.get(),e=Dv(),r=Qb(),i=iM(),o=t&&t===e&&r&&"rotate"===i;if(o)return n=!0,()=>{n=!1}}),[this.targetState.get,Dv,Qb,iM])}append(t){this._append(t),BD.delete(t),this.retarget()}attach(t){this._append(t),BD.add(t),this.retarget()}get gyroControl(){return!!this._gyroControl}set gyroControl(t){var e;if(this._gyroControl===t)return;this._gyroControl,null==(e=this.gyroControlHandle)||e.cancel();const n=By,r=Ry,i=Ly,o=new Ir(-Math.sqrt(.5),0,0,Math.sqrt(.5)),a=this.object3d.getWorldQuaternion(Ry).clone(),s=0,l=t=>{var e,l,u;this.object3d.quaternion.copy(a),n.set((null!=(e=t.beta)?e:0)*My,(null!=(l=t.alpha)?l:0)*My,-(null!=(u=t.gamma)?u:0)*My,"YXZ"),this.object3d.quaternion.multiply(r.setFromEuler(n));const c=.5*-s;i.set(0,Math.sin(c),0,Math.cos(c)),this.object3d.quaternion.multiply(i),this.object3d.quaternion.multiply(o)};window.addEventListener("deviceorientation",l),this.gyroControlHandle=this.cancellable((()=>window.removeEventListener("deviceorientation",l)))}}m(FD,"defaults",ND),m(FD,"schema",ID);const[zD,UD]=F([]),jD=z(zD,UD),VD=U(zD,UD),HD=new Set,[WD,GD]=N();X((function(){const t=UD();if(!t.length){const t=mv(WD);return()=>{t.cancel()}}const e=mv((()=>{WD();for(const e of HD){const n=.5;e.updateMatrixWorld();const r=e.getWorldDirection(Py),{start:i,end:o}=Fy;o.copy(i.copy(e.position)),Iy.makeEmpty(),Iy.expandByPoint(i),Iy.min.addScalar(-n),Iy.max.addScalar(n);const a=Ay,s=Dy;let l=0,u=0;for(const e of t)e.shapecast({intersectsBounds:t=>t.intersectsBox(Iy),intersectsTriangle:t=>{l=t.closestPointToSegment(Fy,a,s),l<n&&(u=n-l,i.addScaledVector(r,u),o.addScaledVector(r,u))}});const c=i.sub(e.position),h=Math.max(0,c.length()-1e-5);c.normalize().multiplyScalar(h),e.position.add(c)}}));return()=>{e.cancel()}}),[UD]);class qD extends FD{constructor(){super(),this.innerZ=200,this.mouseControlMode="orbit";const t=this.camera;this.createEffect((()=>{const e=this.targetState.get();if(e)return;const n=GD((()=>{t.position.copy(this.object3d.getWorldPosition(Ay)),t.quaternion.copy(this.object3d.getWorldQuaternion(Ry))}));return()=>{n.cancel()}}),[this.targetState.get]),n.e(105).then(n.bind(n,4105)).then((t=>t.default.call(this)))}}m(qD,"componentName","thirdPersonCamera");class XD extends FD{constructor(){super(),m(this,"innerYSetState",new Z(!1));const t=this.camera;this.watch(GD((()=>{t.position.copy(this.object3d.getWorldPosition(Ay)),t.quaternion.copy(this.object3d.getWorldQuaternion(Ry))}))),this.createEffect((()=>{const t=this.targetState.get(),e=this.innerYSetState.get();if(t&&t instanceof _w&&!e)return super.innerY=.4*t.height,()=>{super.innerY=0}}),[this.targetState.get,this.innerYSetState.get])}get innerY(){return super.innerY}set innerY(t){super.innerY=t,this.innerYSetState.set(!0)}}m(XD,"componentName","firstPersonCamera");var YD=()=>{const t=new IS;return t.texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABjVJREFUaEPtWmvLVUUYXWu2VlaGUGGgZUWl3cvILhqlplYWkWVlfsofkHQhyEjRSCK64Q+wT2kkWpGWl7QIpRvZzUKxgi6SRUEX0yz3XvFsZl7G43vOmTnnmEEdEF/Onj3zrFnPZc0zh+jhRxJzpiOpnPGtxmYt3GoiSQXJMsewTt5pNn9PgBgTYXclDQBQAWg2t7HgSO4zo+J3czahcWzXQCSZUZWkWZLuB2CstJvXwBiDj5FcHOY4ZEDCbkoaImkHgCMzjdlNchjJn7tlpt3OtbQrYmOEpM88kGRGABiQs0h+1S0rvQIyXNI2D8Tcpt28YYwBGUny238LkBM9kEEWvxlA9ngg3/wPxDt/OxdoFyN12pVkjGzt0LXOJPn1oWakLoIeyBcABma61l6Sp5D87pAB8XLEakhZluUCkg/5GlIkpmDLbrYRD5B81Kq8FdJOZUtHrhXn/AhEov19w/qSgqQFRVHM66bSdwqkruZlWT5J8u5IkuTOZ2BqySLpqaIo7unUxXIXNm00wHSSpHslPQ7gLwCmr7Ln8twYENNdA0neR/KJsEYOxVmLB7UqabSk9yNDsubpx8A+NyN5EcnNuco4y4AQG1VVbQQw1u+ksdGLj7Fic21yzo3L1V7JQCI2Jklam5mhUoGGTDaZ5LocVrKBlGW5lOTtPWYjAK1ZkfRcURQzeg4kkuuDJW0HMDSx8KUyEcaFWPme5Okkf0t1sSRGIrl+vqQPc63rZDzJC0h+lJqOU4EEKXKNpFcPUnwEvCFOriW5OtW9UoGE2nGHpGf/ISAzSS5JrSn/OSDBtSZIWu8lievE9xPesQ6MSaCJJDf02rVCp2SYPwkedZCz1u/+5Lijp8Eeq9Kqqt4FcPFBipM60AG855wbk5p6zb6kGPFAQsDPlTTfi0U7SPXyYwLUxOM8kgtSAz0XSHCvk/yxNrXRkAo0FENrSIzKPf4mMxKzUpblIyTn9JiVmg1JC4uieDCHjSxG4jiRdJikjwGM7BGYGgSAbSTPI/lnTnx0AsRSrnWsrXNyoSQLfJPewZBUN4rHhXf3kRxD8gPfD7AOjaXipE+ya0V6y2LjWN8dHCtpHQD7Lvek2HcyBGBxMYnkJknDAfxEck9q6k1mJJ6wqqqVAM4hOYHkl5JGSVpm3/mtMyluGxT+xTsazuj2fziQbSE5neRWSadK2gBgi3Pueu/OdZJpR0tbRhpArABwk1/gmaIoZvm/LffPkXQXgOPaLeqf/0hyEYCF4YKoLMvFJO/0z19wzk1LBdMSSDMQANaTnEpyryTL++ZW1pg4BsB0SVMBnAvgBABHeMP+ALATwCckVwFYRvJX/149h6TDJdmziblgmgJpAeIN71YW8EGDjQAwjqQp4/pjAC2WABztv9rlfb8G7cfMBLDRXyuEuSyTmHtdlQOmXyBx6quqajmAmmIA+4GwOLDWUFmW80nOBbCZpJ0jfmjlXpKGSnoFgHVj6uacv7KzjGgt2EYwK5xzN3vwfdd88RoHAGkA8TKAOugaQQS/9jXlUwCn2e46566ImLrUzt/2sp3zSb4dnlVVtQnA5QA+J3m21Q5vaDNmVjrnbmgGpiUjkoKu2uCcq/02MjJoL4uJ572xt5Bcbr7u4+dqn54NiKXX16Jnt0UgbyW5LGr+9d0QV1VlxwbLkEF/pTHSiFiS+fEqf8/Xt0CIoaqq1gCYDGA7SUvLVpUDyPHe3w2IGfN69GyQv647GcBa59yUOC6jDRsCwBJLHX/NKn5y1mpYJAhIa0Zs9gehuSQfbvD1/oBYqg6xFTSbdeFHNzYb+luzWeyl1JED2v1hV8uyfJrkbAC7vJ/XFzbeUAvaZkAsqO1K+wyv2SztLiqKYnajWIyvL1olkLZAGl+OpIqdFrcAsKvpJUVRzIzcIQRsv0B8ZqrHVFX1IoAbAfziNyP5VNgya7VC3RDsl0l6CcDxJK8k+WYnQCRd54vgTpLTSL6Vo7GCvdmMxAEnaTCA8QBWh/TZALa/rLXfb1Yk2Y8MpgBYQ3J3rnzvCkir7NEA5BJJS31qnkHynVZdkU5B1PO3c6U2Fdrer+8R+xsXAtU/a3o/2O39YddAutmEXr/bFSMpxoQfo3V6W5uyho35G4LD428xBkRwAAAAAElFTkSuQmCC",Ov.delete(t),t.scale=.5,t};class ZD extends Vw{constructor(t,e){super(t),e&&this.createEffect((()=>{if(_v()!==Hg)return;const t=new e(this.object3d);ly.add(t);const n=YD();t.add(n.outerObject3d);const r=Zb((({target:t})=>{t===n&&Kb(this)}));return()=>{t.dispose(),ly.remove(t),n.dispose(),r.cancel()}}),[_v])}dispose(){return this.done||(super.dispose(),this.object3d.dispose()),this}lookAt(t){super.lookAt(t),this.rotationY+=180}get color(){return"#"+this.object3d.color.getHexString()}set color(t){this.object3d.color=new _r(t)}get intensity(){return this.object3d.intensity}set intensity(t){this.object3d.intensity=t}}const KD=f(p({},Zw),{color:String,intensity:Number}),JD=f(p({},Kw),{color:"#ffffff",intensity:1}),QD=p({},KD),$D=p({},JD),tP=p({},QD),eP=p({},$D);class nP extends ZD{constructor(){super(new im)}}m(nP,"componentName","ambientLight"),m(nP,"defaults",eP),m(nP,"schema",tP);class rP extends bd{constructor(t,e){const n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new fo;r.setAttribute("position",new oo(n,3)),r.computeBoundingSphere();const i=new pd({fog:!1});super(r,i),this.light=t,this.color=e,this.type="RectAreaLightHelper";const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new fo;a.setAttribute("position",new oo(o,3)),a.computeBoundingSphere(),this.add(new Lo(a,new Qi({side:at,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const iP=f(p({},KD),{helper:Boolean}),oP=f(p({},JD),{depth:0,scaleZ:0,helper:!0}),aP=A((async()=>{const{RectAreaLightUniformsLib:t}=await n.e(234).then(n.bind(n,9234));t.init()}));class sP extends Vw{constructor(){super(new xh),m(this,"light"),m(this,"helperState",new Z(!0)),m(this,"_color"),m(this,"_intensity"),m(this,"_width"),m(this,"_height"),m(this,"_scaleX"),m(this,"_scaleY"),(async()=>{if(await aP(),this.done)return;const t=this.light=new om(this._color,this._intensity,this.width*this.scaleX*Ig,this.height*this.scaleY*Ig);this.object3d.add(t),this.then((()=>t.dispose())),this.createEffect((()=>{if("scale"!==iM()||Dv()!==this)return;const t=nM((()=>{const{x:t,y:e}=this.outerObject3d.scale;this.scaleX=t,this.scaleY=e}));return()=>{t.cancel()}}),[iM,Dv]),this.createEffect((()=>{if(_v()!==Hg||!this.helperState.get())return;const e=new rP(t);return ly.add(e),()=>{e.dispose(),ly.remove(e)}}),[_v,this.helperState.get])})()}get helper(){return this.helperState.get()}set helper(t){this.helperState.set(t)}lookAt(t){super.lookAt(t),this.rotationY+=180}get color(){var t;return null!=(t=this._color)?t:oP.color}set color(t){this._color=t,this.light&&(this.light.color=new _r(t))}get intensity(){var t;return null!=(t=this._intensity)?t:oP.intensity}set intensity(t){this._intensity=t,this.light&&(this.light.intensity=t)}get width(){var t;return null!=(t=this._width)?t:oP.width}set width(t){this._width=t,this.light&&(this.light.width=t*this.scaleX*Ig)}get height(){var t;return null!=(t=this._height)?t:oP.height}set height(t){this._height=t,this.light&&(this.light.height=t*this.scaleY*Ig)}get scaleX(){var t;return null!=(t=this._scaleX)?t:oP.scaleX}set scaleX(t){this._scaleX=t,this.light&&(this.light.width=t*this.width*Ig)}get scaleY(){var t;return null!=(t=this._scaleY)?t:oP.scaleY}set scaleY(t){this._scaleY=t,this.light&&(this.light.height=t*this.height*Ig)}get depth(){return 0}set depth(t){}get scaleZ(){return 0}set scaleZ(t){}}m(sP,"componentName","areaLight"),m(sP,"defaults",oP),m(sP,"schema",iP);const lP=p({},QD),uP=p({},$D);class cP extends ZD{constructor(){super(new rm,vg)}}m(cP,"componentName","directionalLight"),m(cP,"defaults",uP),m(cP,"schema",lP);const hP=f(p({},KD),{groundColor:String}),dP=f(p({},JD),{groundColor:"#ffffff"});class pP extends ZD{constructor(){super(new Wf,dg)}get groundColor(){return"#"+this.object3d.groundColor.getHexString()}set groundColor(t){this.object3d.groundColor=new _r(t)}}m(pP,"componentName","skyLight"),m(pP,"defaults",dP),m(pP,"schema",hP);const fP=f(p({},KD),{decay:Number,distance:Number}),mP=f(p({},JD),{decay:1,distance:0});class gP{get decay(){return this.object3d.decay}set decay(t){this.object3d.decay=t}get distance(){return this.object3d.distance}set distance(t){this.object3d.distance=t}}class vP extends ZD{constructor(){super(new em,lg)}}m(vP,"componentName","pointLight"),m(vP,"defaults",mP),m(vP,"schema",fP),D(vP,[gP]);const yP=f(p({},KD),{angle:Number,penumbra:Number}),bP=f(p({},JD),{angle:1,penumbra:0});class xP extends ZD{constructor(){super(new Kf,ng)}get angle(){return this.object3d.angle}set angle(t){this.object3d.angle=t}get penumbra(){return this.object3d.penumbra}set penumbra(t){this.object3d.penumbra=t}}m(xP,"componentName","spotLight"),m(xP,"defaults",bP),m(xP,"schema",yP),D(xP,[gP]);const _P=f(p({},Uv),{onKeyPress:Function,onKeyUp:Function,onKeyDown:Function}),wP=p({},jv),[SP,MP]=F(!0),[EP,CP]=N(),[TP,AP]=N(),[DP,PP]=N(),RP=new Set,LP=t=>(t=1===t.length?t.toLowerCase():t," "===t&&(t="Space"),t);X((()=>{if(Ib()&&MP())return;const t=mv((()=>RP.size>0&&DP())),e=t=>{const e=LP(t.key);RP.add(e),EP(e)},n=t=>{const e=LP(t.key);RP.delete(e),TP(e),!RP.size&&DP()};return t.watch(HS((()=>{if(!RP.size)return;const t=[...RP];RP.clear();for(const e of t)TP(e)}))),document.addEventListener("keydown",e),document.addEventListener("keyup",n),()=>{t.cancel(),document.removeEventListener("keydown",e),document.removeEventListener("keyup",n)}}),[Ib,MP]);class OP extends Wv{constructor(){super(new xh),m(this,"onKeyPress"),m(this,"onKeyUp"),m(this,"onKeyDown"),this.watch(PP((()=>{if(this.onKeyPress)if(RP.size)for(const t of RP)this.onKeyPress(t,RP);else this.onKeyPress("",RP)}))),this.watch(AP((t=>{var e;return null==(e=this.onKeyUp)?void 0:e.call(this,t,RP)}))),this.watch(CP((t=>{var e;return null==(e=this.onKeyDown)?void 0:e.call(this,t,RP)})))}}m(OP,"componentName","keyboard"),m(OP,"defaults",wP),m(OP,"schema",_P);const kP=new OP;Ov.delete(kP),"getGamepads"in navigator&&mv((()=>{for(const t of navigator.getGamepads())if(t){for(let e=0;e<t.buttons.length;e++){const n=t.buttons[e],r=Math.round(100*n.value)+"%";n.pressed&&console.log(e,n.value,n.pressed,r)}for(let e=0;e<t.axes.length;e++){const n=Number(t.axes[e].toFixed(2));0!==n&&console.log(e,n)}}}));const[IP,NP]=F(0),BP=new DD;Ov.delete(BP);var FP={get performance(){return eb()},set performance(t){tb(t)},get defaultFog(){return hy()},set defaultFog(t){cy(t)},get defaultLight(){return oy()},set defaultLight(t){iy(t)},get defaultLightScale(){return sy()},set defaultLightScale(t){ay(t)},get skybox(){return BP.texture},set skybox(t){BP.texture=t},get defaultOrbitControls(){return lS()},set defaultOrbitControls(t){sS(t)},get gridHelper(){return hM()},set gridHelper(t){cM(t)},get gridHelperSize(){return pM()},set gridHelperSize(t){dM(t)},get gravity(){return ow()},set gravity(t){iw(t)},get repulsion(){return NP()},set repulsion(t){IP(t)},get autoMount(){return fb()},set autoMount(t){pb(t)},get logarithmicDepth(){return rv()},set logarithmicDepth(t){nv(t)},get exposure(){return qy()},set exposure(t){Gy(t)},get pbr(){return sb()},set pbr(t){ab(t)},get bloom(){return FM()},set bloom(t){BM(t)},get bloomStrength(){return qM()},set bloomStrength(t){GM(t)},get bloomRadius(){return WM()},set bloomRadius(t){HM(t)},get bloomThreshold(){return YM()},set bloomThreshold(t){XM(t)},get ambientOcclusion(){return UM()},set ambientOcclusion(t){zM(t)},get outlineColor(){return m_()},set outlineColor(t){f_(t)},get outlineHiddenColor(){return v_()},set outlineHiddenColor(t){g_(t)},get outlinePattern(){return b_()},set outlinePattern(t){y_(t)},get outlinePulse(){return __()},set outlinePulse(t){x_(t)},get outlineStrength(){return S_()},set outlineStrength(t){w_(t)},get outlineThickness(){return E_()},set outlineThickness(t){M_(t)},get lensDistortion(){return SE()},set lensDistortion(t){wE(t)},get lensIor(){return vE()},set lensIor(t){gE(t)},get lensBand(){return bE()},set lensBand(t){yE(t)},get texture(){return gy()},set texture(t){my(t)},get color(){return ev()},set color(t){tv(t)}};const zP=new Map,UP=(t,e)=>{for(const n of e)zP.set(n,t);return e};UP("image",["jpg","jpeg","gif","png","svg","tiff","webp","hdr"]),UP("audio",["m4a","mp3","wav","wma","ogg","flax","flac","aac"]),UP("plainText",["ls","js","ts","jsx","tsx","py","txt","md","json","yaml","c","cpp","h","hpp","css","scss","sass","html"]),UP("model",["gltf","glb","fbx"]),UP("scene",["l3d"]);const jP={onPlay:Function,onPause:Function,onEnded:Function,stream:Boolean,src:String,loop:Boolean,autoplay:Boolean,muted:Boolean,playbackRate:Number,volume:Number,paused:Boolean},VP={paused:!0};class HP extends O{constructor(){super(...arguments),m(this,"onPlay"),m(this,"onPause"),m(this,"onEnded"),m(this,"_paused",!0),m(this,"stream"),m(this,"sound"),m(this,"soundResolvable",new R),m(this,"_src"),m(this,"_loop"),m(this,"_autoplay"),m(this,"_muted"),m(this,"_playbackRate"),m(this,"_volume")}dispose(){var t,e;return this.done||(super.dispose(),null==(t=this.sound)||t.stop(),null==(e=this.sound)||e.unload()),this}get paused(){return this._paused}set paused(t){this._paused=t,t?this.play():this.pause()}get src(){return this._src}set src(t){var e;this._src=t,null==(e=this.sound)||e.stop(),this.sound=void 0,this.soundResolvable.done&&(this.soundResolvable=new R),t&&n.e(849).then(n.bind(n,8849)).then((function(t){return t.h})).then((e=>{this.done||t!==this.src||(this.sound=new e.default.Howl({src:t,onplay:this.onPlay,onpause:this.onPause,onend:this.onEnded,loop:this._loop,autoplay:this._autoplay,mute:this._muted,rate:this._playbackRate,volume:this._volume,html5:this.stream}),this.soundResolvable.resolve(this.sound))}))}get loop(){return this._loop}set loop(t){var e;this._loop=t,null==(e=this.sound)||e.loop(!!t)}get autoplay(){return this._autoplay}set autoplay(t){this._autoplay=t,t&&this.play()}get muted(){return this._muted}set muted(t){var e;this._muted=t,null==(e=this.sound)||e.mute(!!t)}get playbackRate(){return this._playbackRate}set playbackRate(t){var e;this._playbackRate=t,null==(e=this.sound)||e.rate(null!=t?t:1)}get volume(){return this._volume}set volume(t){var e;this._volume=t,null==(e=this.sound)||e.volume(null!=t?t:1)}get duration(){var t;return null==(t=this.sound)?void 0:t.duration()}fade(t,e,n=1e3){this.soundResolvable.then((r=>r.fade(t,e,n)))}play(){this.soundResolvable.then((t=>t.play())),this._paused=!1}pause(){this.soundResolvable.then((t=>t.pause())),this._paused=!0}stop(){this.soundResolvable.then((t=>t.stop())),this._paused=!0}}m(HP,"componentName","sound"),m(HP,"defaults",VP),m(HP,"schema",jP);const[WP,GP]=N(),qP={performance:String,skybox:[String,Array],defaultLight:[String,Boolean],defaultLightScale:Number,defaultOrbitControls:Boolean,defaultFog:String,gridHelper:Boolean,gridHelperSize:Number,gravity:Number,repulsion:Number,autoMount:[Boolean,String],logarithmicDepth:Boolean,exposure:Number,pbr:Boolean,bloom:Boolean,bloomStrength:Number,bloomRadius:Number,bloomThreshold:Number,ambientOcclusion:[Boolean,String],outlineColor:String,outlineHiddenColor:String,outlinePattern:String,outlinePulse:Number,outlineStrength:Number,outlineThickness:Number,lensDistortion:Boolean,lensIor:Number,lensBand:Number,texture:String,color:String},XP=p({},FP);var YP=C((t=>{var e;for(const n of Object.keys(FP))"autoMount"!==n&&(FP[n]=null!=(e=t[n])?e:XP[n]);WP()}),0,"trailing");const ZP=["type","children","scale","velocity","target","proxy"],KP=["performance","defaultOrbitControls","autoMount","texture","color"],JP=[...KP,"gridHelper","gridHelperSize"],QP=t=>{const e=[];for(const n of t){if(kv.has(n))continue;const{componentName:t,schema:r,defaults:i}=n.constructor,o={type:t};for(const e of Object.keys(r)){if(ZP.includes(e))continue;let t;if("animations"===e){if(t=n.loadedAnims,!t)continue}else if("animation"===e){if(t=n.animationName,void 0===t)continue}else t=n[e];t!==i[e]&&"function"!==typeof t&&("number"===typeof t&&(t=Number(t.toFixed(2))),o[e]=t)}n.children&&(o.children=QP(n.children)),e.push(o)}return e};var $P=(t=Ov)=>{const e=QP(t instanceof Iv?[t]:t),n={type:"setup"};for(const[r,i]of Object.entries(y.exports.omit(FP,JP)))XP[r]!==i&&(n[r]=i);return Object.keys(n).length&&e.push(n),e};const tR=T({group:()=>new CD,model:()=>new cC,svgMesh:()=>new tD,dummy:()=>new UA,building:()=>new ZA,reflector:()=>new rD,sprite:()=>new IS,trigger:()=>new uD,audio:()=>new gD,camera:()=>new kD,thirdPersonCamera:()=>new qD,firstPersonCamera:()=>new XD,orbitCamera:()=>new YS,ambientLight:()=>new nP,areaLight:()=>new sP,directionalLight:()=>new cP,skyLight:()=>new pP,pointLight:()=>new vP,spotLight:()=>new xP,circle:()=>new QE,cone:()=>new OE,cube:()=>new eS,cylinder:()=>new NE,octahedron:()=>new FE,plane:()=>new XE,sphere:()=>new RE,tetrahedron:()=>new UE,torus:()=>new HE,skybox:()=>new DD,environment:()=>new Gv});var eR=t=>tR[t]();const nR=(t,e)=>{var n;if("setup"===t.type)return void YP(t);if("animation"===t.type)return;const r=eR(t.type);return e&&r instanceof nS&&e.push(r.loaded),Object.assign(r,y.exports.omit(t,ZP)),null==(n=t.children)||n.map((t=>nR(t,e))).forEach((t=>t&&r.append(t))),r};var rR=(t,e)=>t.map((t=>nR(t,e)));const[iR,oR]=F("https://unpkg.com/lingo3d-wasm@1.0.0/assets/");var aR=(t,e)=>Object.fromEntries(Object.entries(t).map((([t,n])=>[t,{type:n===Number?[Number,Object]:n,default:e[t]}]))),sR=aR(qP,XP);const lR=document.createElement("div");Object.assign(lR.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",pointerEvents:"none",userSelect:"none",zIndex:1});const uR={style:{height:"100%"}},cR=(0,r.aZ)({__name:"World",props:f(p({},sR),{position:String}),setup(t){const e=t,n=(0,i.iH)();(0,r.m0)((t=>{const e=(0,i.IU)(n.value);e&&(e.appendChild(lR),FP.autoMount=e,t((()=>{FP.autoMount=!1})))})),(0,r.m0)((t=>{YP(e),t((()=>{YP({})}))}));const a=document.createElement("style");return a.innerHTML=".lingo3d {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n    display: flex;\n}",document.head.appendChild(a),(t,i)=>((0,r.wg)(),(0,r.iD)("div",{class:"lingo3d",style:(0,o.j5)({position:e.position})},[(0,r._)("div",uR,[(0,r.WI)(t.$slots,"default")]),(0,r._)("div",{ref_key:"divRef",ref:n,style:{height:"100%","flex-grow":"1",position:"relative",overflow:"hidden"}},null,512)],4))}});var hR,dR,pR,fR,mR,gR,vR={},yR=[],bR=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function xR(t,e){for(var n in e)t[n]=e[n];return t}function _R(t){var e=t.parentNode;e&&e.removeChild(t)}function wR(t,e,n){var r,i,o,a={};for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?hR.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===a[o]&&(a[o]=t.defaultProps[o]);return SR(t,a,r,i,null)}function SR(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++pR:i};return null==i&&null!=dR.vnode&&dR.vnode(o),o}function MR(t){return t.children}function ER(t,e){this.props=t,this.context=e}function CR(t,e){if(null==e)return t.__?CR(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?CR(t):null}function TR(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return TR(t)}}function AR(t){(!t.__d&&(t.__d=!0)&&fR.push(t)&&!DR.__r++||gR!==dR.debounceRendering)&&((gR=dR.debounceRendering)||mR)(DR)}function DR(){for(var t;DR.__r=fR.length;)t=fR.sort((function(t,e){return t.__v.__b-e.__v.__b})),fR=[],t.some((function(t){var e,n,r,i,o,a;t.__d&&(o=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=xR({},i)).__v=i.__v+1,FR(a,i,r,e.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?CR(i):o,i.__h),zR(n,i),i.__e!=o&&TR(i)))}))}function PR(t,e,n,r,i,o,a,s,l,u){var c,h,d,p,f,m,g,v=r&&r.__k||yR,y=v.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(p=n.__k[c]=null==(p=e[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?SR(null,p,null,null,p):Array.isArray(p)?SR(MR,{children:p},null,null,null):p.__b>0?SR(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(d=v[c])||d&&p.key==d.key&&p.type===d.type)v[c]=void 0;else for(h=0;h<y;h++){if((d=v[h])&&p.key==d.key&&p.type===d.type){v[h]=void 0;break}d=null}FR(t,p,d=d||vR,i,o,a,s,l,u),f=p.__e,(h=p.ref)&&d.ref!=h&&(g||(g=[]),d.ref&&g.push(d.ref,null,p),g.push(h,p.__c||f,p)),null!=f?(null==m&&(m=f),"function"==typeof p.type&&p.__k===d.__k?p.__d=l=RR(p,l,t):l=LR(t,p,d,v,f,l),"function"==typeof n.type&&(n.__d=l)):l&&d.__e==l&&l.parentNode!=t&&(l=CR(d))}for(n.__e=m,c=y;c--;)null!=v[c]&&("function"==typeof n.type&&null!=v[c].__e&&v[c].__e==n.__d&&(n.__d=CR(r,c+1)),VR(v[c],v[c]));if(g)for(c=0;c<g.length;c++)jR(g[c],g[++c],g[++c])}function RR(t,e,n){for(var r,i=t.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=t,e="function"==typeof r.type?RR(r,e,n):LR(n,r,r,i,r.__e,e));return e}function LR(t,e,n,r,i,o){var a,s,l;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),a=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=2)if(s==i)break t;t.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function OR(t,e,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in e||IR(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||IR(t,o,e[o],n[o],r)}function kR(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||bR.test(e)?n:n+"px"}function IR(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||kR(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||kR(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?BR:NR,o):t.removeEventListener(e,o?BR:NR,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(a){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function NR(t){this.l[t.type+!1](dR.event?dR.event(t):t)}function BR(t){this.l[t.type+!0](dR.event?dR.event(t):t)}function FR(t,e,n,r,i,o,a,s,l){var u,c,h,d,p,f,m,g,v,y,b,x=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,s=e.__e=n.__e,e.__h=null,o=[s]),(u=dR.__b)&&u(e);try{t:if("function"==typeof x){if(g=e.props,v=(u=x.contextType)&&r[u.__c],y=u?v?v.props.value:u.__:r,n.__c?m=(c=e.__c=n.__c).__=c.__E:("prototype"in x&&x.prototype.render?e.__c=c=new x(g,y):(e.__c=c=new ER(g,y),c.constructor=x,c.render=HR),v&&v.sub(c),c.props=g,c.state||(c.state={}),c.context=y,c.__n=r,h=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=x.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=xR({},c.__s)),xR(c.__s,x.getDerivedStateFromProps(g,c.__s))),d=c.props,p=c.state,h)null==x.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==x.getDerivedStateFromProps&&g!==d&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(g,y),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(g,c.__s,y)||e.__v===n.__v){c.props=g,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),c.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),c.__h.length&&a.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(g,c.__s,y),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(d,p,f)}))}c.context=y,c.props=g,c.state=c.__s,(u=dR.__r)&&u(e),c.__d=!1,c.__v=e,c.__P=t,u=c.render(c.props,c.state,c.context),c.state=c.__s,null!=c.getChildContext&&(r=xR(xR({},r),c.getChildContext())),h||null==c.getSnapshotBeforeUpdate||(f=c.getSnapshotBeforeUpdate(d,p)),b=null!=u&&u.type===MR&&null==u.key?u.props.children:u,PR(t,Array.isArray(b)?b:[b],e,n,r,i,o,a,s,l),c.base=e.__e,e.__h=null,c.__h.length&&a.push(c),m&&(c.__E=c.__=null),c.__e=!1}else null==o&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=UR(n.__e,e,n,r,i,o,a,l);(u=dR.diffed)&&u(e)}catch(_){e.__v=null,(l||null!=o)&&(e.__e=s,e.__h=!!l,o[o.indexOf(s)]=null),dR.__e(_,e,n)}}function zR(t,e){dR.__c&&dR.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(n){dR.__e(n,e.__v)}}))}function UR(t,e,n,r,i,o,a,s){var l,u,c,h=n.props,d=e.props,p=e.type,f=0;if("svg"===p&&(i=!0),null!=o)for(;f<o.length;f++)if((l=o[f])&&"setAttribute"in l==!!p&&(p?l.localName===p:3===l.nodeType)){t=l,o[f]=null;break}if(null==t){if(null===p)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,d.is&&d),o=null,s=!1}if(null===p)h===d||s&&t.data===d||(t.data=d);else{if(o=o&&hR.call(t.childNodes),u=(h=n.props||vR).dangerouslySetInnerHTML,c=d.dangerouslySetInnerHTML,!s){if(null!=o)for(h={},f=0;f<t.attributes.length;f++)h[t.attributes[f].name]=t.attributes[f].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(OR(t,d,h,i,s),c)e.__k=[];else if(f=e.props.children,PR(t,Array.isArray(f)?f:[f],e,n,r,i&&"foreignObject"!==p,o,a,o?o[0]:n.__k&&CR(n,0),s),null!=o)for(f=o.length;f--;)null!=o[f]&&_R(o[f]);s||("value"in d&&void 0!==(f=d.value)&&(f!==t.value||"progress"===p&&!f||"option"===p&&f!==h.value)&&IR(t,"value",f,h.value,!1),"checked"in d&&void 0!==(f=d.checked)&&f!==t.checked&&IR(t,"checked",f,h.checked,!1))}return t}function jR(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(r){dR.__e(r,n)}}function VR(t,e,n){var r,i;if(dR.unmount&&dR.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||jR(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){dR.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&VR(r[i],e,"function"!=typeof t.type);n||null==t.__e||_R(t.__e),t.__e=t.__d=void 0}function HR(t,e,n){return this.constructor(t,n)}function WR(t,e,n){var r,i,o;dR.__&&dR.__(t,e),i=(r="function"==typeof n)?null:n&&n.__k||e.__k,o=[],FR(e,t=(!r&&n||e).__k=wR(MR,null,[t]),i||vR,vR,void 0!==e.ownerSVGElement,!r&&n?[n]:i?null:e.firstChild?hR.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r),zR(o,t)}function GR(t,e){WR(t,e,GR)}function qR(t,e,n){var r,i,o,a=xR({},t.props);for(o in e)"key"==o?r=e[o]:"ref"==o?i=e[o]:a[o]=e[o];return arguments.length>2&&(a.children=arguments.length>3?hR.call(arguments,2):n),SR(t.type,a,r||t.key,i||t.ref,null)}hR=yR.slice,dR={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(s){t=s}throw t}},pR=0,ER.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=xR({},this.state),"function"==typeof t&&(t=t(xR({},n),this.props)),t&&xR(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),AR(this))},ER.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),AR(this))},ER.prototype.render=MR,fR=[],mR="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,DR.__r=0;var XR=0;function YR(t,e,n,r,i){var o,a,s={};for(a in e)"ref"==a?o=e[a]:s[a]=e[a];var l={type:t,props:s,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--XR,__source:i,__self:r};if("function"==typeof t&&(o=t.defaultProps))for(a in o)void 0===s[a]&&(s[a]=o[a]);return dR.vnode&&dR.vnode(l),l}var ZR={exports:{}};/*! Tweakpane 3.0.8 (c) 2016 cocopon, licensed under the MIT license. */(function(t,e){(function(t,n){n(e)})(0,(function(t){class e{constructor(t){const[e,n]=t.split("-"),r=e.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=null!==n&&void 0!==n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}class n{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class r{constructor(t){this.target=t}}class i extends r{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null===r||void 0===r||r}}class o extends r{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class a extends r{constructor(t,e){super(t),this.expanded=e}}function s(t){return t}function l(t){return null===t||void 0===t}function u(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const c={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class h{constructor(t){var e;this.message=null!==(e=c[t.type](s(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new h({type:"alreadydisposed"})}static notBindable(){return new h({type:"notbindable"})}static propertyNotFound(t){return new h({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new h({type:"shouldneverhappen"})}}class d{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!==n&&void 0!==n?n:e}static isBindable(t){return null!==t&&"object"===typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!d.isBindable(n))throw h.notBindable();if(!(t in n))throw h.propertyNotFound(t);n[t]=e}}class p extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const n=e.bind(this),i=this.controller_.valueController.emitter;return i.on(t,(()=>{n(new r(this))})),this}}class f{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const m="tp";function g(t){const e=(e,n)=>[m,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("");return e}function v(t,e){return n=>e(t(n))}function y(t){return t.rawValue}function b(t,e){t.emitter.on("change",v(y,e)),e(t.rawValue)}function x(t,e,n){b(t.value(e),n)}function _(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function w(t,e){return n=>{_(t,e,n)}}function S(t,e){b(t,(t=>{e.textContent=null!==t&&void 0!==t?t:""}))}const M=g("btn");class E{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(M()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(M("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(M("t")),S(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class C{constructor(t,e){this.emitter=new f,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new E(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class T{constructor(t,e){var n;this.constraint_=null===e||void 0===e?void 0:e.constraint,this.equals_=null!==(n=null===e||void 0===e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new f,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!==e&&void 0!==e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t,i=!this.equals_(this.rawValue_,r);(i||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}class A{constructor(t){this.emitter=new f,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!==e&&void 0!==e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function D(t,e){const n=null===e||void 0===e?void 0:e.constraint,r=null===e||void 0===e?void 0:e.equals;return n||r?new T(t,e):new A(t)}class P{constructor(t){this.emitter=new f,this.valMap_=t;for(const e in this.valMap_){const t=this.valMap_[e];t.emitter.on("change",(()=>{this.emitter.emit("change",{key:e,sender:this})}))}}static createCore(t){const e=Object.keys(t);return e.reduce(((e,n)=>Object.assign(e,{[n]:D(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new P(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function R(t,e){const n=Object.keys(e),r=n.reduce(((n,r)=>{if(void 0===n)return;const i=e[r],o=i(t[r]);return o.succeeded?Object.assign(Object.assign({},n),{[r]:o.value}):void 0}),{});return s(r)}function L(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}function O(t){return null!==t&&"object"===typeof t}function k(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function I(t){return{custom:e=>k(e)(t),boolean:k((t=>"boolean"===typeof t?t:void 0))(t),number:k((t=>"number"===typeof t?t:void 0))(t),string:k((t=>"string"===typeof t?t:void 0))(t),function:k((t=>"function"===typeof t?t:void 0))(t),constant:e=>k((t=>t===e?e:void 0))(t),raw:k((t=>t))(t),object:e=>k((t=>{if(O(t))return R(t,e)}))(t),array:e=>k((t=>{if(Array.isArray(t))return L(t,e)}))(t)}}const N={optional:I(!0),required:I(!1)};function B(t,e){const n=N.required.object(e)(t);return n.succeeded?n.value:void 0}function F(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function z(){return["veryfirst","first","last","verylast"]}const U=g(""),j={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class V{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{z().forEach((t=>{e.classList.remove(U(void 0,j[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(U(void 0,j[t]))}))})),this.viewProps.handleDispose((()=>{F(e)}))}get parent(){return this.parent_}}const H="http://www.w3.org/2000/svg";function W(t){t.offsetHeight}function G(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function q(t){return void 0!==t.ontouchstart}function X(){return new Function("return this")()}function Y(){const t=s(X());return t.document}function Z(t){const e=t.ownerDocument.defaultView;if(!e)return null;const n="document"in e;return n?t.getContext("2d"):null}const K={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function J(t,e){const n=t.createElementNS(H,"svg");return n.innerHTML=K[e],n}function Q(t,e,n){t.insertBefore(e,t.children[n])}function $(t){t.parentElement&&t.parentElement.removeChild(t)}function tt(t){while(t.children.length>0)t.removeChild(t.children[0])}function et(t){while(t.childNodes.length>0)t.removeChild(t.childNodes[0])}function nt(t){return t.relatedTarget?s(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const rt=g("lbl");function it(t,e){const n=t.createDocumentFragment(),r=e.split("\n").map((e=>t.createTextNode(e)));return r.forEach(((e,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class ot{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(rt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(rt("l")),x(e.props,"label",(e=>{l(e)?this.element.classList.add(rt(void 0,"nol")):(this.element.classList.remove(rt(void 0,"nol")),et(n),n.appendChild(it(t,e)))})),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(rt("v")),this.element.appendChild(r),this.valueElement=r}}class at extends V{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new ot(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const st={id:"button",type:"blade",accept(t){const e=N,n=B(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller(t){return new at(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:new C(t.document,{props:P.fromObject({title:t.params.title}),viewProps:t.viewProps})})},api(t){return t.controller instanceof at&&t.controller.valueController instanceof C?new p(t.controller):null}};class lt extends V{constructor(t){super(t),this.value=t.value}}function ut(){return new P({positions:D([],{equals:u})})}class ct extends P{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=P.createCore(e);return new ct(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{const n=this.styleExpanded;n?t.classList.add(e):t.classList.remove(e)};x(this,"expanded",n),x(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function ht(t,e){let n=0;return G(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),W(e),n=e.clientHeight,t.set("temporaryExpanded",null),W(e)})),n}function dt(t,e){e.style.height=t.styleHeight}function pt(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),l(t.get("expandedHeight"))&&t.set("expandedHeight",ht(t,e)),t.set("shouldFixHeight",!0),W(e)})),t.emitter.on("change",(()=>{dt(t,e)})),dt(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class ft extends n{constructor(t,e){super(t),this.rackApi_=e}}function mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function gt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function vt(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function yt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class bt{constructor(t){this.emitter=new f,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw h.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class xt extends n{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new f,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,s(e),this.controller_.binding.target.presetKey,t.options.last)})}}class _t extends at{constructor(t,e){super(t,e),this.binding=e.binding}}class wt extends n{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new f,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new o(this,s(e),this.controller_.binding.target.presetKey)})}}class St extends at{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Mt(t){return t instanceof Tt?t["apiSet_"]:t instanceof ft?t["rackApi_"]["apiSet_"]:null}function Et(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw h.shouldNeverHappen();return n}function Ct(t,e,n){if(!d.isBindable(t))throw h.notBindable();return new d(t,e,n)}class Tt extends n{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new f,this.apiSet_=new bt(Mt),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>Et(this.apiSet_,t)))}addInput(t,e,n){const r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(i,Ct(t,e,r.presetKey),r),a=new xt(o);return this.add(a,r.index)}addMonitor(t,e,n){const r=n||{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(i,Ct(t,e),r),a=new wt(o);return s(this.add(a,r.index))}addFolder(t){return gt(this,t)}addButton(t){return mt(this,t)}addSeparator(t){return vt(this,t)}addTab(t){return yt(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((e=>e.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createBladeApi(n);return this.add(r,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){const e=this.apiSet_.find((e=>e.controller_===t));e||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Et(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof _t){const n=Et(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new i(n,s(r.target.read()),r.target.presetKey,t.options.last)})}else if(e instanceof lt){const n=Et(this.apiSet_,e);this.emitter_.emit("change",{event:new i(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof St))throw h.shouldNeverHappen();const e=Et(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new o(e,s(n.target.read()),n.target.presetKey)})}}class At extends ft{constructor(t,e){super(t,new Tt(t.rackController,e)),this.emitter_=new f,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new a(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Dt extends V{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class Pt{constructor(t,e){const n=g(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function Rt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof _t&&r.binding===e)return r}return null}function Lt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof St&&r.binding===e)return r}return null}function Ot(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof lt&&r.value===e)return r}return null}function kt(t){return t instanceof Bt?t.rack:t instanceof Dt?t.rackController.rack:null}function It(t){const e=kt(t);return e?e["bcSet_"]:null}class Nt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new f,this.blade_=null!==t&&void 0!==t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new bt(It),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t["parent_"]=this,this.bcSet_.add(t,e)}remove(t){t["parent_"]=null,this.bcSet_.remove(t)}find(t){return s(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof _t)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof St)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=kt(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof _t)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof St)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=kt(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const r=[];t===e&&(r.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),t===n&&(r.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||r.push("verylast")),t.blade.set("positions",r)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){const t=this.bcSet_.items.filter((t=>t.viewProps.get("disposed")));t.forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=Rt(this.find(_t),t.sender);if(!e)throw h.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=Lt(this.find(St),t.sender);if(!e)throw h.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=Ot(this.find(lt),t.sender);if(!e)throw h.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Bt extends V{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Pt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new Nt(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--){const e=this.rack.children[t];e.viewProps.set("disposed",!0)}}))}onRackAdd_(t){t.isRoot&&Q(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&$(t.bladeController.view.element)}}const Ft=g("cnt");class zt{constructor(t,e){this.className_=g(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Ft()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),x(this.foldable_,"completed",w(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),x(e.props,"title",(t=>{l(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(this.className_("t")),S(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const i=t.createElement("div");i.classList.add(this.className_("m")),this.buttonElement.appendChild(i);const o=e.containerElement;o.classList.add(this.className_("c")),this.element.appendChild(o),this.containerElement=o}}class Ut extends Dt{constructor(t,e){var n;const r=ct.create(null===(n=e.expanded)||void 0===n||n),i=new Bt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:i,view:new zt(t,{containerElement:i.view.element,foldable:r,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=r,pt(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const jt={id:"folder",type:"blade",accept(t){const e=N,n=B(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller(t){return new Ut(t.document,{blade:t.blade,expanded:t.params.expanded,props:P.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof Ut?new At(t.controller,t.pool):null}};class Vt extends lt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new ot(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Ht extends n{}const Wt=g("spr");class Gt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Wt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Wt("r")),this.element.appendChild(n)}}class qt extends V{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Gt(t,{viewProps:e.viewProps})}))}}const Xt={id:"separator",type:"blade",accept(t){const e=N,n=B(t,{view:e.required.constant("separator")});return n?{params:n}:null},controller(t){return new qt(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof qt?new Ht(t.controller):null}},Yt=g("");function Zt(t,e){return w(t,Yt(void 0,e))}class Kt extends P{constructor(t){super(t)}static create(t){var e,n;const r=null!==t&&void 0!==t?t:{},i={disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=r.hidden)&&void 0!==n&&n},o=P.createCore(i);return new Kt(o)}bindClassModifiers(t){x(this,"disabled",Zt(t,"disabled")),x(this,"hidden",Zt(t,"hidden"))}bindDisabled(t){x(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){x(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}}const Jt=g("tbi");class Qt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Jt()),e.viewProps.bindClassModifiers(this.element),x(e.props,"selected",(t=>{t?this.element.classList.add(Jt(void 0,"sel")):this.element.classList.remove(Jt(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(Jt("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(Jt("t")),S(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class $t{constructor(t,e){this.emitter=new f,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Qt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class te{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new $t(t,{props:e.itemProps,viewProps:Kt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Bt(t,{blade:ut(),viewProps:Kt.create()}),this.props=e.props,x(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class ee{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class ne extends ft{constructor(t,e){super(t,new Tt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new f,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw h.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new te(e,{itemProps:P.fromObject({selected:!1,title:t.title}),props:P.fromObject({selected:!1})});this.controller_.add(n,t.index);const r=this.pageApiMap_.get(n);if(!r)throw h.shouldNeverHappen();return r}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_["apiSet_"].find((e=>e.controller_===t.contentController));if(!e)throw h.shouldNeverHappen();const n=new ee(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){const e=this.pageApiMap_.get(t.item);if(!e)throw h.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const re=g("tab");class ie{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(re(),Ft()),e.viewProps.bindClassModifiers(this.element),b(e.empty,w(this.element,re(void 0,"nop")));const n=t.createElement("div");n.classList.add(re("i")),this.element.appendChild(n),this.itemsElement=n;const r=e.contentsElement;r.classList.add(re("c")),this.element.appendChild(r),this.contentsElement=r}}class oe extends Dt{constructor(t,e){const n=new Bt(t,{blade:e.blade,viewProps:e.viewProps}),r=D(!0);super({blade:e.blade,rackController:n,view:new ie(t,{contentsElement:n.view.element,empty:r,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new bt((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=r,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!==e&&void 0!==e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;Q(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;$(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,e)=>{t.props.set("selected",0===e)})):this.pageSet_.items.forEach(((e,n)=>{e.props.set("selected",n===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,n)=>{t.props.set("selected",n===e)}))}else this.keepSelection_()}}const ae={id:"tab",type:"blade",accept(t){const e=N,n=B(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new oe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const r=new te(t.document,{itemProps:P.fromObject({selected:!1,title:n.title}),props:P.fromObject({selected:!1})});e.add(r)})),e},api(t){return t.controller instanceof oe?new ne(t.controller,t.pool):null}};function se(t,e){const n=t.accept(e.params);if(!n)return null;const r=N.optional.boolean(e.params["disabled"]).value,i=N.optional.boolean(e.params["hidden"]).value;return t.controller({blade:ut(),document:e.document,params:s(Object.assign(Object.assign({},n.params),{disabled:r,hidden:i})),viewProps:Kt.create({disabled:r,hidden:i})})}class le{constructor(){this.disabled=!1,this.emitter=new f}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class ue{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new f,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ce{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function he(t,e){if(t instanceof e)return t;if(t instanceof ce){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class de{constructor(t){this.options=t}constrain(t){const e=this.options;if(0===e.length)return t;const n=e.filter((e=>e.value===t)).length>0;return n?t:e[0].value}}class pe{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return l(this.minValue)||(e=Math.max(e,this.minValue)),l(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class fe{constructor(t){this.step=t}constrain(t){const e=t<0?-Math.round(-t/this.step):Math.round(t/this.step);return e*this.step}}const me=g("lst");class ge{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(me()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(me("s")),x(this.props_,"options",(e=>{tt(n),e.forEach(((e,r)=>{const i=t.createElement("option");i.dataset.index=String(r),i.textContent=e.text,i.value=String(e.value),n.appendChild(i)}))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=t.createElement("div");r.classList.add(me("m")),r.appendChild(J(t,"dropdown")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class ve{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ge(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=s(t.currentTarget),n=e.selectedOptions.item(0);if(!n)return;const r=Number(n.dataset.index);this.value.rawValue=this.props.get("options")[r].value}}const ye=g("pop");class be{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ye()),e.viewProps.bindClassModifiers(this.element),b(e.shows,w(this.element,ye(void 0,"v")))}}class xe{constructor(t,e){this.shows=D(!1),this.viewProps=e.viewProps,this.view=new be(t,{shows:this.shows,viewProps:this.viewProps})}}const _e=g("txt");class we{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(_e()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(_e("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class Se{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new we(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=s(t.currentTarget),n=e.value,r=this.parser_(n);l(r)||(this.value.rawValue=r),this.view.refresh()}}function Me(t){return String(t)}function Ee(t){return"false"!==t&&!!t}function Ce(t){return Me(t)}class Te{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Ae={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class De{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=Ae[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Pe={"+":t=>t,"-":t=>-t,"~":t=>~t};class Re{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Pe[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Le(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(""!==i)return i}return""}}function Oe(t,e){var n;const r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function ke(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Ie(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ne(t,e){const n=Ie(t,e);if(""!==n)return n;const r=t.substr(e,1);if(e+=1,"-"!==r&&"+"!==r)return"";const i=Ie(t,e);return""===i?"":r+i}function Be(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const r=Ne(t,e);return""===r?"":n+r}function Fe(t,e){const n=t.substr(e,1);if("0"===n)return n;const r=ke(t,e);return e+=r.length,""===r?"":r+Ie(t,e)}function ze(t,e){const n=Fe(t,e);if(e+=n.length,""===n)return"";const r=t.substr(e,1);if(e+=r.length,"."!==r)return"";const i=Ie(t,e);return e+=i.length,n+r+i+Be(t,e)}function Ue(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=Ie(t,e);return e+=r.length,""===r?"":n+r+Be(t,e)}function je(t,e){const n=Fe(t,e);return e+=n.length,""===n?"":n+Be(t,e)}const Ve=Le([ze,Ue,je]);function He(t,e){var n;const r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function We(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const r=He(t,e);return""===r?"":n+r}function Ge(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function qe(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const r=Ge(t,e);return""===r?"":n+r}function Xe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ye(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const r=Xe(t,e);return""===r?"":n+r}const Ze=Le([We,qe,Ye]),Ke=Le([Ze,Ve]);function Je(t,e){const n=Ke(t,e);return e+=n.length,""===n?null:{evaluable:new Te(n),cursor:e}}function Qe(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const r=on(t,e);if(!r)return null;e=r.cursor,e+=Oe(t,e).length;const i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}function $e(t,e){return Je(t,e)||Qe(t,e)}function tn(t,e){const n=$e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const i=tn(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new Re(r,i.evaluable)}):null}function en(t,e,n){n+=Oe(e,n).length;const r=t.filter((t=>e.startsWith(t,n)))[0];return r?(n+=r.length,n+=Oe(e,n).length,{cursor:n,operator:r}):null}function nn(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=en(e,n,r);if(!i)break;r=i.cursor;const a=t(n,r);if(!a)return null;r=a.cursor,o=new De(i.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}const rn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>nn(t,e)),tn);function on(t,e){return e+=Oe(t,e).length,rn(t,e)}function an(t){const e=on(t,0);if(!e)return null;const n=e.cursor+Oe(t,e.cursor).length;return n!==t.length?null:e.evaluable}function sn(t){var e;const n=an(t);return null!==(e=null===n||void 0===n?void 0:n.evaluate())&&void 0!==e?e:null}function ln(t){if("number"===typeof t)return t;if("string"===typeof t){const e=sn(t);if(!l(e))return e}return 0}function un(t){return String(t)}function cn(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const hn=cn(0);function dn(t){return hn(t)+"%"}function pn(t){return String(t)}function fn(t){return t}function mn(t,e){while(t.length<e)t.push(void 0)}function gn(t){const e=[];return mn(e,t),D(e)}function vn(t){const e=t.indexOf(void 0);return s(e<0?t:t.slice(0,e))}function yn(t,e){const n=[...vn(t),e];return n.length>t.length?n.splice(0,n.length-t.length):mn(n,t.length),n}function bn({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(t){i||(i=!0,t(),i=!1)}t.emitter.on("change",(r=>{o((()=>{e.setRawValue(n(t,e),r.options)}))})),e.emitter.on("change",(i=>{o((()=>{t.setRawValue(r(t,e),i.options)})),o((()=>{e.setRawValue(n(t,e),i.options)}))})),o((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function xn(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function _n(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function wn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Sn(t){return"ArrowUp"===t||"ArrowDown"===t}function Mn(t){return Sn(t)||"ArrowLeft"===t||"ArrowRight"===t}function En(t,e){const n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}class Cn{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new f,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Tn(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function An(t){const e=String(t.toFixed(10)),n=e.split(".")[1];return n.replace(/0+$/,"").length}function Dn(t,e,n){return Math.min(Math.max(t,e),n)}function Pn(t,e){return(t%e+e)%e}const Rn=g("txt");class Ln{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Rn(),Rn(void 0,"num")),e.arrayPosition&&this.element.classList.add(Rn(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Rn("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Rn()),this.inputElement.classList.add(Rn("i"));const r=t.createElement("div");r.classList.add(Rn("k")),this.element.appendChild(r),this.knobElement=r;const i=t.createElementNS(H,"svg");i.classList.add(Rn("g")),this.knobElement.appendChild(i);const o=t.createElementNS(H,"path");o.classList.add(Rn("gb")),i.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(H,"path");a.classList.add(Rn("gh")),i.appendChild(a),this.guideHeadElem_=a;const s=t.createElement("div");s.classList.add(g("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Rn(void 0,"drg"));this.element.classList.add(Rn(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=Dn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class On{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=D(null),this.view=new Ln(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new Cn(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=s(t.currentTarget),n=e.value,r=this.parser_(n);l(r)||(this.value.rawValue=r),this.view.refresh()}onInputKeyDown_(t){const e=xn(this.baseStep_,_n(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){const e=xn(this.baseStep_,_n(t));0!==e&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const kn=g("sld");class In{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(kn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(kn("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(kn("k")),this.trackElement.appendChild(r),this.knobElement=r,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Dn(Tn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Nn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new In(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Tn(Dn(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=xn(this.baseStep_,wn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){const e=xn(this.baseStep_,wn(t));0!==e&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Bn=g("sldtxt");class Fn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Bn());const n=t.createElement("div");n.classList.add(Bn("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Bn("t")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class zn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Nn(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new On(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new Fn(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Un(t,e){t.write(e)}function jn(t){const e=N;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"===typeof t?e.required.raw(t).value:void 0}function Vn(t){if("inline"===t||"popup"===t)return t}function Hn(t){const e=N;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function Wn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function Gn(t){return l(t)?null:new de(Wn(s(t)))}function qn(t){const e=t?he(t,de):null;return e?e.options:null}function Xn(t){const e=t?he(t,fe):null;return e?e.step:null}function Yn(t,e){const n=t&&he(t,fe);return n?An(n.step):Math.max(An(e),2)}function Zn(t){const e=Xn(t);return null!==e&&void 0!==e?e:1}function Kn(t,e){var n;const r=t&&he(t,fe),i=Math.abs(null!==(n=null===r||void 0===r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}const Jn=g("ckb");class Qn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Jn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Jn("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(Jn("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,e.viewProps.bindDisabled(this.inputElement);const i=t.createElement("div");i.classList.add(Jn("w")),n.appendChild(i);const o=J(t,"check");i.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class $n{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Qn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=s(t.currentTarget);this.value.rawValue=e.checked}}function tr(t){const e=[],n=Gn(t.options);return n&&e.push(n),new ce(e)}const er={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!==typeof t)return null;const n=N,r=B(e,{options:n.optional.custom(jn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Ee,constraint:t=>tr(t.params),writer:t=>Un},controller:t=>{var e;const n=t.document,r=t.value,i=t.constraint;return i&&he(i,de)?new ve(n,{props:P.fromObject({options:null!==(e=qn(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new $n(n,{value:r,viewProps:t.viewProps})}},nr=g("col");class rr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(nr()),e.foldable.bindExpandedClass(this.element,nr(void 0,"expanded")),x(e.foldable,"completed",w(this.element,nr(void 0,"cpl")));const n=t.createElement("div");n.classList.add(nr("h")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(nr("s")),n.appendChild(r),this.swatchElement=r;const i=t.createElement("div");if(i.classList.add(nr("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(nr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function ir(t,e,n){const r=Dn(t/255,0,1),i=Dn(e/255,0,1),o=Dn(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s;let u=0,c=0;const h=(s+a)/2;return 0!==l&&(c=l/(1-Math.abs(a+s-1)),u=r===a?(i-o)/l:i===a?2+(o-r)/l:4+(r-i)/l,u=u/6+(u<0?1:0)),[360*u,100*c,100*h]}function or(t,e,n){const r=(t%360+360)%360,i=Dn(e/100,0,1),o=Dn(n/100,0,1),a=(1-Math.abs(2*o-1))*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a/2;let u,c,h;return[u,c,h]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(u+l),255*(c+l),255*(h+l)]}function ar(t,e,n){const r=Dn(t/255,0,1),i=Dn(e/255,0,1),o=Dn(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s;let u;u=0===l?0:a===r?((i-o)/l%6+6)%6*60:a===i?60*((o-r)/l+2):60*((r-i)/l+4);const c=0===a?0:l/a,h=a;return[u,100*c,100*h]}function sr(t,e,n){const r=Pn(t,360),i=Dn(e/100,0,1),o=Dn(n/100,0,1),a=o*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a;let u,c,h;return[u,c,h]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(u+l),255*(c+l),255*(h+l)]}function lr(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]}function ur(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]}function cr(t){return[t[0],t[1],t[2]]}function hr(t,e){return[t[0],t[1],t[2],e]}const dr={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:lr,rgb:or},hsv:{hsl:ur,hsv:(t,e,n)=>[t,e,n],rgb:sr},rgb:{hsl:ir,hsv:ar,rgb:(t,e,n)=>[t,e,n]}};function pr(t,e,n){return dr[e][n](...t)}const fr={hsl:t=>{var e;return[Pn(t[0],360),Dn(t[1],0,100),Dn(t[2],0,100),Dn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Pn(t[0],360),Dn(t[1],0,100),Dn(t[2],0,100),Dn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Dn(t[0],0,255),Dn(t[1],0,255),Dn(t[2],0,255),Dn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function mr(t,e){return"object"===typeof t&&!l(t)&&(e in t&&"number"===typeof t[e])}class gr{constructor(t,e){this.mode_=e,this.comps_=fr[e](t)}static black(){return new gr([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new gr(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return mr(t,"r")&&mr(t,"g")&&mr(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&mr(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,r=e.comps_;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}get mode(){return this.mode_}getComponents(t){return hr(pr(cr(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const vr=g("colp");class yr{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(vr());const n=t.createElement("div");n.classList.add(vr("hsv"));const r=t.createElement("div");r.classList.add(vr("sv")),this.svPaletteView_=e.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(vr("h")),this.hPaletteView_=e.hPaletteView,i.appendChild(this.hPaletteView_.element),n.appendChild(i),this.element.appendChild(n);const o=t.createElement("div");if(o.classList.add(vr("rgb")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(vr("a"));const r=t.createElement("div");r.classList.add(vr("ap")),r.appendChild(this.alphaViews_.palette.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(vr("at")),i.appendChild(this.alphaViews_.text.element),n.appendChild(i),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function br(t){const e=N;return B(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(Vn)})}function xr(t){return t?.1:1}function _r(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const wr={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Sr(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return wr[r](n)}const Mr={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_r(e[1],255),_r(e[2],255),_r(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new gr(n,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_r(e[1],255),_r(e[2],255),_r(e[3],255),_r(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new gr(n,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Sr(e[1]),_r(e[2],100),_r(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new gr(n,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Sr(e[1]),_r(e[2],100),_r(e[3],100),_r(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new gr(n,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new gr([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new gr([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new gr([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Tn(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new gr([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Tn(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Er(t){const e=Object.keys(Mr);return e.reduce(((e,n)=>{if(e)return e;const r=Mr[n];return r(t)?n:null}),null)}const Cr=t=>{const e=Er(t);return e?Mr[e](t):null};function Tr(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Ar(t){if("string"===typeof t){const e=Cr(t);if(e)return e}return gr.black()}function Dr(t){const e=Dn(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function Pr(t,e="#"){const n=cr(t.getComponents("rgb")).map(Dr).join("");return`${e}${n}`}function Rr(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],255*n[3]].map(Dr).join("");return`${e}${r}`}function Lr(t){const e=cn(0),n=cr(t.getComponents("rgb")).map((t=>e(t)));return`rgb(${n.join(", ")})`}function Or(t){const e=cn(2),n=cn(0),r=t.getComponents("rgb").map(((t,r)=>{const i=3===r?e:n;return i(t)}));return`rgba(${r.join(", ")})`}function kr(t){const e=[cn(0),dn,dn],n=cr(t.getComponents("hsl")).map(((t,n)=>e[n](t)));return`hsl(${n.join(", ")})`}function Ir(t){const e=[cn(0),dn,dn,cn(2)],n=t.getComponents("hsl").map(((t,n)=>e[n](t)));return`hsla(${n.join(", ")})`}const Nr={"func.hsl":kr,"func.hsla":Ir,"func.rgb":Lr,"func.rgba":Or,"hex.rgb":Pr,"hex.rgba":Rr};function Br(t){return Nr[t]}const Fr=g("apl");class zr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Fr()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Fr("b")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Fr("c")),n.appendChild(r),this.colorElem_=r;const i=t.createElement("div");i.classList.add(Fr("m")),this.element.appendChild(i),this.markerElem_=i;const o=t.createElement("div");o.classList.add(Fr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new gr([e[0],e[1],e[2],0],"rgb"),r=new gr([e[0],e[1],e[2],255],"rgb"),i=["to right",Or(n),Or(r)];this.colorElem_.style.background=`linear-gradient(${i.join(",")})`,this.previewElem_.style.backgroundColor=Or(t);const o=Tn(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Ur{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new zr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,r=this.value.rawValue,[i,o,a]=r.getComponents("hsv");this.value.setRawValue(new gr([i,o,a,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=xn(xr(!0),wn(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new gr([r,i,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=xn(xr(!0),wn(t));0!==e&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const jr=g("coltxt");function Vr(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce(((e,n)=>{const r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e}),t.createDocumentFragment())),e}class Hr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(jr());const n=t.createElement("div");n.classList.add(jr("m")),this.modeElem_=Vr(t),this.modeElem_.classList.add(jr("ms")),n.appendChild(this.modeSelectElement);const r=t.createElement("div");r.classList.add(jr("mm")),r.appendChild(J(t,"dropdown")),n.appendChild(r),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(jr("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=e.textViews,this.applyTextViews_(),b(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){tt(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(jr("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}}const Wr=cn(0),Gr={rgb:()=>new pe({min:0,max:255}),hsl:t=>new pe(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new pe(0===t?{min:0,max:360}:{min:0,max:100})};function qr(t,e,n){return new On(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:xr(!1),parser:e.parser,props:P.fromObject({draggingScale:1,formatter:Wr}),value:D(0,{constraint:Gr[e.colorMode](n)}),viewProps:e.viewProps})}class Xr{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=D(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Hr(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[qr(t,e,0),qr(t,e,1),qr(t,e,2)];return n.forEach(((t,e)=>{bn({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,n)=>{const r=this.colorMode.rawValue,i=t.rawValue.getComponents(r);return i[e]=n.rawValue,new gr(hr(cr(i),i[3]),r)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Yr=g("hpl");class Zr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Yr()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Yr("c")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Yr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Lr(new gr([e,100,100],"hsv"));const n=Tn(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Kr{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Zr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Tn(Dn(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),r=this.value.rawValue,[,i,o,a]=r.getComponents("hsv");this.value.setRawValue(new gr([n,i,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=xn(xr(!1),wn(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new gr([r+e,i,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=xn(xr(!1),wn(t));0!==e&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Jr=g("svp"),Qr=64;class $r{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Jr()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=Qr,n.width=Qr,n.classList.add(Jr("c")),this.element.appendChild(n),this.canvasElement=n;const r=t.createElement("div");r.classList.add(Jr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=Z(this.canvasElement);if(!t)return;const e=this.value.rawValue,n=e.getComponents("hsv"),r=this.canvasElement.width,i=this.canvasElement.height,o=t.getImageData(0,0,r,i),a=o.data;for(let u=0;u<i;u++)for(let t=0;t<r;t++){const e=Tn(t,0,r,0,100),o=Tn(u,0,i,100,0),s=sr(n[0],e,o),l=4*(u*r+t);a[l]=s[0],a[l+1]=s[1],a[l+2]=s[2],a[l+3]=255}t.putImageData(o,0,0);const s=Tn(n[1],0,100,0,100);this.markerElem_.style.left=`${s}%`;const l=Tn(n[2],0,100,100,0);this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}}class ti{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new $r(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Tn(t.point.x,0,t.bounds.width,0,100),r=Tn(t.point.y,0,t.bounds.height,100,0),[i,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new gr([i,n,r,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Mn(t.key)&&t.preventDefault();const[e,n,r,i]=this.value.rawValue.getComponents("hsv"),o=xr(!1),a=xn(o,wn(t)),s=xn(o,_n(t));0===a&&0===s||this.value.setRawValue(new gr([e,n+a,r+s,i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=xr(!1),n=xn(e,wn(t)),r=xn(e,_n(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ei{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Kr(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ti(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Ur(t,{value:this.value,viewProps:this.viewProps}),text:new On(t,{parser:sn,baseStep:.1,props:P.fromObject({draggingScale:.01,formatter:cn(2)}),value:D(0,{constraint:new pe({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&bn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new gr(n,t.rawValue.mode)}}),this.textC_=new Xr(t,{parser:sn,value:this.value,viewProps:this.viewProps}),this.view=new yr(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const ni=g("colsw");class ri{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(ni()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ni("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=t.createElement("button");r.classList.add(ni("b")),e.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Rr(t)}onValueChange_(){this.update_()}}class ii{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ri(t,{value:this.value,viewProps:this.viewProps})}}class oi{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=ct.create(e.expanded),this.swatchC_=new ii(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new Se(t,{parser:e.parser,props:P.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new rr(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new xe(t,{viewProps:this.viewProps}):null;const r=new ei(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),bn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pt(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=s(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function ai(t){return gr.isColorObject(t)?gr.fromObject(t):gr.black()}function si(t){return cr(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function li(t){return t.getComponents("rgb").reduce(((t,e,n)=>{const r=255&Math.floor(3===n?255*e:e);return t<<8|r}),0)>>>0}function ui(t){return new gr([t>>16&255,t>>8&255,255&t],"rgb")}function ci(t){return new gr([t>>24&255,t>>16&255,t>>8&255,Tn(255&t,0,255,0,1)],"rgb")}function hi(t){return"number"!==typeof t?gr.black():ui(t)}function di(t){return"number"!==typeof t?gr.black():ci(t)}function pi(t){const e=Br(t);return(t,n)=>{Un(t,e(n))}}function fi(t){const e=t?li:si;return(t,n)=>{Un(t,e(n))}}function mi(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function gi(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function vi(t){return t?mi:gi}function yi(t){return"alpha"in t&&!0===t.alpha}function bi(t){return t?t=>Rr(t,"0x"):t=>Pr(t,"0x")}const xi={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!==typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=br(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>yi(t.params)?di:hi,equals:gr.equals,writer:t=>fi(yi(t.params))},controller:t=>{const e=yi(t.params),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new oi(t.document,{expanded:null!==n&&void 0!==n&&n,formatter:bi(e),parser:Cr,pickerLayout:null!==r&&void 0!==r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function _i(t){return gr.isRgbaColorObject(t)}const wi={id:"input-color-object",type:"input",accept:(t,e)=>{if(!gr.isColorObject(t))return null;const n=br(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>ai,equals:gr.equals,writer:t=>vi(_i(t.initialValue))},controller:t=>{const e=gr.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0,i=e?Rr:Pr;return new oi(t.document,{expanded:null!==n&&void 0!==n&&n,formatter:i,parser:Cr,pickerLayout:null!==r&&void 0!==r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Si={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!==typeof t)return null;if("view"in e&&"text"===e.view)return null;const n=Er(t);if(!n)return null;const r=br(e);return r?{initialValue:t,params:r}:null},binding:{reader:t=>Ar,equals:gr.equals,writer:t=>{const e=Er(t.initialValue);if(!e)throw h.shouldNeverHappen();return pi(e)}},controller:t=>{const e=Er(t.initialValue);if(!e)throw h.shouldNeverHappen();const n=Br(e),r="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new oi(t.document,{expanded:null!==r&&void 0!==r&&r,formatter:n,parser:Cr,pickerLayout:null!==i&&void 0!==i?i:"popup",supportsAlpha:Tr(e),value:t.value,viewProps:t.viewProps})}};class Mi{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t}));return this.asm_.fromComponents(e)}}const Ei=g("pndtxt");class Ci{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Ei()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(Ei("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function Ti(t,e,n){return new On(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:D(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Ai{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,r)=>Ti(t,e,r))),this.acs_.forEach(((t,n)=>{bn({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,r)=>{const i=e.assembly.toComponents(t.rawValue);return i[n]=r.rawValue,e.assembly.fromComponents(i)}})})),this.view=new Ci(t,{textViews:this.acs_.map((t=>t.view))})}}function Di(t){return"step"in t&&!l(t.step)?new fe(t.step):null}function Pi(t){return"max"in t&&!l(t.max)||"min"in t&&!l(t.min)?new pe({max:t.max,min:t.min}):null}function Ri(t){const e=[],n=Di(t);n&&e.push(n);const r=Pi(t);r&&e.push(r);const i=Gn(t.options);return i&&e.push(i),new ce(e)}function Li(t){const e=t?he(t,pe):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Oi(t){const[e,n]=Li(t);return[null!==e&&void 0!==e?e:0,null!==n&&void 0!==n?n:100]}const ki={id:"input-number",type:"input",accept:(t,e)=>{if("number"!==typeof t)return null;const n=N,r=B(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(jn),step:n.optional.number});return r?{initialValue:t,params:r}:null},binding:{reader:t=>ln,constraint:t=>Ri(t.params),writer:t=>Un},controller:t=>{var e,n;const r=t.value,i=t.constraint;if(i&&he(i,de))return new ve(t.document,{props:P.fromObject({options:null!==(e=qn(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps});const o=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:cn(Yn(i,r.rawValue));if(i&&he(i,pe)){const[e,n]=Oi(i);return new zn(t.document,{baseStep:Zn(i),parser:sn,sliderProps:P.fromObject({maxValue:n,minValue:e}),textProps:P.fromObject({draggingScale:Kn(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}return new On(t.document,{baseStep:Zn(i),parser:sn,props:P.fromObject({draggingScale:Kn(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}};class Ii{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y;return"number"===typeof e&&"number"===typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Ni={toComponents:t=>t.getComponents(),fromComponents:t=>new Ii(...t)},Bi=g("p2d");class Fi{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Bi()),e.viewProps.bindClassModifiers(this.element),b(e.expanded,w(this.element,Bi(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Bi("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(Bi("b")),r.appendChild(J(t,"p2dpad")),e.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const i=t.createElement("div");if(i.classList.add(Bi("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Bi("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const zi=g("p2dp");class Ui{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(zi()),"popup"===e.layout&&this.element.classList.add(zi(void 0,"p"));const n=t.createElement("div");n.classList.add(zi("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=t.createElementNS(H,"svg");r.classList.add(zi("g")),this.padElement.appendChild(r),this.svgElem_=r;const i=t.createElementNS(H,"line");i.classList.add(zi("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);const o=t.createElementNS(H,"line");o.classList.add(zi("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(H,"line");a.classList.add(zi("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const s=t.createElement("div");s.classList.add(zi("m")),this.padElement.appendChild(s),this.markerElem_=s,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,r=Tn(t,-n,+n,0,100),i=Tn(e,-n,+n,0,100),o=this.invertsY_?100-i:i;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ji(t,e,n){return[xn(e[0],wn(t)),xn(e[1],_n(t))*(n?1:-1)]}class Vi{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Ui(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,r=Tn(t.point.x,0,t.bounds.width,-n,+n),i=Tn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Ii(r,i),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Mn(t.key)&&t.preventDefault();const[e,n]=ji(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Ii(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=ji(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Hi{constructor(t,e){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=ct.create(e.expanded),this.popC_="popup"===e.pickerLayout?new xe(t,{viewProps:this.viewProps}):null;const i=new Vi(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.textC_=new Ai(t,{assembly:Ni,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Fi(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),bn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pt(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=s(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Wi(t){return Ii.isObject(t)?new Ii(t.x,t.y):new Ii}function Gi(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function qi(t){if(!t)return;const e=[];return l(t.step)||e.push(new fe(t.step)),l(t.max)&&l(t.min)||e.push(new pe({max:t.max,min:t.min})),new ce(e)}function Xi(t){return new Mi({assembly:Ni,components:[qi("x"in t?t.x:void 0),qi("y"in t?t.y:void 0)]})}function Yi(t,e){const n=t&&he(t,pe);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const r=Zn(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function Zi(t,e){const n=e instanceof Mi?e.components[0]:void 0,r=e instanceof Mi?e.components[1]:void 0,i=Yi(n,t.x),o=Yi(r,t.y);return Math.max(i,o)}function Ki(t,e){return{baseStep:Zn(e),constraint:e,textProps:P.fromObject({draggingScale:Kn(e,t),formatter:cn(Yn(e,t))})}}function Ji(t){if(!("y"in t))return!1;const e=t.y;return!!e&&("inverted"in e&&!!e.inverted)}const Qi={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Ii.isObject(t))return null;const n=N,r=B(e,{expanded:n.optional.boolean,picker:n.optional.custom(Vn),x:n.optional.custom(Hn),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Wi,constraint:t=>Xi(t.params),equals:Ii.equals,writer:t=>Gi},controller:t=>{const e=t.document,n=t.value,r=t.constraint;if(!(r instanceof Mi))throw h.shouldNeverHappen();const i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new Hi(e,{axes:[Ki(n.rawValue.x,r.components[0]),Ki(n.rawValue.y,r.components[1])],expanded:null!==i&&void 0!==i&&i,invertsY:Ji(t.params),maxValue:Zi(n.rawValue,r),parser:sn,pickerLayout:null!==o&&void 0!==o?o:"popup",value:n,viewProps:t.viewProps})}};class $i{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,r=t.z;return"number"===typeof e&&"number"===typeof n&&"number"===typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const to={toComponents:t=>t.getComponents(),fromComponents:t=>new $i(...t)};function eo(t){return $i.isObject(t)?new $i(t.x,t.y,t.z):new $i}function no(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ro(t){if(!t)return;const e=[];return l(t.step)||e.push(new fe(t.step)),l(t.max)&&l(t.min)||e.push(new pe({max:t.max,min:t.min})),new ce(e)}function io(t){return new Mi({assembly:to,components:[ro("x"in t?t.x:void 0),ro("y"in t?t.y:void 0),ro("z"in t?t.z:void 0)]})}function oo(t,e){return{baseStep:Zn(e),constraint:e,textProps:P.fromObject({draggingScale:Kn(e,t),formatter:cn(Yn(e,t))})}}const ao={id:"input-point3d",type:"input",accept:(t,e)=>{if(!$i.isObject(t))return null;const n=N,r=B(e,{x:n.optional.custom(Hn),y:n.optional.custom(Hn),z:n.optional.custom(Hn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>eo,constraint:t=>io(t.params),equals:$i.equals,writer:t=>no},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Mi))throw h.shouldNeverHappen();return new Ai(t.document,{assembly:to,axes:[oo(e.rawValue.x,n.components[0]),oo(e.rawValue.y,n.components[1]),oo(e.rawValue.z,n.components[2])],parser:sn,value:e,viewProps:t.viewProps})}};class so{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,r=t.z,i=t.w;return"number"===typeof e&&"number"===typeof n&&"number"===typeof r&&"number"===typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const lo={toComponents:t=>t.getComponents(),fromComponents:t=>new so(...t)};function uo(t){return so.isObject(t)?new so(t.x,t.y,t.z,t.w):new so}function co(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ho(t){if(!t)return;const e=[];return l(t.step)||e.push(new fe(t.step)),l(t.max)&&l(t.min)||e.push(new pe({max:t.max,min:t.min})),new ce(e)}function po(t){return new Mi({assembly:lo,components:[ho("x"in t?t.x:void 0),ho("y"in t?t.y:void 0),ho("z"in t?t.z:void 0),ho("w"in t?t.w:void 0)]})}function fo(t,e){return{baseStep:Zn(e),constraint:e,textProps:P.fromObject({draggingScale:Kn(e,t),formatter:cn(Yn(e,t))})}}const mo={id:"input-point4d",type:"input",accept:(t,e)=>{if(!so.isObject(t))return null;const n=N,r=B(e,{x:n.optional.custom(Hn),y:n.optional.custom(Hn),z:n.optional.custom(Hn),w:n.optional.custom(Hn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>uo,constraint:t=>po(t.params),equals:so.equals,writer:t=>co},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Mi))throw h.shouldNeverHappen();return new Ai(t.document,{assembly:lo,axes:e.rawValue.getComponents().map(((t,e)=>fo(t,n.components[e]))),parser:sn,value:e,viewProps:t.viewProps})}};function go(t){const e=[],n=Gn(t.options);return n&&e.push(n),new ce(e)}const vo={id:"input-string",type:"input",accept:(t,e)=>{if("string"!==typeof t)return null;const n=N,r=B(e,{options:n.optional.custom(jn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>pn,constraint:t=>go(t.params),writer:t=>Un},controller:t=>{var e;const n=t.document,r=t.value,i=t.constraint;return i&&he(i,de)?new ve(n,{props:P.fromObject({options:null!==(e=qn(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new Se(n,{parser:t=>t,props:P.fromObject({formatter:fn}),value:r,viewProps:t.viewProps})}},yo={monitor:{defaultInterval:200,defaultLineCount:3}},bo=g("mll");class xo{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(bo()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(bo("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class _o{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new xo(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const wo=g("sgl");class So{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(wo()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(wo("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Mo{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new So(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Eo={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!==typeof t)return null;const n=N,r=B(e,{lineCount:n.optional.number});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Ee},controller:t=>{var e;return 1===t.value.rawValue.length?new Mo(t.document,{formatter:Ce,value:t.value,viewProps:t.viewProps}):new _o(t.document,{formatter:Ce,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:yo.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class Co{constructor(){this.emitter=new f,this.index_=-1}get index(){return this.index_}set index(t){const e=this.index_!==t;e&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const To=g("grl");class Ao{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(To()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(H,"svg");n.classList.add(To("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(H,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=t.createElement("div");i.classList.add(To("t"),g("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const s=Tn(a,0,e,0,t.width),l=Tn(o,n,r,t.height,0);i.push([s,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.index];if(void 0===a)return void o.classList.remove(To("t","a"));const s=Tn(this.cursor_.index,0,e,0,t.width),l=Tn(a,n,r,t.height,0);o.style.left=`${s}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(To("t","a"))||(o.classList.add(To("t","a"),To("t","in")),W(o),o.classList.remove(To("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Do{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Co,this.view=new Ao(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),q(t)){const t=new Cn(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Tn(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Tn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function Po(t){return"format"in t&&!l(t.format)?t.format:cn(2)}function Ro(t){var e;return 1===t.value.rawValue.length?new Mo(t.document,{formatter:Po(t.params),value:t.value,viewProps:t.viewProps}):new _o(t.document,{formatter:Po(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:yo.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function Lo(t){var e,n,r;return new Do(t.document,{formatter:Po(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:yo.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0,value:t.value,viewProps:t.viewProps})}function Oo(t){return"view"in t&&"graph"===t.view}const ko={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!==typeof t)return null;const n=N,r=B(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:t,params:r}:null},binding:{defaultBufferSize:t=>Oo(t)?64:1,reader:t=>ln},controller:t=>Oo(t.params)?Lo(t):Ro(t)},Io={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!==typeof t)return null;const n=N,r=B(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:t,params:r}:null},binding:{reader:t=>pn},controller:t=>{var e;const n=t.value,r=n.rawValue.length>1||"multiline"in t.params&&t.params.multiline;return r?new _o(t.document,{formatter:fn,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:yo.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Mo(t.document,{formatter:fn,value:n,viewProps:t.viewProps})}};class No{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new f,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function Bo(t,e){const n=t.accept(e.target.read(),e.params);if(l(n))return null;const r=N,i={target:e.target,initialValue:n.initialValue,params:n.params},o=t.binding.reader(i),a=t.binding.constraint?t.binding.constraint(i):void 0,s=D(o(n.initialValue),{constraint:a,equals:t.binding.equals}),u=new No({reader:o,target:e.target,value:s,writer:t.binding.writer(i)}),c=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,d=t.controller({constraint:a,document:e.document,initialValue:n.initialValue,params:n.params,value:u.value,viewProps:Kt.create({disabled:c,hidden:h})}),p=r.optional.string(e.params.label).value;return new _t(e.document,{binding:u,blade:ut(),props:P.fromObject({label:p||e.target.key}),valueController:d})}class Fo{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new f,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=yn(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}function zo(t,e){return 0===e?new le:new ue(t,null!==e&&void 0!==e?e:yo.monitor.defaultInterval)}function Uo(t,e){var n,r,i;const o=N,a=t.accept(e.target.read(),e.params);if(l(a))return null;const s={target:e.target,initialValue:a.initialValue,params:a.params},u=t.binding.reader(s),c=null!==(r=null!==(n=o.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(a.params))&&void 0!==r?r:1,h=o.optional.number(e.params.interval).value,d=new Fo({reader:u,target:e.target,ticker:zo(e.document,h),value:gn(c)}),p=o.optional.boolean(e.params.disabled).value,f=o.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:a.params,value:d.value,viewProps:Kt.create({disabled:p,hidden:f})}),g=null!==(i=o.optional.string(e.params.label).value)&&void 0!==i?i:e.target.key;return new St(e.document,{binding:d,blade:ut(),props:P.fromObject({label:g}),valueController:m})}class jo{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){const r=e.read();if(l(r))throw new h({context:{key:e.key},type:"nomatchingcontroller"});const i=this.pluginsMap_.inputs.reduce(((r,i)=>r||Bo(i,{document:t,target:e,params:n})),null);if(i)return i;throw new h({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const r=this.pluginsMap_.monitors.reduce(((r,i)=>r||Uo(i,{document:t,params:n,target:e})),null);if(r)return r;throw new h({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,r)=>n||se(r,{document:t,params:e})),null);if(!n)throw new h({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof _t)return new xt(t);if(t instanceof St)return new wt(t);if(t instanceof Bt)return new Tt(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>e||n.api({controller:t,pool:this})),null);if(!e)throw h.shouldNeverHappen();return e}}function Vo(){const t=new jo;return[Qi,ao,mo,vo,ki,Si,wi,xi,er,Eo,Io,ko,st,jt,Xt,ae].forEach((e=>{t.register(e)})),t}class Ho extends n{constructor(t){super(t),this.emitter_=new f,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Wo extends n{constructor(t){super(t),this.emitter_=new f,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Go extends n{constructor(t){super(t),this.emitter_=new f,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}const qo=function(){return{id:"list",type:"blade",accept(t){const e=N,n=B(t,{options:e.required.custom(jn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new ve(t.document,{props:P.fromObject({options:Wn(t.params.options)}),value:D(t.params.value),viewProps:t.viewProps});return new Vt(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:e})},api(t){return t.controller instanceof Vt&&t.controller.valueController instanceof ve?new Ho(t.controller):null}}}();function Xo(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function Yo(t,e){t.forEach((t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)}))}class Zo extends At{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){const e=this.controller_.rackController.rack.find(_t).map((t=>t.binding.target));Yo(e,t),this.refresh()}exportPreset(){const t=this.controller_.rackController.rack.find(_t).map((t=>t.binding.target));return Xo(t)}refresh(){this.controller_.rackController.rack.find(_t).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(St).forEach((t=>{t.binding.read()}))}}class Ko extends Ut{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Jo={id:"slider",type:"blade",accept(t){const e=N,n=B(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new zn(t.document,{baseStep:1,parser:sn,sliderProps:P.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:P.fromObject({draggingScale:Kn(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:un}),value:D(r),viewProps:t.viewProps});return new Vt(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:i})},api(t){return t.controller instanceof Vt&&t.controller.valueController instanceof zn?new Wo(t.controller):null}},Qo=function(){return{id:"text",type:"blade",accept(t){const e=N,n=B(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new Se(t.document,{parser:t.params.parse,props:P.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:D(t.params.value),viewProps:t.viewProps});return new Vt(t.document,{blade:t.blade,props:P.fromObject({label:t.params.label}),valueController:n})},api(t){return t.controller instanceof Vt&&t.controller.valueController instanceof Se?new Go(t.controller):null}}}();function $o(t){const e=t.createElement("div");return e.classList.add(g("dfw")()),t.body&&t.body.appendChild(e),e}function ta(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class ea extends Zo{constructor(t){var e;const n=t||{},r=null!==(e=n.document)&&void 0!==e?e:Y(),i=Vo(),o=new Ko(r,{expanded:n.expanded,blade:ut(),props:P.fromObject({title:n.title}),viewProps:Kt.create()});super(o,i),this.pool_=i,this.containerElem_=n.container||$o(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw h.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw h.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){const e="plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[];e.forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&ta(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){ta(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Jo,qo,ae,Qo]})}}const na=new e("3.0.8");t.BladeApi=n,t.ButtonApi=p,t.FolderApi=At,t.InputBindingApi=xt,t.ListApi=Ho,t.MonitorBindingApi=wt,t.Pane=ea,t.SeparatorApi=Ht,t.SliderApi=Wo,t.TabApi=ne,t.TabPageApi=ee,t.TextApi=Go,t.TpChangeEvent=i,t.VERSION=na,Object.defineProperty(t,"__esModule",{value:!0})}))})(0,ZR.exports);var KR,JR,QR,$R=0,tL=[],eL=dR.__b,nL=dR.__r,rL=dR.diffed,iL=dR.__c,oL=dR.unmount;function aL(t,e){dR.__h&&dR.__h(JR,t,$R||e),$R=0;var n=JR.__H||(JR.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function sL(t){return $R=1,lL(yL,t)}function lL(t,e,n){var r=aL(KR++,2);return r.t=t,r.__c||(r.__=[n?n(e):yL(void 0,e),function(t){var e=r.t(r.__[0],t);r.__[0]!==e&&(r.__=[e,r.__[1]],r.__c.setState({}))}],r.__c=JR),r.__}function uL(t,e){var n=aL(KR++,3);!dR.__s&&vL(n.__H,e)&&(n.__=t,n.__H=e,JR.__H.__h.push(n))}function cL(t,e){var n=aL(KR++,4);!dR.__s&&vL(n.__H,e)&&(n.__=t,n.__H=e,JR.__h.push(n))}function hL(t){return $R=5,dL((function(){return{current:t}}),[])}function dL(t,e){var n=aL(KR++,7);return vL(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function pL(){for(var t;t=tL.shift();)if(t.__P)try{t.__H.__h.forEach(mL),t.__H.__h.forEach(gL),t.__H.__h=[]}catch(e){t.__H.__h=[],dR.__e(e,t.__v)}}dR.__b=function(t){JR=null,eL&&eL(t)},dR.__r=function(t){nL&&nL(t),KR=0;var e=(JR=t.__c).__H;e&&(e.__h.forEach(mL),e.__h.forEach(gL),e.__h=[])},dR.diffed=function(t){rL&&rL(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==tL.push(e)&&QR===dR.requestAnimationFrame||((QR=dR.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),fL&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);fL&&(e=requestAnimationFrame(n))})(pL)),JR=null},dR.__c=function(t,e){e.some((function(t){try{t.__h.forEach(mL),t.__h=t.__h.filter((function(t){return!t.__||gL(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],dR.__e(n,t.__v)}})),iL&&iL(t,e)},dR.unmount=function(t){oL&&oL(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{mL(t)}catch(n){e=n}})),e&&dR.__e(e,n.__v))};var fL="function"==typeof requestAnimationFrame;function mL(t){var e=JR,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),JR=e}function gL(t){var e=JR;t.__c=t.__(),JR=e}function vL(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function yL(t,e){return"function"==typeof e?e(t):e}function bL(){return(bL=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function xL(t){this.getChildContext=function(){return t.context};var e=t.children,n=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(t,["context","children"]);return qR(e,n)}function _L(){var t=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(t),this._vdom=wR(xL,bL({},this._props,{context:t.detail.context}),function t(e,n){if(3===e.nodeType)return e.data;if(1!==e.nodeType)return null;var r=[],i={},o=0,a=e.attributes,s=e.childNodes;for(o=a.length;o--;)"slot"!==a[o].name&&(i[a[o].name]=a[o].value,i[wL(a[o].name)]=a[o].value);for(o=s.length;o--;){var l=t(s[o],null),u=s[o].slot;u?i[u]=wR(EL,{name:u},l):r[o]=l}var c=n?wR(EL,null,r):r;return wR(n||e.nodeName.toLowerCase(),i,c)}(this,this._vdomComponent)),(this.hasAttribute("hydrate")?GR:WR)(this._vdom,this._root)}function wL(t){return t.replace(/-(\w)/g,(function(t,e){return e?e.toUpperCase():""}))}function SL(t,e,n){if(this._vdom){var r={};r[t]=n=null==n?void 0:n,r[wL(t)]=n,this._vdom=qR(this._vdom,r),WR(this._vdom,this._root)}}function ML(){WR(this._vdom=null,this._root)}function EL(t,e){var n=this;return wR("slot",bL({},t,{ref:function(t){t?(n.ref=t,n._listener||(n._listener=function(t){t.stopPropagation(),t.detail.context=e},t.addEventListener("_preact",n._listener))):n.ref.removeEventListener("_preact",n._listener)}}))}function CL(t,e,n,r){function i(){var e=Reflect.construct(HTMLElement,[],i);return e._vdomComponent=t,e._root=r&&r.shadow?e.attachShadow({mode:"open"}):e,e}return(i.prototype=Object.create(HTMLElement.prototype)).constructor=i,i.prototype.connectedCallback=_L,i.prototype.attributeChangedCallback=SL,i.prototype.disconnectedCallback=ML,n=n||t.observedAttributes||Object.keys(t.propTypes||{}),i.observedAttributes=n,n.forEach((function(t){Object.defineProperty(i.prototype,t,{get:function(){return this._vdom.props[t]},set:function(e){this._vdom?this.attributeChangedCallback(t,null,e):(this._props||(this._props={}),this._props[t]=e,this.connectedCallback());var n=typeof e;null!=e&&"string"!==n&&"boolean"!==n&&"number"!==n||this.setAttribute(t,e)}})})),customElements.define(e||t.tagName||t.displayName||t.name,i)}var TL=(t,e)=>{const n=()=>{const[n,r]=sL((()=>e()));return uL((()=>{const t=e(r);return()=>{t.cancel()}}),[]),[n,t]};return n};const[AL,DL]=F(void 0);Dv((()=>AL(void 0)));const[PL,RL]=F(void 0),[LL,OL]=F(!1),kL=TL(Av,Dv),IL=TL(wv,Sv),NL=TL(ex,nx),BL=TL(DS,PS),FL=TL(Wg,Gg),zL=TL(rM,iM),UL=TL(oM,aM),jL=TL(iy,oy),VL=TL(cy,hy),HL=TL(AL,DL),WL=TL(PL,RL),GL=TL(LL,OL);var qL=()=>{if(Qb())return;const t=Dv(),e=Sv();null==t||t.dispose();for(const n of e)n.dispose();Kb()},XL=t=>t.name||y.exports.upperFirst(t.constructor.componentName);const[YL,ZL]=N(),KL=t=>"number"===typeof t?Number(t.toFixed(2)):t;let JL=!1;const QL=C((()=>JL=!1),100,"trailing"),$L=(t,e,n,r=p({},n),i)=>{const o=t.addFolder({title:e});for(const[a,s]of Object.entries(r))switch(typeof s){case"undefined":r[a]="";break;case"number":r[a]=KL(s);break;case"object":if(Array.isArray(s)){r[a]=JSON.stringify(s);break}"number"===typeof(null==s?void 0:s.x)&&(s.x=KL(s.x)),"number"===typeof(null==s?void 0:s.y)&&(s.y=KL(s.y)),"number"===typeof(null==s?void 0:s.z)&&(s.z=KL(s.z));break}return Object.fromEntries(Object.keys(r).map((t=>{const e=o.addInput(r,t);return e.on("change",(({value:e})=>{if(!JL){if(null==i?void 0:i[t]){const[r,o,a]=i[t],{x:s,y:l,z:u}=e;return n[r]=KL(s),n[o]=KL(l),void(n[a]=KL(u))}if("string"===typeof e){if("true"===e||"false"===e)return void(n[t]="true"===e);const r=parseFloat(e);if(!Number.isNaN(r))return void(n[t]=r)}n[t]=KL(e)}})),[t,e]})))},tO=({mouse:t,keyboard:e})=>{const n=hL(null);uL((()=>(Tb("enabled"!==t),SP("enabled"!==e),()=>{SP(!0),Tb(!0)})),[t,e]);const[r,i]=sL({}),[o]=FL(),a=S(o);uL((()=>{const t=a,e=()=>{$S.activate(),sS(!0),Lb(!0),cM(!0),i({})};e();const n=GP(e),r=t=>{"Shift"!==t.key&&"Meta"!==t.key&&"Control"!==t.key||qb(!0)},o=t=>{"Shift"!==t.key&&"Meta"!==t.key&&"Control"!==t.key||qb(!1)};document.addEventListener("keydown",r),document.addEventListener("keyup",o);const s=HS((()=>qb(!1)));return vb(),()=>{t.userData.manager.activate(),sS(!1),Lb(!1),cM(!1),document.removeEventListener("keydown",r),document.removeEventListener("keyup",o),n.cancel(),s.cancel(),vb()}}),[]);const[s]=kL(),[l]=IL(),[u]=BL(),[c,h]=sL(),[d,m]=sL();cL((()=>{var t;if(!c||!d)return;const e=u.reduce(((t,e,n)=>(t[0===n?"editor camera":XL(e.userData.manager)]=n,t)),{}),n=c.addInput({camera:u.indexOf(a)},"camera",{options:e});d.add(n),n.on("change",(({value:t})=>{u[t].userData.manager.activate()}));const r=p({none:0},y.exports.omit(e,"camera 0")),i=c.addInput({"secondary camera":u.indexOf(null!=(t=hb())?t:Hg)},"secondary camera",{options:r});return d.add(i),i.on("change",(({value:t})=>cb(0===t?void 0:u[t]))),()=>{n.dispose(),i.dispose()}}),[c,d,u,a]);const[g,v]=jL(),b=!!g,[x,_]=VL(),w=!!x;return uL((()=>{const t=n.current;if(!t)return;const e=new ZR.exports.Pane({container:t});if(h(e),m(e.addFolder({title:"camera"})),!s){const t=["defaultFog","defaultLight","defaultLightScale"],{defaultLightEnabled:n,defaultFogEnabled:r}=$L(e,"settings",FP,Object.assign(p(f(p({defaultLightEnabled:b},b&&{defaultLight:g,defaultLightScale:FP.defaultLightScale}),{defaultFogEnabled:w}),w&&{defaultFog:x}),y.exports.omit(FP,[...KP,...t])));return n.on("change",(({value:t})=>v(!!t&&"default"))),r.on("change",(({value:t})=>_(t?"white":void 0))),()=>{e.dispose()}}const r=t=>{if("Backspace"===t.key)return t.preventDefault(),void qL();if("c"!==t.key.toLowerCase())return;const e=Dv();if(e){if(t.metaKey||t.ctrlKey){const[t]=rR($P(e));if(!e.parent||!t)return;return e.parent.attach(t),void Kb(t)}ew(e)&&ZS(e)}};document.addEventListener("keydown",r);const i=s,o=new L,a=t=>({x:i[t+"X"],y:i[t+"Y"],z:i[t+"Z"]}),u=(t,e,n)=>({x:i[t],y:i[e],z:i[n]}),c=t=>[t+"X",t+"Y",t+"Z"];if(!l.length){const{name:t}=$L(e,"general",i,{name:i.name,id:i.id});t.on("change",(()=>YL()))}if(s instanceof _w){const t={scale:i.scale,"scale xyz":a("scale"),position:u("x","y","z"),rotation:a("rotation")};$L(e,"transform",i,t,{"scale xyz":c("scale"),position:["x","y","z"],rotation:c("rotation")}),o.watch(nM((()=>{JL=!0,QL(),Object.assign(t,{"scale xyz":a("scale"),position:u("x","y","z"),rotation:a("rotation")}),e.refresh()})))}else if(ew(s)){const t={position:u("x","y","z")};$L(e,"transform",i,t,{position:["x","y","z"]}),o.watch(nM((()=>{JL=!0,QL(),Object.assign(t,{position:u("x","y","z")}),e.refresh()})))}if(s instanceof Vw&&$L(e,"inner transform",i,{size:u("width","height","depth"),"inner position":a("inner"),"inner rotation":a("innerRotation")},{size:["width","height","depth"],"inner position":c("inner"),"inner rotation":c("innerRotation")}),!l.length){s instanceof _w&&$L(e,"display",i,{bloom:i.bloom,reflection:i.reflection,outline:i.outline,visible:i.visible,innerVisible:i.innerVisible,frustumCulled:i.frustumCulled,metalnessFactor:i.metalnessFactor,roughnessFactor:i.roughnessFactor,opacityFactor:i.opacityFactor,toon:i.toon,pbr:i.pbr});const{schema:t,componentName:n}=i.constructor,r={};for(const[e,o]of Object.entries(t)){if(e in Zw||o===Function)continue;let t=i[e];t===1/0?t=9999:t===-1/0?t=-9999:Array.isArray(t)&&(t=JSON.stringify(t)),r[e]=t}if(t===NA){r.stride={x:0,y:0};const{stride:t}=$L(e,n,i,r);t.on("change",(({value:t})=>{Object.assign(r,{strideForward:-t.y,strideRight:t.x}),e.refresh()}))}else $L(e,n,i,r)}return()=>{o.cancel(),e.dispose(),document.removeEventListener("keydown",r)}}),[s,l,r,w,b]),YR("div",{ref:n,onKeyDown:t=>t.stopPropagation(),onKeyUp:t=>t.stopPropagation(),className:"lingo3d-ui",style:{width:300,height:"100%",background:"rgb(40, 41, 46)"}})};CL(tO,"lingo3d-editor",["mouse","keyboard"]);const eO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,opacity:.25,flexShrink:0},children:YR("path",{fill:"#fff",d:"M838.4 325.12L554.24 479.36C528 493.44 512 521.6 512 552.96V851.2c0 32 31.36 53.12 57.6 38.4l284.16-154.24c25.6-14.08 42.24-42.24 42.24-73.6v-297.6c0-32.64-31.36-53.12-57.6-39.04zm-432.64 153.6L121.6 325.12c-26.24-14.08-57.6 6.4-57.6 38.4v299.52c0 31.36 16 59.52 42.24 73.6l284.16 153.6c26.24 14.08 57.6-7.04 57.6-39.04V552.32c0-31.36-16-59.52-42.24-73.6zm406.4-223.36c13.44-7.04 19.84-19.2 18.56-30.72 1.28-12.16-5.12-23.68-18.56-30.72L522.88 42.88c-12.8-7.04-28.16-10.24-43.52-10.24-15.36 0-30.72 3.2-43.52 10.24l-289.28 150.4c-13.44 7.04-19.2 19.2-18.56 30.72-.64 12.16 5.12 24.32 18.56 31.36l289.28 150.4C448.64 412.8 464 416 479.36 416c15.36 0 30.72-3.2 43.52-10.24l289.28-150.4z"})}),nO=({style:t,onClick:e})=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:p({margin:2,flexShrink:0},t),onMouseDown:t=>t.stopPropagation(),onClick:t=>(t.stopPropagation(),null==e?void 0:e()),children:YR("path",{fill:"#fff",d:"M928.1 928.2H98v-830h830.1v830zm-104.8-415c0-24.6-19.9-44.5-44.5-44.5H556.5V246.4c0-24.6-19.9-44.5-44.5-44.5s-44.5 19.9-44.5 44.5v222.3H245.2c-24.6 0-44.5 19.9-44.5 44.5s19.9 44.5 44.5 44.5h222.3V780c0 24.6 19.9 44.5 44.5 44.5s44.5-19.9 44.5-44.5V557.7h222.3c24.6 0 44.5-20 44.5-44.5z"})}),rO=({style:t,onClick:e})=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:p({margin:2,flexShrink:0},t),onMouseDown:t=>t.stopPropagation(),onClick:t=>(t.stopPropagation(),null==e?void 0:e()),children:YR("path",{fill:"#fff",d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zM596 606c0 4.4-3.6 8-8 8H308c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h280c4.4 0 8 3.6 8 8v48zm284-494H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32z"})});var iO=()=>YR("path",{fill:"#fff",d:"M914.5 653.5c-5.5 0-11 1.1-16 3.3l-.2.1h-.2L510.2 822.2 122.2 657h-.2l-.2-.1c-5-2.1-10.3-3.3-16-3.3-23.1 0-41.8 19.3-41.8 43.1 0 18 10.7 33.3 25.8 39.8l403.9 172.1.4.1c10.2 4.4 21.8 4.4 32 0l.2-.1c.1 0 .1-.1.2-.1l403.9-172.1c15.1-6.5 25.8-21.8 25.8-39.8.1-23.8-18.6-43.1-41.7-43.1zm0-186.5c-7.9-.2-16 3.2-16 3.2L510.2 635.6 121.8 470.2s-10.3-3.2-16-3.2C82.7 467 64 486.2 64 510c0 17.9 10.7 33.3 25.8 39.7l403.9 172c.1 0 .1.1.2.1l.1.1c5 2.1 10.3 3.3 16 3.3 5.7 0 11.1-1.2 16-3.3l.2-.1c.1 0 .1 0 .2-.1l403.9-172c15.1-6.4 25.8-21.8 25.9-39.7.1-23.8-18.6-43-41.7-43zM89.8 363.2l403.9 172.1c.1 0 .1 0 .2.1l.1.1c5 2.1 10.3 3.2 16 3.2 5.5 0 10.9-1.1 16-3.2l.2-.1.2-.1 403.9-172c15.1-6.5 25.8-21.8 25.9-39.7 0-18-10.7-33.3-25.8-39.8L526.5 111.6c-.1 0-.1 0-.2-.1l-.2-.1c-10.2-4.4-21.8-4.4-32 0l-.1.1L89.8 283.7C74.7 290.1 64 305.5 64 323.5c0 17.9 10.7 33.2 25.8 39.7z"});const oO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",style:{margin:2,opacity:.25,flexShrink:0},children:YR(iO,{})});document.addEventListener("mouseup",(()=>LL(!1)));const aO=({appendable:t,object3d:e,level:n})=>{const r={opacity:e.children.length?.5:.05,cursor:"pointer"},[i,o]=sL(!1),[a]=HL(),{setClickEl:s,handleClick:l,handleDoubleClick:u}=uO(e,t),[c,h]=WL();uL((()=>{c&&c.has(e)&&o(!0)}),[c]);const d=hL(null),p=hL(null),f=a===e,m=dL((()=>{if(!f||!d.current||!p.current)return;const t=d.current.getBoundingClientRect(),e=p.current.getBoundingClientRect();return e.right-t.left+4}),[f,i]);return YR("div",{ref:s,onClick:l,onDblClick:u,onMouseDown:()=>LL(!0),style:{color:"rgba(255, 255, 255, 0.75)",marginLeft:8,borderLeft:"1px solid rgba(255, 255, 255, 0.05)"},children:[YR("div",{ref:d,style:{display:"flex",alignItems:"center",border:f?"1px solid rgba(255, 255, 255, 0.5)":void 0,width:m,minWidth:"100%",cursor:"default"},children:[i?YR(rO,{style:r,onClick:()=>(o(!1),h(void 0))}):YR(nO,{style:r,onClick:()=>o(!0)}),YR(oO,{}),YR("div",{ref:p,children:e.name})]}),i&&e.children.map((e=>YR(aO,{object3d:e,appendable:t,level:n+1},e.uuid)))]})},sO=({appendable:t,level:e})=>{const[n,r]=sL(),{loaded:i}=t;return uL((()=>{r(void 0);const e=i.then((()=>r(t.loadedGroup.children[0])));return()=>{e.cancel()}}),[i]),YR(hO,{appendable:t,level:e,children:n&&YR(aO,{appendable:t,level:e+1,object3d:n})})};var lO=t=>{const[e,n]=sL(null);return uL((()=>{if(!e)return;let n=0,r=0,i=0;const o=t=>{n=Date.now(),r=t.clientX,i=t.clientY},a=e=>{const o=Date.now(),a=o-n,s=Math.abs(e.clientX-r),l=Math.abs(e.clientY-i);n=o,r=e.clientX,i=e.clientY,a<300&&s<5&&l<5&&t(e)};return e.addEventListener("mousedown",o),e.addEventListener("mouseup",a),()=>{e.removeEventListener("mousedown",o),e.removeEventListener("mouseup",a)}}),[e]),n};const uO=(t,e)=>{const n=lO((n=>{n.stopPropagation(),$S.activate(!0),ew(e)&&Dv()!==e&&Kb(e),t instanceof Fi?queueMicrotask((()=>AL(t))):Kb(t)})),r=t=>t.stopPropagation(),i=e=>{e.stopPropagation(),ew(t)&&(ZS(t),Kb(t))};return{setClickEl:n,handleClick:r,handleDoubleClick:i}},cO=[void 0],hO=({appendable:t,level:e,children:n})=>{var r;const i=XL(t),o=dL((()=>t.children?[...t.children].filter((t=>!kv.has(t))):void 0),[null==(r=t.children)?void 0:r.size]),a={opacity:(null==o?void 0:o.length)||n?.5:.05,cursor:"pointer"},[s,l]=sL(!1),[u,c]=sL(!1),[h]=kL(),[d]=IL(),p=h===t||d.includes(t),{setClickEl:f,handleClick:m,handleDoubleClick:g}=uO(t),[v,y]=WL();uL((()=>{v&&v.has(t.outerObject3d)&&c(!0)}),[v]);const b=hL(null),x=hL(null),_=dL((()=>{if(!p||!b.current||!x.current)return;const t=b.current.getBoundingClientRect(),e=x.current.getBoundingClientRect();return e.right-t.left+4}),[p,u]),[w]=GL();return YR("div",{ref:f,onClick:m,onDblClick:g,draggable:!w,onDragStart:e=>(e.stopPropagation(),cO[0]=t),onDragEnd:t=>(t.stopPropagation(),cO[0]=void 0),onDragOver:e=>{e.stopPropagation(),e.preventDefault(),cO[0]&&cO[0]!==t&&l(!0)},onDragEnter:e=>{e.stopPropagation(),e.preventDefault(),cO[0]&&cO[0]!==t&&l(!0)},onDragLeave:e=>{e.stopPropagation(),cO[0]&&cO[0]!==t&&l(!1)},onDrop:e=>{e.stopPropagation(),cO[0]&&cO[0]!==t&&(l(!1),t.attach(cO[0]))},style:{color:"rgba(255, 255, 255, 0.75)",marginLeft:8,borderLeft:"1px solid rgba(255, 255, 255, 0.05)",background:s?"rgba(255, 255, 255, 0.5)":"none"},children:[YR("div",{ref:b,style:{display:"flex",alignItems:"center",backgroundColor:p?"rgba(255, 255, 255, 0.1)":void 0,width:_,minWidth:"100%",cursor:"default"},children:[u?YR(rO,{style:a,onClick:()=>(c(!1),y(void 0))}):YR(nO,{style:a,onClick:()=>c(!0)}),YR(eO,{}),YR("div",{ref:x,children:i})]}),u&&(null==o?void 0:o.map((t=>YR(t instanceof cC?sO:hO,{appendable:t,level:e+1},t.uuid)))),u&&n]})},dO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M640 384h224a32 32 0 0132 32v384h-96v96H416a32 32 0 01-32-32V640H160a32 32 0 01-32-32V224h96v-96h384a32 32 0 0132 32v224zm0 32v192a32 32 0 01-32 32H416v224h352v-96h96V416H640zM96 96h96v96H96V96zm736 0h96v96h-96V96zM96 832h96v96H96v-96zm736 0h96v96h-96v-96z"})}),pO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M630.09 151.91V62.16H361.84v89.74H93.6v134.62h89.41v673.11h625.93v-673.1h89.42V151.91H630.09zM361.84 869.89h-89.43V286.53h89.43v583.36zm178.84 0h-89.43V286.53h89.43v583.36zm178.84 0h-89.43V286.53h89.43v583.36z"})}),fO=({children:t,onClick:e,active:n})=>YR("div",{onClick:n?e:void 0,style:{width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center",marginRight:2,opacity:n?1:.1,cursor:n?"pointer":"default"},children:t}),mO=()=>{const[t,e]=sL(!1);return YR("div",{onDragOver:t=>{t.stopPropagation(),t.preventDefault(),cO[0]&&e(!0)},onDragEnter:t=>{t.stopPropagation(),t.preventDefault(),cO[0]&&e(!0)},onDragLeave:t=>{t.stopPropagation(),cO[0]&&e(!1)},onDrop:t=>{var n,r;t.stopPropagation(),e(!1);const i=cO[0];i&&(Lv(),Ov.add(i),ly.attach(i.outerObject3d),null==(r=null==(n=i.parent)?void 0:n.children)||r.delete(i),i.parent=void 0)},style:{background:t?"rgba(255, 255, 255, 0.5)":"none",width:"100%",height:18}})},gO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 1024 1024",children:YR(iO,{})}),vO=(t,e)=>{var n,r,i;e.add(t);const o=null!=(i=null==(r=null==(n=t.userData.manager)?void 0:n.parent)?void 0:r.outerObject3d)?i:t.parent;o&&vO(o,e)},yO=(t,e)=>{const n=t.toLowerCase();let r;if(e instanceof nS?e.loadedGroup.traverse((t=>{r||t.name.toLowerCase().includes(n)&&(r=t)})):e.outerObject3d.traverse((t=>{r||t.name.toLowerCase().includes(n)&&(r=t)})),!r)return;const i=new Set;vO(r,i),PL(i),AL(r)},bO=({disabled:t,onClick:e,children:n})=>{const[r,i]=sL(!1);return YR("div",{style:{padding:6,whiteSpace:"nowrap",background:!t&&r?"rgba(255, 255, 255, 0.1)":void 0,opacity:t?.5:1},onClick:t?void 0:e,onMouseEnter:t?void 0:()=>i(!0),onMouseLeave:t?void 0:()=>i(!1),children:n})},xO=()=>{const[t,e]=sL(void 0),[n,r]=sL(!1),[i]=kL(),[[o]]=NL();return uL((()=>{let[t,n]=[0,0];const r=e=>[t,n]=[e.clientX,e.clientY];document.addEventListener("mousemove",r);const i=Zb((({target:r,rightClick:i})=>{i&&e({x:t,y:n,target:r})}));return()=>{i.cancel(),document.removeEventListener("mousemove",r)}}),[]),uL((()=>{!t&&r(!1)}),[t]),t?YR("div",{className:"lingo3d-ui",onMouseDown:()=>e(void 0),style:{zIndex:9999,position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"},children:YR("div",{onMouseDown:t=>t.stopPropagation(),style:{position:"absolute",left:t.x,top:t.y,background:"rgb(40, 41, 46)",padding:6},children:n?YR("input",{ref:t=>null==t?void 0:t.focus(),style:{all:"unset",padding:6},onKeyDown:t=>{t.stopPropagation(),"Enter"!==t.key&&"Escape"!==t.key||("Enter"===t.key&&i&&yO(t.target.value,i),e(void 0))}}):YR(MR,{children:[t.target&&YR(MR,{children:[YR(bO,{onClick:()=>r(!0),children:"Search children"}),YR(bO,{onClick:()=>{Q_(i)&&rx(i),e(void 0)},children:"Freeze selction"})]}),YR(bO,{disabled:!o.size,onClick:()=>{ix(),e(void 0)},children:"Unfreeze all"})]})})}):null},_O=()=>{const[t,e]=sL({});cL((()=>{const t=()=>e({}),n=Rv(t),r=ZL(t);return vb(),()=>{n.cancel(),r.cancel(),vb()}}),[]);const n=dL((()=>[...Ov].filter((t=>!Tv.has(t)&&!kv.has(t)))),[t]),[r]=IL(),[i]=kL(),[o]=HL(),[a]=FL(),s=S(a),l=()=>{(null==o?void 0:o.name)&&i instanceof Vw&&setTimeout((()=>Kb(i.find(o.name))))};return YR(MR,{children:[YR("div",{className:"lingo3d-ui",onClick:()=>Kb(),style:{width:200,height:"100%",background:"rgb(40, 41, 46)",padding:4,paddingTop:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[YR("div",{style:{height:24,borderBottom:"1px solid rgb(255,255,255,0.1)",opacity:s===Hg?.5:.25,display:"flex",alignItems:"center",paddingLeft:12},children:[YR("div",{children:"scenegraph"}),YR("div",{style:{flexGrow:1}}),YR(fO,{active:!!o,onClick:l,children:YR(gO,{})}),YR(fO,{active:!!r.length,onClick:vD,children:YR(dO,{})}),YR(fO,{active:!!i,onClick:qL,children:YR(pO,{})})]}),YR("div",{style:{overflow:"scroll",opacity:s===Hg?1:.5},className:"lingo3d-ui",children:[n.map((t=>YR(t instanceof cC?sO:hO,{appendable:t,level:0},t.uuid))),YR(mO,{})]})]}),YR(xO,{})]})};CL(_O,"lingo3d-scenegraph");const wO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M960 480L768 320v128H512V192h128L480 0 320 192h128v256H192V320L0 480l192 160V512h256v256H320l160 192 160-192H512V512h256v128l192-160z"})}),SO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M929 849a30 30 0 01-30-30v-83.137a447.514 447.514 0 01-70.921 92.209C722.935 933.225 578.442 975.008 442 953.482a444.917 444.917 0 01-241.139-120.591 30 30 0 1137.258-47.01l.231-.231A385.175 385.175 0 00442 892.625v-.006c120.855 22.123 250.206-13.519 343.656-106.975a386.646 386.646 0 0070.6-96.653h-87.247a30 30 0 010-60H929a30 30 0 0130 30V819a30 30 0 01-30 30zM512 392a120 120 0 11-120 120 120 120 0 01120-120zm293.005-147.025a29.87 29.87 0 01-19.117-6.882l-.232.231A386.5 386.5 0 00689.478 168h-.011c-145.646-75.182-329.021-51.747-451.117 70.35a386.615 386.615 0 00-70.6 96.65H255a30 30 0 010 60H95a30 30 0 01-30-30V205a30 30 0 0160 0v83.129a447.534 447.534 0 0170.923-92.206C317.981 73.866 493.048 37.2 647 85.836v-.045a444.883 444.883 0 01176.143 105.291 30 30 0 01-18.138 53.893z"})}),MO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M609.52 584.92a35.309 35.309 0 0124.98-10.36c9.37 0 18.36 3.73 24.98 10.36l189.29 189.22-.07-114.3.57-6.35c3.25-17.98 19.7-30.5 37.9-28.85 18.2 1.65 32.12 16.92 32.09 35.2v200.23c-.05 1.49-.19 2.97-.42 4.45l-.21 1.13c-.22 1.44-.55 2.85-.99 4.24l-.57 1.62-.56 1.41a34.163 34.163 0 01-7.62 11.36l2.12-2.4-.14.14-.92 1.06-1.06 1.2-.57.57-.56.57a36.378 36.378 0 01-16.23 8.39l-3.53.5-4.02.35h-199.6l-6.35-.63c-16.73-3.06-28.9-17.63-28.93-34.64l.56-6.35c3.07-16.76 17.67-28.93 34.71-28.92l114.29-.14-189.07-189.1-4.09-4.94c-9.71-14.01-8.01-32.95 4.02-45.02zm-162.06 0c12.06 12.05 13.78 30.99 4.09 45.01l-4.09 4.94-189.15 189.08 114.3.14c17.04-.01 31.65 12.17 34.71 28.92l.57 6.35c-.03 17.01-12.19 31.58-28.92 34.64l-6.35.63H173.09l-4.23-.42-3.39-.49a36.38 36.38 0 01-17.36-9.52l-1.06-1.13-.98-1.13.98 1.06-1.97-2.26.85 1.06-.42-.56a35.137 35.137 0 01-3.74-5.64l-1.13-2.68a34.71 34.71 0 01-2.11-7.33l-.28-1.13c-.21-1.47-.33-2.96-.36-4.45V659.78c-.03-18.28 13.89-33.55 32.09-35.2 18.2-1.65 34.65 10.87 37.9 28.85l.57 6.35-.07 114.36 189.29-189.22c13.77-13.77 36.11-13.77 49.88 0h-.09zm-74.71-471.71l6.35.57c16.76 3.06 28.93 17.67 28.92 34.71l-.63 6.35c-3.07 16.76-17.67 28.93-34.71 28.92l-114.3.14 189.15 189.08 4.09 4.94c10.26 15.02 7.42 35.37-6.55 47.01-13.98 11.63-34.51 10.74-47.42-2.07L208.29 233.71l.07 114.3-.57 6.35c-3.25 17.98-19.7 30.5-37.9 28.85-18.2-1.65-32.12-16.92-32.09-35.2V147.78c0-1.55.14-3.03.35-4.51l.21-1.13c.24-1.44.59-2.85 1.06-4.23a34.97 34.97 0 018.68-14.39l-2.12 2.4-.42.57 1.55-1.84-.99 1.06.92-.98 2.26-2.33c3.04-2.73 6.52-4.92 10.3-6.49l2.82-1.06c3.45-1.07 7.04-1.62 10.65-1.62l-3.6.14h.49l1.48-.14h201.31zm512.91 0l1.41.14h.42c2.43.29 4.84.79 7.19 1.48l2.82 1.06 2.61 1.2 3.04 1.76c2.09 1.33 4.03 2.89 5.78 4.66l1.13 1.2.78.98.21.14.49.64 2.33 3.17c2.35 3.83 3.98 8.07 4.8 12.49l.21 1.13c.21 1.48.35 2.96.35 4.44v200.37c-.16 18.13-14.03 33.19-32.08 34.83-18.06 1.64-34.42-10.67-37.83-28.48l-.57-6.35V233.65L659.54 422.87c-12.9 12.95-33.56 13.91-47.59 2.2-14.04-11.71-16.81-32.2-6.38-47.22l4.02-4.86 189.22-189.08-114.29-.14c-17.06.04-31.71-12.14-34.78-28.92l-.63-6.35c-.01-17.04 12.16-31.65 28.93-34.71l6.35-.57h201.27zm0 0"})}),EO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[YR("path",{fill:"#fff",d:"M96 892.8V121.6c0-16 12.8-28.8 28.8-28.8h774.4c16 0 28.8 12.8 28.8 28.8v771.2c0 16-12.8 28.8-28.8 28.8H124.8c-16 3.2-28.8-9.6-28.8-28.8zm64-736v704h704v-704H160z"}),YR("path",{fill:"#fff",d:"M352 656V358.4c0-6.4 6.4-12.8 9.6-12.8h297.6c6.4 0 9.6 6.4 9.6 12.8V656c0 6.4-6.4 12.8-9.6 12.8H361.6c-3.2 0-9.6-6.4-9.6-12.8zm80-227.2v160h160v-160H432zm240 108.8v-48h192v48H672zm121.6-48H736v48h57.6v-48zm-633.6 48v-48h192v48H160zm124.8-48H224v48h57.6v-48z"}),YR("path",{fill:"#fff",d:"M489.6 156.8h48v192h-48v-192zm48 121.6v-57.6h-48v57.6h48zm-48 387.2h48v195.2h-48V665.6zm48 124.8v-57.6h-48v57.6h48z"})]}),CO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M185.6 489.6h-48c-3.2 0-9.6 3.2-9.6 9.6v384c0 3.2 3.2 9.6 9.6 9.6h48c3.2 0 9.6-3.2 9.6-9.6v-384c-3.2-6.4-6.4-9.6-9.6-9.6zm217.6 236.8c6.4 0 12.8-3.2 12.8-9.6v-48c0-3.2-6.4-9.6-12.8-9.6H140.8c-6.4 0-12.8 3.2-12.8 9.6v48c0 3.2 6.4 9.6 12.8 9.6h262.4zm512-547.2v-48c0-3.2-3.2-9.6-9.6-9.6h-384c-3.2 0-9.6 3.2-9.6 9.6v48c0 3.2 3.2 9.6 9.6 9.6h384c6.4 0 9.6-6.4 9.6-9.6zM678.4 377.6c0 6.4 3.2 9.6 9.6 9.6h48c3.2 0 9.6-3.2 9.6-9.6V134.4c0-6.4-3.2-9.6-9.6-9.6h-48c-3.2 0-9.6 3.2-9.6 9.6v243.2zm-195.2 89.6v416c0 9.6 6.4 16 16 16h400c9.6 0 16-6.4 16-16v-416c0-9.6-6.4-16-16-16h-400c-9.6 0-16 9.6-16 16zm361.6 57.6v304h-288v-304h288z"})}),TO=({children:t,onClick:e,active:n,disabled:r})=>YR("div",{style:{margin:6,padding:6,background:n?"rgba(255, 255, 255, 0.1)":void 0,borderRadius:4,opacity:r?.25:n?1:.75,cursor:"pointer"},onClick:r||n?void 0:e,children:t}),AO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",style:{left:-2},children:YR("path",{fill:"#fff",d:"M279.552 198.879a22.26 22.26 0 0135.217-20.347L933.265 628.47a22.26 22.26 0 01-11.799 40.248l-324.43 19.456a22.26 22.26 0 00-17.23 9.972l-179.11 271.227a22.26 22.26 0 01-40.738-9.929L279.597 198.88z"})}),DO=()=>YR("div",{style:{width:"60%",height:2,background:"rgba(255, 255, 255, 0.1)",margin:12}}),PO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[YR("path",{fill:"#fff",d:"M808.192 246.528a320.16 320.16 0 00-592.352 0A238.592 238.592 0 0032 479.936c0 132.352 107.648 240 240 240h91.488a32 32 0 100-64H272a176.192 176.192 0 01-176-176 175.04 175.04 0 01148.48-173.888l19.04-2.976 6.24-18.24C305.248 181.408 402.592 111.936 512 111.936a256 256 0 01242.208 172.896l6.272 18.24 19.04 2.976A175.04 175.04 0 01928 479.936c0 97.024-78.976 176-176 176h-97.28a32 32 0 100 64H752c132.352 0 240-107.648 240-240a238.592 238.592 0 00-183.808-233.408z"}),YR("path",{fill:"#fff",d:"M649.792 789.888L544 876.48V447.936a32 32 0 00-64 0V876.48l-106.752-87.424a31.968 31.968 0 10-40.544 49.504l159.04 130.24a32 32 0 0040.576 0l158.048-129.44a32 32 0 10-40.576-49.472z"})]}),RO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:[YR("path",{fill:"#fff",d:"M870.4 342.4c-12.8 0-24-11.2-24-24V153.6c0-12.8 11.2-24 24-24s24 11.2 24 24v164.8c0 12.8-11.2 24-24 24z"}),YR("path",{fill:"#fff",d:"M870.4 177.6H705.6c-12.8 0-24-11.2-24-24s11.2-24 24-24h164.8c12.8 0 24 11.2 24 24s-11.2 24-24 24zm-96 716.8H249.6c-65.6 0-120-54.4-120-120V249.6c0-65.6 54.4-120 120-120H512c12.8 0 24 11.2 24 24s-11.2 24-24 24H249.6c-40 0-72 32-72 72v524.8c0 40 32 72 72 72h524.8c40 0 72-32 72-72V512c0-12.8 11.2-24 24-24s24 11.2 24 24v262.4c0 65.6-54.4 120-120 120z"}),YR("path",{fill:"#fff",d:"M526.4 521.6c-6.4 0-12.8-1.6-17.6-6.4-9.6-9.6-9.6-24 0-33.6l344-344c9.6-9.6 24-9.6 33.6 0 9.6 9.6 9.6 24 0 33.6l-344 344c-4.8 4.8-11.2 6.4-16 6.4z"})]}),LO=(()=>{if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(t){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),OO=LO?Promise.resolve().then((function(){return BO})):Promise.resolve().then((function(){return GO}));async function kO(...t){return(await OO).default(...t)}LO?Promise.resolve().then((function(){return jO})):Promise.resolve().then((function(){return XO})),LO?Promise.resolve().then((function(){return HO})):Promise.resolve().then((function(){return ZO}));const IO=async t=>{const e=await t.getFile();return e.handle=t,e};var NO=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const e=[];t.forEach(((t,n)=>{e[n]={description:t.description||"",accept:{}},t.mimeTypes?t.mimeTypes.map((r=>{e[n].accept[r]=t.extensions||[]})):e[n].accept["*/*"]=t.extensions||[]}));const n=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(IO));return t[0].multiple?r:r[0]},BO={__proto__:null,default:NO};function FO(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return FO=function(t){this.s=t,this.n=t.next},FO.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new FO(t)}const zO=async(t,e,n=t.name,r)=>{const i=[],o=[];var a,s=!1,l=!1;try{for(var u,c=function(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new FO(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());s=!(u=await c.next()).done;s=!1){const a=u.value,s=`${n}/${a.name}`;"file"===a.kind?o.push(a.getFile().then((e=>(e.directoryHandle=t,e.handle=a,Object.defineProperty(e,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>s}))))):"directory"!==a.kind||!e||r&&r(a)||i.push(zO(a,e,s,r))}}catch(h){l=!0,a=h}finally{try{s&&null!=c.return&&await c.return()}finally{if(l)throw a}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var UO=async(t={})=>{t.recursive=t.recursive||!1;const e=await window.showDirectoryPicker({id:t.id,startIn:t.startIn});return zO(e,t.recursive,void 0,t.skipDirectory)},jO={__proto__:null,default:UO},VO=async(t,e=[{}],n=null,r=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const o=[];let a=null;if(t instanceof Blob&&t.type?a=t.type:t.headers&&t.headers.get("content-type")&&(a=t.headers.get("content-type")),e.forEach(((t,e)=>{o[e]={description:t.description||"",accept:{}},t.mimeTypes?(0===e&&a&&t.mimeTypes.push(a),t.mimeTypes.map((n=>{o[e].accept[n]=t.extensions||[]}))):a?o[e].accept[a]=t.extensions||[]:o[e].accept["*/*"]=t.extensions||[]})),n)try{await n.getFile()}catch(u){if(n=null,r)throw u}const s=n||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:o,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!n&&i&&i();const l=await s.createWritable();if("stream"in t){const e=t.stream();return await e.pipeTo(l),s}return"body"in t?(await t.body.pipeTo(l),s):(await l.write(await t),await l.close(),s)},HO={__proto__:null,default:VO},WO=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise(((e,n)=>{const r=document.createElement("input");r.type="file";const i=[...t.map((t=>t.mimeTypes||[])),...t.map((t=>t.extensions||[]))].join();r.multiple=t[0].multiple||!1,r.accept=i||"";const o=t=>{"function"==typeof a&&a(),e(t)},a=t[0].legacySetup&&t[0].legacySetup(o,(()=>a(n)),r);r.addEventListener("change",(()=>{o(r.multiple?Array.from(r.files):r.files[0])})),r.click()}))),GO={__proto__:null,default:WO},qO=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise(((e,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=t=>{"function"==typeof o&&o(),e(t)},o=t[0].legacySetup&&t[0].legacySetup(i,(()=>o(n)),r);r.addEventListener("change",(()=>{let e=Array.from(r.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(e=e.filter((e=>e.webkitRelativePath.split("/").every((e=>!t[0].skipDirectory({name:e,kind:"directory"})))))):e=e.filter((t=>2===t.webkitRelativePath.split("/").length)),i(e)})),r.click()}))),XO={__proto__:null,default:qO},YO=async(t,e={})=>{Array.isArray(e)&&(e=e[0]);const n=document.createElement("a");let r=t;"body"in t&&(r=await async function(t,e){const n=t.getReader(),r=new ReadableStream({start:t=>async function e(){return n.read().then((({done:n,value:r})=>{if(!n)return t.enqueue(r),e();t.close()}))}()}),i=new Response(r),o=await i.blob();return n.releaseLock(),new Blob([o],{type:e})}(t.body,t.headers.get("content-type"))),n.download=e.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{"function"==typeof o&&o()},o=e.legacySetup&&e.legacySetup(i,(()=>o()),n);return n.addEventListener("click",(()=>{setTimeout((()=>URL.revokeObjectURL(n.href)),3e4),i()})),n.click(),null},ZO={__proto__:null,default:YO};const KO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M836.8 353.6c-11.2-3.2-20.8-6.4-32-9.6 1.6-8 3.2-14.4 4.8-22.4 24-118.4 8-214.4-46.4-246.4C710.4 44.8 624 76.8 537.6 152c-8 8-17.6 14.4-25.6 22.4-4.8-4.8-11.2-9.6-16-16-91.2-81.6-182.4-115.2-236.8-83.2-52.8 30.4-68.8 120-46.4 233.6 1.6 11.2 4.8 22.4 8 33.6-12.8 3.2-25.6 8-36.8 11.2C76.8 392 0 451.2 0 510.4c0 62.4 81.6 124.8 192 163.2 9.6 3.2 17.6 6.4 27.2 8-3.2 12.8-6.4 24-8 36.8-20.8 110.4-4.8 198.4 48 228.8 54.4 32 145.6 0 233.6-78.4 6.4-6.4 14.4-12.8 20.8-19.2 8 8 17.6 16 27.2 24 84.8 73.6 169.6 104 222.4 73.6 54.4-32 72-126.4 48-241.6-1.6-8-3.2-17.6-6.4-27.2 6.4-1.6 12.8-3.2 19.2-6.4 116.8-35.2 200-97.6 200-161.6 0-59.2-78.4-118.4-187.2-156.8zM566.4 184c75.2-65.6 144-89.6 176-72 33.6 19.2 46.4 97.6 25.6 201.6-1.6 6.4-3.2 12.8-4.8 20.8-44.8-9.6-89.6-17.6-134.4-20.8C603.2 276.8 574.4 240 544 208c6.4-9.6 14.4-16 22.4-24zm-232 430.4c9.6 17.6 20.8 35.2 32 51.2-32-3.2-62.4-8-92.8-14.4 8-28.8 19.2-59.2 32-89.6 9.6 19.2 19.2 36.8 28.8 52.8zm-60.8-240c28.8-6.4 59.2-11.2 91.2-16-11.2 16-20.8 33.6-30.4 51.2-9.6 17.6-19.2 33.6-28.8 52.8-12.8-30.4-22.4-59.2-32-88zM328 512c12.8-27.2 27.2-54.4 43.2-81.6s32-52.8 48-78.4c30.4-1.6 60.8-3.2 91.2-3.2s62.4 1.6 91.2 3.2c17.6 25.6 33.6 51.2 48 76.8s30.4 52.8 43.2 81.6c-12.8 27.2-27.2 54.4-43.2 81.6-16 27.2-32 52.8-48 78.4-30.4 1.6-60.8 3.2-92.8 3.2s-62.4-1.6-91.2-3.2C400 644.8 384 619.2 368 592s-25.6-52.8-40-80zm361.6 102.4l28.8-52.8c12.8 28.8 24 59.2 33.6 88-30.4 6.4-62.4 12.8-94.4 16 11.2-16 22.4-33.6 32-51.2zm28.8-153.6L689.6 408c-9.6-17.6-20.8-33.6-30.4-49.6 32 4.8 62.4 9.6 91.2 16-8 30.4-19.2 59.2-32 86.4zM512 236.8c20.8 22.4 40 46.4 59.2 72-40-1.6-80-1.6-118.4 0 19.2-27.2 40-51.2 59.2-72zM280 113.6c33.6-19.2 108.8 8 187.2 78.4 4.8 4.8 9.6 9.6 16 14.4C452.8 240 424 275.2 396.8 312c-44.8 4.8-89.6 11.2-134.4 20.8-3.2-9.6-4.8-20.8-6.4-30.4-19.2-97.6-6.4-169.6 24-188.8zm-48 528c-8-3.2-16-4.8-25.6-8-43.2-12.8-91.2-35.2-126.4-62.4C59.2 556.8 46.4 536 41.6 512c0-36.8 64-83.2 155.2-115.2 11.2-4.8 22.4-8 35.2-11.2 14.4 43.2 30.4 86.4 49.6 128-19.2 40-36.8 83.2-49.6 128zm232 195.2c-33.6 30.4-72 54.4-113.6 70.4-22.4 11.2-48 11.2-70.4 3.2-32-19.2-44.8-89.6-27.2-184 1.6-11.2 4.8-22.4 8-33.6 44.8 9.6 89.6 16 136 19.2 25.6 36.8 56 73.6 86.4 107.2-6.4 6.4-12.8 12.8-19.2 17.6zm49.6-48c-20.8-22.4-40-46.4-60.8-72 19.2 0 38.4 1.6 59.2 1.6 20.8 0 41.6 0 60.8-1.6-19.2 24-38.4 48-59.2 72zM774.4 848c-1.6 24-14.4 48-33.6 62.4-32 19.2-99.2-4.8-172.8-68.8-8-8-16-14.4-25.6-22.4 30.4-33.6 59.2-68.8 84.8-107.2 46.4-3.2 91.2-11.2 136-20.8l4.8 24c11.2 43.2 12.8 89.6 6.4 132.8zm36.8-214.4c-4.8 1.6-11.2 3.2-17.6 4.8-14.4-43.2-32-86.4-51.2-128 19.2-40 35.2-83.2 49.6-126.4 11.2 3.2 20.8 6.4 30.4 9.6 92.8 32 158.4 80 158.4 116.8 0 40-68.8 89.6-169.6 123.2zM512 603.2c51.2 0 91.2-41.6 91.2-91.2s-41.6-91.2-91.2-91.2-91.2 41.6-91.2 91.2 40 91.2 91.2 91.2z"})}),JO=()=>YR("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 1024 1024",children:YR("path",{fill:"#fff",d:"M777.8 128.6H624L512 305.8l-96-177.2H64L512 896l448-767.4H777.8zm-602.4 64H283L512 589l228.8-396.4h107.6L512 769 175.4 192.6z"})});var QO=(t,e)=>{const n=new Blob([e],{type:"text/plain"}),r=document.createElement("a"),i=r.href=URL.createObjectURL(n);r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)};const $O=t=>{let e="";for(const n of t){const t=y.exports.upperFirst(n.type);let r="";for(const[e,i]of Object.entries(n))"children"!==e&&"type"!==e&&i&&(r+="string"===typeof i?` ${e}="${i}"`:!0===i?` ${e}`:"object"===typeof i?` ${e}={${JSON.stringify(i)}}`:` ${e}={${i}}`);e+="children"in n&&n.children?`<${t}${r}>${$O(n.children)}</${t}>`:`<${t}${r} />`}return e};var tk=async()=>{const t=(await n.e(683).then(n.bind(n,8683)).then((function(t){return t.s}))).default,e=(await n.e(307).then(n.bind(n,2307)).then((function(t){return t.p}))).default,r=t.format(`\n        const App = () => {\n            return (\n                <World>\n                    ${$O($P())}\n                </World>\n            )\n        }\n    `,{parser:"babel",plugins:[e]});QO("App.jsx",r)};const ek=t=>{let e="";for(const n of t){const t=y.exports.upperFirst(n.type);let r="";for(let[e,i]of Object.entries(n))"children"!==e&&"type"!==e&&i&&(e=y.exports.kebabCase(e),r+="string"===typeof i?` ${e}='${i}'`:!0===i?` ${e}`:"object"===typeof i?` :${e}='${JSON.stringify(i)}'`:` :${e}='${i}'`);e+="children"in n&&n.children?`<${t}${r}>\n${ek(n.children)}</${t}>\n`:`<${t}${r} />\n`}return e};var nk=async()=>{const t=(await n.e(683).then(n.bind(n,8683)).then((function(t){return t.s}))).default,e=(await n.e(937).then(n.bind(n,4937)).then((function(t){return t.p}))).default,r=t.format(`\n        <template>\n            <World>\n                ${ek($P())}\n            </World>\n        </template>\n    `,{parser:"vue",plugins:[e]});QO("App.vue",r)};const rk=async()=>{const t=(await n.e(683).then(n.bind(n,8683)).then((function(t){return t.s}))).default,e=(await n.e(307).then(n.bind(n,2307)).then((function(t){return t.p}))).default,r=t.format(JSON.stringify($P()),{parser:"json",plugins:[e]});QO("scene.json",r)},ik=async()=>{const t=await kO({extensions:[".json"]}),e=await t.text();for(const n of Ov)n.dispose();try{rR(JSON.parse(e))}catch{}},ok=()=>{const[t,e]=zL();let[n,r]=UL();"scale"===t&&(n="local");const[i]=kL(),o=i&&!(i instanceof _w);return cL((()=>{o&&"scale"===t&&e("translate")}),[o]),uL((()=>(vb(),()=>{vb()})),[]),YR("div",{className:"lingo3d-ui",style:{width:50,height:"100%",background:"rgb(40, 41, 46)",borderRight:"1px solid rgba(255, 255, 255, 0.05)",overflow:"hidden"},children:YR("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",opacity:.75,paddingTop:12},children:[YR(TO,{active:"select"===t,onClick:()=>e("select"),children:YR(AO,{})}),YR(TO,{active:"translate"===t,onClick:()=>e("translate"),children:YR(wO,{})}),YR(TO,{active:"rotate"===t,onClick:()=>e("rotate"),children:YR(SO,{})}),YR(TO,{active:"scale"===t,disabled:o,onClick:()=>e("scale"),children:YR(MO,{})}),YR(DO,{}),YR(TO,{active:"world"===n,onClick:()=>r("world"),disabled:"scale"===t||"select"===t,children:YR(EO,{})}),YR(TO,{active:"local"===n,onClick:()=>r("local"),disabled:"select"===t,children:YR(CO,{})}),YR(DO,{}),YR(TO,{onClick:ik,children:YR(RO,{})}),YR(TO,{onClick:rk,children:YR(PO,{})}),YR(DO,{}),YR(TO,{onClick:tk,children:YR(KO,{})}),YR(TO,{onClick:nk,children:YR(JO,{})})]})})};let ak;CL(ok,"lingo3d-toolbar"),bb.addEventListener("dragover",(t=>t.preventDefault())),bb.addEventListener("dragenter",(t=>t.preventDefault())),bb.addEventListener("drop",(t=>{if(!ak||!Ob())return;const e=eR(ak),{x:n,y:r,z:i}=Rb(t,!0);e.outerObject3d.position.set(n,r,i),Kb(e)}));const sk=({name:t,iconName:e=t})=>YR("div",{onDragStart:()=>ak=t,onDragEnd:()=>ak=void 0,style:{width:"50%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:20,paddingBottom:20},children:[YR("img",{style:{width:50},src:`https://unpkg.com/lingo3d-editor@1.0.2/assets/${e}.png`}),YR("div",{style:{marginTop:6,opacity:.75,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:y.exports.upperFirst(t)})]}),lk=t=>"string"===typeof t?t.endsWith("Camera")?"camera":t.endsWith("Light")?"light":t:Object.values(t)[0],uk=t=>"string"===typeof t?t:Object.keys(t)[0],ck=({names:t})=>{const e=[];let n=[],r=0;for(const i of t)0===r&&e.push(n=[]),n.push(i),2===++r&&(r=0);return YR(MR,{children:e.map((([t,e],n)=>YR("div",{style:{display:"flex"},children:[YR(sk,{name:uk(t),iconName:lk(t)}),e&&YR(sk,{name:uk(e),iconName:lk(e)})]},n)))})},hk=()=>(uL((()=>(vb(),()=>{vb()})),[]),YR("div",{className:"lingo3d-ui",style:{width:200,height:"100%",background:"rgb(40, 41, 46)",padding:10},children:YR(ck,{names:["model","dummy","svgMesh",{sprite:"plane"},"trigger","reflector","cube","sphere","cone","cylinder","octahedron","tetrahedron","torus","plane","circle","areaLight","ambientLight","skyLight","directionalLight","pointLight","spotLight","camera","thirdPersonCamera","firstPersonCamera","orbitCamera"]})}));CL(hk,"lingo3d-library");const dk=document.createElement("style");document.head.appendChild(dk),dk.innerHTML='.lingo3d-ui * {\n    user-select: none;\n    -webkit-user-select: none;\n    position: relative;\n    box-sizing: border-box;\n    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;\n}\n.lingo3d-ui {\n    position: relative;\n    box-sizing: border-box;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    float: left;\n    color: white;\n    font-size: 11px;\n}\n\n.lingo3d-ui::-webkit-scrollbar {\n    display: none;\n}\n\n.tp-rotv {\n    box-shadow: none !important;\n    background-color: transparent !important;\n}\n.tp-brkv {\n    border-left: none !important;\n}\n';var pk={exports:{}};(function(t,e){(function(e,n){t.exports=n()})(0,(function(){var t=function(){function e(t){return i.appendChild(t.dom),t}function n(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";r=t}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=e(new t.Panel("FPS","#0ff","#002")),u=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(u.update(t-o,200),t>a+1e3&&(l.update(1e3*s/(t-a),100),a=t,s=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:n}};return t.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=e,g.fillText(t,u,c),g.fillRect(h,d,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,p,f),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=e,g.fillText(o(l)+" "+t+" ("+o(r)+"-"+o(i)+")",u,c),g.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),g.fillRect(h+p-a,d,a,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+p-a,d,a,o((1-l/v)*f))}}},t}))})(pk);pk.exports;var fk=(t,e,n)=>{let o=e;const a=(0,i.iH)([]);return(0,r.m0)((()=>{if(null==n?void 0:n.value)return;const e=a.value=[];for(const[n,r]of Object.entries(t)){const t=o[n];t!==r&&(r&&"object"===typeof r?JSON.stringify(r)!==JSON.stringify(t)&&e.push([n,r]):e.push([n,r]))}o=p({},t)})),a};const mk=new WeakMap,gk=()=>new Map,vk=(t,e,n,o)=>{(0,r.m0)((()=>{var r;if(null!=e||(e=(0,i.IU)(null==t?void 0:t.value)),!e)return;const a=b(mk,e,gk);for(const[t,s]of(0,i.IU)(n.value))null==(r=a.get(t))||r.cancel(),s instanceof Z?a.set(t,s.get((n=>e[t]=n))):e[t]=null!=s?s:o[t]}))};var yk=(t,e)=>{const n=new e,o=(0,i.iH)(n);(0,r.JJ)("parent",o);const a=(0,r.f3)("parent",void 0);(0,r.m0)((()=>{var t;null==(t=(0,i.IU)(null==a?void 0:a.value))||t.append(n)})),e.defaults||console.error("ManagerClass has no defaults",e);const s=fk(t,e.defaults);return vk(void 0,n,s,e.defaults),(0,r.Ah)((()=>{const t=mk.get(n);if(t)for(const e of t.values())e.cancel();n.dispose()})),n};aR(_P,wP);aR(Eb,Cb);aR(jP,VP);aR(bD,xD);var bk=aR(aC,sC);const xk=(0,r.aZ)({__name:"Model",props:bk,setup(t,{expose:e}){const n=t,i=yk(n,cC);return e(i),(t,e)=>(0,r.WI)(t.$slots,"default")}});aR(NA,BA);aR(KA,JA);aR(eD,nD);var _k=aR(TD,AD);const wk=(0,r.aZ)({__name:"Skybox",props:_k,setup(t,{expose:e}){const n=t,i=yk(n,DD);return e(i),(t,e)=>(0,r.WI)(t.$slots,"default")}});aR(Vv,Hv);aR(OS,kS);aR(aD,sD);aR(LD,OD);var Sk=aR(US,jS);const Mk=(0,r.aZ)({__name:"OrbitCamera",props:Sk,setup(t,{expose:e}){const n=t,i=yk(n,YS);return e(i),(t,e)=>(0,r.WI)(t.$slots,"default")}});aR(ID,ND);aR(ID,ND);aR(tP,eP);aR(iP,oP);aR(lP,uP);aR(fP,mP);aR(hP,dP);aR(yP,bP);var Ek=aR(Jw,Qw);const Ck=(0,r.aZ)({__name:"Cube",props:Ek,setup(t,{expose:e}){const n=t,i=yk(n,eS);return e(i),(t,e)=>(0,r.WI)(t.$slots,"default")}});var Tk=aR(Pw,Rw);f(p({},Tk),{onLoad:Function});function Ak(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var Dk=function(){};const Pk=(t,e,n)=>Math.min(Math.max(n,t),e),Rk=.001,Lk=.01,Ok=10,kk=.05,Ik=1;function Nk({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;Dk(t<=1e3*Ok);let a=1-e;a=Pk(kk,Ik,a),t=Pk(Lk,Ok,t/1e3),a<1?(i=e=>{const r=e*a,i=r*t,o=r-n,s=zk(e,a),l=Math.exp(-i);return Rk-o/s*l},o=e=>{const r=e*a,o=r*t,s=o*n+n,l=Math.pow(a,2)*Math.pow(e,2)*t,u=Math.exp(-o),c=zk(Math.pow(e,2),a),h=-i(e)+Rk>0?-1:1;return h*((s-l)*u)/c}):(i=e=>{const r=Math.exp(-e*t),i=(e-n)*t+1;return r*i-Rk},o=e=>{const r=Math.exp(-e*t),i=t*t*(n-e);return r*i});const s=5/t,l=Fk(i,o,s);if(t*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(l,2)*r;return{stiffness:e,damping:2*a*Math.sqrt(r*e),duration:t}}}const Bk=12;function Fk(t,e,n){let r=n;for(let i=1;i<Bk;i++)r-=t(r)/e(r);return r}function zk(t,e){return t*Math.sqrt(1-e*e)}const Uk=["duration","bounce"],jk=["stiffness","damping","mass"];function Vk(t,e){return e.some((e=>void 0!==t[e]))}function Hk(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!Vk(t,jk)&&Vk(t,Uk)){const n=Nk(t);e=Object.assign(Object.assign(Object.assign({},e),n),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function Wk(t){var{from:e=0,to:n=1,restSpeed:r=2,restDelta:i}=t,o=Ak(t,["from","to","restSpeed","restDelta"]);const a={done:!1,value:e};let{stiffness:s,damping:l,mass:u,velocity:c,duration:h,isResolvedFromDuration:d}=Hk(o),p=Gk,f=Gk;function m(){const t=c?-c/1e3:0,r=n-e,o=l/(2*Math.sqrt(s*u)),a=Math.sqrt(s/u)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-e)/100,.4)),o<1){const e=zk(a,o);p=i=>{const s=Math.exp(-o*a*i);return n-s*((t+o*a*r)/e*Math.sin(e*i)+r*Math.cos(e*i))},f=n=>{const i=Math.exp(-o*a*n);return o*a*i*(Math.sin(e*n)*(t+o*a*r)/e+r*Math.cos(e*n))-i*(Math.cos(e*n)*(t+o*a*r)-e*r*Math.sin(e*n))}}else if(1===o)p=e=>n-Math.exp(-a*e)*(r+(t+a*r)*e);else{const e=a*Math.sqrt(o*o-1);p=i=>{const s=Math.exp(-o*a*i),l=Math.min(e*i,300);return n-s*((t+o*a*r)*Math.sinh(l)+e*r*Math.cosh(l))/e}}}return m(),{next:t=>{const e=p(t);if(d)a.done=t>=h;else{const o=1e3*f(t),s=Math.abs(o)<=r,l=Math.abs(n-e)<=i;a.done=s&&l}return a.value=a.done?n:e,a},flipTarget:()=>{c=-c,[e,n]=[n,e],m()}}}Wk.needsInterpolation=(t,e)=>"string"===typeof t||"string"===typeof e;const Gk=t=>0,qk=(t,e)=>n=>Math.max(Math.min(n,e),t),Xk=t=>t%1?Number(t.toFixed(5)):t,Yk=/(-)?([\d]*\.?[\d])+/g,Zk=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Kk(t){return"string"===typeof t}const Jk={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},Qk=Object.assign(Object.assign({},Jk),{transform:qk(0,1)});Object.assign(Object.assign({},Jk),{default:1});const $k=t=>({test:e=>Kk(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),tI=$k("%");Object.assign(Object.assign({},tI),{parse:t=>tI.parse(t)/100,transform:t=>tI.transform(100*t)});const eI=(t,e)=>n=>Boolean(Kk(n)&&Zk.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),nI=(t,e,n)=>r=>{if(!Kk(r))return r;const[i,o,a,s]=r.match(Yk);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},rI=(eI("hsl","hue"),nI("hue","saturation","lightness"),qk(0,255)),iI=Object.assign(Object.assign({},Jk),{transform:t=>Math.round(rI(t))}),oI={test:eI("rgb","red"),parse:nI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+iI.transform(t)+", "+iI.transform(e)+", "+iI.transform(n)+", "+Xk(Qk.transform(r))+")"};function aI(t){let e="",n="",r="",i="";return t.length>5?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2),i=t.substr(7,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),i=t.substr(4,1),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}eI("#"),oI.transform;const sI=t=>e=>1-t(1-e),lI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uI=t=>e=>Math.pow(e,t),cI=t=>e=>e*e*((t+1)*e-t),hI=t=>{const e=cI(t);return t=>(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))},dI=1.525,pI=4/11,fI=8/11,mI=.9,gI=uI(2);sI(gI);lI(gI);const vI=t=>1-Math.sin(Math.acos(t)),yI=sI(vI);lI(yI);const bI=cI(dI);sI(bI),lI(bI),hI(dI);const xI=4356/361,_I=35442/1805,wI=16061/1805,SI=t=>{if(1===t||0===t)return t;const e=t*t;return t<pI?7.5625*e:t<fI?9.075*e-9.9*t+3.4:t<mI?xI*e-_I*t+wI:10.8*t*t-20.52*t+10.72};sI(SI);const MI=1/60*1e3,EI="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),CI="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(EI())),MI);function TI(t){let e=[],n=[],r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(t,o=!1,s=!1)=>{const l=s&&i,u=l?e:n;return o&&a.add(t),-1===u.indexOf(t)&&(u.push(t),l&&i&&(r=e.length)),t},cancel:t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),a.delete(t)},process:l=>{if(i)o=!0;else{if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let n=0;n<r;n++){const r=e[n];r(l),a.has(r)&&(s.schedule(r),t())}i=!1,o&&(o=!1,s.process(l))}}};return s}const AI=40;let DI=!0,PI=!1,RI=!1;const LI={delta:0,timestamp:0},OI=["read","update","preRender","render","postRender"],kI=OI.reduce(((t,e)=>(t[e]=TI((()=>PI=!0)),t)),{});OI.reduce(((t,e)=>{const n=kI[e];return t[e]=(t,e=!1,r=!1)=>(PI||BI(),n.schedule(t,e,r)),t}),{}),OI.reduce(((t,e)=>(t[e]=kI[e].cancel,t)),{});OI.reduce(((t,e)=>(t[e]=()=>kI[e].process(LI),t)),{});const II=t=>kI[t].process(LI),NI=t=>{PI=!1,LI.delta=DI?MI:Math.max(Math.min(t-LI.timestamp,AI),1),LI.timestamp=t,RI=!0,OI.forEach(II),RI=!1,PI&&(DI=!1,CI(NI))},BI=()=>{PI=!0,DI=!0,RI||CI(NI)}},1681:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Eut}});var r=n(3396);const i={style:{border:"1px solid #ccc"}};function o(t,e,n,o,a,s){const l=(0,r.up)("Toolbar"),u=(0,r.up)("Editor",!0);return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(l,{style:{"border-bottom":"1px solid #ccc"},editor:o.editorRef,defaultConfig:o.toolbarConfig,mode:o.mode},null,8,["editor","defaultConfig","mode"]),(0,r.Wm)(u,{style:{height:"500px","overflow-y":"hidden"},modelValue:o.valueHtml,"onUpdate:modelValue":e[0]||(e[0]=t=>o.valueHtml=t),defaultConfig:o.editorConfig,mode:o.mode,onOnCreated:o.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])}var a,s=n(4870);n(1703),n(2120),n(2801),n(2262),n(4506),n(6699),n(8675),n(3462),n(6314);if("undefined"===typeof n.g){if("ActiveXObject"in window){var l="抱歉，wangEditor V5+ 版本开始，不在支持 IE 浏览器";l+="\n Sorry, wangEditor V5+ versions do not support IE browser.",console.error(l)}u(),c()}else n.g&&(null===(a=n.g.navigator)||void 0===a?void 0:a.userAgent.match("QQBrowser"))&&(u(),c());function u(){"undefined"===typeof globalThis&&(window.globalThis=window)}function c(){"undefined"===typeof AggregateError&&(window.AggregateError=function(t,e){var n=new Error(e);return n.errors=t,n})}if("object"===typeof n.g){var h=Object.getOwnPropertyDescriptor(n.g,"window");n.g.window&&!h.set||(n.g.window=n.g,n.g.requestAnimationFrame=function(){},n.g.navigator={userAgent:""},n.g.location={hostname:"0.0.0.0",port:0,protocol:"http:"},n.g.btoa=function(){},n.g.crypto={getRandomValues:function(t){return nodeCrypto.randomFillSync(t)}})}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function d(t){return"[object Object]"===Object.prototype.toString.call(t)}function p(t){var e,n;return!1!==d(t)&&(e=t.constructor,void 0===e||(n=e.prototype,!1!==d(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=rt[t],o=i?"function"==typeof i?i.apply(null,n):i:"unknown error nr: "+t;throw Error("[Immer] "+o)}function m(t){return!!t&&!!t[nt]}function g(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===it}(t)||Array.isArray(t)||!!t[et]||!!t.constructor[et]||S(t)||M(t))}function v(t,e,n){void 0===n&&(n=!1),0===y(t)?(n?Object.keys:ot)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function y(t){var e=t[nt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:S(t)?2:M(t)?3:0}function b(t,e){return 2===y(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){return 2===y(t)?t.get(e):t[e]}function _(t,e,n){var r=y(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function w(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function S(t){return J&&t instanceof Map}function M(t){return Q&&t instanceof Set}function E(t){return t.o||t.t}function C(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=at(t);delete e[nt];for(var n=ot(e),r=0;r<n.length;r++){var i=n[r],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function T(t,e){return void 0===e&&(e=!1),D(t)||m(t)||!g(t)||(y(t)>1&&(t.set=t.add=t.clear=t.delete=A),Object.freeze(t),e&&v(t,(function(t,e){return T(e,!0)}),!0)),t}function A(){f(2)}function D(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function P(t){var e=st[t];return e||f(18,t),e}function R(){return Z||f(0),Z}function L(t,e){e&&(P("Patches"),t.u=[],t.s=[],t.v=e)}function O(t){k(t),t.p.forEach(N),t.p=null}function k(t){t===Z&&(Z=t.l)}function I(t){return Z={p:[],l:Z,h:t,m:!0,_:0}}function N(t){var e=t[nt];0===e.i||1===e.i?e.j():e.O=!0}function B(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||P("ES5").S(e,t,r),r?(n[nt].P&&(O(e),f(4)),g(t)&&(t=F(e,t),e.l||U(e,t)),e.u&&P("Patches").M(n[nt],t,e.u,e.s)):t=F(e,n,[]),O(e),e.u&&e.v(e.u,e.s),t!==tt?t:void 0}function F(t,e,n){if(D(e))return e;var r=e[nt];if(!r)return v(e,(function(i,o){return z(t,r,e,i,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return U(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=C(r.k):r.o;v(3===r.i?new Set(i):i,(function(e,o){return z(t,r,i,e,o,n)})),U(t,i,!1),n&&t.u&&P("Patches").R(r,n,t.u,t.s)}return r.o}function z(t,e,n,r,i,o){if(i===n&&f(5),m(i)){var a=F(t,i,o&&e&&3!==e.i&&!b(e.D,r)?o.concat(r):void 0);if(_(n,r,a),!m(a))return;t.m=!1}if(g(i)&&!D(i)){if(!t.h.F&&t._<1)return;F(t,i),e&&e.A.l||U(t,i)}}function U(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&T(e,n)}function j(t,e){var n=t[nt];return(n?E(n):t)[e]}function V(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function H(t){t.P||(t.P=!0,t.l&&H(t.l))}function W(t){t.o||(t.o=C(t.t))}function G(t,e,n){var r=S(e)?P("MapSet").N(e,n):M(e)?P("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:R(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=r,o=lt;n&&(i=[r],o=ut);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(e,n):P("ES5").J(e,n);return(n?n.A:R()).p.push(r),r}function q(t){return m(t)||f(22,t),function t(e){if(!g(e))return e;var n,r=e[nt],i=y(e);if(r){if(!r.P&&(r.i<4||!P("ES5").K(r)))return r.t;r.I=!0,n=X(e,i),r.I=!1}else n=X(e,i);return v(n,(function(e,i){r&&x(r.t,e)===i||_(n,e,t(i))})),3===i?new Set(n):n}(t)}function X(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return C(t)}var Y,Z,K="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),J="undefined"!=typeof Map,Q="undefined"!=typeof Set,$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,tt=K?Symbol.for("immer-nothing"):((Y={})["immer-nothing"]=!0,Y),et=K?Symbol.for("immer-draftable"):"__$immer_draftable",nt=K?Symbol.for("immer-state"):"__$immer_state",rt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},it=""+Object.prototype.constructor,ot="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,at=Object.getOwnPropertyDescriptors||function(t){var e={};return ot(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},st={},lt={get:function(t,e){if(e===nt)return t;var n=E(t);if(!b(n,e))return function(t,e,n){var r,i=V(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!g(r)?r:r===j(t.t,e)?(W(t),t.o[e]=G(t.A.h,r,t)):r},has:function(t,e){return e in E(t)},ownKeys:function(t){return Reflect.ownKeys(E(t))},set:function(t,e,n){var r=V(E(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=j(E(t),e),o=null==i?void 0:i[nt];if(o&&o.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(w(n,i)&&(void 0!==n||b(t.t,e)))return!0;W(t),H(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==j(t.t,e)||e in t.t?(t.D[e]=!1,W(t),H(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=E(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){f(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){f(12)}},ut={};v(lt,(function(t,e){ut[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),ut.deleteProperty=function(t,e){return isNaN(parseInt(e))&&f(13),lt.deleteProperty.call(this,t[0],e)},ut.set=function(t,e,n){return"length"!==e&&isNaN(parseInt(e))&&f(14),lt.set.call(this,t[0],e,n,t[0])};var ct=function(){function t(t){var e=this;this.g=$,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&f(6),void 0!==r&&"function"!=typeof r&&f(7),g(t)){var s=I(e),l=G(e,t,void 0),u=!0;try{a=n(l),u=!1}finally{u?O(s):k(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return L(s,r),B(t,s)}),(function(t){throw O(s),t})):(L(s,r),B(a,s))}if(!t||"object"!=typeof t){if((a=n(t))===tt)return;return void 0===a&&(a=t),e.F&&T(a,!0),a}f(21,t)},this.produceWithPatches=function(t,n){return"function"==typeof t?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))}:[e.produce(t,n,(function(t,e){r=t,i=e})),r,i];var r,i},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){g(t)||f(8),m(t)&&(t=q(t));var e=I(this),n=G(this,t,void 0);return n[nt].C=!0,k(e),n},e.finishDraft=function(t,e){var n=t&&t[nt];n&&n.C||f(9),n.I&&f(10);var r=n.A;return L(r,e),B(void 0,r)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!$&&f(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=P("Patches").$;return m(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),ht=new ct,dt=ht.produce;ht.produceWithPatches.bind(ht),ht.setAutoFreeze.bind(ht),ht.setUseProxies.bind(ht),ht.applyPatches.bind(ht);var pt=ht.createDraft.bind(ht),ft=ht.finishDraft.bind(ht);function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gt=new WeakMap,vt=new WeakMap,yt=new WeakMap,bt=new WeakMap,xt=new WeakMap,_t=new WeakMap;function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mt=()=>{var t={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:e=>{for(var n of ue.pathRefs(t))be.transform(n,e);for(var r of ue.pointRefs(t))Se.transform(r,e);for(var i of ue.rangeRefs(t))Ae.transform(i,e);var o=new Set,a=[],s=t=>{if(t){var e=t.join(",");o.has(e)||(o.add(e),a.push(t))}},l=gt.get(t)||[],u=Et(e);for(var c of l){var h=ye.transform(c,e);s(h)}for(var d of u)s(d);gt.set(t,a),$e.transform(t,e),t.operations.push(e),ue.normalize(t),"set_selection"===e.type&&(t.marks=null),vt.get(t)||(vt.set(t,!0),Promise.resolve().then((()=>{vt.set(t,!1),t.onChange(),t.operations=[]})))},addMark:(e,n)=>{var{selection:r}=t;if(r)if(Te.isExpanded(r))$e.setNodes(t,{[e]:n},{match:ke.isText,split:!0});else{var i=St(St({},ue.marks(t)||{}),{},{[e]:n});t.marks=i,vt.get(t)||t.onChange()}},deleteBackward:e=>{var{selection:n}=t;n&&Te.isCollapsed(n)&&$e.delete(t,{unit:e,reverse:!0})},deleteForward:e=>{var{selection:n}=t;n&&Te.isCollapsed(n)&&$e.delete(t,{unit:e})},deleteFragment:e=>{var{selection:n}=t;n&&Te.isExpanded(n)&&$e.delete(t,{reverse:"backward"===e})},getFragment:()=>{var{selection:e}=t;return e?fe.fragment(t,e):[]},insertBreak:()=>{$e.splitNodes(t,{always:!0})},insertFragment:e=>{$e.insertFragment(t,e)},insertNode:e=>{$e.insertNodes(t,e)},insertText:e=>{var{selection:n,marks:r}=t;if(n){if(r){var i=St({text:e},r);$e.insertNodes(t,i)}else $e.insertText(t,e);t.marks=null}},normalizeNode:e=>{var[n,r]=e;if(!ke.isText(n))if(re.isElement(n)&&0===n.children.length){var i={text:""};$e.insertNodes(t,i,{at:r.concat(0),voids:!0})}else for(var o=!ue.isEditor(n)&&(re.isElement(n)&&(t.isInline(n)||0===n.children.length||ke.isText(n.children[0])||t.isInline(n.children[0]))),a=0,s=0;s<n.children.length;s++,a++){var l=fe.get(t,r);if(!ke.isText(l)){var u=n.children[s],c=l.children[a-1],h=s===n.children.length-1,d=ke.isText(u)||re.isElement(u)&&t.isInline(u);if(d!==o)$e.removeNodes(t,{at:r.concat(a),voids:!0}),a--;else if(re.isElement(u)){if(t.isInline(u))if(null!=c&&ke.isText(c)){if(h){var p={text:""};$e.insertNodes(t,p,{at:r.concat(a+1),voids:!0}),a++}}else{var f={text:""};$e.insertNodes(t,f,{at:r.concat(a),voids:!0}),a++}}else null!=c&&ke.isText(c)&&(ke.equals(u,c,{loose:!0})?($e.mergeNodes(t,{at:r.concat(a),voids:!0}),a--):""===c.text?($e.removeNodes(t,{at:r.concat(a-1),voids:!0}),a--):""===u.text&&($e.removeNodes(t,{at:r.concat(a),voids:!0}),a--))}}},removeMark:e=>{var{selection:n}=t;if(n)if(Te.isExpanded(n))$e.unsetNodes(t,e,{match:ke.isText,split:!0});else{var r=St({},ue.marks(t)||{});delete r[e],t.marks=r,vt.get(t)||t.onChange()}}};return t},Et=t=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":var{path:e}=t;return ye.levels(e);case"insert_node":var{node:n,path:r}=t,i=ye.levels(r),o=ke.isText(n)?[]:Array.from(fe.nodes(n),(t=>{var[,e]=t;return r.concat(e)}));return[...i,...o];case"merge_node":var{path:a}=t,s=ye.ancestors(a),l=ye.previous(a);return[...s,l];case"move_node":var{path:u,newPath:c}=t;if(ye.equals(u,c))return[];var h=[],d=[];for(var p of ye.ancestors(u)){var f=ye.transform(p,t);h.push(f)}for(var m of ye.ancestors(c)){var g=ye.transform(m,t);d.push(g)}var v=d[d.length-1],y=c[c.length-1],b=v.concat(y);return[...h,...d,b];case"remove_node":var{path:x}=t,_=ye.ancestors(x);return[..._];case"split_node":var{path:w}=t,S=ye.levels(w),M=ye.next(w);return[...S,M];default:return[]}};function Ct(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Tt(t,e){if(null==t)return{};var n,r,i=Ct(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var At,Dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!e,r=e?Nt(t):t,i=At.None,o=At.None,a=0,s=null,l=null;for(var u of r){var c=u.codePointAt(0);if(!c)break;var h=Yt(u,c);if([i,o]=n?[o,h]:[h,i],Zt(i,At.ZWJ)&&Zt(o,At.ExtPict)&&(s=$t(n?t.substring(0,a):t.substring(0,t.length-a)),!s))break;if(Zt(i,At.RI)&&Zt(o,At.RI)&&(l=null!==l?!l:!!n||ee(t.substring(0,t.length-a)),!l))break;if(i!==At.None&&o!==At.None&&Jt(i,o))break;a+=u.length}return a||1},Pt=/\s/,Rt=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Lt=/['\u2018\u2019]/,Ot=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=!1;while(t.length>0){var i=Dt(t,e),[o,a]=kt(t,i,e);if(It(o,a,e))r=!0,n+=i;else{if(r)break;n+=i}t=a}return n},kt=(t,e,n)=>{if(n){var r=t.length-e;return[t.slice(r,t.length),t.slice(0,r)]}return[t.slice(0,e),t.slice(e)]},It=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Pt.test(e))return!1;if(Lt.test(e)){var i=Dt(n,r),[o,a]=kt(n,i,r);if(t(o,a,r))return!0}return!Rt.test(e)},Nt=function*(t){for(var e=t.length-1,n=0;n<t.length;n++){var r=t.charAt(e-n);if(Ft(r.charCodeAt(0))){var i=t.charAt(e-n-1);if(Bt(i.charCodeAt(0))){yield i+r,n++;continue}}yield r}},Bt=t=>t>=55296&&t<=56319,Ft=t=>t>=56320&&t<=57343;(function(t){t[t["None"]=0]="None",t[t["Extend"]=1]="Extend",t[t["ZWJ"]=2]="ZWJ",t[t["RI"]=4]="RI",t[t["Prepend"]=8]="Prepend",t[t["SpacingMark"]=16]="SpacingMark",t[t["L"]=32]="L",t[t["V"]=64]="V",t[t["T"]=128]="T",t[t["LV"]=256]="LV",t[t["LVT"]=512]="LVT",t[t["ExtPict"]=1024]="ExtPict",t[t["Any"]=2048]="Any"})(At||(At={}));var zt=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Ut=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,jt=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Vt=/^[\u1100-\u115F\uA960-\uA97C]$/,Ht=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Wt=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Gt=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,qt=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Xt=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Yt=(t,e)=>{var n=At.Any;return-1!==t.search(zt)&&(n|=At.Extend),8205===e&&(n|=At.ZWJ),e>=127462&&e<=127487&&(n|=At.RI),-1!==t.search(Ut)&&(n|=At.Prepend),-1!==t.search(jt)&&(n|=At.SpacingMark),-1!==t.search(Vt)&&(n|=At.L),-1!==t.search(Ht)&&(n|=At.V),-1!==t.search(Wt)&&(n|=At.T),-1!==t.search(Gt)&&(n|=At.LV),-1!==t.search(qt)&&(n|=At.LVT),-1!==t.search(Xt)&&(n|=At.ExtPict),n};function Zt(t,e){return 0!==(t&e)}var Kt=[[At.L,At.L|At.V|At.LV|At.LVT],[At.LV|At.V,At.V|At.T],[At.LVT|At.T,At.T],[At.Any,At.Extend|At.ZWJ],[At.Any,At.SpacingMark],[At.Prepend,At.Any],[At.ZWJ,At.ExtPict],[At.RI,At.RI]];function Jt(t,e){return-1===Kt.findIndex((n=>Zt(t,n[0])&&Zt(e,n[1])))}var Qt=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,$t=t=>-1!==t.search(Qt),te=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,ee=t=>{var e=t.match(te);if(null===e)return!1;var n=e[0].length/2;return n%2===1},ne=t=>p(t)&&fe.isNodeList(t.children)&&!ue.isEditor(t),re={isAncestor(t){return p(t)&&fe.isNodeList(t.children)},isElement:ne,isElementList(t){return Array.isArray(t)&&t.every((t=>re.isElement(t)))},isElementProps(t){return void 0!==t.children},isElementType:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return ne(t)&&t[n]===e},matches(t,e){for(var n in e)if("children"!==n&&t[n]!==e[n])return!1;return!0}},ie=["text"],oe=["text"];function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le=new WeakMap,ue={above(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:n=!1,mode:r="lowest",at:i=t.selection,match:o}=e;if(i){var a=ue.path(t,i),s="lowest"===r;for(var[l,u]of ue.levels(t,{at:a,voids:n,match:o,reverse:s}))if(!ke.isText(l)&&!ye.equals(a,u))return[l,u]}},addMark(t,e,n){t.addMark(e,n)},after(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ue.point(t,e,{edge:"end"}),o=ue.end(t,[]),a={anchor:i,focus:o},{distance:s=1}=r,l=0;for(var u of ue.positions(t,se(se({},r),{},{at:a}))){if(l>s)break;0!==l&&(n=u),l++}return n},before(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ue.start(t,[]),o=ue.point(t,e,{edge:"start"}),a={anchor:i,focus:o},{distance:s=1}=r,l=0;for(var u of ue.positions(t,se(se({},r),{},{at:a,reverse:!0}))){if(l>s)break;0!==l&&(n=u),l++}return n},deleteBackward(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=e;t.deleteBackward(n)},deleteForward(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=e;t.deleteForward(n)},deleteFragment(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{direction:n="forward"}=e;t.deleteFragment(n)},edges(t,e){return[ue.start(t,e),ue.end(t,e)]},end(t,e){return ue.point(t,e,{edge:"end"})},first(t,e){var n=ue.path(t,e,{edge:"start"});return ue.node(t,n)},fragment(t,e){var n=ue.range(t,e),r=fe.fragment(t,n);return r},hasBlocks(t,e){return e.children.some((e=>ue.isBlock(t,e)))},hasInlines(t,e){return e.children.some((e=>ke.isText(e)||ue.isInline(t,e)))},hasTexts(t,e){return e.children.every((t=>ke.isText(t)))},insertBreak(t){t.insertBreak()},insertFragment(t,e){t.insertFragment(e)},insertNode(t,e){t.insertNode(e)},insertText(t,e){t.insertText(e)},isBlock(t,e){return re.isElement(e)&&!t.isInline(e)},isEditor(t){if(!p(t))return!1;var e=le.get(t);if(void 0!==e)return e;var n="function"===typeof t.addMark&&"function"===typeof t.apply&&"function"===typeof t.deleteBackward&&"function"===typeof t.deleteForward&&"function"===typeof t.deleteFragment&&"function"===typeof t.insertBreak&&"function"===typeof t.insertFragment&&"function"===typeof t.insertNode&&"function"===typeof t.insertText&&"function"===typeof t.isInline&&"function"===typeof t.isVoid&&"function"===typeof t.normalizeNode&&"function"===typeof t.onChange&&"function"===typeof t.removeMark&&(null===t.marks||p(t.marks))&&(null===t.selection||Te.isRange(t.selection))&&fe.isNodeList(t.children)&&ve.isOperationList(t.operations);return le.set(t,n),n},isEnd(t,e,n){var r=ue.end(t,n);return we.equals(e,r)},isEdge(t,e,n){return ue.isStart(t,e,n)||ue.isEnd(t,e,n)},isEmpty(t,e){var{children:n}=e,[r]=n;return 0===n.length||1===n.length&&ke.isText(r)&&""===r.text&&!t.isVoid(e)},isInline(t,e){return re.isElement(e)&&t.isInline(e)},isNormalizing(t){var e=yt.get(t);return void 0===e||e},isStart(t,e,n){if(0!==e.offset)return!1;var r=ue.start(t,n);return we.equals(e,r)},isVoid(t,e){return re.isElement(e)&&t.isVoid(e)},last(t,e){var n=ue.path(t,e,{edge:"end"});return ue.node(t,n)},leaf(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ue.path(t,e,n),i=fe.leaf(t,r);return[i,r]},*levels(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=t.selection,reverse:r=!1,voids:i=!1}=e,{match:o}=e;if(null==o&&(o=()=>!0),n){var a=[],s=ue.path(t,n);for(var[l,u]of fe.levels(t,s))if(o(l,u)&&(a.push([l,u]),!i&&ue.isVoid(t,l)))break;r&&a.reverse(),yield*a}},marks(t){var{marks:e,selection:n}=t;if(!n)return null;if(e)return e;if(Te.isExpanded(n)){var[r]=ue.nodes(t,{match:ke.isText});if(r){var[i]=r,o=Tt(i,ie);return o}return{}}var{anchor:a}=n,{path:s}=a,[l]=ue.leaf(t,s);if(0===a.offset){var u=ue.previous(t,{at:s,match:ke.isText}),c=ue.above(t,{match:e=>ue.isBlock(t,e)});if(u&&c){var[h,d]=u,[,p]=c;ye.isAncestor(p,d)&&(l=h)}}var f=Tt(l,oe);return f},next(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=e,{match:i,at:o=t.selection}=e;if(o){var a=ue.after(t,o,{voids:r});if(a){var[,s]=ue.last(t,[]),l=[a.path,s];if(ye.isPath(o)&&0===o.length)throw new Error("Cannot get the next node from the root node!");if(null==i)if(ye.isPath(o)){var[u]=ue.parent(t,o);i=t=>u.children.includes(t)}else i=()=>!0;var[c]=ue.nodes(t,{at:l,match:i,mode:n,voids:r});return c}}},node(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ue.path(t,e,n),i=fe.get(t,r);return[i,r]},*nodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=t.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:a=!1}=e,{match:s}=e;if(s||(s=()=>!0),n){var l,u;if(ce.isSpan(n))l=n[0],u=n[1];else{var c=ue.path(t,n,{edge:"start"}),h=ue.path(t,n,{edge:"end"});l=o?h:c,u=o?c:h}var d,p=fe.nodes(t,{reverse:o,from:l,to:u,pass:e=>{var[n]=e;return!a&&ue.isVoid(t,n)}}),f=[];for(var[m,g]of p){var v=d&&0===ye.compare(g,d[1]);if("highest"!==r||!v)if(s(m,g))if("lowest"===r&&v)d=[m,g];else{var y="lowest"===r?d:[m,g];y&&(i?f.push(y):yield y),d=[m,g]}else if(i&&!v&&ke.isText(m))return}"lowest"===r&&d&&(i?f.push(d):yield d),i&&(yield*f)}},normalize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:n=!1}=e,r=t=>gt.get(t)||[];if(ue.isNormalizing(t)){if(n){var i=Array.from(fe.nodes(t),(t=>{var[,e]=t;return e}));gt.set(t,i)}0!==r(t).length&&ue.withoutNormalizing(t,(()=>{for(var e of r(t))if(fe.has(t,e)){var n=ue.node(t,e),[i,o]=n;re.isElement(i)&&0===i.children.length&&t.normalizeNode(n)}var a=42*r(t).length,s=0;while(0!==r(t).length){if(s>a)throw new Error("\n            Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var l=r(t).pop();if(fe.has(t,l)){var u=ue.node(t,l);t.normalizeNode(u)}s++}}))}},parent(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ue.path(t,e,n),i=ye.parent(r),o=ue.node(t,i);return o},path(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:r,edge:i}=n;if(ye.isPath(e))if("start"===i){var[,o]=fe.first(t,e);e=o}else if("end"===i){var[,a]=fe.last(t,e);e=a}return Te.isRange(e)&&(e="start"===i?Te.start(e):"end"===i?Te.end(e):ye.common(e.anchor.path,e.focus.path)),we.isPoint(e)&&(e=e.path),null!=r&&(e=e.slice(0,r)),e},hasPath(t,e){return fe.has(t,e)},pathRef(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,i={current:e,affinity:r,unref(){var{current:e}=i,n=ue.pathRefs(t);return n.delete(i),i.current=null,e}},o=ue.pathRefs(t);return o.add(i),i},pathRefs(t){var e=bt.get(t);return e||(e=new Set,bt.set(t,e)),e},point(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:r="start"}=n;if(ye.isPath(e)){var i;if("end"===r){var[,o]=fe.last(t,e);i=o}else{var[,a]=fe.first(t,e);i=a}var s=fe.get(t,i);if(!ke.isText(s))throw new Error("Cannot get the ".concat(r," point in the node at path [").concat(e,"] because it has no ").concat(r," text node."));return{path:i,offset:"end"===r?s.text.length:0}}if(Te.isRange(e)){var[l,u]=Te.edges(e);return"start"===r?l:u}return e},pointRef(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,i={current:e,affinity:r,unref(){var{current:e}=i,n=ue.pointRefs(t);return n.delete(i),i.current=null,e}},o=ue.pointRefs(t);return o.add(i),i},pointRefs(t){var e=xt.get(t);return e||(e=new Set,xt.set(t,e)),e},*positions(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=t.selection,unit:r="offset",reverse:i=!1,voids:o=!1}=e;if(n){var a=ue.range(t,n),[s,l]=Te.edges(a),u=i?l:s,c=!1,h="",d=0,p=0,f=0;for(var[m,g]of ue.nodes(t,{at:n,reverse:i,voids:o})){if(re.isElement(m)){if(!o&&t.isVoid(m)){yield ue.start(t,g);continue}if(t.isInline(m))continue;if(ue.hasInlines(t,m)){var v=ye.isAncestor(g,l.path)?l:ue.end(t,g),y=ye.isAncestor(g,s.path)?s:ue.start(t,g);h=ue.string(t,{anchor:y,focus:v},{voids:o}),c=!0}}if(ke.isText(m)){var b=ye.equals(g,u.path);b?(p=i?u.offset:m.text.length-u.offset,f=u.offset):(p=m.text.length,f=i?p:0),(b||c||"offset"===r)&&(yield{path:g,offset:f},c=!1);while(1){if(0===d){if(""===h)break;d=x(h,r,i),h=kt(h,d,i)[1]}if(f=i?f-d:f+d,p-=d,p<0){d=-p;break}d=0,yield{path:g,offset:f}}}}}function x(t,e,n){return"character"===e?Dt(t,n):"word"===e?Ot(t,n):"line"===e||"block"===e?t.length:1}},previous(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=e,{match:i,at:o=t.selection}=e;if(o){var a=ue.before(t,o,{voids:r});if(a){var[,s]=ue.first(t,[]),l=[a.path,s];if(ye.isPath(o)&&0===o.length)throw new Error("Cannot get the previous node from the root node!");if(null==i)if(ye.isPath(o)){var[u]=ue.parent(t,o);i=t=>u.children.includes(t)}else i=()=>!0;var[c]=ue.nodes(t,{reverse:!0,at:l,match:i,mode:n,voids:r});return c}}},range(t,e,n){if(Te.isRange(e)&&!n)return e;var r=ue.start(t,e),i=ue.end(t,n||e);return{anchor:r,focus:i}},rangeRef(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,i={current:e,affinity:r,unref(){var{current:e}=i,n=ue.rangeRefs(t);return n.delete(i),i.current=null,e}},o=ue.rangeRefs(t);return o.add(i),i},rangeRefs(t){var e=_t.get(t);return e||(e=new Set,_t.set(t,e)),e},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){yt.set(t,e)},start(t,e){return ue.point(t,e,{edge:"start"})},string(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,i=ue.range(t,e),[o,a]=Te.edges(i),s="";for(var[l,u]of ue.nodes(t,{at:i,match:ke.isText,voids:r})){var c=l.text;ye.equals(u,a.path)&&(c=c.slice(0,a.offset)),ye.equals(u,o.path)&&(c=c.slice(o.offset)),s+=c}return s},unhangRange(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,[i,o]=Te.edges(e);if(0!==i.offset||0!==o.offset||Te.isCollapsed(e))return e;var a=ue.above(t,{at:o,match:e=>ue.isBlock(t,e)}),s=a?a[1]:[],l=ue.start(t,[]),u={anchor:l,focus:o},c=!0;for(var[h,d]of ue.nodes(t,{at:u,match:ke.isText,reverse:!0,voids:r}))if(c)c=!1;else if(""!==h.text||ye.isBefore(d,s)){o={path:d,offset:h.text.length};break}return{anchor:i,focus:o}},void(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ue.above(t,se(se({},e),{},{match:e=>ue.isVoid(t,e)}))},withoutNormalizing(t,e){var n=ue.isNormalizing(t);ue.setNormalizing(t,!1);try{e()}finally{ue.setNormalizing(t,n)}ue.normalize(t)}},ce={isSpan(t){return Array.isArray(t)&&2===t.length&&t.every(ye.isPath)}},he=["children"],de=["text"],pe=new WeakMap,fe={ancestor(t,e){var n=fe.get(t,e);if(ke.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(n));return n},*ancestors(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r of ye.ancestors(e,n)){var i=fe.ancestor(t,r),o=[i,r];yield o}},child(t,e){if(ke.isText(t))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(t)));var n=t.children[e];if(null==n)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(JSON.stringify(t)));return n},*children(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:r=!1}=n,i=fe.ancestor(t,e),{children:o}=i,a=r?o.length-1:0;while(r?a>=0:a<o.length){var s=fe.child(i,a),l=e.concat(a);yield[s,l],a=r?a-1:a+1}},common(t,e,n){var r=ye.common(e,n),i=fe.get(t,r);return[i,r]},descendant(t,e){var n=fe.get(t,e);if(ue.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(n));return n},*descendants(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of fe.nodes(t,e))0!==r.length&&(yield[n,r])},*elements(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of fe.nodes(t,e))re.isElement(n)&&(yield[n,r])},extractProps(t){if(re.isAncestor(t)){var e=Tt(t,he);return e}e=Tt(t,de);return e},first(t,e){var n=e.slice(),r=fe.get(t,n);while(r){if(ke.isText(r)||0===r.children.length)break;r=r.children[0],n.push(0)}return[r,n]},fragment(t,e){if(ke.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(t)));var n=dt({children:t.children},(t=>{var[n,r]=Te.edges(e),i=fe.nodes(t,{reverse:!0,pass:t=>{var[,n]=t;return!Te.includes(e,n)}});for(var[,o]of i){if(!Te.includes(e,o)){var a=fe.parent(t,o),s=o[o.length-1];a.children.splice(s,1)}if(ye.equals(o,r.path)){var l=fe.leaf(t,o);l.text=l.text.slice(0,r.offset)}if(ye.equals(o,n.path)){var u=fe.leaf(t,o);u.text=u.text.slice(n.offset)}}ue.isEditor(t)&&(t.selection=null)}));return n.children},get(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(ke.isText(n)||!n.children[i])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(JSON.stringify(t)));n=n.children[i]}return n},has(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(ke.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(t){return ke.isText(t)||re.isElement(t)||ue.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=pe.get(t);if(void 0!==e)return e;var n=t.every((t=>fe.isNode(t)));return pe.set(t,n),n},last(t,e){var n=e.slice(),r=fe.get(t,n);while(r){if(ke.isText(r)||0===r.children.length)break;var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(t,e){var n=fe.get(t,e);if(!ke.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(n));return n},*levels(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r of ye.levels(e,n)){var i=fe.get(t,r);yield[i,r]}},matches(t,e){return re.isElement(t)&&re.isElementProps(e)&&re.matches(t,e)||ke.isText(t)&&ke.isTextProps(e)&&ke.matches(t,e)},*nodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:n,reverse:r=!1}=e,{from:i=[],to:o}=e,a=new Set,s=[],l=t;while(1){if(o&&(r?ye.isBefore(s,o):ye.isAfter(s,o)))break;if(a.has(l)||(yield[l,s]),a.has(l)||ke.isText(l)||0===l.children.length||null!=n&&!1!==n([l,s])){if(0===s.length)break;if(!r){var u=ye.next(s);if(fe.has(t,u)){s=u,l=fe.get(t,s);continue}}if(r&&0!==s[s.length-1]){var c=ye.previous(s);s=c,l=fe.get(t,s)}else s=ye.parent(s),l=fe.get(t,s),a.add(l)}else{a.add(l);var h=r?l.children.length-1:0;ye.isAncestor(s,i)&&(h=i[s.length]),s=s.concat(h),l=fe.get(t,s)}}},parent(t,e){var n=ye.parent(e),r=fe.get(t,n);if(ke.isText(r))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return r},string(t){return ke.isText(t)?t.text:t.children.map(fe.string).join("")},*texts(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of fe.nodes(t,e))ke.isText(n)&&(yield[n,r])}};function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ve={isNodeOperation(t){return ve.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!p(t))return!1;switch(t.type){case"insert_node":return ye.isPath(t.path)&&fe.isNode(t.node);case"insert_text":return"number"===typeof t.offset&&"string"===typeof t.text&&ye.isPath(t.path);case"merge_node":return"number"===typeof t.position&&ye.isPath(t.path)&&p(t.properties);case"move_node":return ye.isPath(t.path)&&ye.isPath(t.newPath);case"remove_node":return ye.isPath(t.path)&&fe.isNode(t.node);case"remove_text":return"number"===typeof t.offset&&"string"===typeof t.text&&ye.isPath(t.path);case"set_node":return ye.isPath(t.path)&&p(t.properties)&&p(t.newProperties);case"set_selection":return null===t.properties&&Te.isRange(t.newProperties)||null===t.newProperties&&Te.isRange(t.properties)||p(t.properties)&&p(t.newProperties);case"split_node":return ye.isPath(t.path)&&"number"===typeof t.position&&p(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every((t=>ve.isOperation(t)))},isSelectionOperation(t){return ve.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return ve.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return ge(ge({},t),{},{type:"remove_node"});case"insert_text":return ge(ge({},t),{},{type:"remove_text"});case"merge_node":return ge(ge({},t),{},{type:"split_node",path:ye.previous(t.path)});case"move_node":var{newPath:e,path:n}=t;if(ye.equals(e,n))return t;if(ye.isSibling(n,e))return ge(ge({},t),{},{path:e,newPath:n});var r=ye.transform(n,t),i=ye.transform(ye.next(n),t);return ge(ge({},t),{},{path:r,newPath:i});case"remove_node":return ge(ge({},t),{},{type:"insert_node"});case"remove_text":return ge(ge({},t),{},{type:"insert_text"});case"set_node":var{properties:o,newProperties:a}=t;return ge(ge({},t),{},{properties:a,newProperties:o});case"set_selection":var{properties:s,newProperties:l}=t;return ge(ge({},t),{},null==s?{properties:l,newProperties:null}:null==l?{properties:null,newProperties:s}:{properties:l,newProperties:s});case"split_node":return ge(ge({},t),{},{type:"merge_node",path:ye.next(t.path)})}}},ye={ancestors(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=e,r=ye.levels(t,e);return r=n?r.slice(1):r.slice(0,-1),r},common(t,e){for(var n=[],r=0;r<t.length&&r<e.length;r++){var i=t[r],o=e[r];if(i!==o)break;n.push(i)}return n},compare(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0},endsAfter(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],a=e[n];return ye.equals(r,i)&&o>a},endsAt(t,e){var n=t.length,r=t.slice(0,n),i=e.slice(0,n);return ye.equals(r,i)},endsBefore(t,e){var n=t.length-1,r=t.slice(0,n),i=e.slice(0,n),o=t[n],a=e[n];return ye.equals(r,i)&&o<a},equals(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return 1===ye.compare(t,e)},isAncestor(t,e){return t.length<e.length&&0===ye.compare(t,e)},isBefore(t,e){return-1===ye.compare(t,e)},isChild(t,e){return t.length===e.length+1&&0===ye.compare(t,e)},isCommon(t,e){return t.length<=e.length&&0===ye.compare(t,e)},isDescendant(t,e){return t.length>e.length&&0===ye.compare(t,e)},isParent(t,e){return t.length+1===e.length&&0===ye.compare(t,e)},isPath(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])},isSibling(t,e){if(t.length!==e.length)return!1;var n=t.slice(0,-1),r=e.slice(0,-1),i=t[t.length-1],o=e[e.length-1];return i!==o&&ye.equals(n,r)},levels(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=e,r=[],i=0;i<=t.length;i++)r.push(t.slice(0,i));return n&&r.reverse(),r},next(t){if(0===t.length)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},parent(t){if(0===t.length)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(0===t.length)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!ye.isAncestor(e,t)&&!ye.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return dt(t,(r=>{var{affinity:i="forward"}=n;if(t&&0!==(null===t||void 0===t?void 0:t.length)){if(null===r)return null;switch(e.type){case"insert_node":var{path:o}=e;(ye.equals(o,r)||ye.endsBefore(o,r)||ye.isAncestor(o,r))&&(r[o.length-1]+=1);break;case"remove_node":var{path:a}=e;if(ye.equals(a,r)||ye.isAncestor(a,r))return null;ye.endsBefore(a,r)&&(r[a.length-1]-=1);break;case"merge_node":var{path:s,position:l}=e;ye.equals(s,r)||ye.endsBefore(s,r)?r[s.length-1]-=1:ye.isAncestor(s,r)&&(r[s.length-1]-=1,r[s.length]+=l);break;case"split_node":var{path:u,position:c}=e;if(ye.equals(u,r)){if("forward"===i)r[r.length-1]+=1;else if("backward"!==i)return null}else ye.endsBefore(u,r)?r[u.length-1]+=1:ye.isAncestor(u,r)&&t[u.length]>=c&&(r[u.length-1]+=1,r[u.length]-=c);break;case"move_node":var{path:h,newPath:d}=e;if(ye.equals(h,d))return;if(ye.isAncestor(h,r)||ye.equals(h,r)){var p=d.slice();return ye.endsBefore(h,d)&&h.length<d.length&&(p[h.length-1]-=1),p.concat(r.slice(h.length))}ye.isSibling(h,d)&&(ye.isAncestor(d,r)||ye.equals(d,r))?ye.endsBefore(h,r)?r[h.length-1]-=1:r[h.length-1]+=1:ye.endsBefore(d,r)||ye.equals(d,r)||ye.isAncestor(d,r)?(ye.endsBefore(h,r)&&(r[h.length-1]-=1),r[d.length-1]+=1):ye.endsBefore(h,r)&&(ye.equals(d,r)&&(r[d.length-1]+=1),r[h.length-1]-=1);break}}}))}},be={transform(t,e){var{current:n,affinity:r}=t;if(null!=n){var i=ye.transform(n,e,{affinity:r});t.current=i,null==i&&t.unref()}}};function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var we={compare(t,e){var n=ye.compare(t.path,e.path);return 0===n?t.offset<e.offset?-1:t.offset>e.offset?1:0:n},isAfter(t,e){return 1===we.compare(t,e)},isBefore(t,e){return-1===we.compare(t,e)},equals(t,e){return t.offset===e.offset&&ye.equals(t.path,e.path)},isPoint(t){return p(t)&&"number"===typeof t.offset&&ye.isPath(t.path)},transform(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return dt(t,(t=>{if(null===t)return null;var{affinity:r="forward"}=n,{path:i,offset:o}=t;switch(e.type){case"insert_node":case"move_node":t.path=ye.transform(i,e,n);break;case"insert_text":ye.equals(e.path,i)&&e.offset<=o&&(t.offset+=e.text.length);break;case"merge_node":ye.equals(e.path,i)&&(t.offset+=e.position),t.path=ye.transform(i,e,n);break;case"remove_text":ye.equals(e.path,i)&&e.offset<=o&&(t.offset-=Math.min(o-e.offset,e.text.length));break;case"remove_node":if(ye.equals(e.path,i)||ye.isAncestor(e.path,i))return null;t.path=ye.transform(i,e,n);break;case"split_node":if(ye.equals(e.path,i)){if(e.position===o&&null==r)return null;(e.position<o||e.position===o&&"forward"===r)&&(t.offset-=e.position,t.path=ye.transform(i,e,_e(_e({},n),{},{affinity:"forward"})))}else t.path=ye.transform(i,e,n);break}}))}},Se={transform(t,e){var{current:n,affinity:r}=t;if(null!=n){var i=we.transform(n,e,{affinity:r});t.current=i,null==i&&t.unref()}}},Me=["anchor","focus"];function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Te={edges(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=e,{anchor:r,focus:i}=t;return Te.isBackward(t)===n?[r,i]:[i,r]},end(t){var[,e]=Te.edges(t);return e},equals(t,e){return we.equals(t.anchor,e.anchor)&&we.equals(t.focus,e.focus)},includes(t,e){if(Te.isRange(e)){if(Te.includes(t,e.anchor)||Te.includes(t,e.focus))return!0;var[n,r]=Te.edges(t),[i,o]=Te.edges(e);return we.isBefore(n,i)&&we.isAfter(r,o)}var[a,s]=Te.edges(t),l=!1,u=!1;return we.isPoint(e)?(l=we.compare(e,a)>=0,u=we.compare(e,s)<=0):(l=ye.compare(e,a.path)>=0,u=ye.compare(e,s.path)<=0),l&&u},intersection(t,e){var n=Tt(t,Me),[r,i]=Te.edges(t),[o,a]=Te.edges(e),s=we.isBefore(r,o)?o:r,l=we.isBefore(i,a)?i:a;return we.isBefore(l,s)?null:Ce({anchor:s,focus:l},n)},isBackward(t){var{anchor:e,focus:n}=t;return we.isAfter(e,n)},isCollapsed(t){var{anchor:e,focus:n}=t;return we.equals(e,n)},isExpanded(t){return!Te.isCollapsed(t)},isForward(t){return!Te.isBackward(t)},isRange(t){return p(t)&&we.isPoint(t.anchor)&&we.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=Te.edges(t);return e},transform(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return dt(t,(t=>{if(null===t)return null;var r,i,{affinity:o="inward"}=n;if("inward"===o){var a=Te.isCollapsed(t);Te.isForward(t)?(r="forward",i=a?r:"backward"):(r="backward",i=a?r:"forward")}else"outward"===o?Te.isForward(t)?(r="backward",i="forward"):(r="forward",i="backward"):(r=o,i=o);var s=we.transform(t.anchor,e,{affinity:r}),l=we.transform(t.focus,e,{affinity:i});if(!s||!l)return null;t.anchor=s,t.focus=l}))}},Ae={transform(t,e){var{current:n,affinity:r}=t;if(null!=n){var i=Te.transform(n,e,{affinity:r});t.current=i,null==i&&t.unref()}}},De=(t,e)=>{for(var n in t){var r=t[n],i=e[n];if(p(r)&&p(i)){if(!De(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var a in e)if(void 0===t[a]&&void 0!==e[a])return!1;return!0},Pe=["text"],Re=["anchor","focus"];function Le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ke={equals(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:r=!1}=n;function i(t){var e=Tt(t,Pe);return e}return De(r?i(t):t,r?i(e):e)},isText(t){return p(t)&&"string"===typeof t.text},isTextList(t){return Array.isArray(t)&&t.every((t=>ke.isText(t)))},isTextProps(t){return void 0!==t.text},matches(t,e){for(var n in e)if("text"!==n&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0},decorations(t,e){var n=[Oe({},t)];for(var r of e){var i=Tt(r,Re),[o,a]=Te.edges(r),s=[],l=0;for(var u of n){var{length:c}=u.text,h=l;if(l+=c,o.offset<=h&&a.offset>=l)Object.assign(u,i),s.push(u);else if(o.offset!==a.offset&&(o.offset===l||a.offset===h)||o.offset>l||a.offset<h||a.offset===h&&0!==h)s.push(u);else{var d=u,p=void 0,f=void 0;if(a.offset<l){var m=a.offset-h;f=Oe(Oe({},d),{},{text:d.text.slice(m)}),d=Oe(Oe({},d),{},{text:d.text.slice(0,m)})}if(o.offset>h){var g=o.offset-h;p=Oe(Oe({},d),{},{text:d.text.slice(0,g)}),d=Oe(Oe({},d),{},{text:d.text.slice(g)})}Object.assign(d,i),p&&s.push(p),s.push(d),f&&s.push(f)}}n=s}return n}};function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Be=(t,e,n)=>{switch(n.type){case"insert_node":var{path:r,node:i}=n,o=fe.parent(t,r),a=r[r.length-1];if(a>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(a,0,i),e)for(var[s,l]of Te.points(e))e[l]=we.transform(s,n);break;case"insert_text":var{path:u,offset:c,text:h}=n;if(0===h.length)break;var d=fe.leaf(t,u),p=d.text.slice(0,c),f=d.text.slice(c);if(d.text=p+h+f,e)for(var[m,g]of Te.points(e))e[g]=we.transform(m,n);break;case"merge_node":var{path:v}=n,y=fe.get(t,v),b=ye.previous(v),x=fe.get(t,b),_=fe.parent(t,v),w=v[v.length-1];if(ke.isText(y)&&ke.isText(x))x.text+=y.text;else{if(ke.isText(y)||ke.isText(x))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(v,"] to nodes of different interfaces: ").concat(y," ").concat(x));x.children.push(...y.children)}if(_.children.splice(w,1),e)for(var[S,M]of Te.points(e))e[M]=we.transform(S,n);break;case"move_node":var{path:E,newPath:C}=n;if(ye.isAncestor(E,C))throw new Error("Cannot move a path [".concat(E,"] to new path [").concat(C,"] because the destination is inside itself."));var T=fe.get(t,E),A=fe.parent(t,E),D=E[E.length-1];A.children.splice(D,1);var P=ye.transform(E,n),R=fe.get(t,ye.parent(P)),L=P[P.length-1];if(R.children.splice(L,0,T),e)for(var[O,k]of Te.points(e))e[k]=we.transform(O,n);break;case"remove_node":var{path:I}=n,N=I[I.length-1],B=fe.parent(t,I);if(B.children.splice(N,1),e)for(var[F,z]of Te.points(e)){var U=we.transform(F,n);if(null!=e&&null!=U)e[z]=U;else{var j=void 0,V=void 0;for(var[H,W]of fe.texts(t)){if(-1!==ye.compare(W,I)){V=[H,W];break}j=[H,W]}var G=!1;j&&V&&(G=ye.equals(V[1],I)?!ye.hasPrevious(V[1]):ye.common(j[1],I).length<ye.common(V[1],I).length),j&&!G?(F.path=j[1],F.offset=j[0].text.length):V?(F.path=V[1],F.offset=0):e=null}}break;case"remove_text":var{path:q,offset:X,text:Y}=n;if(0===Y.length)break;var Z=fe.leaf(t,q),K=Z.text.slice(0,X),J=Z.text.slice(X+Y.length);if(Z.text=K+J,e)for(var[Q,$]of Te.points(e))e[$]=we.transform(Q,n);break;case"set_node":var{path:tt,properties:et,newProperties:nt}=n;if(0===tt.length)throw new Error("Cannot set properties on the root node!");var rt=fe.get(t,tt);for(var it in nt){if("children"===it||"text"===it)throw new Error('Cannot set the "'.concat(it,'" property of nodes!'));var ot=nt[it];null==ot?delete rt[it]:rt[it]=ot}for(var at in et)nt.hasOwnProperty(at)||delete rt[at];break;case"set_selection":var{newProperties:st}=n;if(null==st)e=st;else{if(null==e){if(!Te.isRange(st))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(st)," when there is no current selection."));e=Ne({},st)}for(var lt in st){var ut=st[lt];if(null==ut){if("anchor"===lt||"focus"===lt)throw new Error('Cannot remove the "'.concat(lt,'" selection property'));delete e[lt]}else e[lt]=ut}}break;case"split_node":var{path:ct,position:ht,properties:dt}=n;if(0===ct.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ct,"] because the root node cannot be split."));var pt,ft=fe.get(t,ct),mt=fe.parent(t,ct),gt=ct[ct.length-1];if(ke.isText(ft)){var vt=ft.text.slice(0,ht),yt=ft.text.slice(ht);ft.text=vt,pt=Ne(Ne({},dt),{},{text:yt})}else{var bt=ft.children.slice(0,ht),xt=ft.children.slice(ht);ft.children=bt,pt=Ne(Ne({},dt),{},{children:xt})}if(mt.children.splice(gt+1,0,pt),e)for(var[_t,wt]of Te.points(e))e[wt]=we.transform(_t,n);break}return e},Fe={transform(t,e){t.children=pt(t.children);var n=t.selection&&pt(t.selection);try{n=Be(t,n,e)}finally{t.children=ft(t.children),t.selection=n?m(n)?ft(n):n:null}}},ze=["text"],Ue=["children"];function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var He={insertNodes(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(t,(()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:a,match:s,select:l}=n;if(fe.isNode(e)&&(e=[e]),0!==e.length){var[u]=e;if(a||(a=t.selection?t.selection:t.children.length>0?ue.end(t,[]):[0],l=!0),null==l&&(l=!1),Te.isRange(a))if(r||(a=ue.unhangRange(t,a)),Te.isCollapsed(a))a=a.anchor;else{var[,c]=Te.edges(a),h=ue.pointRef(t,c);$e.delete(t,{at:a}),a=h.unref()}if(we.isPoint(a)){null==s&&(s=ke.isText(u)?t=>ke.isText(t):t.isInline(u)?e=>ke.isText(e)||ue.isInline(t,e):e=>ue.isBlock(t,e));var[d]=ue.nodes(t,{at:a.path,match:s,mode:o,voids:i});if(!d)return;var[,p]=d,f=ue.pathRef(t,p),m=ue.isEnd(t,a,p);$e.splitNodes(t,{at:a,match:s,mode:o,voids:i});var g=f.unref();a=m?ye.next(g):g}var v=ye.parent(a),y=a[a.length-1];if(i||!ue.void(t,{at:v})){for(var b of e){var x=v.concat(y);y++,t.apply({type:"insert_node",path:x,node:b}),a=ye.next(a)}if(a=ye.previous(a),l){var _=ue.end(t,a);_&&$e.select(t,_)}}}}))},liftNodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{at:n=t.selection,mode:r="lowest",voids:i=!1}=e,{match:o}=e;if(null==o&&(o=ye.isPath(n)?qe(t,n):e=>ue.isBlock(t,e)),n){var a=ue.nodes(t,{at:n,match:o,mode:r,voids:i}),s=Array.from(a,(e=>{var[,n]=e;return ue.pathRef(t,n)}));for(var l of s){var u=l.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var c=ue.node(t,ye.parent(u)),[h,d]=c,p=u[u.length-1],{length:f}=h.children;if(1===f){var m=ye.next(d);$e.moveNodes(t,{at:u,to:m,voids:i}),$e.removeNodes(t,{at:d,voids:i})}else if(0===p)$e.moveNodes(t,{at:u,to:d,voids:i});else if(p===f-1){var g=ye.next(d);$e.moveNodes(t,{at:u,to:g,voids:i})}else{var v=ye.next(u),y=ye.next(d);$e.splitNodes(t,{at:v,voids:i}),$e.moveNodes(t,{at:u,to:y,voids:i})}}}}))},mergeNodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{match:n,at:r=t.selection}=e,{hanging:i=!1,voids:o=!1,mode:a="lowest"}=e;if(r){if(null==n)if(ye.isPath(r)){var[s]=ue.parent(t,r);n=t=>s.children.includes(t)}else n=e=>ue.isBlock(t,e);if(!i&&Te.isRange(r)&&(r=ue.unhangRange(t,r)),Te.isRange(r))if(Te.isCollapsed(r))r=r.anchor;else{var[,l]=Te.edges(r),u=ue.pointRef(t,l);$e.delete(t,{at:r}),r=u.unref(),null==e.at&&$e.select(t,r)}var[c]=ue.nodes(t,{at:r,match:n,voids:o,mode:a}),h=ue.previous(t,{at:r,match:n,voids:o,mode:a});if(c&&h){var[d,p]=c,[f,m]=h;if(0!==p.length&&0!==m.length){var g,v,y=ye.next(m),b=ye.common(p,m),x=ye.isSibling(p,m),_=Array.from(ue.levels(t,{at:p}),(t=>{var[e]=t;return e})).slice(b.length).slice(0,-1),w=ue.above(t,{at:p,mode:"highest",match:e=>_.includes(e)&&We(t,e)}),S=w&&ue.pathRef(t,w[1]);if(ke.isText(d)&&ke.isText(f)){var M=Tt(d,ze);v=f.text.length,g=M}else{if(!re.isElement(d)||!re.isElement(f))throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(d)," ").concat(JSON.stringify(f)));M=Tt(d,Ue);v=f.children.length,g=M}x||$e.moveNodes(t,{at:p,to:y,voids:o}),S&&$e.removeNodes(t,{at:S.current,voids:o}),re.isElement(f)&&ue.isEmpty(t,f)||ke.isText(f)&&""===f.text&&0!==m[m.length-1]?$e.removeNodes(t,{at:m,voids:o}):t.apply({type:"merge_node",path:y,position:v,properties:g}),S&&S.unref()}}}}))},moveNodes(t,e){ue.withoutNormalizing(t,(()=>{var{to:n,at:r=t.selection,mode:i="lowest",voids:o=!1}=e,{match:a}=e;if(r){null==a&&(a=ye.isPath(r)?qe(t,r):e=>ue.isBlock(t,e));var s=ue.pathRef(t,n),l=ue.nodes(t,{at:r,match:a,mode:i,voids:o}),u=Array.from(l,(e=>{var[,n]=e;return ue.pathRef(t,n)}));for(var c of u){var h=c.unref(),d=s.current;0!==h.length&&t.apply({type:"move_node",path:h,newPath:d}),s.current&&ye.isSibling(d,h)&&ye.isAfter(d,h)&&(s.current=ye.next(s.current))}s.unref()}}))},removeNodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{hanging:n=!1,voids:r=!1,mode:i="lowest"}=e,{at:o=t.selection,match:a}=e;if(o){null==a&&(a=ye.isPath(o)?qe(t,o):e=>ue.isBlock(t,e)),!n&&Te.isRange(o)&&(o=ue.unhangRange(t,o));var s=ue.nodes(t,{at:o,match:a,mode:i,voids:r}),l=Array.from(s,(e=>{var[,n]=e;return ue.pathRef(t,n)}));for(var u of l){var c=u.unref();if(c){var[h]=ue.node(t,c);t.apply({type:"remove_node",path:c,node:h})}}}}))},setNodes(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(t,(()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,mode:a="lowest",split:s=!1,voids:l=!1}=n;if(i){if(null==r&&(r=ye.isPath(i)?qe(t,i):e=>ue.isBlock(t,e)),!o&&Te.isRange(i)&&(i=ue.unhangRange(t,i)),s&&Te.isRange(i)){if(Te.isCollapsed(i)&&ue.leaf(t,i.anchor)[0].text.length>0)return;var u=ue.rangeRef(t,i,{affinity:"inward"}),[c,h]=Te.edges(i),d="lowest"===a?"lowest":"highest",p=ue.isEnd(t,h,h.path);$e.splitNodes(t,{at:h,match:r,mode:d,voids:l,always:!p});var f=ue.isStart(t,c,c.path);$e.splitNodes(t,{at:c,match:r,mode:d,voids:l,always:!f}),i=u.unref(),null==n.at&&$e.select(t,i)}for(var[m,g]of ue.nodes(t,{at:i,match:r,mode:a,voids:l})){var v={},y={};if(0!==g.length){var b=!1;for(var x in e)"children"!==x&&"text"!==x&&e[x]!==m[x]&&(b=!0,m.hasOwnProperty(x)&&(v[x]=m[x]),null!=e[x]&&(y[x]=e[x]));b&&t.apply({type:"set_node",path:g,properties:v,newProperties:y})}}}}))},splitNodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{mode:n="lowest",voids:r=!1}=e,{match:i,at:o=t.selection,height:a=0,always:s=!1}=e;if(null==i&&(i=e=>ue.isBlock(t,e)),Te.isRange(o)&&(o=Ge(t,o)),ye.isPath(o)){var l=o,u=ue.point(t,l),[c]=ue.parent(t,l);i=t=>t===c,a=u.path.length-l.length+1,o=u,s=!0}if(o){var h=ue.pointRef(t,o,{affinity:"backward"}),[d]=ue.nodes(t,{at:o,match:i,mode:n,voids:r});if(d){var p=ue.void(t,{at:o,mode:"highest"}),f=0;if(!r&&p){var[m,g]=p;if(re.isElement(m)&&t.isInline(m)){var v=ue.after(t,g);if(!v){var y={text:""},b=ye.next(g);$e.insertNodes(t,y,{at:b,voids:r}),v=ue.point(t,b)}o=v,s=!0}var x=o.path.length-g.length;a=x+1,s=!0}var _=ue.pointRef(t,o),w=o.path.length-a,[,S]=d,M=o.path.slice(0,w),E=0===a?o.offset:o.path[w]+f;for(var[C,T]of ue.levels(t,{at:M,reverse:!0,voids:r})){var A=!1;if(T.length<S.length||0===T.length||!r&&ue.isVoid(t,C))break;var D=h.current,P=ue.isEnd(t,D,T);if(s||!h||!ue.isEdge(t,D,T)){A=!0;var R=fe.extractProps(C);t.apply({type:"split_node",path:T,position:E,properties:R})}E=T[T.length-1]+(A||P?1:0)}if(null==e.at){var L=_.current||ue.end(t,[]);$e.select(t,L)}h.unref(),_.unref()}}}))},unsetNodes(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(e)||(e=[e]);var r={};for(var i of e)r[i]=null;$e.setNodes(t,r,n)},unwrapNodes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{mode:n="lowest",split:r=!1,voids:i=!1}=e,{at:o=t.selection,match:a}=e;if(o){null==a&&(a=ye.isPath(o)?qe(t,o):e=>ue.isBlock(t,e)),ye.isPath(o)&&(o=ue.range(t,o));var s=Te.isRange(o)?ue.rangeRef(t,o):null,l=ue.nodes(t,{at:o,match:a,mode:n,voids:i}),u=Array.from(l,(e=>{var[,n]=e;return ue.pathRef(t,n)})).reverse(),c=function(e){var n=e.unref(),[o]=ue.node(t,n),a=ue.range(t,n);r&&s&&(a=Te.intersection(s.current,a)),$e.liftNodes(t,{at:a,match:t=>re.isAncestor(o)&&o.children.includes(t),voids:i})};for(var h of u)c(h);s&&s.unref()}}))},wrapNodes(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(t,(()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{match:a,at:s=t.selection}=n;if(s){if(null==a&&(a=ye.isPath(s)?qe(t,s):t.isInline(e)?e=>ue.isInline(t,e)||ke.isText(e):e=>ue.isBlock(t,e)),i&&Te.isRange(s)){var[l,u]=Te.edges(s),c=ue.rangeRef(t,s,{affinity:"inward"});$e.splitNodes(t,{at:u,match:a,voids:o}),$e.splitNodes(t,{at:l,match:a,voids:o}),s=c.unref(),null==n.at&&$e.select(t,s)}var h=Array.from(ue.nodes(t,{at:s,match:t.isInline(e)?e=>ue.isBlock(t,e):t=>ue.isEditor(t),mode:"lowest",voids:o}));for(var[,d]of h){var p=Te.isRange(s)?Te.intersection(s,ue.range(t,d)):s;if(p){var f=Array.from(ue.nodes(t,{at:p,match:a,mode:r,voids:o}));if(f.length>0){var m=function(){var[n]=f,r=f[f.length-1],[,i]=n,[,a]=r;if(0===i.length&&0===a.length)return"continue";var s=ye.equals(i,a)?ye.parent(i):ye.common(i,a),l=ue.range(t,i,a),u=ue.node(t,s),[c]=u,h=s.length+1,d=ye.next(a.slice(0,h)),p=Ve(Ve({},e),{},{children:[]});$e.insertNodes(t,p,{at:d,voids:o}),$e.moveNodes(t,{at:l,match:t=>re.isAncestor(c)&&c.children.includes(t),to:d.concat(0),voids:o})}();if("continue"===m)continue}}}}}))}},We=(t,e)=>{if(re.isElement(e)){var n=e;return!!ue.isVoid(t,e)||1===n.children.length&&We(t,n.children[0])}return!ue.isEditor(e)},Ge=(t,e)=>{if(Te.isCollapsed(e))return e.anchor;var[,n]=Te.edges(e),r=ue.pointRef(t,n);return $e.delete(t,{at:e}),r.unref()},qe=(t,e)=>{var[n]=ue.node(t,e);return t=>t===n};function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ze={collapse(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:n="anchor"}=e,{selection:r}=t;if(r)if("anchor"===n)$e.select(t,r.anchor);else if("focus"===n)$e.select(t,r.focus);else if("start"===n){var[i]=Te.edges(r);$e.select(t,i)}else if("end"===n){var[,o]=Te.edges(r);$e.select(t,o)}},deselect(t){var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},move(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:n}=t,{distance:r=1,unit:i="character",reverse:o=!1}=e,{edge:a=null}=e;if(n){"start"===a&&(a=Te.isBackward(n)?"focus":"anchor"),"end"===a&&(a=Te.isBackward(n)?"anchor":"focus");var{anchor:s,focus:l}=n,u={distance:r,unit:i},c={};if(null==a||"anchor"===a){var h=o?ue.before(t,s,u):ue.after(t,s,u);h&&(c.anchor=h)}if(null==a||"focus"===a){var d=o?ue.before(t,l,u):ue.after(t,l,u);d&&(c.focus=d)}$e.setSelection(t,c)}},select(t,e){var{selection:n}=t;if(e=ue.range(t,e),n)$e.setSelection(t,e);else{if(!Te.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(e)));t.apply({type:"set_selection",properties:n,newProperties:e})}},setPoint(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:r}=t,{edge:i="both"}=n;if(r){"start"===i&&(i=Te.isBackward(r)?"focus":"anchor"),"end"===i&&(i=Te.isBackward(r)?"anchor":"focus");var{anchor:o,focus:a}=r,s="anchor"===i?o:a;$e.setSelection(t,{["anchor"===i?"anchor":"focus"]:Ye(Ye({},s),e)})}},setSelection(t,e){var{selection:n}=t,r={},i={};if(n){for(var o in e)("anchor"===o&&null!=e.anchor&&!we.equals(e.anchor,n.anchor)||"focus"===o&&null!=e.focus&&!we.equals(e.focus,n.focus)||"anchor"!==o&&"focus"!==o&&e[o]!==n[o])&&(r[o]=n[o],i[o]=e[o]);Object.keys(r).length>0&&t.apply({type:"set_selection",properties:r,newProperties:i})}}},Ke={delete(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(t,(()=>{var{reverse:n=!1,unit:r="character",distance:i=1,voids:o=!1}=e,{at:a=t.selection,hanging:s=!1}=e;if(a){if(Te.isRange(a)&&Te.isCollapsed(a)&&(a=a.anchor),we.isPoint(a)){var l=ue.void(t,{at:a,mode:"highest"});if(!o&&l){var[,u]=l;a=u}else{var c={unit:r,distance:i},h=n?ue.before(t,a,c)||ue.start(t,[]):ue.after(t,a,c)||ue.end(t,[]);a={anchor:a,focus:h},s=!0}}if(ye.isPath(a))$e.removeNodes(t,{at:a,voids:o});else if(!Te.isCollapsed(a)){if(!s){var[,d]=Te.edges(a),p=ue.end(t,[]);we.equals(d,p)||(a=ue.unhangRange(t,a,{voids:o}))}var[f,m]=Te.edges(a),g=ue.above(t,{match:e=>ue.isBlock(t,e),at:f,voids:o}),v=ue.above(t,{match:e=>ue.isBlock(t,e),at:m,voids:o}),y=g&&v&&!ye.equals(g[1],v[1]),b=ye.equals(f.path,m.path),x=o?null:ue.void(t,{at:f,mode:"highest"}),_=o?null:ue.void(t,{at:m,mode:"highest"});if(x){var w=ue.before(t,f);w&&g&&ye.isAncestor(g[1],w.path)&&(f=w)}if(_){var S=ue.after(t,m);S&&v&&ye.isAncestor(v[1],S.path)&&(m=S)}var M,E=[];for(var C of ue.nodes(t,{at:a,voids:o})){var[T,A]=C;M&&0===ye.compare(A,M)||(!o&&ue.isVoid(t,T)||!ye.isCommon(A,f.path)&&!ye.isCommon(A,m.path))&&(E.push(C),M=A)}var D=Array.from(E,(e=>{var[,n]=e;return ue.pathRef(t,n)})),P=ue.pointRef(t,f),R=ue.pointRef(t,m);if(!b&&!x){var L=P.current,[O]=ue.leaf(t,L),{path:k}=L,{offset:I}=f,N=O.text.slice(I);N.length>0&&t.apply({type:"remove_text",path:k,offset:I,text:N})}for(var B of D){var F=B.unref();$e.removeNodes(t,{at:F,voids:o})}if(!_){var z=R.current,[U]=ue.leaf(t,z),{path:j}=z,V=b?f.offset:0,H=U.text.slice(V,m.offset);H.length>0&&t.apply({type:"remove_text",path:j,offset:V,text:H})}!b&&y&&R.current&&P.current&&$e.mergeNodes(t,{at:R.current,hanging:!0,voids:o});var W=n?P.unref()||R.unref():R.unref()||P.unref();null==e.at&&W&&$e.select(t,W)}}}))},insertFragment(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(t,(()=>{var{hanging:r=!1,voids:i=!1}=n,{at:o=t.selection}=n;if(e.length&&o){if(Te.isRange(o))if(r||(o=ue.unhangRange(t,o)),Te.isCollapsed(o))o=o.anchor;else{var[,a]=Te.edges(o);if(!i&&ue.void(t,{at:a}))return;var s=ue.pointRef(t,a);$e.delete(t,{at:o}),o=s.unref()}else ye.isPath(o)&&(o=ue.start(t,o));if(i||!ue.void(t,{at:o})){var l=ue.above(t,{at:o,match:e=>ue.isInline(t,e),mode:"highest",voids:i});if(l){var[,u]=l;if(ue.isEnd(t,o,u)){var c=ue.after(t,u);o=c}else if(ue.isStart(t,o,u)){var h=ue.before(t,u);o=h}}var d=ue.above(t,{match:e=>ue.isBlock(t,e),at:o,voids:i}),[,p]=d,f=ue.isStart(t,o,p),m=ue.isEnd(t,o,p),g=f&&m,v=!f||f&&m,y=!m,[,b]=fe.first({children:e},[]),[,x]=fe.last({children:e},[]),_=[],w=e=>{var[n,r]=e,i=0===r.length;return!i&&(!!g||!(v&&ye.isAncestor(r,b)&&re.isElement(n)&&!t.isVoid(n)&&!t.isInline(n))&&!(y&&ye.isAncestor(r,x)&&re.isElement(n)&&!t.isVoid(n)&&!t.isInline(n)))};for(var S of fe.nodes({children:e},{pass:w}))w(S)&&_.push(S);var M=[],E=[],C=[],T=!0,A=!1;for(var[D]of _)re.isElement(D)&&!t.isInline(D)?(T=!1,A=!0,E.push(D)):T?M.push(D):C.push(D);var[P]=ue.nodes(t,{at:o,match:e=>ke.isText(e)||ue.isInline(t,e),mode:"highest",voids:i}),[,R]=P,L=ue.isStart(t,o,R),O=ue.isEnd(t,o,R),k=ue.pathRef(t,m?ye.next(p):p),I=ue.pathRef(t,O?ye.next(R):R),N=ue.pathRef(t,p);$e.splitNodes(t,{at:o,match:e=>A?ue.isBlock(t,e):ke.isText(e)||ue.isInline(t,e),mode:A?"lowest":"highest",voids:i});var B=ue.pathRef(t,!L||L&&O?ye.next(R):R);if($e.insertNodes(t,M,{at:B.current,match:e=>ke.isText(e)||ue.isInline(t,e),mode:"highest",voids:i}),g&&E.length&&$e.delete(t,{at:N.unref(),voids:i}),$e.insertNodes(t,E,{at:k.current,match:e=>ue.isBlock(t,e),mode:"lowest",voids:i}),$e.insertNodes(t,C,{at:I.current,match:e=>ke.isText(e)||ue.isInline(t,e),mode:"highest",voids:i}),!n.at){var F;F=C.length>0?ye.previous(I.current):E.length>0?ye.previous(k.current):ye.previous(B.current);var z=ue.end(t,F);$e.select(t,z)}B.unref(),k.unref(),I.unref()}}}))},insertText(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(t,(()=>{var{voids:r=!1}=n,{at:i=t.selection}=n;if(i){if(ye.isPath(i)&&(i=ue.range(t,i)),Te.isRange(i))if(Te.isCollapsed(i))i=i.anchor;else{var o=Te.end(i);if(!r&&ue.void(t,{at:o}))return;var a=ue.pointRef(t,o);$e.delete(t,{at:i,voids:r}),i=a.unref(),$e.setSelection(t,{anchor:i,focus:i})}if(r||!ue.void(t,{at:i})){var{path:s,offset:l}=i;e.length>0&&t.apply({type:"insert_text",path:s,offset:l,text:e})}}}))}};function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $e=Qe(Qe(Qe(Qe({},Fe),He),Ze),Ke),tn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function en(t){var e={exports:{}};return t(e,e.exports),e.exports}var nn=9007199254740991,rn="[object Arguments]",on="[object Function]",an="[object GeneratorFunction]",sn="[object Map]",ln="[object Object]",un="[object Promise]",cn="[object Set]",hn="[object String]",dn="[object WeakMap]",pn="[object DataView]",fn=/[\\^$.*+?()[\]{}|]/g,mn=/^\[object .+?Constructor\]$/,gn=/^(?:0|[1-9]\d*)$/,vn="\\ud800-\\udfff",yn="\\u0300-\\u036f\\ufe20-\\ufe23",bn="\\u20d0-\\u20f0",xn="\\ufe0e\\ufe0f",_n="["+vn+"]",wn="["+yn+bn+"]",Sn="\\ud83c[\\udffb-\\udfff]",Mn="(?:"+wn+"|"+Sn+")",En="[^"+vn+"]",Cn="(?:\\ud83c[\\udde6-\\uddff]){2}",Tn="[\\ud800-\\udbff][\\udc00-\\udfff]",An="\\u200d",Dn=Mn+"?",Pn="["+xn+"]?",Rn="(?:"+An+"(?:"+[En,Cn,Tn].join("|")+")"+Pn+Dn+")*",Ln=Pn+Dn+Rn,On="(?:"+[En+wn+"?",wn,Cn,Tn,_n].join("|")+")",kn=RegExp(Sn+"(?="+Sn+")|"+On+Ln,"g"),In=RegExp("["+An+vn+yn+bn+xn+"]"),Nn="object"==typeof tn&&tn&&tn.Object===Object&&tn,Bn="object"==typeof self&&self&&self.Object===Object&&self,Fn=Nn||Bn||Function("return this")();function zn(t,e){var n=-1,r=t?t.length:0,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function Un(t){return t.split("")}function jn(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Vn(t,e){return zn(e,(function(e){return t[e]}))}function Hn(t,e){return null==t?void 0:t[e]}function Wn(t){return In.test(t)}function Gn(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function qn(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function Xn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Yn(t,e){return function(n){return t(e(n))}}function Zn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Kn(t){return Wn(t)?Jn(t):Un(t)}function Jn(t){return t.match(kn)||[]}var Qn=Function.prototype,$n=Object.prototype,tr=Fn["__core-js_shared__"],er=function(){var t=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),nr=Qn.toString,rr=$n.hasOwnProperty,ir=$n.toString,or=RegExp("^"+nr.call(rr).replace(fn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Fn.Symbol,sr=ar?ar.iterator:void 0,lr=$n.propertyIsEnumerable,ur=Yn(Object.keys,Object),cr=Er(Fn,"DataView"),hr=Er(Fn,"Map"),dr=Er(Fn,"Promise"),pr=Er(Fn,"Set"),fr=Er(Fn,"WeakMap"),mr=Pr(cr),gr=Pr(hr),vr=Pr(dr),yr=Pr(pr),br=Pr(fr);function xr(t,e){var n=Lr(t)||Rr(t)?jn(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!rr.call(t,o)||i&&("length"==o||Tr(o,r))||n.push(o);return n}function _r(t){return ir.call(t)}function wr(t){if(!Br(t)||Ar(t))return!1;var e=Ir(t)||Gn(t)?or:mn;return e.test(Pr(t))}function Sr(t){if(!Dr(t))return ur(t);var e=[];for(var n in Object(t))rr.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Mr(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}function Er(t,e){var n=Hn(t,e);return wr(n)?n:void 0}var Cr=_r;function Tr(t,e){return e=null==e?nn:e,!!e&&("number"==typeof t||gn.test(t))&&t>-1&&t%1==0&&t<e}function Ar(t){return!!er&&er in t}function Dr(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||$n;return t===n}function Pr(t){if(null!=t){try{return nr.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Rr(t){return kr(t)&&rr.call(t,"callee")&&(!lr.call(t,"callee")||ir.call(t)==rn)}(cr&&Cr(new cr(new ArrayBuffer(1)))!=pn||hr&&Cr(new hr)!=sn||dr&&Cr(dr.resolve())!=un||pr&&Cr(new pr)!=cn||fr&&Cr(new fr)!=dn)&&(Cr=function(t){var e=ir.call(t),n=e==ln?t.constructor:void 0,r=n?Pr(n):void 0;if(r)switch(r){case mr:return pn;case gr:return sn;case vr:return un;case yr:return cn;case br:return dn}return e});var Lr=Array.isArray;function Or(t){return null!=t&&Nr(t.length)&&!Ir(t)}function kr(t){return Fr(t)&&Or(t)}function Ir(t){var e=Br(t)?ir.call(t):"";return e==on||e==an}function Nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=nn}function Br(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Fr(t){return!!t&&"object"==typeof t}function zr(t){return"string"==typeof t||!Lr(t)&&Fr(t)&&ir.call(t)==hn}function Ur(t){if(!t)return[];if(Or(t))return zr(t)?Kn(t):Mr(t);if(sr&&t[sr])return qn(t[sr]());var e=Cr(t),n=e==sn?Xn:e==cn?Zn:Vr;return n(t)}function jr(t){return Or(t)?xr(t):Sr(t)}function Vr(t){return t?Vn(t,jr(t)):[]}var Hr=Ur;function Wr(t){return null!==t&&"object"===typeof t&&"constructor"in t&&t.constructor===Object}function Gr(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach((function(n){"undefined"===typeof t[n]?t[n]=e[n]:Wr(e[n])&&Wr(t[n])&&Object.keys(e[n]).length>0&&Gr(t[n],e[n])}))}var qr={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Xr(){var t="undefined"!==typeof document?document:{};return Gr(t,qr),t}var Yr={document:qr,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return"undefined"===typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){"undefined"!==typeof setTimeout&&clearTimeout(t)}};function Zr(){var t="undefined"!==typeof window?window:{};return Gr(t,Yr),t}function Kr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Jr(t){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jr(t)}function Qr(t,e){return Qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qr(t,e)}function $r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ti(t,e,n){return ti=$r()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Qr(o,n.prototype),o},ti.apply(null,arguments)}function ei(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function ni(t){var e="function"===typeof Map?new Map:void 0;return ni=function(t){if(null===t||!ei(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ti(t,arguments,Jr(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qr(n,t)},ni(t)}function ri(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ii(t){var e=t.__proto__;Object.defineProperty(t,"__proto__",{get:function(){return e},set:function(t){e.__proto__=t}})}var oi=function(t){function e(e){var n;return n=t.call.apply(t,[this].concat(e))||this,ii(ri(n)),n}return Kr(e,t),e}(ni(Array));function ai(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,ai(t)):e.push(t)})),e}function si(t,e){return Array.prototype.filter.call(t,e)}function li(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function ui(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function ci(t,e){if("string"!==typeof t)return[t];for(var n=[],r=e.querySelectorAll(t),i=0;i<r.length;i+=1)n.push(r[i]);return n}function hi(t,e){var n=Zr(),r=Xr(),i=[];if(!e&&t instanceof oi)return t;if(!t)return new oi(i);if("string"===typeof t){var o=t.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var a="div";0===o.indexOf("<li")&&(a="ul"),0===o.indexOf("<tr")&&(a="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(a="tr"),0===o.indexOf("<tbody")&&(a="table"),0===o.indexOf("<option")&&(a="select");var s=r.createElement(a);s.innerHTML=o;for(var l=0;l<s.childNodes.length;l+=1)i.push(s.childNodes[l])}else i=ci(t.trim(),e||r)}else if(t.nodeType||t===n||t===r)i.push(t);else if(Array.isArray(t)){if(t instanceof oi)return t;i=t}return new oi(li(i))}function di(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ai(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).add.apply(e,r)})),this}function pi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ai(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).remove.apply(e,r)})),this}function fi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ai(e.map((function(t){return t.split(" ")})));return si(this,(function(t){return r.filter((function(e){return t.classList.contains(e)})).length>0})).length>0}function mi(t,e){if(1===arguments.length&&"string"===typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(t,e);else for(var r in t)this[n][r]=t[r],this[n].setAttribute(r,t[r]);return this}function gi(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function vi(){var t=this[0];if(t){var e={};if(t.dataset)for(var n in t.dataset)e[n]=t.dataset[n];else for(var r=0;r<t.attributes.length;r+=1){var i=t.attributes[r];i.name.indexOf("data-")>=0&&(e[ui(i.name.split("data-")[1])]=i.value)}for(var o in e)"false"===e[o]?e[o]=!1:"true"===e[o]?e[o]=!0:parseFloat(e[o])===1*e[o]&&(e[o]*=1);return e}}function yi(t){if("undefined"===typeof t){var e=this[0];if(!e)return;if(e.multiple&&"select"===e.nodeName.toLowerCase()){for(var n=[],r=0;r<e.selectedOptions.length;r+=1)n.push(e.selectedOptions[r].value);return n}return e.value}for(var i=0;i<this.length;i+=1){var o=this[i];if(Array.isArray(t)&&o.multiple&&"select"===o.nodeName.toLowerCase())for(var a=0;a<o.options.length;a+=1)o.options[a].selected=t.indexOf(o.options[a].value)>=0;else o.value=t}return this}function bi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];function s(t){var e=t.target;if(e){var n=t.target.dom7EventData||[];if(n.indexOf(t)<0&&n.unshift(t),hi(e).is(i))o.apply(e,n);else for(var r=hi(e).parents(),a=0;a<r.length;a+=1)hi(r[a]).is(i)&&o.apply(r[a],n)}}function l(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),o.apply(this,e)}"function"===typeof e[1]&&(r=e[0],o=e[1],a=e[2],i=void 0),a||(a=!1);for(var u,c=r.split(" "),h=0;h<this.length;h+=1){var d=this[h];if(i)for(u=0;u<c.length;u+=1){var p=c[u];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[p]||(d.dom7LiveListeners[p]=[]),d.dom7LiveListeners[p].push({listener:o,proxyListener:s}),d.addEventListener(p,s,a)}else for(u=0;u<c.length;u+=1){var f=c[u];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:o,proxyListener:l}),d.addEventListener(f,l,a)}}return this}function xi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];"function"===typeof e[1]&&(r=e[0],o=e[1],a=e[2],i=void 0),a||(a=!1);for(var s=r.split(" "),l=0;l<s.length;l+=1)for(var u=s[l],c=0;c<this.length;c+=1){var h=this[c],d=void 0;if(!i&&h.dom7Listeners?d=h.dom7Listeners[u]:i&&h.dom7LiveListeners&&(d=h.dom7LiveListeners[u]),d&&d.length)for(var p=d.length-1;p>=0;p-=1){var f=d[p];o&&f.listener===o||o&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===o?(h.removeEventListener(u,f.proxyListener,a),d.splice(p,1)):o||(h.removeEventListener(u,f.proxyListener,a),d.splice(p,1))}}return this}function _i(){var t=Zr();return this[0]===t?t.innerWidth:this.length>0?parseFloat(this.css("width")):null}function wi(){var t=Zr();return this[0]===t?t.innerHeight:this.length>0?parseFloat(this.css("height")):null}function Si(){if(this.length>0){var t=Zr(),e=Xr(),n=this[0],r=n.getBoundingClientRect(),i=e.body,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=n===t?t.scrollY:n.scrollTop,l=n===t?t.scrollX:n.scrollLeft;return{top:r.top+s-o,left:r.left+l-a}}return null}function Mi(){for(var t=0;t<this.length;t+=1)this[t].style.display="none";return this}function Ei(){for(var t=Zr(),e=0;e<this.length;e+=1){var n=this[e];"none"===n.style.display&&(n.style.display=""),"none"===t.getComputedStyle(n,null).getPropertyValue("display")&&(n.style.display="block")}return this}function Ci(t,e){var n,r=Zr();if(1===arguments.length){if("string"!==typeof t){for(n=0;n<this.length;n+=1)for(var i in t)this[n].style[i]=t[i];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"===typeof t){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this}function Ti(t){return t?(this.forEach((function(e,n){t.apply(e,[e,n])})),this):this}function Ai(t){var e=si(this,t);return hi(e)}function Di(t){if("undefined"===typeof t)return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function Pi(t){if("undefined"===typeof t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this}function Ri(t){var e,n,r=Zr(),i=Xr(),o=this[0];if(!o||"undefined"===typeof t)return!1;if("string"===typeof t){if(o.matches)return o.matches(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);for(e=hi(t),n=0;n<e.length;n+=1)if(e[n]===o)return!0;return!1}if(t===i)return o===i;if(t===r)return o===r;if(t.nodeType||t instanceof oi){for(e=t.nodeType?[t]:t,n=0;n<e.length;n+=1)if(e[n]===o)return!0;return!1}return!1}function Li(){for(var t,e=Xr(),n=0;n<arguments.length;n+=1){t=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"===typeof t){var i=e.createElement("div");i.innerHTML=t;while(i.firstChild)this[r].appendChild(i.firstChild)}else if(t instanceof oi)for(var o=0;o<t.length;o+=1)this[r].appendChild(t[o]);else this[r].appendChild(t)}return this}function Oi(t){var e,n,r=Xr();for(e=0;e<this.length;e+=1)if("string"===typeof t){var i=r.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n-=1)this[e].insertBefore(i.childNodes[n],this[e].childNodes[0])}else if(t instanceof oi)for(n=0;n<t.length;n+=1)this[e].insertBefore(t[n],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this}function ki(t){for(var e=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(t?hi(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return hi(e)}function Ii(t){for(var e=[],n=0;n<this.length;n+=1){var r=this[n].parentNode;while(r)t?hi(r).is(t)&&e.push(r):e.push(r),r=r.parentNode}return hi(e)}function Ni(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(t),i=0;i<r.length;i+=1)e.push(r[i]);return hi(e)}function Bi(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].children,i=0;i<r.length;i+=1)t&&!hi(r[i]).is(t)||e.push(r[i]);return hi(e)}function Fi(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}function zi(){for(var t=0;t<this.length;t+=1){var e=this[t];if(1===e.nodeType){for(var n=0;n<e.childNodes.length;n+=1)e.childNodes[n].parentNode&&e.childNodes[n].parentNode.removeChild(e.childNodes[n]);e.textContent=""}}return this}hi.fn=oi.prototype;var Ui="resize scroll".split(" ");function ji(t){function e(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("undefined"===typeof n[0]){for(var i=0;i<this.length;i+=1)Ui.indexOf(t)<0&&(t in this[i]?this[i][t]():hi(this[i]).trigger(t));return this}return this.on.apply(this,[t].concat(n))}return e}var Vi=ji("click"),Hi=ji("focus"),Wi=9007199254740991,Gi="[object Arguments]",qi="[object Function]",Xi="[object GeneratorFunction]",Yi=/^(?:0|[1-9]\d*)$/;function Zi(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function Ki(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Ji(t,e){return function(n){return t(e(n))}}var Qi=Object.prototype,$i=Qi.hasOwnProperty,to=Qi.toString,eo=Qi.propertyIsEnumerable,no=Ji(Object.keys,Object);function ro(t,e){var n=mo(t)||fo(t)?Ki(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!$i.call(t,o)||i&&("length"==o||co(o,r))||n.push(o);return n}var io=lo(ao),oo=uo();function ao(t,e){return t&&oo(t,e,wo)}function so(t){if(!ho(t))return no(t);var e=[];for(var n in Object(t))$i.call(t,n)&&"constructor"!=n&&e.push(n);return e}function lo(t,e){return function(n,r){if(null==n)return n;if(!go(n))return t(n,r);var i=n.length,o=e?i:-1,a=Object(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function uo(t){return function(e,n,r){var i=-1,o=Object(e),a=r(e),s=a.length;while(s--){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function co(t,e){return e=null==e?Wi:e,!!e&&("number"==typeof t||Yi.test(t))&&t>-1&&t%1==0&&t<e}function ho(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Qi;return t===n}function po(t,e){var n=mo(t)?Zi:io;return n(t,"function"==typeof e?e:So)}function fo(t){return vo(t)&&$i.call(t,"callee")&&(!eo.call(t,"callee")||to.call(t)==Gi)}var mo=Array.isArray;function go(t){return null!=t&&bo(t.length)&&!yo(t)}function vo(t){return _o(t)&&go(t)}function yo(t){var e=xo(t)?to.call(t):"";return e==qi||e==Xi}function bo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Wi}function xo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _o(t){return!!t&&"object"==typeof t}function wo(t){return go(t)?ro(t):so(t)}function So(t){return t}var Mo=po;if("undefined"!==typeof navigator&&"ReactNative"===navigator.product&&"undefined"===typeof crypto)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs use `nanoid/non-secure`. For secure IDs, import `react-native-get-random-values` before Nano ID.");if("undefined"!==typeof msCrypto&&"undefined"===typeof crypto)throw new Error("Import file with `if (!window.crypto) window.crypto = window.msCrypto` before importing Nano ID to fix IE 11 support");if("undefined"===typeof crypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");let Eo=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));while(t--){let r=63&n[t];e+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return e};var Co="Expected a function",To=NaN,Ao="[object Symbol]",Do=/^\s+|\s+$/g,Po=/^[-+]0x[0-9a-f]+$/i,Ro=/^0b[01]+$/i,Lo=/^0o[0-7]+$/i,Oo=parseInt,ko="object"==typeof tn&&tn&&tn.Object===Object&&tn,Io="object"==typeof self&&self&&self.Object===Object&&self,No=ko||Io||Function("return this")(),Bo=Object.prototype,Fo=Bo.toString,zo=Math.max,Uo=Math.min,jo=function(){return No.Date.now()};function Vo(t,e,n){var r,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(Co);function p(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n),a}function f(t){return u=t,s=setTimeout(v,e),c?p(t):a}function m(t){var n=t-l,r=t-u,i=e-n;return h?Uo(i,o-r):i}function g(t){var n=t-l,r=t-u;return void 0===l||n>=e||n<0||h&&r>=o}function v(){var t=jo();if(g(t))return y(t);s=setTimeout(v,m(t))}function y(t){return s=void 0,d&&r?p(t):(r=i=void 0,a)}function b(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0}function x(){return void 0===s?a:y(jo())}function _(){var t=jo(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return f(l);if(h)return s=setTimeout(v,e),p(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Xo(e)||0,Wo(n)&&(c=!!n.leading,h="maxWait"in n,o=h?zo(Xo(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),_.cancel=b,_.flush=x,_}function Ho(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(Co);return Wo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Vo(t,e,{leading:r,maxWait:e,trailing:i})}function Wo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Go(t){return!!t&&"object"==typeof t}function qo(t){return"symbol"==typeof t||Go(t)&&Fo.call(t)==Ao}function Xo(t){if("number"==typeof t)return t;if(qo(t))return To;if(Wo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Wo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Do,"");var n=Ro.test(t);return n||Lo.test(t)?Oo(t.slice(2),n?2:8):Po.test(t)?To:+t}var Yo=Ho;function Zo(t,e){return document.createElement(t,e)}function Ko(t,e,n){return document.createElementNS(t,e,n)}function Jo(t){return document.createTextNode(t)}function Qo(t){return document.createComment(t)}function $o(t,e,n){t.insertBefore(e,n)}function ta(t,e){t.removeChild(e)}function ea(t,e){t.appendChild(e)}function na(t){return t.parentNode}function ra(t){return t.nextSibling}function ia(t){return t.tagName}function oa(t,e){t.textContent=e}function aa(t){return t.textContent}function sa(t){return 1===t.nodeType}function la(t){return 3===t.nodeType}function ua(t){return 8===t.nodeType}const ca={createElement:Zo,createElementNS:Ko,createTextNode:Jo,createComment:Qo,insertBefore:$o,removeChild:ta,appendChild:ea,parentNode:na,nextSibling:ra,tagName:ia,setTextContent:oa,getTextContent:aa,isElement:sa,isText:la,isComment:ua};function ha(t,e,n,r,i){const o=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:r,elm:i,key:o}}const da=Array.isArray;function pa(t){return"string"===typeof t||"number"===typeof t||t instanceof String||t instanceof Number}function fa(t){return void 0===t}function ma(t){return void 0!==t}const ga=ha("",{},[],void 0,void 0);function va(t,e){var n,r;const i=t.key===e.key,o=(null===(n=t.data)||void 0===n?void 0:n.is)===(null===(r=e.data)||void 0===r?void 0:r.is),a=t.sel===e.sel;return a&&i&&o}function ya(t){return void 0!==t.sel}function ba(t,e,n){var r;const i={};for(let o=e;o<=n;++o){const e=null===(r=t[o])||void 0===r?void 0:r.key;void 0!==e&&(i[e]=o)}return i}const xa=["create","update","remove","destroy","pre","post"];function _a(t,e){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},r=void 0!==e?e:ca;for(const d of xa)for(const e of t){const t=e[d];void 0!==t&&n[d].push(t)}function i(t){const e=t.id?"#"+t.id:"",n=t.getAttribute("class"),i=n?"."+n.split(" ").join("."):"";return ha(r.tagName(t).toLowerCase()+e+i,{},[],void 0,t)}function o(t,e){return function(){if(0===--e){const e=r.parentNode(t);r.removeChild(e,t)}}}function a(t,e){var i,o;let s,l=t.data;if(void 0!==l){const e=null===(i=l.hook)||void 0===i?void 0:i.init;ma(e)&&(e(t),l=t.data)}const u=t.children,c=t.sel;if("!"===c)fa(t.text)&&(t.text=""),t.elm=r.createComment(t.text);else if(void 0!==c){const i=c.indexOf("#"),h=c.indexOf(".",i),d=i>0?i:c.length,p=h>0?h:c.length,f=-1!==i||-1!==h?c.slice(0,Math.min(d,p)):c,m=t.elm=ma(l)&&ma(s=l.ns)?r.createElementNS(s,f,l):r.createElement(f,l);for(d<p&&m.setAttribute("id",c.slice(d+1,p)),h>0&&m.setAttribute("class",c.slice(p+1).replace(/\./g," ")),s=0;s<n.create.length;++s)n.create[s](ga,t);if(da(u))for(s=0;s<u.length;++s){const t=u[s];null!=t&&r.appendChild(m,a(t,e))}else pa(t.text)&&r.appendChild(m,r.createTextNode(t.text));const g=t.data.hook;ma(g)&&(null===(o=g.create)||void 0===o||o.call(g,ga,t),g.insert&&e.push(t))}else t.elm=r.createTextNode(t.text);return t.elm}function s(t,e,n,i,o,s){for(;i<=o;++i){const o=n[i];null!=o&&r.insertBefore(t,a(o,s),e)}}function l(t){var e,r;const i=t.data;if(void 0!==i){null===(r=null===(e=null===i||void 0===i?void 0:i.hook)||void 0===e?void 0:e.destroy)||void 0===r||r.call(e,t);for(let e=0;e<n.destroy.length;++e)n.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const n=t.children[e];null!=n&&"string"!==typeof n&&l(n)}}}function u(t,e,i,a){for(var s,u;i<=a;++i){let a,c;const h=e[i];if(null!=h)if(ma(h.sel)){l(h),a=n.remove.length+1,c=o(h.elm,a);for(let e=0;e<n.remove.length;++e)n.remove[e](h,c);const t=null===(u=null===(s=null===h||void 0===h?void 0:h.data)||void 0===s?void 0:s.hook)||void 0===u?void 0:u.remove;ma(t)?t(h,c):c()}else r.removeChild(t,h.elm)}}function c(t,e,n,i){let o,l,c,d,p=0,f=0,m=e.length-1,g=e[0],v=e[m],y=n.length-1,b=n[0],x=n[y];while(p<=m&&f<=y)null==g?g=e[++p]:null==v?v=e[--m]:null==b?b=n[++f]:null==x?x=n[--y]:va(g,b)?(h(g,b,i),g=e[++p],b=n[++f]):va(v,x)?(h(v,x,i),v=e[--m],x=n[--y]):va(g,x)?(h(g,x,i),r.insertBefore(t,g.elm,r.nextSibling(v.elm)),g=e[++p],x=n[--y]):va(v,b)?(h(v,b,i),r.insertBefore(t,v.elm,g.elm),v=e[--m],b=n[++f]):(void 0===o&&(o=ba(e,p,m)),l=o[b.key],fa(l)?r.insertBefore(t,a(b,i),g.elm):(c=e[l],c.sel!==b.sel?r.insertBefore(t,a(b,i),g.elm):(h(c,b,i),e[l]=void 0,r.insertBefore(t,c.elm,g.elm))),b=n[++f]);(p<=m||f<=y)&&(p>m?(d=null==n[y+1]?null:n[y+1].elm,s(t,d,n,f,y,i)):u(t,e,p,m))}function h(t,e,i){var o,a,l,h,d;const p=null===(o=e.data)||void 0===o?void 0:o.hook;null===(a=null===p||void 0===p?void 0:p.prepatch)||void 0===a||a.call(p,t,e);const f=e.elm=t.elm,m=t.children,g=e.children;if(t!==e){if(void 0!==e.data){for(let r=0;r<n.update.length;++r)n.update[r](t,e);null===(h=null===(l=e.data.hook)||void 0===l?void 0:l.update)||void 0===h||h.call(l,t,e)}fa(e.text)?ma(m)&&ma(g)?m!==g&&c(f,m,g,i):ma(g)?(ma(t.text)&&r.setTextContent(f,""),s(f,null,g,0,g.length-1,i)):ma(m)?u(f,m,0,m.length-1):ma(t.text)&&r.setTextContent(f,""):t.text!==e.text&&(ma(m)&&u(f,m,0,m.length-1),r.setTextContent(f,e.text)),null===(d=null===p||void 0===p?void 0:p.postpatch)||void 0===d||d.call(p,t,e)}}return function(t,e){let o,s,l;const c=[];for(o=0;o<n.pre.length;++o)n.pre[o]();for(ya(t)||(t=i(t)),va(t,e)?h(t,e,c):(s=t.elm,l=r.parentNode(s),a(e,c),null!==l&&(r.insertBefore(l,e.elm,r.nextSibling(s)),u(l,[t],0,0))),o=0;o<c.length;++o)c[o].data.hook.insert(c[o]);for(o=0;o<n.post.length;++o)n.post[o]();return e}}function wa(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(let r=0;r<e.length;++r){const t=e[r].data;void 0!==t&&wa(t,e[r].children,e[r].sel)}}function Sa(t,e,n){let r,i,o,a={};if(void 0!==n?(null!==e&&(a=e),da(n)?r=n:pa(n)?i=n.toString():n&&n.sel&&(r=[n])):void 0!==e&&null!==e&&(da(e)?r=e:pa(e)?i=e.toString():e&&e.sel?r=[e]:a=e),void 0!==r)for(o=0;o<r.length;++o)pa(r[o])&&(r[o]=ha(void 0,void 0,void 0,r[o],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||wa(a,r,t),ha(t,a,r,i,void 0)}function Ma(t,e){let n,r;const i=e.elm;let o=t.data.class,a=e.data.class;if((o||a)&&o!==a){for(r in o=o||{},a=a||{},o)o[r]&&!Object.prototype.hasOwnProperty.call(a,r)&&i.classList.remove(r);for(r in a)n=a[r],n!==o[r]&&i.classList[n?"add":"remove"](r)}}const Ea={create:Ma,update:Ma},Ca=/[A-Z]/g;function Ta(t,e){const n=e.elm;let r,i=t.data.dataset,o=e.data.dataset;if(!i&&!o)return;if(i===o)return;i=i||{},o=o||{};const a=n.dataset;for(r in i)o[r]||(a?r in a&&delete a[r]:n.removeAttribute("data-"+r.replace(Ca,"-$&").toLowerCase()));for(r in o)i[r]!==o[r]&&(a?a[r]=o[r]:n.setAttribute("data-"+r.replace(Ca,"-$&").toLowerCase(),o[r]))}const Aa={create:Ta,update:Ta};function Da(t,e,n){if("function"===typeof t)t.call(e,n,e);else if("object"===typeof t)for(let r=0;r<t.length;r++)Da(t[r],e,n)}function Pa(t,e){const n=t.type,r=e.data.on;r&&r[n]&&Da(r[n],e,t)}function Ra(){return function t(e){Pa(e,t.vnode)}}function La(t,e){const n=t.data.on,r=t.listener,i=t.elm,o=e&&e.data.on,a=e&&e.elm;let s;if(n!==o){if(n&&r)if(o)for(s in n)o[s]||i.removeEventListener(s,r,!1);else for(s in n)i.removeEventListener(s,r,!1);if(o){const r=e.listener=t.listener||Ra();if(r.vnode=e,n)for(s in o)n[s]||a.addEventListener(s,r,!1);else for(s in o)a.addEventListener(s,r,!1)}}}const Oa={create:La,update:La,destroy:La};function ka(t,e){let n,r,i;const o=e.elm;let a=t.data.props,s=e.data.props;if((a||s)&&a!==s)for(n in a=a||{},s=s||{},s)r=s[n],i=a[n],i===r||"value"===n&&o[n]===r||(o[n]=r)}const Ia={create:ka,update:ka},Na="undefined"!==typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,Ba=function(t){Na((function(){Na(t)}))};let Fa=!1;function za(t,e,n){Ba((function(){t[e]=n}))}function Ua(t,e){let n,r;const i=e.elm;let o=t.data.style,a=e.data.style;if(!o&&!a)return;if(o===a)return;o=o||{},a=a||{};const s="delayed"in o;for(r in o)a[r]||("-"===r[0]&&"-"===r[1]?i.style.removeProperty(r):i.style[r]="");for(r in a)if(n=a[r],"delayed"===r&&a.delayed)for(const t in a.delayed)n=a.delayed[t],s&&n===o.delayed[t]||za(i.style,t,n);else"remove"!==r&&n!==o[r]&&("-"===r[0]&&"-"===r[1]?i.style.setProperty(r,n):i.style[r]=n)}function ja(t){let e,n;const r=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)r.style[n]=e[n]}function Va(t,e){const n=t.data.style;if(!n||!n.remove)return void e();let r;Fa||(t.elm.offsetLeft,Fa=!0);const i=t.elm;let o=0;const a=n.remove;let s=0;const l=[];for(r in a)l.push(r),i.style[r]=a[r];const u=getComputedStyle(i),c=u["transition-property"].split(", ");for(;o<c.length;++o)-1!==l.indexOf(c[o])&&s++;i.addEventListener("transitionend",(function(t){t.target===i&&--s,0===s&&e()}))}function Ha(){Fa=!1}const Wa={pre:Ha,create:Ua,update:Ua,destroy:ja,remove:Va};function Ga(t,e){for(const n of t)void 0!==n&&null!==n&&!1!==n&&""!==n&&(Array.isArray(n)?Ga(n,e):"string"===typeof n||"number"===typeof n||"boolean"===typeof n?e.push(ha(void 0,void 0,void 0,String(n),void 0)):e.push(n));return e}function qa(t,e,...n){const r=Ga(n,[]);return"function"===typeof t?t(e,r):1===r.length&&!r[0].sel&&r[0].text?Sa(t,e,r[0].text):Sa(t,e,r)}qa||(qa={});var Xa=1/0,Ya="[object Symbol]",Za=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ka=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ja="\\ud800-\\udfff",Qa="\\u0300-\\u036f\\ufe20-\\ufe23",$a="\\u20d0-\\u20f0",ts="\\u2700-\\u27bf",es="a-z\\xdf-\\xf6\\xf8-\\xff",ns="\\xac\\xb1\\xd7\\xf7",rs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",is="\\u2000-\\u206f",os=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",as="A-Z\\xc0-\\xd6\\xd8-\\xde",ss="\\ufe0e\\ufe0f",ls=ns+rs+is+os,us="['’]",cs="["+Ja+"]",hs="["+ls+"]",ds="["+Qa+$a+"]",ps="\\d+",fs="["+ts+"]",ms="["+es+"]",gs="[^"+Ja+ls+ps+ts+es+as+"]",vs="\\ud83c[\\udffb-\\udfff]",ys="(?:"+ds+"|"+vs+")",bs="[^"+Ja+"]",xs="(?:\\ud83c[\\udde6-\\uddff]){2}",_s="[\\ud800-\\udbff][\\udc00-\\udfff]",ws="["+as+"]",Ss="\\u200d",Ms="(?:"+ms+"|"+gs+")",Es="(?:"+ws+"|"+gs+")",Cs="(?:"+us+"(?:d|ll|m|re|s|t|ve))?",Ts="(?:"+us+"(?:D|LL|M|RE|S|T|VE))?",As=ys+"?",Ds="["+ss+"]?",Ps="(?:"+Ss+"(?:"+[bs,xs,_s].join("|")+")"+Ds+As+")*",Rs=Ds+As+Ps,Ls="(?:"+[fs,xs,_s].join("|")+")"+Rs,Os="(?:"+[bs+ds+"?",ds,xs,_s,cs].join("|")+")",ks=RegExp(us,"g"),Is=RegExp(ds,"g"),Ns=RegExp(vs+"(?="+vs+")|"+Os+Rs,"g"),Bs=RegExp([ws+"?"+ms+"+"+Cs+"(?="+[hs,ws,"$"].join("|")+")",Es+"+"+Ts+"(?="+[hs,ws+Ms,"$"].join("|")+")",ws+"?"+Ms+"+"+Cs,ws+"+"+Ts,ps,Ls].join("|"),"g"),Fs=RegExp("["+Ss+Ja+Qa+$a+ss+"]"),zs=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Us={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},js="object"==typeof tn&&tn&&tn.Object===Object&&tn,Vs="object"==typeof self&&self&&self.Object===Object&&self,Hs=js||Vs||Function("return this")();function Ws(t,e,n,r){var i=-1,o=t?t.length:0;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function Gs(t){return t.split("")}function qs(t){return t.match(Za)||[]}function Xs(t){return function(e){return null==t?void 0:t[e]}}var Ys=Xs(Us);function Zs(t){return Fs.test(t)}function Ks(t){return zs.test(t)}function Js(t){return Zs(t)?Qs(t):Gs(t)}function Qs(t){return t.match(Ns)||[]}function $s(t){return t.match(Bs)||[]}var tl=Object.prototype,el=tl.toString,nl=Hs.Symbol,rl=nl?nl.prototype:void 0,il=rl?rl.toString:void 0;function ol(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;var o=Array(i);while(++r<i)o[r]=t[r+e];return o}function al(t){if("string"==typeof t)return t;if(hl(t))return il?il.call(t):"";var e=t+"";return"0"==e&&1/t==-Xa?"-0":e}function sl(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:ol(t,e,n)}function ll(t){return function(e){e=dl(e);var n=Zs(e)?Js(e):void 0,r=n?n[0]:e.charAt(0),i=n?sl(n,1).join(""):e.slice(1);return r[t]()+i}}function ul(t){return function(e){return Ws(vl(ml(e).replace(ks,"")),t,"")}}function cl(t){return!!t&&"object"==typeof t}function hl(t){return"symbol"==typeof t||cl(t)&&el.call(t)==Ya}function dl(t){return null==t?"":al(t)}var pl=ul((function(t,e,n){return e=e.toLowerCase(),t+(n?fl(e):e)}));function fl(t){return gl(dl(t).toLowerCase())}function ml(t){return t=dl(t),t&&t.replace(Ka,Ys).replace(Is,"")}var gl=ll("toUpperCase");function vl(t,e,n){return t=dl(t),e=n?void 0:e,void 0===e?Ks(t)?$s(t):qs(t):t.match(e)||[]}for(var yl=pl,bl="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),xl={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},_l={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:bl?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},wl={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Sl=1;Sl<20;Sl++)wl["f"+Sl]=111+Sl;function Ml(t,e,n){e&&!("byKey"in e)&&(n=e,e=null),Array.isArray(t)||(t=[t]);var r=t.map((function(t){return Cl(t,e)})),i=function(t){return r.some((function(e){return Tl(e,t)}))},o=null==n?i:i(n);return o}function El(t,e){return Ml(t,{byKey:!0},e)}function Cl(t,e){var n=e&&e.byKey,r={};t=t.replace("++","+add");var i=t.split("+"),o=i.length;for(var a in xl)r[xl[a]]=!1;var s=!0,l=!1,u=void 0;try{for(var c,h=i[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value,p=d.endsWith("?")&&d.length>1;p&&(d=d.slice(0,-1));var f=Dl(d),m=xl[f];if(d.length>1&&!m&&!_l[d]&&!wl[f])throw new TypeError('Unknown modifier: "'+d+'"');1!==o&&m||(n?r.key=f:r.which=Al(d)),m&&(r[m]=!p||null)}}catch(g){l=!0,u=g}finally{try{!s&&h.return&&h.return()}finally{if(l)throw u}}return r}function Tl(t,e){for(var n in t){var r=t[n],i=void 0;if(null!=r&&(i="key"===n&&null!=e.key?e.key.toLowerCase():"which"===n?91===r&&93===e.which?91:e.which:e[n],(null!=i||!1!==r)&&i!==r))return!1}return!0}function Al(t){t=Dl(t);var e=wl[t]||t.toUpperCase().charCodeAt(0);return e}function Dl(t){return t=t.toLowerCase(),t=_l[t]||t,t}var Pl=Ml,Rl=El,Ll="Expected a function",Ol=NaN,kl="[object Symbol]",Il=/^\s+|\s+$/g,Nl=/^[-+]0x[0-9a-f]+$/i,Bl=/^0b[01]+$/i,Fl=/^0o[0-7]+$/i,zl=parseInt,Ul="object"==typeof tn&&tn&&tn.Object===Object&&tn,jl="object"==typeof self&&self&&self.Object===Object&&self,Vl=Ul||jl||Function("return this")(),Hl=Object.prototype,Wl=Hl.toString,Gl=Math.max,ql=Math.min,Xl=function(){return Vl.Date.now()};function Yl(t,e,n){var r,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(Ll);function p(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n),a}function f(t){return u=t,s=setTimeout(v,e),c?p(t):a}function m(t){var n=t-l,r=t-u,i=e-n;return h?ql(i,o-r):i}function g(t){var n=t-l,r=t-u;return void 0===l||n>=e||n<0||h&&r>=o}function v(){var t=Xl();if(g(t))return y(t);s=setTimeout(v,m(t))}function y(t){return s=void 0,d&&r?p(t):(r=i=void 0,a)}function b(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0}function x(){return void 0===s?a:y(Xl())}function _(){var t=Xl(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return f(l);if(h)return s=setTimeout(v,e),p(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Ql(e)||0,Zl(n)&&(c=!!n.leading,h="maxWait"in n,o=h?Gl(Ql(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),_.cancel=b,_.flush=x,_}function Zl(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Kl(t){return!!t&&"object"==typeof t}function Jl(t){return"symbol"==typeof t||Kl(t)&&Wl.call(t)==kl}function Ql(t){if("number"==typeof t)return t;if(Jl(t))return Ol;if(Zl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Il,"");var n=Bl.test(t);return n||Fl.test(t)?zl(t.slice(2),n?2:8):Nl.test(t)?Ol:+t}var $l,tu=Yl,eu=en((function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",h="[object GeneratorFunction]",d="[object Map]",p="[object Number]",f="[object Object]",m="[object Promise]",g="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",x="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",M="[object Float64Array]",E="[object Int8Array]",C="[object Int16Array]",T="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,O=/\w*$/,k=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,N={};N[o]=N[a]=N[_]=N[w]=N[s]=N[l]=N[S]=N[M]=N[E]=N[C]=N[T]=N[d]=N[p]=N[f]=N[g]=N[v]=N[y]=N[b]=N[A]=N[D]=N[P]=N[R]=!0,N[u]=N[c]=N[x]=!1;var B="object"==typeof tn&&tn&&tn.Object===Object&&tn,F="object"==typeof self&&self&&self.Object===Object&&self,z=B||F||Function("return this")(),U=e&&!e.nodeType&&e,j=U&&t&&!t.nodeType&&t,V=j&&j.exports===U;function H(t,e){return t.set(e[0],e[1]),t}function W(t,e){return t.add(e),t}function G(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function q(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function X(t,e,n,r){var i=-1,o=t?t.length:0;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function Y(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Z(t,e){return null==t?void 0:t[e]}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function J(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Q(t,e){return function(n){return t(e(n))}}function $(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var tt=Array.prototype,et=Function.prototype,nt=Object.prototype,rt=z["__core-js_shared__"],it=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ot=et.toString,at=nt.hasOwnProperty,st=nt.toString,lt=RegExp("^"+ot.call(at).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=V?z.Buffer:void 0,ct=z.Symbol,ht=z.Uint8Array,dt=Q(Object.getPrototypeOf,Object),pt=Object.create,ft=nt.propertyIsEnumerable,mt=tt.splice,gt=Object.getOwnPropertySymbols,vt=ut?ut.isBuffer:void 0,yt=Q(Object.keys,Object),bt=Ee(z,"DataView"),xt=Ee(z,"Map"),_t=Ee(z,"Promise"),wt=Ee(z,"Set"),St=Ee(z,"WeakMap"),Mt=Ee(Object,"create"),Et=Ie(bt),Ct=Ie(xt),Tt=Ie(_t),At=Ie(wt),Dt=Ie(St),Pt=ct?ct.prototype:void 0,Rt=Pt?Pt.valueOf:void 0;function Lt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Ot(){this.__data__=Mt?Mt(null):{}}function kt(t){return this.has(t)&&delete this.__data__[t]}function It(t){var e=this.__data__;if(Mt){var n=e[t];return n===r?void 0:n}return at.call(e,t)?e[t]:void 0}function Nt(t){var e=this.__data__;return Mt?void 0!==e[t]:at.call(e,t)}function Bt(t,e){var n=this.__data__;return n[t]=Mt&&void 0===e?r:e,this}function Ft(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=[]}function Ut(t){var e=this.__data__,n=ie(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():mt.call(e,n,1),!0}function jt(t){var e=this.__data__,n=ie(e,t);return n<0?void 0:e[n][1]}function Vt(t){return ie(this.__data__,t)>-1}function Ht(t,e){var n=this.__data__,r=ie(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function Wt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Gt(){this.__data__={hash:new Lt,map:new(xt||Ft),string:new Lt}}function qt(t){return Me(this,t)["delete"](t)}function Xt(t){return Me(this,t).get(t)}function Yt(t){return Me(this,t).has(t)}function Zt(t,e){return Me(this,t).set(t,e),this}function Kt(t){this.__data__=new Ft(t)}function Jt(){this.__data__=new Ft}function Qt(t){return this.__data__["delete"](t)}function $t(t){return this.__data__.get(t)}function te(t){return this.__data__.has(t)}function ee(t,e){var r=this.__data__;if(r instanceof Ft){var i=r.__data__;if(!xt||i.length<n-1)return i.push([t,e]),this;r=this.__data__=new Wt(i)}return r.set(t,e),this}function ne(t,e){var n=ze(t)||Fe(t)?Y(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!at.call(t,o)||i&&("length"==o||Re(o,r))||n.push(o);return n}function re(t,e,n){var r=t[e];at.call(t,e)&&Be(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function ie(t,e){var n=t.length;while(n--)if(Be(t[n][0],e))return n;return-1}function oe(t,e){return t&&_e(e,Xe(e),t)}function ae(t,e,n,r,i,a,s){var l;if(r&&(l=a?r(t,i,a,s):r(t)),void 0!==l)return l;if(!Ge(t))return t;var u=ze(t);if(u){if(l=Ae(t),!e)return xe(t,l)}else{var d=Te(t),p=d==c||d==h;if(Ve(t))return de(t,e);if(d==f||d==o||p&&!a){if(K(t))return a?t:{};if(l=De(p?{}:t),!e)return we(t,oe(l,t))}else{if(!N[d])return a?t:{};l=Pe(t,d,ae,e)}}s||(s=new Kt);var m=s.get(t);if(m)return m;if(s.set(t,l),!u)var g=n?Se(t):Xe(t);return G(g||t,(function(i,o){g&&(o=i,i=t[o]),re(l,o,ae(i,e,n,r,o,t,s))})),l}function se(t){return Ge(t)?pt(t):{}}function le(t,e,n){var r=e(t);return ze(t)?r:q(r,n(t))}function ue(t){return st.call(t)}function ce(t){if(!Ge(t)||Oe(t))return!1;var e=He(t)||K(t)?lt:k;return e.test(Ie(t))}function he(t){if(!ke(t))return yt(t);var e=[];for(var n in Object(t))at.call(t,n)&&"constructor"!=n&&e.push(n);return e}function de(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function pe(t){var e=new t.constructor(t.byteLength);return new ht(e).set(new ht(t)),e}function fe(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function me(t,e,n){var r=e?n(J(t),!0):J(t);return X(r,H,new t.constructor)}function ge(t){var e=new t.constructor(t.source,O.exec(t));return e.lastIndex=t.lastIndex,e}function ve(t,e,n){var r=e?n($(t),!0):$(t);return X(r,W,new t.constructor)}function ye(t){return Rt?Object(Rt.call(t)):{}}function be(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function xe(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}function _e(t,e,n,r){n||(n={});var i=-1,o=e.length;while(++i<o){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;re(n,a,void 0===s?t[a]:s)}return n}function we(t,e){return _e(t,Ce(t),e)}function Se(t){return le(t,Xe,Ce)}function Me(t,e){var n=t.__data__;return Le(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ee(t,e){var n=Z(t,e);return ce(n)?n:void 0}Lt.prototype.clear=Ot,Lt.prototype["delete"]=kt,Lt.prototype.get=It,Lt.prototype.has=Nt,Lt.prototype.set=Bt,Ft.prototype.clear=zt,Ft.prototype["delete"]=Ut,Ft.prototype.get=jt,Ft.prototype.has=Vt,Ft.prototype.set=Ht,Wt.prototype.clear=Gt,Wt.prototype["delete"]=qt,Wt.prototype.get=Xt,Wt.prototype.has=Yt,Wt.prototype.set=Zt,Kt.prototype.clear=Jt,Kt.prototype["delete"]=Qt,Kt.prototype.get=$t,Kt.prototype.has=te,Kt.prototype.set=ee;var Ce=gt?Q(gt,Object):Ye,Te=ue;function Ae(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&at.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function De(t){return"function"!=typeof t.constructor||ke(t)?{}:se(dt(t))}function Pe(t,e,n,r){var i=t.constructor;switch(e){case _:return pe(t);case s:case l:return new i(+t);case w:return fe(t,r);case S:case M:case E:case C:case T:case A:case D:case P:case R:return be(t,r);case d:return me(t,r,n);case p:case y:return new i(t);case g:return ge(t);case v:return ve(t,r,n);case b:return ye(t)}}function Re(t,e){return e=null==e?i:e,!!e&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Le(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Oe(t){return!!it&&it in t}function ke(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||nt;return t===n}function Ie(t){if(null!=t){try{return ot.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ne(t){return ae(t,!0,!0)}function Be(t,e){return t===e||t!==t&&e!==e}function Fe(t){return je(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==o)}(bt&&Te(new bt(new ArrayBuffer(1)))!=w||xt&&Te(new xt)!=d||_t&&Te(_t.resolve())!=m||wt&&Te(new wt)!=v||St&&Te(new St)!=x)&&(Te=function(t){var e=st.call(t),n=e==f?t.constructor:void 0,r=n?Ie(n):void 0;if(r)switch(r){case Et:return w;case Ct:return d;case Tt:return m;case At:return v;case Dt:return x}return e});var ze=Array.isArray;function Ue(t){return null!=t&&We(t.length)&&!He(t)}function je(t){return qe(t)&&Ue(t)}var Ve=vt||Ze;function He(t){var e=Ge(t)?st.call(t):"";return e==c||e==h}function We(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Ge(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qe(t){return!!t&&"object"==typeof t}function Xe(t){return Ue(t)?ne(t):he(t)}function Ye(){return[]}function Ze(){return!1}t.exports=Ne})),nu=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};function ru(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var iu=0;function ou(t){return"__private_"+iu+++"_"+t}function au(t,e,n){const r=[];return t.forEach((t=>"string"!==typeof t?r.push(t):e[Symbol.split](t).forEach(((t,e,i)=>{""!==t&&r.push(t),e<i.length-1&&r.push(n)})))),r}
/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param {string} phrase that needs interpolation, with placeholders
 * @param {object} options with values that will be used to replace placeholders
 * @returns {any[]} interpolated
 */function su(t,e){const n=/\$/g,r="$$$$";let i=[t];if(null==e)return i;for(const o of Object.keys(e))if("_"!==o){let t=e[o];"string"===typeof t&&(t=n[Symbol.replace](t,r)),i=au(i,new RegExp(`%\\{${o}\\}`,"g"),t)}return i}var lu=($l=ou("apply"),class{constructor(t){Object.defineProperty(this,$l,{value:uu}),this.locale={strings:{},pluralize(t){return 1===t?0:1}},Array.isArray(t)?t.forEach(ru(this,$l)[$l],this):ru(this,$l)[$l](t)}translate(t,e){return this.translateArray(t,e).join("")}translateArray(t,e){if(!nu(this.locale.strings,t))throw new Error(`missing string: ${t}`);const n=this.locale.strings[t],r="object"===typeof n;if(r){if(e&&"undefined"!==typeof e.smart_count){const t=this.locale.pluralize(e.smart_count);return su(n[t],e)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return su(n,e)}});function uu(t){if(null==t||!t.strings)return;const e=this.locale;this.locale={...e,strings:{...e.strings,...t.strings}},this.locale.pluralize=t.pluralize||e.pluralize}var cu=function(){var t={},e=t._fns={};function n(t){var n=e[t]?e[t]:[],r=t.indexOf(":"),i=-1===r?[t]:[t.substring(0,r),t.substring(r+1)],o=Object.keys(e),a=0,s=o.length;for(a;a<s;a++){var l=o[a];if("*"===l&&(n=n.concat(e[l])),2===i.length&&i[0]===l){n=n.concat(e[l]);break}}return n}function r(t,e,n){var r=0,i=e.length;for(r;r<i;r++){if(!e[r])break;e[r].event=t,e[r].apply(e[r],n)}}return t.emit=function(t,e,i,o,a,s,l){var u=n(t);u.length&&r(t,u,[e,i,o,a,s,l])},t.on=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},t.once=function(e,n){function r(){n.apply(this,arguments),t.off(e,r)}this.on(e,r)},t.off=function(t,e){var n=[];if(t&&e){var r=this._fns[t],i=0,o=r?r.length:0;for(i;i<o;i++)r[i]!==e&&n.push(r[i])}n.length?this._fns[t]=n:delete this._fns[t]},t};let hu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var du={urlAlphabet:hu};let{urlAlphabet:pu}=du;if("undefined"!==typeof navigator&&"ReactNative"===navigator.product&&"undefined"===typeof crypto)throw new Error("React Native does not have a built-in secure random generator. If you don’t need unpredictable IDs use `nanoid/non-secure`. For secure IDs, import `react-native-get-random-values` before Nano ID.");if("undefined"!==typeof msCrypto&&"undefined"===typeof crypto)throw new Error("Import file with `if (!window.crypto) window.crypto = window.msCrypto` before importing Nano ID to fix IE 11 support");if("undefined"===typeof crypto)throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");let fu=t=>crypto.getRandomValues(new Uint8Array(t)),mu=(t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return()=>{let o="";while(1){let a=n(i),s=i;while(s--)if(o+=t[a[s]&r]||"",o.length===e)return o}}},gu=(t,e)=>mu(t,e,fu),vu=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));while(t--){let r=63&n[t];e+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return e};var yu={nanoid:vu,customAlphabet:gu,customRandom:mu,urlAlphabet:pu,random:fu},bu=function(t){if("number"!==typeof t||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var r=Math.min(Math.floor(Math.log(t)/Math.log(1024)),n.length-1);t=Number(t/Math.pow(1024,r));var i=n[r];return t>=10||t%1===0?(e?"-":"")+t.toFixed(0)+" "+i:(e?"-":"")+t.toFixed(1)+" "+i};function xu(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}xu.prototype.match=function(t){var e,n,r=!0,i=this.parts,o=i.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(n=(t||"").split(this.separator),e=0;r&&e<o;e++)"*"!==i[e]&&(r=e<n.length&&i[e]===n[e]);r=r&&n}else r=!1;else if("function"==typeof t.splice)for(r=[],e=t.length;e--;)this.match(t[e])&&(r[r.length]=t[e]);else if("object"==typeof t)for(var a in r={},t)this.match(a)&&(r[a]=t[a]);return r};var _u=function(t,e,n){var r=new xu(t,n||/[\/\.]/);return"undefined"!=typeof e?r.match(e):r},wu=/[\/\+\.]/,Su=function(t,e){function n(e){var n=_u(e,t,wu);return n&&n.length>=2}return e?n(e.split(";")[0]):n};function Mu(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Eu=0;function Cu(t){return"__private_"+Eu+++"_"+t}var Tu=Cu("publish");class Au{constructor(){Object.defineProperty(this,Tu,{value:Du}),this.state={},this.callbacks=[]}getState(){return this.state}setState(t){const e={...this.state},n={...this.state,...t};this.state=n,Mu(this,Tu)[Tu](e,n,t)}subscribe(t){return this.callbacks.push(t),()=>{this.callbacks.splice(this.callbacks.indexOf(t),1)}}}function Du(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.callbacks.forEach((t=>{t(...e)}))}Au.VERSION="2.0.3";var Pu=function(){return new Au},Ru=function(t){const e=t.lastIndexOf(".");return-1===e||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}},Lu={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"},Ou=function(t){var e;if(t.type)return t.type;const n=t.name?null==(e=Ru(t.name).extension)?void 0:e.toLowerCase():null;return n&&n in Lu?Lu[n]:"application/octet-stream"};function ku(t){return t.charCodeAt(0).toString(32)}function Iu(t){let e="";return t.replace(/[^A-Z0-9]/gi,(t=>(e+=`-${ku(t)}`,"/")))+e}var Nu=function(t){let e="uppy";return"string"===typeof t.name&&(e+=`-${Iu(t.name.toLowerCase())}`),void 0!==t.type&&(e+=`-${t.type}`),t.meta&&"string"===typeof t.meta.relativePath&&(e+=`-${Iu(t.meta.relativePath.toLowerCase())}`),void 0!==t.data.size&&(e+=`-${t.data.size}`),void 0!==t.data.lastModified&&(e+=`-${t.data.lastModified}`),e},Bu=function(t){if(null==t&&(t="undefined"!==typeof navigator?navigator.userAgent:null),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const n=e[1];let[r,i]=n.split(".");return r=parseInt(r,10),i=parseInt(i,10),r<15||15===r&&i<15063||(r>18||18===r&&i>=18218)},Fu=function(t,e){return e.name?e.name:"image"===t.split("/")[0]?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"};function zu(t){return t<10?`0${t}`:t.toString()}var Uu=function(){const t=new Date,e=zu(t.getHours()),n=zu(t.getMinutes()),r=zu(t.getSeconds());return`${e}:${n}:${r}`};const ju={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error(`[Uppy] [${Uu()}]`,...e)}},Vu={debug:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.debug(`[Uppy] [${Uu()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.warn(`[Uppy] [${Uu()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error(`[Uppy] [${Uu()}]`,...e)}};var Hu={justErrorsLogger:ju,debugLogger:Vu},Wu={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",backToSearch:"Back to Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},Gu=yu;let qu,Xu;function Yu(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Zu=0;function Ku(t){return"__private_"+Zu+++"_"+t}const{nanoid:Ju}=Gu,{justErrorsLogger:Qu,debugLogger:$u}=Hu;class tc extends Error{constructor(){super(...arguments),this.isRestriction=!0}}"undefined"===typeof AggregateError&&(globalThis.AggregateError=class extends Error{constructor(t,e){super(e),this.errors=t}});class ec extends AggregateError{constructor(){super(...arguments),this.isRestriction=!0}}var nc=Ku("plugins"),rc=Ku("storeUnsubscribe"),ic=Ku("emitter"),oc=Ku("preProcessors"),ac=Ku("uploaders"),sc=Ku("postProcessors"),lc=Ku("checkRestrictions"),uc=Ku("checkMinNumberOfFiles"),cc=Ku("checkRequiredMetaFieldsOnFile"),hc=Ku("checkRequiredMetaFields"),dc=Ku("showOrLogErrorAndThrow"),pc=Ku("assertNewUploadAllowed"),fc=Ku("checkAndCreateFileStateObject"),mc=Ku("startIfAutoProceed"),gc=Ku("addListeners"),vc=Ku("updateOnlineStatus"),yc=Ku("createUpload"),bc=Ku("getUpload"),xc=Ku("removeUpload"),_c=Ku("runUpload");qu=Symbol.for("uppy test: getPlugins"),Xu=Symbol.for("uppy test: createUpload");class wc{constructor(t){Object.defineProperty(this,_c,{value:Ic}),Object.defineProperty(this,xc,{value:kc}),Object.defineProperty(this,bc,{value:Oc}),Object.defineProperty(this,yc,{value:Lc}),Object.defineProperty(this,gc,{value:Rc}),Object.defineProperty(this,mc,{value:Pc}),Object.defineProperty(this,fc,{value:Dc}),Object.defineProperty(this,pc,{value:Ac}),Object.defineProperty(this,dc,{value:Tc}),Object.defineProperty(this,hc,{value:Cc}),Object.defineProperty(this,cc,{value:Ec}),Object.defineProperty(this,uc,{value:Mc}),Object.defineProperty(this,lc,{value:Sc}),Object.defineProperty(this,nc,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,rc,{writable:!0,value:void 0}),Object.defineProperty(this,ic,{writable:!0,value:cu()}),Object.defineProperty(this,oc,{writable:!0,value:new Set}),Object.defineProperty(this,ac,{writable:!0,value:new Set}),Object.defineProperty(this,sc,{writable:!0,value:new Set}),Object.defineProperty(this,vc,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=Wu;const e={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,allowMultipleUploadBatches:!0,debug:!1,restrictions:{maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},meta:{},onBeforeFileAdded:t=>t,onBeforeUpload:t=>t,store:Pu(),logger:Qu,infoTimeout:5e3};if(this.opts={...e,...t,restrictions:{...e.restrictions,...t&&t.restrictions}},t&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t&&t.debug&&(this.opts.logger=$u),this.log(`Using Core v${this.constructor.VERSION}`),this.opts.restrictions.allowedFileTypes&&null!==this.opts.restrictions.allowedFileTypes&&!Array.isArray(this.opts.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");this.i18nInit(),this.calculateProgress=Yo(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:Bu(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),Yu(this,rc)[rc]=this.store.subscribe(((t,e,n)=>{this.emit("state-update",t,e,n),this.updateAll(e)})),this.opts.debug&&"undefined"!==typeof window&&(window[this.opts.id]=this),Yu(this,gc)[gc]()}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Yu(this,ic)[ic].emit(t,...n)}on(t,e){return Yu(this,ic)[ic].on(t,e),this}once(t,e){return Yu(this,ic)[ic].once(t,e),this}off(t,e){return Yu(this,ic)[ic].off(t,e),this}updateAll(t){this.iteratePlugins((e=>{e.update(t)}))}setState(t){this.store.setState(t)}getState(){return this.store.getState()}get state(){return this.getState()}setFileState(t,e){if(!this.getState().files[t])throw new Error(`Can’t set state for ${t} (the file could have been removed)`);this.setState({files:{...this.getState().files,[t]:{...this.getState().files[t],...e}}})}i18nInit(){const t=new lu([this.defaultLocale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t&&t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins((t=>{t.setOptions()})),this.setState()}resetProgress(){const t={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},e={...this.getState().files},n={};Object.keys(e).forEach((r=>{const i={...e[r]};i.progress={...i.progress,...t},n[r]=i})),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(t){Yu(this,oc)[oc].add(t)}removePreProcessor(t){return Yu(this,oc)[oc].delete(t)}addPostProcessor(t){Yu(this,sc)[sc].add(t)}removePostProcessor(t){return Yu(this,sc)[sc].delete(t)}addUploader(t){Yu(this,ac)[ac].add(t)}removeUploader(t){return Yu(this,ac)[ac].delete(t)}setMeta(t){const e={...this.getState().meta,...t},n={...this.getState().files};Object.keys(n).forEach((e=>{n[e]={...n[e],meta:{...n[e].meta,...t}}})),this.log("Adding metadata:"),this.log(t),this.setState({meta:e,files:n})}setFileMeta(t,e){const n={...this.getState().files};if(!n[t])return void this.log("Was trying to set metadata for a file that has been removed: ",t);const r={...n[t].meta,...e};n[t]={...n[t],meta:r},this.setState({files:n})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getObjectOfFilesPerState(){const{files:t,totalProgress:e,error:n}=this.getState(),r=Object.values(t),i=r.filter((t=>{let{progress:e}=t;return!e.uploadComplete&&e.uploadStarted})),o=r.filter((t=>!t.progress.uploadStarted)),a=r.filter((t=>t.progress.uploadStarted||t.progress.preprocess||t.progress.postprocess)),s=r.filter((t=>t.progress.uploadStarted)),l=r.filter((t=>t.isPaused)),u=r.filter((t=>t.progress.uploadComplete)),c=r.filter((t=>t.error)),h=i.filter((t=>!t.isPaused)),d=r.filter((t=>t.progress.preprocess||t.progress.postprocess));return{newFiles:o,startedFiles:a,uploadStartedFiles:s,pausedFiles:l,completeFiles:u,erroredFiles:c,inProgressFiles:i,inProgressNotPausedFiles:h,processingFiles:d,isUploadStarted:s.length>0,isAllComplete:100===e&&u.length===r.length&&0===d.length,isAllErrored:!!n&&c.length===r.length,isAllPaused:0!==i.length&&l.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:r.some((t=>t.isGhost))}}validateRestrictions(t,e){try{return Yu(this,lc)[lc](t,e),{result:!0}}catch(n){return{result:!1,reason:n.message}}}checkIfFileAlreadyExists(t){const{files:e}=this.getState();return!(!e[t]||e[t].isGhost)}addFile(t){Yu(this,pc)[pc](t);const{files:e}=this.getState();let n=Yu(this,fc)[fc](e,t);return e[n.id]&&e[n.id].isGhost&&(n={...e[n.id],data:t.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${n.name}, ${n.id}`)),this.setState({files:{...e,[n.id]:n}}),this.emit("file-added",n),this.emit("files-added",[n]),this.log(`Added file: ${n.name}, ${n.id}, mime type: ${n.type}`),Yu(this,mc)[mc](),n.id}addFiles(t){Yu(this,pc)[pc]();const e={...this.getState().files},n=[],r=[];for(let o=0;o<t.length;o++)try{let r=Yu(this,fc)[fc](e,t[o]);e[r.id]&&e[r.id].isGhost&&(r={...e[r.id],data:t[o].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${r.name}, ${r.id}`)),e[r.id]=r,n.push(r)}catch(i){i.isRestriction||r.push(i)}if(this.setState({files:e}),n.forEach((t=>{this.emit("file-added",t)})),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.keys(n).forEach((t=>{this.log(`Added file: ${n[t].name}\n id: ${n[t].id}\n type: ${n[t].type}`)})),n.length>0&&Yu(this,mc)[mc](),r.length>0){let t="Multiple errors occurred while adding files:\n";if(r.forEach((e=>{t+=`\n * ${e.message}`})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:r.length}),details:t},"error",this.opts.infoTimeout),"function"===typeof AggregateError)throw new AggregateError(r,t);{const e=new Error(t);throw e.errors=r,e}}}removeFiles(t,e){const{files:n,currentUploads:r}=this.getState(),i={...n},o={...r},a=Object.create(null);function s(t){return void 0===a[t]}t.forEach((t=>{n[t]&&(a[t]=n[t],delete i[t])})),Object.keys(o).forEach((t=>{const e=r[t].fileIDs.filter(s);0!==e.length?o[t]={...r[t],fileIDs:e}:delete o[t]}));const l={currentUploads:o,files:i};0===Object.keys(i).length&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.calculateTotalProgress();const u=Object.keys(a);u.forEach((t=>{this.emit("file-removed",a[t],e)})),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(t,e){void 0===e&&(e=null),this.removeFiles([t],e)}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).uploadComplete)return;const e=this.getFile(t).isPaused||!1,n=!e;return this.setFileState(t,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){const t={...this.getState().files},e=Object.keys(t).filter((e=>!t[e].progress.uploadComplete&&t[e].progress.uploadStarted));e.forEach((e=>{const n={...t[e],isPaused:!0};t[e]=n})),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files},e=Object.keys(t).filter((e=>!t[e].progress.uploadComplete&&t[e].progress.uploadStarted));e.forEach((e=>{const n={...t[e],isPaused:!1,error:null};t[e]=n})),this.setState({files:t}),this.emit("resume-all")}retryAll(){const t={...this.getState().files},e=Object.keys(t).filter((e=>t[e].error));if(e.forEach((e=>{const n={...t[e],isPaused:!1,error:null};t[e]=n})),this.setState({files:t,error:null}),this.emit("retry-all",e),0===e.length)return Promise.resolve({successful:[],failed:[]});const n=Yu(this,yc)[yc](e,{forceAllowNewUpload:!0});return Yu(this,_c)[_c](n)}cancelAll(){this.emit("cancel-all");const{files:t}=this.getState(),e=Object.keys(t);e.length&&this.removeFiles(e,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",t);const e=Yu(this,yc)[yc]([t],{forceAllowNewUpload:!0});return Yu(this,_c)[_c](e)}reset(){this.cancelAll()}logout(){this.iteratePlugins((t=>{t.provider&&t.provider.logout&&t.provider.logout()}))}calculateProgress(t,e){if(!this.getFile(t.id))return void this.log(`Not setting progress for a file that has been removed: ${t.id}`);const n=Number.isFinite(e.bytesTotal)&&e.bytesTotal>0;this.setFileState(t.id,{progress:{...this.getFile(t.id).progress,bytesUploaded:e.bytesUploaded,bytesTotal:e.bytesTotal,percentage:n?Math.round(e.bytesUploaded/e.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const t=this.getFiles(),e=t.filter((t=>t.progress.uploadStarted||t.progress.preprocess||t.progress.postprocess));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});const n=e.filter((t=>null!=t.progress.bytesTotal)),r=e.filter((t=>null==t.progress.bytesTotal));if(0===n.length){const t=100*e.length,n=r.reduce(((t,e)=>t+e.progress.percentage),0),i=Math.round(n/t*100);return void this.setState({totalProgress:i})}let i=n.reduce(((t,e)=>t+e.progress.bytesTotal),0);const o=i/n.length;i+=o*r.length;let a=0;n.forEach((t=>{a+=t.progress.bytesUploaded})),r.forEach((t=>{a+=o*(t.progress.percentage||0)/100}));let s=0===i?0:Math.round(a/i*100);s>100&&(s=100),this.setState({totalProgress:s}),this.emit("progress",s)}updateOnlineStatus(){const t="undefined"===typeof window.navigator.onLine||window.navigator.onLine;t?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,e){if("function"!==typeof t){const e=`Expected a plugin class, but got ${null===t?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(e)}const n=new t(this,e),r=n.id;if(!r)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const i=this.getPlugin(r);if(i){const t=`Already found a plugin named '${i.id}'. Tried to use: '${r}'.\nUppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(t)}return t.VERSION&&this.log(`Using ${r} v${t.VERSION}`),n.type in Yu(this,nc)[nc]?Yu(this,nc)[nc][n.type].push(n):Yu(this,nc)[nc][n.type]=[n],n.install(),this}getPlugin(t){for(const e of Object.values(Yu(this,nc)[nc])){const n=e.find((e=>e.id===t));if(null!=n)return n}}[qu](t){return Yu(this,nc)[nc][t]}iteratePlugins(t){Object.values(Yu(this,nc)[nc]).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const e=Yu(this,nc)[nc][t.type],n=e.findIndex((e=>e.id===t.id));-1!==n&&e.splice(n,1);const r=this.getState(),i={plugins:{...r.plugins,[t.id]:void 0}};this.setState(i)}close(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.reset(),Yu(this,rc)[rc](),this.iteratePlugins((t=>{this.removePlugin(t)})),"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("online",Yu(this,vc)[vc]),window.removeEventListener("offline",Yu(this,vc)[vc]))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,e,n){void 0===e&&(e="info"),void 0===n&&(n=3e3);const r="object"===typeof t;this.setState({info:[...this.getState().info,{type:e,message:r?t.message:t,details:r?t.details:null}]}),setTimeout((()=>this.hideInfo()),n),this.emit("info-visible")}log(t,e){const{logger:n}=this.opts;switch(e){case"error":n.error(t);break;case"warning":n.warn(t);break;default:n.debug(t);break}}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?Yu(this,_c)[_c](t):(Yu(this,xc)[xc](t),Promise.reject(new Error("Nonexistent upload")))}[Xu](){return Yu(this,yc)[yc](...arguments)}addResultData(t,e){if(!Yu(this,bc)[bc](t))return void this.log(`Not setting result for an upload that has been removed: ${t}`);const{currentUploads:n}=this.getState(),r={...n[t],result:{...n[t].result,...e}};this.setState({currentUploads:{...n,[t]:r}})}upload(){var t;null!=(t=Yu(this,nc)[nc].uploader)&&t.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();const n=this.opts.onBeforeUpload(e);return!1===n?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&"object"===typeof n&&(e=n,this.setState({files:e})),Promise.resolve().then((()=>{Yu(this,uc)[uc](e),Yu(this,hc)[hc](e)})).catch((t=>{Yu(this,dc)[dc](t)})).then((()=>{const{currentUploads:t}=this.getState(),n=Object.values(t).flatMap((t=>t.fileIDs)),r=[];Object.keys(e).forEach((t=>{const e=this.getFile(t);e.progress.uploadStarted||-1!==n.indexOf(t)||r.push(e.id)}));const i=Yu(this,yc)[yc](r);return Yu(this,_c)[_c](i)})).catch((t=>{Yu(this,dc)[dc](t,{showInformer:!1})})))}}function Sc(t,e){void 0===e&&(e=this.getFiles());const{maxFileSize:n,minFileSize:r,maxTotalFileSize:i,maxNumberOfFiles:o,allowedFileTypes:a}=this.opts.restrictions;if(o&&e.length+1>o)throw new tc(`${this.i18n("youCanOnlyUploadX",{smart_count:o})}`);if(a){const e=a.some((e=>e.indexOf("/")>-1?!!t.type&&Su(t.type.replace(/;.*?$/,""),e):!("."!==e[0]||!t.extension)&&t.extension.toLowerCase()===e.substr(1).toLowerCase()));if(!e){const t=a.join(", ");throw new tc(this.i18n("youCanOnlyUploadFileTypes",{types:t}))}}if(i&&null!=t.size){let n=0;if(n+=t.size,e.forEach((t=>{n+=t.size})),n>i)throw new tc(this.i18n("exceedsSize",{size:bu(i),file:t.name}))}if(n&&null!=t.size&&t.size>n)throw new tc(this.i18n("exceedsSize",{size:bu(n),file:t.name}));if(r&&null!=t.size&&t.size<r)throw new tc(this.i18n("inferiorSize",{size:bu(r)}))}function Mc(t){const{minNumberOfFiles:e}=this.opts.restrictions;if(Object.keys(t).length<e)throw new tc(`${this.i18n("youHaveToAtLeastSelectX",{smart_count:e})}`)}function Ec(t){const{requiredMetaFields:e}=this.opts.restrictions,{hasOwnProperty:n}=Object.prototype,r=[],i=[];for(let o=0;o<e.length;o++)if(!n.call(t.meta,e[o])||""===t.meta[e[o]]){const n=new tc(`${this.i18n("missingRequiredMetaFieldOnFile",{fileName:t.name})}`);r.push(n),i.push(e[o]),Yu(this,dc)[dc](n,{file:t,showInformer:!1,throwErr:!1})}return this.setFileState(t.id,{missingRequiredMetaFields:i}),r}function Cc(t){const e=Object.keys(t).flatMap((t=>{const e=this.getFile(t);return Yu(this,cc)[cc](e)}));if(e.length)throw new ec(e,`${this.i18n("missingRequiredMetaField")}`)}function Tc(t,e){let{showInformer:n=!0,file:r=null,throwErr:i=!0}=void 0===e?{}:e;const o="object"===typeof t?t.message:t,a="object"===typeof t&&t.details?t.details:"";let s=o;if(a&&(s+=` ${a}`),t.isRestriction?(this.log(s),this.emit("restriction-failed",r,t)):this.log(s,"error"),n&&this.info({message:o,details:a},"error",this.opts.infoTimeout),i)throw"object"===typeof t?t:new Error(t)}function Ac(t){const{allowNewUpload:e}=this.getState();!1===e&&Yu(this,dc)[dc](new tc(this.i18n("noMoreFilesAllowed")),{file:t})}function Dc(t,e){const n=Ou(e),r=Fu(n,e),i=Ru(r).extension,o=Boolean(e.isRemote),a=Nu({...e,type:n});if(this.checkIfFileAlreadyExists(a)){const t=new tc(this.i18n("noDuplicates",{fileName:r}));Yu(this,dc)[dc](t,{file:e})}const s=e.meta||{};s.name=r,s.type=n;const l=Number.isFinite(e.data.size)?e.data.size:null;let u={source:e.source||"",id:a,name:r,extension:i||"",meta:{...this.getState().meta,...s},type:n,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isRemote:o,remote:e.remote||"",preview:e.preview};const c=this.opts.onBeforeFileAdded(u,t);!1===c?Yu(this,dc)[dc](new tc("Cannot add the file because onBeforeFileAdded returned false."),{showInformer:!1,fileDescriptor:e}):"object"===typeof c&&null!==c&&(u=c);try{const e=Object.keys(t).map((e=>t[e]));Yu(this,lc)[lc](u,e)}catch(h){Yu(this,dc)[dc](h,{file:u})}return u}function Pc(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((()=>{this.scheduledAutoProceed=null,this.upload().catch((t=>{t.isRestriction||this.log(t.stack||t.message||t)}))}),4))}function Rc(){const t=(t,e,n)=>{let r=t.message||"Unknown error";t.details&&(r+=` ${t.details}`),this.setState({error:r}),null!=e&&e.id in this.getState().files&&this.setFileState(e.id,{error:r,response:n})};this.on("error",t),this.on("upload-error",((e,n,r)=>{if(t(n,e,r),"object"===typeof n&&n.message){const t=new Error(n.message);t.details=n.message,n.details&&(t.details+=` ${n.details}`),t.message=this.i18n("failedToUpload",{file:e.name}),Yu(this,dc)[dc](t,{throwErr:!1})}else Yu(this,dc)[dc](n,{throwErr:!1})})),this.on("upload",(()=>{this.setState({error:null})})),this.on("upload-started",(t=>{this.getFile(t.id)?this.setFileState(t.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:t.size}}):this.log(`Not setting progress for a file that has been removed: ${t.id}`)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",((t,e)=>{if(!this.getFile(t.id))return void this.log(`Not setting progress for a file that has been removed: ${t.id}`);const n=this.getFile(t.id).progress;this.setFileState(t.id,{progress:{...n,postprocess:Yu(this,sc)[sc].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:e,uploadURL:e.uploadURL,isPaused:!1}),null==t.size&&this.setFileState(t.id,{size:e.bytesUploaded||n.bytesTotal}),this.calculateTotalProgress()})),this.on("preprocess-progress",((t,e)=>{this.getFile(t.id)?this.setFileState(t.id,{progress:{...this.getFile(t.id).progress,preprocess:e}}):this.log(`Not setting progress for a file that has been removed: ${t.id}`)})),this.on("preprocess-complete",(t=>{if(!this.getFile(t.id))return void this.log(`Not setting progress for a file that has been removed: ${t.id}`);const e={...this.getState().files};e[t.id]={...e[t.id],progress:{...e[t.id].progress}},delete e[t.id].progress.preprocess,this.setState({files:e})})),this.on("postprocess-progress",((t,e)=>{this.getFile(t.id)?this.setFileState(t.id,{progress:{...this.getState().files[t.id].progress,postprocess:e}}):this.log(`Not setting progress for a file that has been removed: ${t.id}`)})),this.on("postprocess-complete",(t=>{if(!this.getFile(t.id))return void this.log(`Not setting progress for a file that has been removed: ${t.id}`);const e={...this.getState().files};e[t.id]={...e[t.id],progress:{...e[t.id].progress}},delete e[t.id].progress.postprocess,this.setState({files:e})})),this.on("restored",(()=>{this.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(t=>{t&&Yu(this,cc)[cc](t)})),"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("online",Yu(this,vc)[vc]),window.addEventListener("offline",Yu(this,vc)[vc]),setTimeout(Yu(this,vc)[vc],3e3))}function Lc(t,e){void 0===e&&(e={});const{forceAllowNewUpload:n=!1}=e,{allowNewUpload:r,currentUploads:i}=this.getState();if(!r&&!n)throw new Error("Cannot create a new upload: already uploading.");const o=Ju();return this.emit("upload",{id:o,fileIDs:t}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...i,[o]:{fileIDs:t,step:0,result:{}}}}),o}function Oc(t){const{currentUploads:e}=this.getState();return e[t]}function kc(t){const e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function Ic(t){let{currentUploads:e}=this.getState(),n=e[t];const r=n.step||0,i=[...Yu(this,oc)[oc],...Yu(this,ac)[ac],...Yu(this,sc)[sc]];try{for(let o=r;o<i.length;o++){if(!n)break;const r=i[o],a={...n,step:o};this.setState({currentUploads:{...e,[t]:a}}),await r(a.fileIDs,t),e=this.getState().currentUploads,n=e[t]}}catch(a){throw this.emit("error",a),Yu(this,xc)[xc](t),a}if(n){n.fileIDs.forEach((t=>{const e=this.getFile(t);e&&e.progress.postprocess&&this.emit("postprocess-complete",e)}));const r=n.fileIDs.map((t=>this.getFile(t))),i=r.filter((t=>!t.error)),o=r.filter((t=>t.error));await this.addResultData(t,{successful:i,failed:o,uploadID:t}),e=this.getState().currentUploads,n=e[t]}let o;return n&&(o=n.result,this.emit("complete",o),Yu(this,xc)[xc](t)),null==o&&this.log(`Not setting result for an upload that has been removed: ${t}`),o}wc.VERSION="2.1.3";var Nc=wc,Bc=en((function(t,e){var n,r,i,o,a,s,l,u,c={},h=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(t,e){for(var n in e)t[n]=e[n];return t}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function m(t,e,r){var i,o,a,s={};for(a in e)"key"==a?i=e[a]:"ref"==a?o=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===s[a]&&(s[a]=t.defaultProps[a]);return g(t,s,i,o,null)}function g(t,e,n,o,a){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++i:a};return null==a&&null!=r.vnode&&r.vnode(s),s}function v(t){return t.children}function y(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function x(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return x(t)}}function _(t){(!t.__d&&(t.__d=!0)&&a.push(t)&&!w.__r++||l!==r.debounceRendering)&&((l=r.debounceRendering)||s)(w)}function w(){for(var t;w.__r=a.length;)t=a.sort((function(t,e){return t.__v.__b-e.__v.__b})),a=[],t.some((function(t){var e,n,r,i,o,a;t.__d&&(o=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=p({},i)).__v=i.__v+1,R(a,i,r,e.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?b(i):o,i.__h),L(n,i),i.__e!=o&&x(i)))}))}function S(t,e,n,r,i,o,a,s,l,u){var d,p,f,m,y,x,_,w=r&&r.__k||h,S=w.length;for(n.__k=[],d=0;d<e.length;d++)if(null!=(m=n.__k[d]=null==(m=e[d])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?g(null,m,null,null,m):Array.isArray(m)?g(v,{children:m},null,null,null):m.__b>0?g(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(f=w[d])||f&&m.key==f.key&&m.type===f.type)w[d]=void 0;else for(p=0;p<S;p++){if((f=w[p])&&m.key==f.key&&m.type===f.type){w[p]=void 0;break}f=null}R(t,m,f=f||c,i,o,a,s,l,u),y=m.__e,(p=m.ref)&&f.ref!=p&&(_||(_=[]),f.ref&&_.push(f.ref,null,m),_.push(p,m.__c||y,m)),null!=y?(null==x&&(x=y),"function"==typeof m.type&&m.__k===f.__k?m.__d=l=M(m,l,t):l=E(t,m,f,w,y,l),"function"==typeof n.type&&(n.__d=l)):l&&f.__e==l&&l.parentNode!=t&&(l=b(f))}for(n.__e=x,d=S;d--;)null!=w[d]&&("function"==typeof n.type&&null!=w[d].__e&&w[d].__e==n.__d&&(n.__d=b(r,d+1)),I(w[d],w[d]));if(_)for(d=0;d<_.length;d++)k(_[d],_[++d],_[++d])}function M(t,e,n){for(var r,i=t.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=t,e="function"==typeof r.type?M(r,e,n):E(n,r,r,i,r.__e,e));return e}function E(t,e,n,r,i,o){var a,s,l;if(void 0!==e.__d)a=e.__d,e.__d=void 0;else if(null==n||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),a=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=2)if(s==i)break t;t.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function C(t,e,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in e||A(t,o,null,n[o],r);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||A(t,o,e[o],n[o],r)}function T(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||d.test(e)?n:n+"px"}function A(t,e,n,r,i){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||T(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||T(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r||t.addEventListener(e,o?P:D,o):t.removeEventListener(e,o?P:D,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function D(t){this.l[t.type+!1](r.event?r.event(t):t)}function P(t){this.l[t.type+!0](r.event?r.event(t):t)}function R(t,e,n,i,o,a,s,l,u){var c,h,d,f,m,g,b,x,_,w,M,E=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(u=n.__h,l=e.__e=n.__e,e.__h=null,a=[l]),(c=r.__b)&&c(e);try{t:if("function"==typeof E){if(x=e.props,_=(c=E.contextType)&&i[c.__c],w=c?_?_.props.value:c.__:i,n.__c?b=(h=e.__c=n.__c).__=h.__E:("prototype"in E&&E.prototype.render?e.__c=h=new E(x,w):(e.__c=h=new y(x,w),h.constructor=E,h.render=N),_&&_.sub(h),h.props=x,h.state||(h.state={}),h.context=w,h.__n=i,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=E.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=p({},h.__s)),p(h.__s,E.getDerivedStateFromProps(x,h.__s))),f=h.props,m=h.state,d)null==E.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==E.getDerivedStateFromProps&&x!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(x,w),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(x,h.__s,w)||e.__v===n.__v){h.props=x,h.state=h.__s,e.__v!==n.__v&&(h.__d=!1),h.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),h.__h.length&&s.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(x,h.__s,w),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,m,g)}))}h.context=w,h.props=x,h.state=h.__s,(c=r.__r)&&c(e),h.__d=!1,h.__v=e,h.__P=t,c=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(i=p(p({},i),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(f,m)),M=null!=c&&c.type===v&&null==c.key?c.props.children:c,S(t,Array.isArray(M)?M:[M],e,n,i,o,a,s,l,u),h.base=e.__e,e.__h=null,h.__h.length&&s.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=O(n.__e,e,n,i,o,a,s,u);(c=r.diffed)&&c(e)}catch(t){e.__v=null,(u||null!=a)&&(e.__e=l,e.__h=!!u,a[a.indexOf(l)]=null),r.__e(t,e,n)}}function L(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function O(t,e,r,i,o,a,s,l){var u,h,d,p=r.props,m=e.props,g=e.type,v=0;if("svg"===g&&(o=!0),null!=a)for(;v<a.length;v++)if((u=a[v])&&"setAttribute"in u==!!g&&(g?u.localName===g:3===u.nodeType)){t=u,a[v]=null;break}if(null==t){if(null===g)return document.createTextNode(m);t=o?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),a=null,l=!1}if(null===g)p===m||l&&t.data===m||(t.data=m);else{if(a=a&&n.call(t.childNodes),h=(p=r.props||c).dangerouslySetInnerHTML,d=m.dangerouslySetInnerHTML,!l){if(null!=a)for(p={},v=0;v<t.attributes.length;v++)p[t.attributes[v].name]=t.attributes[v].value;(d||h)&&(d&&(h&&d.__html==h.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(C(t,m,p,o,l),d)e.__k=[];else if(v=e.props.children,S(t,Array.isArray(v)?v:[v],e,r,i,o&&"foreignObject"!==g,a,s,a?a[0]:r.__k&&b(r,0),l),null!=a)for(v=a.length;v--;)null!=a[v]&&f(a[v]);l||("value"in m&&void 0!==(v=m.value)&&(v!==p.value||v!==t.value||"progress"===g&&!v)&&A(t,"value",v,p.value,!1),"checked"in m&&void 0!==(v=m.checked)&&v!==t.checked&&A(t,"checked",v,p.checked,!1))}return t}function k(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function I(t,e,n){var i,o;if(r.unmount&&r.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||k(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){r.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&I(i[o],e,"function"!=typeof t.type);n||null==t.__e||f(t.__e),t.__e=t.__d=void 0}function N(t,e,n){return this.constructor(t,n)}function B(t,e,i){var o,a,s;r.__&&r.__(t,e),a=(o="function"==typeof i)?null:i&&i.__k||e.__k,s=[],R(e,t=(!o&&i||e).__k=m(v,null,[t]),a||c,c,void 0!==e.ownerSVGElement,!o&&i?[i]:a?null:e.firstChild?n.call(e.childNodes):null,s,!o&&i?i:a?a.__e:e.firstChild,o),L(s,t)}n=h.slice,r={__e:function(t,e){for(var n,r,i;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(t)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),i=n.__d),i)return n.__E=n}catch(e){t=e}throw t}},i=0,o=function(t){return null!=t&&void 0===t.constructor},y.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof t&&(t=t(p({},n),this.props)),t&&p(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),_(this))},y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_(this))},y.prototype.render=v,a=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,w.__r=0,u=0,e.Component=y,e.Fragment=v,e.cloneElement=function(t,e,r){var i,o,a,s=p({},t.props);for(a in e)"key"==a?i=e[a]:"ref"==a?o=e[a]:s[a]=e[a];return arguments.length>2&&(s.children=arguments.length>3?n.call(arguments,2):r),g(t.type,s,i||t.key,o||t.ref,null)},e.createContext=function(t,e){var n={__c:e="__cC"+u++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(_)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n},e.createElement=m,e.createRef=function(){return{current:null}},e.h=m,e.hydrate=function t(e,n){B(e,n,t)},e.isValidElement=o,e.options=r,e.render=B,e.toChildArray=function t(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){t(e,n)})):n.push(e)),n}})),Fc=function(t){return(null==t?void 0:t.nodeType)===Node.ELEMENT_NODE},zc=function(t,e){return void 0===e&&(e=document),"string"===typeof t?e.querySelector(t):Fc(t)?t:null},Uc=class{constructor(t,e){void 0===e&&(e={}),this.uppy=t,this.opts=e}getPluginState(){const{plugins:t}=this.uppy.getState();return t[this.id]||{}}setPluginState(t){const{plugins:e}=this.uppy.getState();this.uppy.setState({plugins:{...e,[this.id]:{...e[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(),this.i18nInit()}i18nInit(){const t=new lu([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}};function jc(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Vc=0;function Hc(t){return"__private_"+Vc+++"_"+t}const{render:Wc}=Bc;function Gc(t){let e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=i,e||(e=Promise.resolve().then((()=>(e=null,t(...n))))),e}}var qc=Hc("updateUI");class Xc extends Uc{constructor(){super(...arguments),Object.defineProperty(this,qc,{writable:!0,value:void 0})}mount(t,e){const n=e.id,r=zc(t);if(r){this.isTargetDOMEl=!0;const e=document.createDocumentFragment();return jc(this,qc)[qc]=Gc((t=>{this.uppy.getPlugin(this.id)&&(Wc(this.render(t),e),this.afterUpdate())})),this.uppy.log(`Installing ${n} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),Wc(this.render(this.uppy.getState()),e),this.el=e.firstElementChild,r.appendChild(e),this.onMount(),this.el}let i;if("object"===typeof t&&t instanceof Xc)i=t;else if("function"===typeof t){const e=t;this.uppy.iteratePlugins((t=>{if(t instanceof e)return i=t,!1}))}if(i)return this.uppy.log(`Installing ${n} to ${i.id}`),this.parent=i,this.el=i.addTarget(e),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let o=`Invalid target option given to ${n}.`;throw o+="function"===typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}update(t){var e,n;null!=this.el&&(null==(e=(n=jc(this,qc))[qc])||e.call(n,t))}unmount(){var t;this.isTargetDOMEl&&(null==(t=this.el)||t.remove());this.onUnmount()}onMount(){}onUnmount(){}}var Yc=Xc;const{debugLogger:Zc}=Hu;var Kc=Nc,Jc=Nc,Qc=Yc,$c=Uc,th=Zc;Kc.Uppy=Jc,Kc.UIPlugin=Qc,Kc.BasePlugin=$c,Kc.debugLogger=th;class eh extends Error{constructor(t,e){void 0===e&&(e=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=t,this.isNetworkError=!0,this.request=e}}var nh=eh,rh=function(){return fetch(...arguments).catch((t=>{throw"AbortError"===t.name?t:new nh(t)}))};class ih extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}var oh,ah,sh,lh,uh,ch=ih;function hh(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var dh=0;function ph(t){return"__private_"+dh+++"_"+t}function fh(t){return t.replace(/\/$/,"")}async function mh(t){if(401===t.status)throw new ch;const e=t.json();if(t.status<200||t.status>300){let n=`Failed request with status: ${t.status}. ${t.statusText}`;try{const t=await e;n=t.message?`${n} message: ${t.message}`:n,n=t.requestId?`${n} request-Id: ${t.requestId}`:n}finally{throw new Error(n)}}return e}var gh=(ah=ph("getPostResponseFunc"),sh=ph("getUrl"),lh=ph("errorHandler"),uh=oh=class t{constructor(t,e){Object.defineProperty(this,lh,{value:yh}),Object.defineProperty(this,sh,{value:vh}),Object.defineProperty(this,ah,{writable:!0,value:t=>e=>t?e:this.onReceiveResponse(e)}),this.uppy=t,this.opts=e,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1}get hostname(){const{companion:t}=this.uppy.getState(),e=this.opts.companionUrl;return fh(t&&t[e]?t[e]:e)}headers(){const e=this.opts.companionHeaders||{};return Promise.resolve({...t.defaultHeaders,...e})}onReceiveResponse(t){const e=this.uppy.getState(),n=e.companion||{},r=this.opts.companionUrl,{headers:i}=t;return i.has("i-am")&&i.get("i-am")!==n[r]&&this.uppy.setState({companion:{...n,[r]:i.get("i-am")}}),t}preflight(t){return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(hh(this,sh)[sh](t),{method:"OPTIONS"}).then((t=>(t.headers.has("access-control-allow-headers")&&(this.allowedHeaders=t.headers.get("access-control-allow-headers").split(",").map((t=>t.trim().toLowerCase()))),this.preflightDone=!0,this.allowedHeaders.slice()))).catch((t=>(this.uppy.log(`[CompanionClient] unable to make preflight request ${t}`,"warning"),this.preflightDone=!0,this.allowedHeaders.slice())))}preflightAndHeaders(t){return Promise.all([this.preflight(t),this.headers()]).then((t=>{let[e,n]=t;return Object.keys(n).forEach((t=>{e.includes(t.toLowerCase())||(this.uppy.log(`[CompanionClient] excluding disallowed header ${t}`),delete n[t])})),n}))}get(t,e){const n="get";return this.preflightAndHeaders(t).then((e=>rh(hh(this,sh)[sh](t),{method:n,headers:e,credentials:this.opts.companionCookiesRule||"same-origin"}))).then(hh(this,ah)[ah](e)).then(mh).catch(hh(this,lh)[lh](n,t))}post(t,e,n){const r="post";return this.preflightAndHeaders(t).then((n=>rh(hh(this,sh)[sh](t),{method:r,headers:n,credentials:this.opts.companionCookiesRule||"same-origin",body:JSON.stringify(e)}))).then(hh(this,ah)[ah](n)).then(mh).catch(hh(this,lh)[lh](r,t))}delete(t,e,n){const r="delete";return this.preflightAndHeaders(t).then((n=>rh(`${this.hostname}/${t}`,{method:r,headers:n,credentials:this.opts.companionCookiesRule||"same-origin",body:e?JSON.stringify(e):null}))).then(hh(this,ah)[ah](n)).then(mh).catch(hh(this,lh)[lh](r,t))}},oh.VERSION="2.0.4",oh.defaultHeaders={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${oh.VERSION}`},uh);function vh(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`}function yh(t,e){return n=>{var r;if(null==(r=n)||!r.isAuthError){const r=new Error(`Could not ${t} ${hh(this,sh)[sh](e)}`);r.cause=n,n=r}return Promise.reject(n)}}var bh=(t,e)=>new Promise((n=>{localStorage.setItem(t,e),n()})),xh=t=>Promise.resolve(localStorage.getItem(t)),_h=t=>new Promise((e=>{localStorage.removeItem(t),e()})),wh={setItem:bh,getItem:xh,removeItem:_h};const Sh=t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ");var Mh=class extends gh{constructor(t,e){super(t,e),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||Sh(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}headers(){return Promise.all([super.headers(),this.getAuthToken()]).then((t=>{let[e,n]=t;const r={};return n&&(r["uppy-auth-token"]=n),this.companionKeysParams&&(r["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...e,...r}}))}onReceiveResponse(t){t=super.onReceiveResponse(t);const e=this.uppy.getPlugin(this.pluginId),n=e.getPluginState().authenticated,r=n?401!==t.status:t.status<400;return e.setPluginState({authenticated:r}),t}setAuthToken(t){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,t)}getAuthToken(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}authUrl(t){return void 0===t&&(t={}),this.preAuthToken&&(t.uppyPreAuthToken=this.preAuthToken),`${this.hostname}/${this.id}/connect?${new URLSearchParams(t)}`}fileUrl(t){return`${this.hostname}/${this.id}/get/${t}`}fetchPreAuthToken(){return this.companionKeysParams?this.post(`${this.id}/preauth/`,{params:this.companionKeysParams}).then((t=>{this.preAuthToken=t.token})).catch((t=>{this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${t}`,"warning")})):Promise.resolve()}list(t){return this.get(`${this.id}/list/${t||""}`)}logout(){return this.get(`${this.id}/logout`).then((t=>Promise.all([t,this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)]))).then((t=>{let[e]=t;return e}))}static initPlugin(t,e,n){if(t.type="acquirer",t.files=[],n&&(t.opts={...n,...e}),e.serverUrl||e.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(e.companionAllowedHosts){const n=e.companionAllowedHosts;if("string"!==typeof n&&!Array.isArray(n)&&!(n instanceof RegExp))throw new TypeError(`${t.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);t.opts.companionAllowedHosts=n}else/^(?!https?:\/\/).*$/i.test(e.companionUrl)?t.opts.companionAllowedHosts=`https://${e.companionUrl.replace(/^\/\//,"")}`:t.opts.companionAllowedHosts=new URL(e.companionUrl).origin;t.storage=t.opts.storage||wh}};const Eh=t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ");var Ch,Th,Ah,Dh,Ph,Rh=class extends gh{constructor(t,e){super(t,e),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||Eh(this.id),this.pluginId=this.opts.pluginId}fileUrl(t){return`${this.hostname}/search/${this.id}/get/${t}`}search(t,e){return e=e?`&${e}`:"",this.get(`search/${this.id}/list?q=${encodeURIComponent(t)}${e}`)}};let Lh,Oh;function kh(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Ih=0;function Nh(t){return"__private_"+Ih+++"_"+t}var Bh=(Ch=Nh("queued"),Th=Nh("emitter"),Ah=Nh("isOpen"),Dh=Nh("socket"),Ph=Nh("handleMessage"),Lh=Symbol.for("uppy test: getSocket"),Oh=Symbol.for("uppy test: getQueued"),class{constructor(t){Object.defineProperty(this,Ch,{writable:!0,value:[]}),Object.defineProperty(this,Th,{writable:!0,value:cu()}),Object.defineProperty(this,Ah,{writable:!0,value:!1}),Object.defineProperty(this,Dh,{writable:!0,value:void 0}),Object.defineProperty(this,Ph,{writable:!0,value:t=>{try{const e=JSON.parse(t.data);this.emit(e.action,e.payload)}catch(e){console.log(e)}}}),this.opts=t,t&&!1===t.autoOpen||this.open()}get isOpen(){return kh(this,Ah)[Ah]}[Lh](){return kh(this,Dh)[Dh]}[Oh](){return kh(this,Ch)[Ch]}open(){kh(this,Dh)[Dh]=new WebSocket(this.opts.target),kh(this,Dh)[Dh].onopen=()=>{kh(this,Ah)[Ah]=!0;while(kh(this,Ch)[Ch].length>0&&kh(this,Ah)[Ah]){const t=kh(this,Ch)[Ch].shift();this.send(t.action,t.payload)}},kh(this,Dh)[Dh].onclose=()=>{kh(this,Ah)[Ah]=!1},kh(this,Dh)[Dh].onmessage=kh(this,Ph)[Ph]}close(){var t;null==(t=kh(this,Dh)[Dh])||t.close()}send(t,e){kh(this,Ah)[Ah]?kh(this,Dh)[Dh].send(JSON.stringify({action:t,payload:e})):kh(this,Ch)[Ch].push({action:t,payload:e})}on(t,e){kh(this,Th)[Th].on(t,e)}emit(t,e){kh(this,Th)[Th].emit(t,e)}once(t,e){kh(this,Th)[Th].once(t,e)}}),Fh={RequestClient:gh,Provider:Mh,SearchProvider:Rh,Socket:Bh};function zh(t,e,n){const{progress:r,bytesUploaded:i,bytesTotal:o}=e;r&&(t.uppy.log(`Upload progress: ${r}`),t.uppy.emit("upload-progress",n,{uploader:t,bytesUploaded:i,bytesTotal:o}))}var Uh,jh,Vh=Yo(zh,300,{leading:!0,trailing:!0}),Hh=function(t){const e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i,n=e.exec(t)[1],r=/^http:\/\//i.test(t)?"ws":"wss";return`${r}://${n}`},Wh=function(t){const e=[],n=[];function r(t){e.push(t)}function i(t){n.push(t)}const o=Promise.all(t.map((t=>t.then(r,i))));return o.then((()=>({successful:e,failed:n})))};function Gh(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var qh=0;function Xh(t){return"__private_"+qh+++"_"+t}var Yh=(Uh=Xh("emitter"),jh=Xh("events"),class{constructor(t){Object.defineProperty(this,Uh,{writable:!0,value:void 0}),Object.defineProperty(this,jh,{writable:!0,value:[]}),Gh(this,Uh)[Uh]=t}on(t,e){return Gh(this,jh)[jh].push([t,e]),Gh(this,Uh)[Uh].on(t,e)}remove(){for(const[t,e]of Gh(this,jh)[jh].splice(0))Gh(this,Uh)[Uh].off(t,e)}});function Zh(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Kh=0;function Jh(t){return"__private_"+Kh+++"_"+t}var Qh=Jh("aliveTimer"),$h=Jh("isDone"),td=Jh("onTimedOut"),ed=Jh("timeout");class nd{constructor(t,e){Object.defineProperty(this,Qh,{writable:!0,value:void 0}),Object.defineProperty(this,$h,{writable:!0,value:!1}),Object.defineProperty(this,td,{writable:!0,value:void 0}),Object.defineProperty(this,ed,{writable:!0,value:void 0}),Zh(this,ed)[ed]=t,Zh(this,td)[td]=e}progress(){Zh(this,$h)[$h]||Zh(this,ed)[ed]>0&&(clearTimeout(Zh(this,Qh)[Qh]),Zh(this,Qh)[Qh]=setTimeout(Zh(this,td)[td],Zh(this,ed)[ed]))}done(){Zh(this,$h)[$h]||(clearTimeout(Zh(this,Qh)[Qh]),Zh(this,Qh)[Qh]=null,Zh(this,$h)[$h]=!0)}}var rd=nd;function id(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var od=0;function ad(t){return"__private_"+od+++"_"+t}function sd(){return new Error("Cancelled")}var ld=ad("activeRequests"),ud=ad("queuedHandlers"),cd=ad("call"),hd=ad("queueNext"),dd=ad("next"),pd=ad("queue"),fd=ad("dequeue");class md{constructor(t){Object.defineProperty(this,fd,{value:xd}),Object.defineProperty(this,pd,{value:bd}),Object.defineProperty(this,dd,{value:yd}),Object.defineProperty(this,hd,{value:vd}),Object.defineProperty(this,cd,{value:gd}),Object.defineProperty(this,ld,{writable:!0,value:0}),Object.defineProperty(this,ud,{writable:!0,value:[]}),this.limit="number"!==typeof t||0===t?1/0:t}run(t,e){return id(this,ld)[ld]<this.limit?id(this,cd)[cd](t):id(this,pd)[pd](t,e)}wrapPromiseFunction(t,e){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];let a;const s=new Promise(((r,o)=>{a=n.run((()=>{let e,n;try{n=Promise.resolve(t(...i))}catch(s){n=Promise.reject(s)}return n.then((t=>{e?o(e):(a.done(),r(t))}),(t=>{e?o(e):(a.done(),o(t))})),()=>{e=sd()}}),e)}));return s.abort=()=>{a.abort()},s}}}function gd(t){id(this,ld)[ld]+=1;let e,n=!1;try{e=t()}catch(r){throw id(this,ld)[ld]-=1,r}return{abort:()=>{n||(n=!0,id(this,ld)[ld]-=1,e(),id(this,hd)[hd]())},done:()=>{n||(n=!0,id(this,ld)[ld]-=1,id(this,hd)[hd]())}}}function vd(){queueMicrotask((()=>id(this,dd)[dd]()))}function yd(){if(id(this,ld)[ld]>=this.limit)return;if(0===id(this,ud)[ud].length)return;const t=id(this,ud)[ud].shift(),e=id(this,cd)[cd](t.fn);t.abort=e.abort,t.done=e.done}function bd(t,e){void 0===e&&(e={});const n={fn:t,priority:e.priority||0,abort:()=>{id(this,fd)[fd](n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=id(this,ud)[ud].findIndex((t=>n.priority>t.priority));return-1===r?id(this,ud)[ud].push(n):id(this,ud)[ud].splice(r,0,n),n}function xd(t){const e=id(this,ud)[ud].indexOf(t);-1!==e&&id(this,ud)[ud].splice(e,1)}var _d={RateLimitedQueue:md,internalRateLimitedQueue:Symbol("__queue")};function wd(t){return!!t&&(0!==t.readyState&&4!==t.readyState||0===t.status)}var Sd,Md,Ed=wd,Cd={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};const{nanoid:Td}=Gu,{Provider:Ad,RequestClient:Dd,Socket:Pd}=Fh,{RateLimitedQueue:Rd,internalRateLimitedQueue:Ld}=_d;function Od(t,e){let n=e;return n||(n=new Error("Upload error")),"string"===typeof n&&(n=new Error(n)),n instanceof Error||(n=Object.assign(new Error("Upload error"),{data:n})),Ed(t)?(n=new nh(n,t),n):(n.request=t,n)}function kd(t){const e=t.data.slice(0,t.data.size,t.meta.type);return e}var Id=(Md=Sd=class extends Uc{constructor(t,e){super(t,e),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.title="XHRUpload",this.defaultLocale=Cd;const n={formData:!0,fieldName:e.bundle?"files[]":"file",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:3e4,limit:5,withCredentials:!1,responseType:"",getResponseData(e){let n={};try{n=JSON.parse(e)}catch(r){t.log(r)}return n},getResponseError(t,e){let n=new Error("Upload error");return Ed(e)&&(n=new nh(n,e)),n},validateStatus(t){return t>=200&&t<300}};if(this.opts={...n,...e},this.i18nInit(),this.handleUpload=this.handleUpload.bind(this),Ld in this.opts?this.requests=this.opts[Ld]:this.requests=new Rd(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");this.uploaderEvents=Object.create(null)}getOptions(t){const e=this.uppy.getState().xhrUpload,{headers:n}=this.opts,r={...this.opts,...e||{},...t.xhrUpload||{},headers:{}};return"function"===typeof n?r.headers=n(t):Object.assign(r.headers,this.opts.headers),e&&Object.assign(r.headers,e.headers),t.xhrUpload&&Object.assign(r.headers,t.xhrUpload.headers),r}addMetadata(t,e,n){const r=Array.isArray(n.metaFields)?n.metaFields:Object.keys(e);r.forEach((n=>{t.append(n,e[n])}))}createFormDataUpload(t,e){const n=new FormData;this.addMetadata(n,t.meta,e);const r=kd(t);return t.name?n.append(e.fieldName,r,t.meta.name):n.append(e.fieldName,r),n}createBundledUpload(t,e){const n=new FormData,{meta:r}=this.uppy.getState();return this.addMetadata(n,r,e),t.forEach((t=>{const e=this.getOptions(t),r=kd(t);t.name?n.append(e.fieldName,r,t.name):n.append(e.fieldName,r)})),n}upload(t,e,n){const r=this.getOptions(t);return this.uppy.log(`uploading ${e} of ${n}`),new Promise(((e,n)=>{this.uppy.emit("upload-started",t);const i=r.formData?this.createFormDataUpload(t,r):t.data,o=new XMLHttpRequest;this.uploaderEvents[t.id]=new Yh(this.uppy);const a=new rd(r.timeout,(()=>{o.abort(),l.done();const e=new Error(this.i18n("timedOut",{seconds:Math.ceil(r.timeout/1e3)}));this.uppy.emit("upload-error",t,e),n(e)})),s=Td();o.upload.addEventListener("loadstart",(()=>{this.uppy.log(`[XHRUpload] ${s} started`)})),o.upload.addEventListener("progress",(e=>{this.uppy.log(`[XHRUpload] ${s} progress: ${e.loaded} / ${e.total}`),a.progress(),e.lengthComputable&&this.uppy.emit("upload-progress",t,{uploader:this,bytesUploaded:e.loaded,bytesTotal:e.total})})),o.addEventListener("load",(i=>{if(this.uppy.log(`[XHRUpload] ${s} finished`),a.done(),l.done(),this.uploaderEvents[t.id]&&(this.uploaderEvents[t.id].remove(),this.uploaderEvents[t.id]=null),r.validateStatus(i.target.status,o.responseText,o)){const n=r.getResponseData(o.responseText,o),a=n[r.responseUrlFieldName],s={status:i.target.status,body:n,uploadURL:a};return this.uppy.emit("upload-success",t,s),a&&this.uppy.log(`Download ${t.name} from ${a}`),e(t)}const u=r.getResponseData(o.responseText,o),c=Od(o,r.getResponseError(o.responseText,o)),h={status:i.target.status,body:u};return this.uppy.emit("upload-error",t,c,h),n(c)})),o.addEventListener("error",(()=>{this.uppy.log(`[XHRUpload] ${s} errored`),a.done(),l.done(),this.uploaderEvents[t.id]&&(this.uploaderEvents[t.id].remove(),this.uploaderEvents[t.id]=null);const e=Od(o,r.getResponseError(o.responseText,o));return this.uppy.emit("upload-error",t,e),n(e)})),o.open(r.method.toUpperCase(),r.endpoint,!0),o.withCredentials=r.withCredentials,""!==r.responseType&&(o.responseType=r.responseType);const l=this.requests.run((()=>{this.uppy.emit("upload-started",t);const e=this.getOptions(t);return Object.keys(e.headers).forEach((t=>{o.setRequestHeader(t,e.headers[t])})),o.send(i),()=>{a.done(),o.abort()}}));this.onFileRemove(t.id,(()=>{l.abort(),n(new Error("File removed"))})),this.onCancelAll(t.id,(()=>{l.abort(),n(new Error("Upload cancelled"))}))}))}uploadRemote(t){const e=this.getOptions(t);return new Promise(((n,r)=>{this.uppy.emit("upload-started",t);const i={},o=Array.isArray(e.metaFields)?e.metaFields:Object.keys(t.meta);o.forEach((e=>{i[e]=t.meta[e]}));const a=t.remote.providerOptions.provider?Ad:Dd,s=new a(this.uppy,t.remote.providerOptions);s.post(t.remote.url,{...t.remote.body,endpoint:e.endpoint,size:t.data.size,fieldname:e.fieldName,metadata:i,httpMethod:e.method,useFormData:e.formData,headers:e.headers}).then((i=>{const{token:o}=i,a=Hh(t.remote.companionUrl),s=new Pd({target:`${a}/api/${o}`,autoOpen:!1});this.uploaderEvents[t.id]=new Yh(this.uppy),this.onFileRemove(t.id,(()=>{s.send("cancel",{}),l.abort(),n(`upload ${t.id} was removed`)})),this.onCancelAll(t.id,(()=>{s.send("cancel",{}),l.abort(),n(`upload ${t.id} was canceled`)})),this.onRetry(t.id,(()=>{s.send("pause",{}),s.send("resume",{})})),this.onRetryAll(t.id,(()=>{s.send("pause",{}),s.send("resume",{})})),s.on("progress",(e=>Vh(this,e,t))),s.on("success",(r=>{const i=e.getResponseData(r.response.responseText,r.response),o=i[e.responseUrlFieldName],a={status:r.response.status,body:i,uploadURL:o};return this.uppy.emit("upload-success",t,a),l.done(),this.uploaderEvents[t.id]&&(this.uploaderEvents[t.id].remove(),this.uploaderEvents[t.id]=null),n()})),s.on("error",(n=>{const i=n.response,o=i?e.getResponseError(i.responseText,i):Object.assign(new Error(n.error.message),{cause:n.error});this.uppy.emit("upload-error",t,o),l.done(),this.uploaderEvents[t.id]&&(this.uploaderEvents[t.id].remove(),this.uploaderEvents[t.id]=null),r(o)}));const l=this.requests.run((()=>(s.open(),t.isPaused&&s.send("pause",{}),()=>s.close())))})).catch((e=>{this.uppy.emit("upload-error",t,e),r(e)}))}))}uploadBundle(t){return new Promise(((e,n)=>{const{endpoint:r}=this.opts,{method:i}=this.opts,o=this.uppy.getState().xhrUpload,a=this.createBundledUpload(t,{...this.opts,...o||{}}),s=new XMLHttpRequest,l=new rd(this.opts.timeout,(()=>{s.abort();const t=new Error(this.i18n("timedOut",{seconds:Math.ceil(this.opts.timeout/1e3)}));u(t),n(t)})),u=e=>{t.forEach((t=>{this.uppy.emit("upload-error",t,e)}))};s.upload.addEventListener("loadstart",(()=>{this.uppy.log("[XHRUpload] started uploading bundle"),l.progress()})),s.upload.addEventListener("progress",(e=>{l.progress(),e.lengthComputable&&t.forEach((t=>{this.uppy.emit("upload-progress",t,{uploader:this,bytesUploaded:e.loaded/e.total*t.size,bytesTotal:t.size})}))})),s.addEventListener("load",(r=>{if(l.done(),this.opts.validateStatus(r.target.status,s.responseText,s)){const n=this.opts.getResponseData(s.responseText,s),i={status:r.target.status,body:n};return t.forEach((t=>{this.uppy.emit("upload-success",t,i)})),e()}const i=this.opts.getResponseError(s.responseText,s)||new Error("Upload error");return i.request=s,u(i),n(i)})),s.addEventListener("error",(()=>{l.done();const t=this.opts.getResponseError(s.responseText,s)||new Error("Upload error");return u(t),n(t)})),this.uppy.on("cancel-all",(()=>{l.done(),s.abort()})),s.open(i.toUpperCase(),r,!0),s.withCredentials=this.opts.withCredentials,""!==this.opts.responseType&&(s.responseType=this.opts.responseType),Object.keys(this.opts.headers).forEach((t=>{s.setRequestHeader(t,this.opts.headers[t])})),s.send(a),t.forEach((t=>{this.uppy.emit("upload-started",t)}))}))}uploadFiles(t){const e=t.map(((e,n)=>{const r=parseInt(n,10)+1,i=t.length;return e.error?Promise.reject(new Error(e.error)):e.isRemote?this.uploadRemote(e,r,i):this.upload(e,r,i)}));return Wh(e)}onFileRemove(t,e){this.uploaderEvents[t].on("file-removed",(n=>{t===n.id&&e(n.id)}))}onRetry(t,e){this.uploaderEvents[t].on("upload-retry",(n=>{t===n&&e()}))}onRetryAll(t,e){this.uploaderEvents[t].on("retry-all",(()=>{this.uppy.getFile(t)&&e()}))}onCancelAll(t,e){this.uploaderEvents[t].on("cancel-all",(()=>{this.uppy.getFile(t)&&e()}))}handleUpload(t){if(0===t.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();0!==this.opts.limit||this.opts[Ld]||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const e=t.map((t=>this.uppy.getFile(t)));if(this.opts.bundle){const t=e.some((t=>t.isRemote));if(t)throw new Error("Can’t upload remote files when the `bundle: true` option is set");if("function"===typeof this.opts.headers)throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");return this.uploadBundle(e)}return this.uploadFiles(e).then((()=>null))}install(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!1}})}this.uppy.addUploader(this.handleUpload)}uninstall(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!0}})}this.uppy.removeUploader(this.handleUpload)}},Sd.VERSION="2.0.6",Md),Nd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function Bd(t){var e={exports:{}};return t(e,e.exports),e.exports}var Fd,zd,Ud=function(t){return t&&t.Math==Math&&t},jd=Ud("object"==typeof globalThis&&globalThis)||Ud("object"==typeof window&&window)||Ud("object"==typeof self&&self)||Ud("object"==typeof Nd&&Nd)||function(){return this}()||Function("return this")(),Vd=Object.defineProperty,Hd=function(t,e){try{Vd(jd,t,{value:e,configurable:!0,writable:!0})}catch(f){jd[t]=e}return e},Wd=jd["__core-js_shared__"]||Hd("__core-js_shared__",{}),Gd=Bd((function(t){(t.exports=function(t,e){return Wd[t]||(Wd[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),qd=Function.prototype,Xd=qd.bind,Yd=qd.call,Zd=Xd&&Xd.bind(Yd),Kd=Xd?function(t){return t&&Zd(Yd,t)}:function(t){return t&&function(){return Yd.apply(t,arguments)}},Jd=jd.TypeError,Qd=function(t){if(null==t)throw Jd("Can't call method on "+t);return t},$d=jd.Object,tp=function(t){return $d(Qd(t))},ep=Kd({}.hasOwnProperty),np=Object.hasOwn||function(t,e){return ep(tp(t),e)},rp=0,ip=Math.random(),op=Kd(1..toString),ap=function(t){return"Symbol("+(void 0===t?"":t)+")_"+op(++rp+ip,36)},sp=function(t){return"function"==typeof t},lp=function(t){return sp(t)?t:void 0},up=function(t,e){return arguments.length<2?lp(jd[t]):jd[t]&&jd[t][e]},cp=up("navigator","userAgent")||"",hp=jd.process,dp=jd.Deno,pp=hp&&hp.versions||dp&&dp.version,fp=pp&&pp.v8;fp&&(zd=(Fd=fp.split("."))[0]>0&&Fd[0]<4?1:+(Fd[0]+Fd[1])),!zd&&cp&&(!(Fd=cp.match(/Edge\/(\d+)/))||Fd[1]>=74)&&(Fd=cp.match(/Chrome\/(\d+)/))&&(zd=+Fd[1]);var mp=zd,gp=function(t){try{return!!t()}catch(t){return!0}},vp=!!Object.getOwnPropertySymbols&&!gp((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&mp&&mp<41})),yp=vp&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,bp=Gd("wks"),xp=jd.Symbol,_p=xp&&xp.for,wp=yp?xp:xp&&xp.withoutSetter||ap,Sp=function(t){if(!np(bp,t)||!vp&&"string"!=typeof bp[t]){var e="Symbol."+t;vp&&np(xp,t)?bp[t]=xp[t]:bp[t]=yp&&_p?_p(e):wp(e)}return bp[t]},Mp={};Mp[Sp("toStringTag")]="z";var Ep="[object z]"===String(Mp),Cp=!gp((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Tp=function(t){return"object"==typeof t?null!==t:sp(t)},Ap=jd.document,Dp=Tp(Ap)&&Tp(Ap.createElement),Pp=function(t){return Dp?Ap.createElement(t):{}},Rp=!Cp&&!gp((function(){return 7!=Object.defineProperty(Pp("div"),"a",{get:function(){return 7}}).a})),Lp=jd.String,Op=jd.TypeError,kp=function(t){if(Tp(t))return t;throw Op(Lp(t)+" is not an object")},Ip=Function.prototype.call,Np=Ip.bind?Ip.bind(Ip):function(){return Ip.apply(Ip,arguments)},Bp=Kd({}.isPrototypeOf),Fp=jd.Object,zp=yp?function(t){return"symbol"==typeof t}:function(t){var e=up("Symbol");return sp(e)&&Bp(e.prototype,Fp(t))},Up=jd.String,jp=function(t){try{return Up(t)}catch(t){return"Object"}},Vp=jd.TypeError,Hp=function(t){if(sp(t))return t;throw Vp(jp(t)+" is not a function")},Wp=function(t,e){var n=t[e];return null==n?void 0:Hp(n)},Gp=jd.TypeError,qp=jd.TypeError,Xp=Sp("toPrimitive"),Yp=function(t,e){if(!Tp(t)||zp(t))return t;var n,r=Wp(t,Xp);if(r){if(void 0===e&&(e="default"),n=Np(r,t,e),!Tp(n)||zp(n))return n;throw qp("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&sp(n=t.toString)&&!Tp(r=Np(n,t)))return r;if(sp(n=t.valueOf)&&!Tp(r=Np(n,t)))return r;if("string"!==e&&sp(n=t.toString)&&!Tp(r=Np(n,t)))return r;throw Gp("Can't convert object to primitive value")}(t,e)},Zp=function(t){var e=Yp(t,"string");return zp(e)?e:e+""},Kp=jd.TypeError,Jp=Object.defineProperty,Qp={f:Cp?Jp:function(t,e,n){if(kp(t),e=Zp(e),kp(n),Rp)try{return Jp(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Kp("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},$p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},tf=Cp?function(t,e,n){return Qp.f(t,e,$p(1,n))}:function(t,e,n){return t[e]=n,t},ef=Kd(Function.toString);sp(Wd.inspectSource)||(Wd.inspectSource=function(t){return ef(t)});var nf,rf,of,af=Wd.inspectSource,sf=jd.WeakMap,lf=sp(sf)&&/native code/.test(af(sf)),uf=Gd("keys"),cf=function(t){return uf[t]||(uf[t]=ap(t))},hf={},df=jd.TypeError,pf=jd.WeakMap;if(lf||Wd.state){var ff=Wd.state||(Wd.state=new pf),mf=Kd(ff.get),gf=Kd(ff.has),vf=Kd(ff.set);nf=function(t,e){if(gf(ff,t))throw new df("Object already initialized");return e.facade=t,vf(ff,t,e),e},rf=function(t){return mf(ff,t)||{}},of=function(t){return gf(ff,t)}}else{var yf=cf("state");hf[yf]=!0,nf=function(t,e){if(np(t,yf))throw new df("Object already initialized");return e.facade=t,tf(t,yf,e),e},rf=function(t){return np(t,yf)?t[yf]:{}},of=function(t){return np(t,yf)}}var bf={set:nf,get:rf,has:of,enforce:function(t){return of(t)?rf(t):nf(t,{})},getterFor:function(t){return function(e){var n;if(!Tp(e)||(n=rf(e)).type!==t)throw df("Incompatible receiver, "+t+" required");return n}}},xf=Function.prototype,_f=Cp&&Object.getOwnPropertyDescriptor,wf=np(xf,"name"),Sf={EXISTS:wf,PROPER:wf&&"something"===function(){}.name,CONFIGURABLE:wf&&(!Cp||Cp&&_f(xf,"name").configurable)},Mf=Bd((function(t){var e=Sf.CONFIGURABLE,n=bf.get,r=bf.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;sp(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!np(o,"name")||e&&o.name!==h)&&tf(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==jd?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:tf(t,n,o)):u?t[n]=o:Hd(n,o)})(Function.prototype,"toString",(function(){return sp(this)&&n(this).source||af(this)}))})),Ef=Kd({}.toString),Cf=Kd("".slice),Tf=function(t){return Cf(Ef(t),8,-1)},Af=Sp("toStringTag"),Df=jd.Object,Pf="Arguments"==Tf(function(){return arguments}()),Rf=Ep?Tf:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Df(t),Af))?n:Pf?Tf(e):"Object"==(r=Tf(e))&&sp(e.callee)?"Arguments":r},Lf=Ep?{}.toString:function(){return"[object "+Rf(this)+"]"};Ep||Mf(Object.prototype,"toString",Lf,{unsafe:!0});var Of={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},kf=Pp("span").classList,If=kf&&kf.constructor&&kf.constructor.prototype,Nf=If===Object.prototype?void 0:If,Bf=Kd(Kd.bind),Ff=function(t,e){return Hp(t),void 0===e?t:Bf?Bf(t,e):function(){return t.apply(e,arguments)}},zf=jd.Object,Uf=Kd("".split),jf=gp((function(){return!zf("z").propertyIsEnumerable(0)}))?function(t){return"String"==Tf(t)?Uf(t,""):zf(t)}:zf,Vf=Math.ceil,Hf=Math.floor,Wf=function(t){var e=+t;return e!=e||0===e?0:(e>0?Hf:Vf)(e)},Gf=Math.min,qf=function(t){return t>0?Gf(Wf(t),9007199254740991):0},Xf=function(t){return qf(t.length)},Yf=Array.isArray||function(t){return"Array"==Tf(t)},Zf=function(){},Kf=[],Jf=up("Reflect","construct"),Qf=/^\s*(?:class|function)\b/,$f=Kd(Qf.exec),tm=!Qf.exec(Zf),em=function(t){if(!sp(t))return!1;try{return Jf(Zf,Kf,t),!0}catch(t){return!1}},nm=!Jf||gp((function(){var t;return em(em.call)||!em(Object)||!em((function(){t=!0}))||t}))?function(t){if(!sp(t))return!1;switch(Rf(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return tm||!!$f(Qf,af(t))}:em,rm=Sp("species"),im=jd.Array,om=function(t,e){return new(function(t){var e;return Yf(t)&&(e=t.constructor,(nm(e)&&(e===im||Yf(e.prototype))||Tp(e)&&null===(e=e[rm]))&&(e=void 0)),void 0===e?im:e}(t))(0===e?0:e)},am=Kd([].push),sm=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=tp(l),m=jf(f),g=Ff(u,c),v=Xf(m),y=0,b=h||om,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:am(x,d)}else switch(t){case 4:return!1;case 7:am(x,d)}return o?-1:r||i?i:x}},lm={forEach:sm(0),map:sm(1),filter:sm(2),some:sm(3),every:sm(4),find:sm(5),findIndex:sm(6),filterReject:sm(7)},um=function(t,e){var n=[][t];return!!n&&gp((function(){n.call(null,e||function(){throw 1},1)}))},cm=lm.forEach,hm=um("forEach")?[].forEach:function(t){return cm(this,t,arguments.length>1?arguments[1]:void 0)},dm=function(t){if(t&&t.forEach!==hm)try{tf(t,"forEach",hm)}catch(m){t.forEach=hm}};for(var pm in Of)Of[pm]&&dm(jd[pm]&&jd[pm].prototype);dm(Nf);var fm={}.propertyIsEnumerable,mm=Object.getOwnPropertyDescriptor,gm=mm&&!fm.call({1:2},1)?function(t){var e=mm(this,t);return!!e&&e.enumerable}:fm,vm={f:gm},ym=function(t){return jf(Qd(t))},bm=Object.getOwnPropertyDescriptor,xm={f:Cp?bm:function(t,e){if(t=ym(t),e=Zp(e),Rp)try{return bm(t,e)}catch(t){}if(np(t,e))return $p(!Np(vm.f,t,e),t[e])}},_m=Math.max,wm=Math.min,Sm=function(t,e){var n=Wf(t);return n<0?_m(n+e,0):wm(n,e)},Mm=function(t){return function(e,n,r){var i,o=ym(e),a=Xf(o),s=Sm(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Em={includes:Mm(!0),indexOf:Mm(!1)},Cm=Em.indexOf,Tm=Kd([].push),Am=function(t,e){var n,r=ym(t),i=0,o=[];for(n in r)!np(hf,n)&&np(r,n)&&Tm(o,n);for(;e.length>i;)np(r,n=e[i++])&&(~Cm(o,n)||Tm(o,n));return o},Dm=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Pm=Dm.concat("length","prototype"),Rm={f:Object.getOwnPropertyNames||function(t){return Am(t,Pm)}},Lm={f:Object.getOwnPropertySymbols},Om=Kd([].concat),km=up("Reflect","ownKeys")||function(t){var e=Rm.f(kp(t)),n=Lm.f;return n?Om(e,n(t)):e},Im=function(t,e){for(var n=km(e),r=Qp.f,i=xm.f,o=0;o<n.length;o++){var a=n[o];np(t,a)||r(t,a,i(e,a))}},Nm=/#|\.prototype\./,Bm=function(t,e){var n=zm[Fm(t)];return n==jm||n!=Um&&(sp(e)?gp(e):!!e)},Fm=Bm.normalize=function(t){return String(t).replace(Nm,".").toLowerCase()},zm=Bm.data={},Um=Bm.NATIVE="N",jm=Bm.POLYFILL="P",Vm=Bm,Hm=xm.f,Wm=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?jd:u?jd[s]||Hd(s,{}):(jd[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Hm(n,r))&&a.value:n[r],!Vm(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Im(o,i)}(t.sham||i&&i.sham)&&tf(o,"sham",!0),Mf(n,r,o,t)}},Gm=Sp("species"),qm=function(t){return mp>=51||!gp((function(){var e=[];return(e.constructor={})[Gm]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Xm=lm.map,Ym=qm("map");Wm({target:"Array",proto:!0,forced:!Ym},{map:function(t){return Xm(this,t,arguments.length>1?arguments[1]:void 0)}});var Zm=function(t,e,n){var r,i;kp(t);try{if(!(r=Wp(t,"return"))){if("throw"===e)throw n;return n}r=Np(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return kp(r),n},Km=function(t,e,n,r){try{return r?e(kp(n)[0],n[1]):e(n)}catch(e){Zm(t,"throw",e)}},Jm={},Qm=Sp("iterator"),$m=Array.prototype,tg=function(t){return void 0!==t&&(Jm.Array===t||$m[Qm]===t)},eg=function(t,e,n){var r=Zp(e);r in t?Qp.f(t,r,$p(0,n)):t[r]=n},ng=Sp("iterator"),rg=function(t){if(null!=t)return Wp(t,ng)||Wp(t,"@@iterator")||Jm[Rf(t)]},ig=jd.TypeError,og=function(t,e){var n=arguments.length<2?rg(t):e;if(Hp(n))return kp(Np(n,t));throw ig(jp(t)+" is not iterable")},ag=jd.Array,sg=Sp("iterator"),lg=!1;try{var ug=0,cg={next:function(){return{done:!!ug++}},return:function(){lg=!0}};cg[sg]=function(){return this},Array.from(cg,(function(){throw 2}))}catch(Cut){}var hg=function(t,e){if(!e&&!lg)return!1;var n=!1;try{var r={};r[sg]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},dg=!hg((function(t){Array.from(t)}));Wm({target:"Array",stat:!0,forced:dg},{from:function(t){var e=tp(t),n=nm(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Ff(i,r>2?arguments[2]:void 0));var a,s,l,u,c,h,d=rg(e),p=0;if(!d||this==ag&&tg(d))for(a=Xf(e),s=n?new this(a):ag(a);a>p;p++)h=o?i(e[p],p):e[p],eg(s,p,h);else for(c=(u=og(e,d)).next,s=n?new this:[];!(l=Np(c,u)).done;p++)h=o?Km(u,i,[l.value,p],!0):l.value,eg(s,p,h);return s.length=p,s}});var pg,fg=jd.String,mg=function(t){if("Symbol"===Rf(t))throw TypeError("Cannot convert a Symbol value to a string");return fg(t)},gg=Kd("".charAt),vg=Kd("".charCodeAt),yg=Kd("".slice),bg=function(t){return function(e,n){var r,i,o=mg(Qd(e)),a=Wf(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=vg(o,a))<55296||r>56319||a+1===s||(i=vg(o,a+1))<56320||i>57343?t?gg(o,a):r:t?yg(o,a,a+2):i-56320+(r-55296<<10)+65536}},xg={codeAt:bg(!1),charAt:bg(!0)},_g=Object.keys||function(t){return Am(t,Dm)},wg=Cp?Object.defineProperties:function(t,e){kp(t);for(var n,r=ym(e),i=_g(e),o=i.length,a=0;o>a;)Qp.f(t,n=i[a++],r[n]);return t},Sg=up("document","documentElement"),Mg=cf("IE_PROTO"),Eg=function(){},Cg=function(t){return"<script>"+t+"<\/script>"},Tg=function(t){t.write(Cg("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ag=function(){try{pg=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ag="undefined"!=typeof document?document.domain&&pg?Tg(pg):((e=Pp("iframe")).style.display="none",Sg.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Cg("document.F=Object")),t.close(),t.F):Tg(pg);for(var n=Dm.length;n--;)delete Ag.prototype[Dm[n]];return Ag()};hf[Mg]=!0;var Dg,Pg,Rg,Lg=Object.create||function(t,e){var n;return null!==t?(Eg.prototype=kp(t),n=new Eg,Eg.prototype=null,n[Mg]=t):n=Ag(),void 0===e?n:wg(n,e)},Og=!gp((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),kg=cf("IE_PROTO"),Ig=jd.Object,Ng=Ig.prototype,Bg=Og?Ig.getPrototypeOf:function(t){var e=tp(t);if(np(e,kg))return e[kg];var n=e.constructor;return sp(n)&&e instanceof n?n.prototype:e instanceof Ig?Ng:null},Fg=Sp("iterator"),zg=!1;[].keys&&("next"in(Rg=[].keys())?(Pg=Bg(Bg(Rg)))!==Object.prototype&&(Dg=Pg):zg=!0);var Ug=null==Dg||gp((function(){var t={};return Dg[Fg].call(t)!==t}));Ug&&(Dg={}),sp(Dg[Fg])||Mf(Dg,Fg,(function(){return this}));var jg={IteratorPrototype:Dg,BUGGY_SAFARI_ITERATORS:zg},Vg=Qp.f,Hg=Sp("toStringTag"),Wg=function(t,e,n){t&&!np(t=n?t:t.prototype,Hg)&&Vg(t,Hg,{configurable:!0,value:e})},Gg=jg.IteratorPrototype,qg=function(){return this},Xg=jd.String,Yg=jd.TypeError,Zg=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Kd(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return kp(n),function(t){if("object"==typeof t||sp(t))return t;throw Yg("Can't set "+Xg(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Kg=Sf.PROPER,Jg=Sf.CONFIGURABLE,Qg=jg.IteratorPrototype,$g=jg.BUGGY_SAFARI_ITERATORS,tv=Sp("iterator"),ev=function(){return this},nv=function(t,e,n,r,i,o,a){!function(t,e,n,r){var i=e+" Iterator";t.prototype=Lg(Gg,{next:$p(+!r,n)}),Wg(t,i,!1),Jm[i]=qg}(n,e,r);var s,l,u,c=function(t){if(t===i&&m)return m;if(!$g&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,f=p[tv]||p["@@iterator"]||i&&p[i],m=!$g&&f||c(i),g="Array"==e&&p.entries||f;if(g&&(s=Bg(g.call(new t)))!==Object.prototype&&s.next&&(Bg(s)!==Qg&&(Zg?Zg(s,Qg):sp(s[tv])||Mf(s,tv,ev)),Wg(s,h,!0)),Kg&&"values"==i&&f&&"values"!==f.name&&(Jg?tf(p,"name","values"):(d=!0,m=function(){return Np(f,this)})),i)if(l={values:c("values"),keys:o?m:c("keys"),entries:c("entries")},a)for(u in l)($g||d||!(u in p))&&Mf(p,u,l[u]);else Wm({target:e,proto:!0,forced:$g||d},l);return p[tv]!==m&&Mf(p,tv,m,{name:i}),Jm[e]=m,l},rv=xg.charAt,iv=bf.set,ov=bf.getterFor("String Iterator");nv(String,"String",(function(t){iv(this,{type:"String Iterator",string:mg(t),index:0})}),(function(){var t,e=ov(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=rv(n,r),e.index+=t.length,{value:t,done:!1})}));var av=gp((function(){_g(1)}));
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function sv(t){return"[object Object]"===Object.prototype.toString.call(t)}Wm({target:"Object",stat:!0,forced:av},{keys:function(t){return _g(tp(t))}});var lv={isHistory(t){return!1!==sv(e=t)&&(void 0===(n=e.constructor)||!1!==sv(r=n.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(0===t.redos.length||ve.isOperationList(t.redos[0]))&&(0===t.undos.length||ve.isOperationList(t.undos[0]));var e,n,r}},uv=new WeakMap,cv=new WeakMap,hv={isHistoryEditor:t=>lv.isHistory(t.history)&&ue.isEditor(t),isMerging:t=>cv.get(t),isSaving:t=>uv.get(t),redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var n=hv.isMerging(t);cv.set(t,!1),e(),cv.set(t,n)},withoutSaving(t,e){var n=hv.isSaving(t);uv.set(t,!1),e(),uv.set(t,n)}},dv=(t,e)=>"set_selection"===t.type||!(!e||"insert_text"!==t.type||"insert_text"!==e.type||t.offset!==e.offset+e.text.length||!ye.equals(t.path,e.path))||!(!e||"remove_text"!==t.type||"remove_text"!==e.type||t.offset+t.text.length!==e.offset||!ye.equals(t.path,e.path)),pv=(t,e)=>"set_selection"!==t.type||null!=t.properties&&null!=t.newProperties,fv=(t,e)=>!(!e||"set_selection"!==t.type||"set_selection"!==e.type),mv=t=>"set_selection"!==t.type,gv=function(){var t=kp(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},vv=Sf.PROPER,yv=RegExp.prototype,bv=yv.toString,xv=Kd(gv),_v=gp((function(){return"/a/b"!=bv.call({source:"a",flags:"b"})})),wv=vv&&"toString"!=bv.name;(_v||wv)&&Mf(RegExp.prototype,"toString",(function(){var t=kp(this),e=mg(t.source),n=t.flags;return"/"+e+"/"+mg(void 0===n&&Bp(yv,t)&&!("flags"in yv)?xv(t):n)}),{unsafe:!0});var Sv=Sp("unscopables"),Mv=Array.prototype;null==Mv[Sv]&&Qp.f(Mv,Sv,{configurable:!0,value:Lg(null)});var Ev=function(t){Mv[Sv][t]=!0},Cv=Em.includes;Wm({target:"Array",proto:!0},{includes:function(t){return Cv(this,t,arguments.length>1?arguments[1]:void 0)}}),Ev("includes");var Tv=Sp("match"),Av=function(t){var e;return Tp(t)&&(void 0!==(e=t[Tv])?!!e:"RegExp"==Tf(t))},Dv=jd.TypeError,Pv=function(t){if(Av(t))throw Dv("The method doesn't accept regular expressions");return t},Rv=Sp("match"),Lv=function(t){var e=/./;try{"/./"[t](e)}catch(f){try{return e[Rv]=!1,"/./"[t](e)}catch(t){}}return!1},Ov=Kd("".indexOf);Wm({target:"String",proto:!0,forced:!Lv("includes")},{includes:function(t){return!!~Ov(mg(Qd(this)),mg(Pv(t)),arguments.length>1?arguments[1]:void 0)}});var kv,Iv=/"/g,Nv=Kd("".replace);Wm({target:"String",proto:!0,forced:(kv="anchor",gp((function(){var t=""[kv]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{anchor:function(t){return e="a",n="name",r=t,i=mg(Qd(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+Nv(mg(r),Iv,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var Bv,Fv=xm.f,zv=Kd("".endsWith),Uv=Kd("".slice),jv=Math.min,Vv=Lv("endsWith"),Hv=!(Vv||(Bv=Fv(String.prototype,"endsWith"),!Bv||Bv.writable));Wm({target:"String",proto:!0,forced:!Hv&&!Vv},{endsWith:function(t){var e=mg(Qd(this));Pv(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,i=void 0===n?r:jv(qf(n),r),o=mg(t);return zv?zv(e,o,i):Uv(e,i-o.length,i)===o}});var Wv=Kd([].join),Gv=jf!=Object,qv=um("join",",");Wm({target:"Array",proto:!0,forced:Gv||!qv},{join:function(t){return Wv(ym(this),void 0===t?",":t)}});var Xv=jd.RegExp,Yv=gp((function(){var t=Xv("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Zv=Yv||gp((function(){return!Xv("a","y").sticky})),Kv={BROKEN_CARET:Yv||gp((function(){var t=Xv("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Zv,UNSUPPORTED_Y:Yv},Jv=jd.RegExp,Qv=gp((function(){var t=Jv(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),$v=jd.RegExp,ty=gp((function(){var t=$v("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),ey=bf.get,ny=Gd("native-string-replace",String.prototype.replace),ry=RegExp.prototype.exec,iy=ry,oy=Kd("".charAt),ay=Kd("".indexOf),sy=Kd("".replace),ly=Kd("".slice),uy=function(){var t=/a/,e=/b*/g;return Np(ry,t,"a"),Np(ry,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),cy=Kv.BROKEN_CARET,hy=void 0!==/()??/.exec("")[1];(uy||hy||cy||Qv||ty)&&(iy=function(t){var e,n,r,i,o,a,s,l=this,u=ey(l),c=mg(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=Np(iy,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=cy&&l.sticky,f=Np(gv,l),m=l.source,g=0,v=c;if(p&&(f=sy(f,"y",""),-1===ay(f,"g")&&(f+="g"),v=ly(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==oy(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),hy&&(n=new RegExp("^"+m+"$(?!\\s)",f)),uy&&(r=l.lastIndex),i=Np(ry,p?n:l,v),p?i?(i.input=ly(i.input,g),i[0]=ly(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:uy&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),hy&&i&&i.length>1&&Np(ny,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=Lg(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var dy=iy;Wm({target:"RegExp",proto:!0,forced:/./.exec!==dy},{exec:dy});var py=Function.prototype,fy=py.apply,my=py.bind,gy=py.call,vy="object"==typeof Reflect&&Reflect.apply||(my?gy.bind(fy):function(){return gy.apply(fy,arguments)}),yy=Sp("species"),by=RegExp.prototype,xy=function(t,e,n,r){var i=Sp(t),o=!gp((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!gp((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[yy]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=Kd(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=Kd(t),l=e.exec;return l===dy||l===by.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));Mf(String.prototype,t,l[0]),Mf(by,i,l[1])}r&&tf(by[i],"sham",!0)},_y=xg.charAt,wy=function(t,e,n){return e+(n?_y(t,e).length:1)},Sy=Math.floor,My=Kd("".charAt),Ey=Kd("".replace),Cy=Kd("".slice),Ty=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ay=/\$([$&'`]|\d{1,2})/g,Dy=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=Ay;return void 0!==i&&(i=tp(i),l=Ty),Ey(o,l,(function(o,l){var u;switch(My(l,0)){case"$":return"$";case"&":return t;case"`":return Cy(e,0,n);case"'":return Cy(e,a);case"<":u=i[Cy(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=Sy(c/10);return 0===h?o:h<=s?void 0===r[h-1]?My(l,1):r[h-1]+My(l,1):o}u=r[c-1]}return void 0===u?"":u}))},Py=jd.TypeError,Ry=function(t,e){var n=t.exec;if(sp(n)){var r=Np(n,t,e);return null!==r&&kp(r),r}if("RegExp"===Tf(t))return Np(dy,t,e);throw Py("RegExp#exec called on incompatible receiver")},Ly=Sp("replace"),Oy=Math.max,ky=Math.min,Iy=Kd([].concat),Ny=Kd([].push),By=Kd("".indexOf),Fy=Kd("".slice),zy="$0"==="a".replace(/./,"$0"),Uy=!!/./[Ly]&&""===/./[Ly]("a","$0");xy("replace",(function(t,e,n){var r=Uy?"$":"$0";return[function(t,n){var r=Qd(this),i=null==t?void 0:Wp(t,Ly);return i?Np(i,t,r,n):Np(e,mg(r),t,n)},function(t,i){var o=kp(this),a=mg(t);if("string"==typeof i&&-1===By(i,r)&&-1===By(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var l=sp(i);l||(i=mg(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=Ry(o,a);if(null===d)break;if(Ny(h,d),!u)break;""===mg(d[0])&&(o.lastIndex=wy(a,qf(o.lastIndex),c))}for(var p,f="",m=0,g=0;g<h.length;g++){for(var v=mg((d=h[g])[0]),y=Oy(ky(Wf(d.index),a.length),0),b=[],x=1;x<d.length;x++)Ny(b,void 0===(p=d[x])?p:String(p));var _=d.groups;if(l){var w=Iy([v],b,y,a);void 0!==_&&Ny(w,_);var S=mg(vy(i,void 0,w))}else S=Dy(v,a,y,b,_,i);y>=m&&(f+=Fy(a,m,y)+S,m=y+v.length)}return f+Fy(a,m)}]}),!!gp((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!zy||Uy);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var jy=function(t,e){return jy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},jy(t,e)};function Vy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}jy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Hy=function(){return Hy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Hy.apply(this,arguments)};function Wy(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gy(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function qy(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var Xy=0,Yy=function(){this.id=""+Xy++},Zy=bf.set,Ky=bf.getterFor("Array Iterator"),Jy=nv(Array,"Array",(function(t,e){Zy(this,{type:"Array Iterator",target:ym(t),index:0,kind:e})}),(function(){var t=Ky(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Jm.Arguments=Jm.Array,Ev("keys"),Ev("values"),Ev("entries");var Qy=function(t,e,n){for(var r in e)Mf(t,r,e[r],n);return t},$y=jd.Array,tb=Math.max,eb=function(t,e,n){for(var r=Xf(t),i=Sm(e,r),o=Sm(void 0===n?r:n,r),a=$y(tb(o-i,0)),s=0;i<o;i++,s++)eg(a,s,t[i]);return a.length=s,a},nb=Rm.f,rb="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ib={f:function(t){return rb&&"Window"==Tf(t)?function(t){try{return nb(t)}catch(t){return eb(rb)}}(t):nb(ym(t))}},ob=gp((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),ab=Object.isExtensible,sb=gp((function(){ab(1)}))||ob?function(t){return!!Tp(t)&&(!ob||"ArrayBuffer"!=Tf(t))&&(!ab||ab(t))}:ab,lb=!gp((function(){return Object.isExtensible(Object.preventExtensions({}))})),ub=Bd((function(t){var e=Qp.f,n=!1,r=ap("meta"),i=0,o=function(t){e(t,r,{value:{objectID:"O"+i++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},n=!0;var t=Rm.f,e=Kd([].splice),i={};i[r]=1,t(i).length&&(Rm.f=function(n){for(var i=t(n),o=0,a=i.length;o<a;o++)if(i[o]===r){e(i,o,1);break}return i},Wm({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ib.f}))},fastKey:function(t,e){if(!Tp(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!np(t,r)){if(!sb(t))return"F";if(!e)return"E";o(t)}return t[r].objectID},getWeakData:function(t,e){if(!np(t,r)){if(!sb(t))return!0;if(!e)return!1;o(t)}return t[r].weakData},onFreeze:function(t){return lb&&n&&sb(t)&&!np(t,r)&&o(t),t}};hf[r]=!0})),cb=jd.TypeError,hb=function(t,e){this.stopped=t,this.result=e},db=hb.prototype,pb=function(t,e,n){var r,i,o,a,s,l,u,c=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),f=Ff(e,c),m=function(t){return r&&Zm(r,"normal",t),new hb(!0,t)},g=function(t){return h?(kp(t),p?f(t[0],t[1],m):f(t[0],t[1])):p?f(t,m):f(t)};if(d)r=t;else{if(!(i=rg(t)))throw cb(jp(t)+" is not iterable");if(tg(i)){for(o=0,a=Xf(t);a>o;o++)if((s=g(t[o]))&&Bp(db,s))return s;return new hb(!1)}r=og(t,i)}for(l=r.next;!(u=Np(l,r)).done;){try{s=g(u.value)}catch(t){Zm(r,"throw",t)}if("object"==typeof s&&s&&Bp(db,s))return s}return new hb(!1)},fb=jd.TypeError,mb=function(t,e){if(Bp(e,t))return t;throw fb("Incorrect invocation")},gb=function(t,e,n){var r,i;return Zg&&sp(r=e.constructor)&&r!==n&&Tp(i=r.prototype)&&i!==n.prototype&&Zg(t,i),t},vb=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=jd[t],s=a&&a.prototype,l=a,u={},c=function(t){var e=Kd(s[t]);Mf(s,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!Tp(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return i&&!Tp(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!Tp(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(Vm(t,!sp(a)||!(i||s.forEach&&!gp((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,o),ub.enable();else if(Vm(t,!0)){var h=new l,d=h[o](i?{}:-0,1)!=h,p=gp((function(){h.has(1)})),f=hg((function(t){new a(t)})),m=!i&&gp((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));f||((l=e((function(t,e){mb(t,s);var n=gb(new a,t,l);return null!=e&&pb(e,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=l),(p||m)&&(c("delete"),c("has"),r&&c("get")),(m||d)&&c(o),i&&s.clear&&delete s.clear}return u[t]=l,Wm({global:!0,forced:l!=a},u),Wg(l,t),i||n.setStrong(l,t,r),l},yb=ub.getWeakData,bb=bf.set,xb=bf.getterFor,_b=lm.find,wb=lm.findIndex,Sb=Kd([].splice),Mb=0,Eb=function(t){return t.frozen||(t.frozen=new Cb)},Cb=function(){this.entries=[]},Tb=function(t,e){return _b(t.entries,(function(t){return t[0]===e}))};Cb.prototype={get:function(t){var e=Tb(this,t);if(e)return e[1]},has:function(t){return!!Tb(this,t)},set:function(t,e){var n=Tb(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=wb(this.entries,(function(e){return e[0]===t}));return~e&&Sb(this.entries,e,1),!!~e}};var Ab,Db={getConstructor:function(t,e,n,r){var i=t((function(t,i){mb(t,o),bb(t,{type:e,id:Mb++,frozen:void 0}),null!=i&&pb(i,t[r],{that:t,AS_ENTRIES:n})})),o=i.prototype,a=xb(e),s=function(t,e,n){var r=a(t),i=yb(kp(e),!0);return!0===i?Eb(r).set(e,n):i[r.id]=n,t};return Qy(o,{delete:function(t){var e=a(this);if(!Tp(t))return!1;var n=yb(t);return!0===n?Eb(e).delete(t):n&&np(n,e.id)&&delete n[e.id]},has:function(t){var e=a(this);if(!Tp(t))return!1;var n=yb(t);return!0===n?Eb(e).has(t):n&&np(n,e.id)}}),Qy(o,n?{get:function(t){var e=a(this);if(Tp(t)){var n=yb(t);return!0===n?Eb(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),i}},Pb=bf.enforce,Rb=!jd.ActiveXObject&&"ActiveXObject"in jd,Lb=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ob=vb("WeakMap",Lb,Db);if(lf&&Rb){Ab=Db.getConstructor(Lb,"WeakMap",!0),ub.enable();var kb=Ob.prototype,Ib=Kd(kb.delete),Nb=Kd(kb.has),Bb=Kd(kb.get),Fb=Kd(kb.set);Qy(kb,{delete:function(t){if(Tp(t)&&!sb(t)){var e=Pb(this);return e.frozen||(e.frozen=new Ab),Ib(this,t)||e.frozen.delete(t)}return Ib(this,t)},has:function(t){if(Tp(t)&&!sb(t)){var e=Pb(this);return e.frozen||(e.frozen=new Ab),Nb(this,t)||e.frozen.has(t)}return Nb(this,t)},get:function(t){if(Tp(t)&&!sb(t)){var e=Pb(this);return e.frozen||(e.frozen=new Ab),Nb(this,t)?Bb(this,t):e.frozen.get(t)}return Bb(this,t)},set:function(t,e){if(Tp(t)&&!sb(t)){var n=Pb(this);n.frozen||(n.frozen=new Ab),Nb(this,t)?Fb(this,t,e):n.frozen.set(t,e)}else Fb(this,t,e);return this}})}var zb=Sp("iterator"),Ub=Sp("toStringTag"),jb=Jy.values,Vb=function(t,e){if(t){if(t[zb]!==jb)try{tf(t,zb,jb)}catch(e){t[zb]=jb}if(t[Ub]||tf(t,Ub,e),Of[e])for(var n in Jy)if(t[n]!==Jy[n])try{tf(t,n,Jy[n])}catch(e){t[n]=Jy[n]}}};for(var Hb in Of)Vb(jd[Hb]&&jd[Hb].prototype,Hb);Vb(Nf,"DOMTokenList");var Wb=new WeakMap,Gb=new WeakMap,qb=new WeakMap,Xb=new WeakMap,Yb=new WeakMap,Zb=new WeakMap,Kb=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,$b=new WeakMap,tx=new WeakMap,ex=new WeakMap,nx=new WeakMap,rx=new WeakMap,ix=new WeakMap,ox=new WeakMap,ax=new WeakMap,sx=new WeakMap,lx=new WeakMap,ux=new WeakMap,cx=new WeakMap,hx=new WeakMap,dx=new WeakMap,px=new WeakMap,fx=new WeakMap,mx=lm.find,gx=!0;"find"in[]&&Array(1).find((function(){gx=!1})),Wm({target:"Array",proto:!0,forced:gx},{find:function(t){return mx(this,t,arguments.length>1?arguments[1]:void 0)}}),Ev("find"),Wm({global:!0},{globalThis:jd});const vx=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"];Ci&&(hi.fn.css=Ci),Li&&(hi.fn.append=Li),di&&(hi.fn.addClass=di),pi&&(hi.fn.removeClass=pi),fi&&(hi.fn.hasClass=fi),bi&&(hi.fn.on=bi),Hi&&(hi.fn.focus=Hi),mi&&(hi.fn.attr=mi),gi&&(hi.fn.removeAttr=gi),Mi&&(hi.fn.hide=Mi),Ei&&(hi.fn.show=Ei),Si&&(hi.fn.offset=Si),_i&&(hi.fn.width=_i),wi&&(hi.fn.height=wi),ki&&(hi.fn.parent=ki),Ii&&(hi.fn.parents=Ii),Ri&&(hi.fn.is=Ri),vi&&(hi.fn.dataset=vi),yi&&(hi.fn.val=yi),Pi&&(hi.fn.text=Pi),Di&&(hi.fn.html=Di),Bi&&(hi.fn.children=Bi),Fi&&(hi.fn.remove=Fi),Ni&&(hi.fn.find=Ni),Ti&&(hi.fn.each=Ti),zi&&(hi.fn.empty=zi);var yx,bx=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||null},xx=function(t){return _x(t)&&1===t.nodeType},_x=function(t){var e=bx(t);return!!e&&t instanceof e.Node},wx=function(t){var e=t&&t.anchorNode&&bx(t.anchorNode);return!!e&&t instanceof e.Selection},Sx=function(t){return _x(t)&&3===t.nodeType},Mx=function(t){var e,n,r;return null!==(e=window.document.getElementById(t))&&void 0!==e?e:(null===(r=null===(n=window.document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===r?void 0:r.getElementById(t))||null},Ex=function(t,e,n){for(var r,i=t.childNodes,o=i[e],a=e,s=!1,l=!1;(_x(r=o)&&8===r.nodeType||xx(o)&&0===o.childNodes.length||xx(o)&&"false"===o.getAttribute("contenteditable"))&&(!s||!l);)a>=i.length?(s=!0,a=e-1,n="backward"):a<0?(l=!0,a=e+1,n="forward"):(o=i[a],e=a,a+="forward"===n?1:-1);return[o,e]},Cx=function(t,e,n){return Gy(Ex(t,e,n),1)[0]},Tx=function t(e){var n,r,i="";if(Sx(e)&&e.nodeValue)return e.nodeValue;if(xx(e)){try{for(var o=Wy(Array.from(e.childNodes)),a=o.next();!a.done;a=o.next())i+=t(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}var s=getComputedStyle(e).getPropertyValue("display");"block"!==s&&"list"!==s&&"table-row"!==s&&"BR"!==e.tagName||(i+="\n")}return i};function Ax(t,e){if(!(t instanceof HTMLElement&&"true"===t.dataset.slateVoid))for(var n=t.childNodes,r=n.length;r--;){var i=n[r],o=i.nodeType;3==o?e(i,t):1!=o&&9!=o&&11!=o||Ax(i,e)}}function Dx(t){if(0===t.length)return"";var e=t[0];return e.nodeType!==yx.ELEMENT_NODE?"":e.tagName.toLowerCase()}!function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(yx||(yx={})),void 0!==globalThis.navigator&&void 0!==globalThis.window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&globalThis.window.MSStream;var Px="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Rx="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent);var Lx="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Ox="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),kx="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Ix="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent);var Nx=!kx&&!Ox&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,Bx={getWindow:function(t){var e=cx.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey:function(t,e){var n=ux.get(e);return n||(n=new Yy,ux.set(e,n)),n},setNewKey:function(t){var e=new Yy;ux.set(t,e)},findPath:function(t,e){for(var n=[],r=e;;){var i=ix.get(r);if(null==i){if(ue.isEditor(r))return n;break}var o=rx.get(r);if(null==o)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: "+JSON.stringify(e))},findDocumentOrShadowRoot:function(t){if(t.isDestroyed)return window.document;var e=Bx.toDOMNode(t,t),n=e.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&null!=n.getSelection?n:e.ownerDocument},getParentNode:function(t,e){return ix.get(e)||null},getParentsNodes:function(t,e){for(var n=[],r=e;r!==t&&null!=r;){var i=Bx.getParentNode(t,r);if(null==i)break;n.push(i),r=i}return n},getTopNode:function(t,e){var n=[Bx.findPath(t,e)[0]];return fe.get(t,n)},toDOMNode:function(t,e){var n;if(ue.isEditor(e))n=ox.get(t);else{var r=Bx.findKey(t,e);n=sx.get(r)}if(!n)throw new Error("Cannot resolve a DOM node from Slate node: "+JSON.stringify(e));return n},hasDOMNode:function(t,e,n){void 0===n&&(n={});var r,i=n.editable,o=void 0!==i&&i,a=Bx.toDOMNode(t,t);try{r=xx(e)?e:e.parentElement}catch(t){if(!t.message.includes('Permission denied to access property "nodeType"'))throw t}return!!r&&r.closest("[data-slate-editor]")===a&&(!o||r.isContentEditable||!!r.getAttribute("data-slate-zero-width"))},toDOMRange:function(t,e){var n=e.anchor,r=e.focus,i=Te.isBackward(e),o=Bx.toDOMPoint(t,n),a=Te.isCollapsed(e)?o:Bx.toDOMPoint(t,r),s=Bx.getWindow(t).document.createRange(),l=Gy(i?a:o,2),u=l[0],c=l[1],h=Gy(i?o:a,2),d=h[0],p=h[1],f=!!(xx(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),m=!!(xx(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return s.setStart(u,f?1:c),s.setEnd(d,m?1:p),s},toDOMPoint:function(t,e){var n,r,i,o=Gy(ue.node(t,e.path),1)[0],a=Bx.toDOMNode(t,o);ue.void(t,{at:e})&&(e={path:e.path,offset:0});var s=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),l=0;try{for(var u=Wy(s),c=u.next();!c.done;c=u.next()){var h=c.value,d=h.childNodes[0];if(null!=d&&null!=d.textContent){var p=d.textContent.length,f=h.getAttribute("data-slate-length"),m=l+(null==f?p:parseInt(f,10));if(e.offset<=m){i=[d,Math.min(p,Math.max(0,e.offset-l))];break}l=m}}}catch(Cut){n={error:Cut}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: "+JSON.stringify(e));return i},toSlateNode:function(t,e){var n=xx(e)?e:e.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?ax.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: "+n);return r},findEventRange:function(t,e){"nativeEvent"in e&&(e=e.nativeEvent);var n=e.clientX,r=e.clientY,i=e.target;if(null==n||null==r)throw new Error("Cannot resolve a Slate range from a DOM event: "+e);var o,a=Bx.toSlateNode(t,e.target),s=Bx.findPath(t,a);if(ue.isVoid(t,a)){var l=i.getBoundingClientRect(),u=t.isInline(a)?n-l.left<l.left+l.width-n:r-l.top<l.top+l.height-r,c=ue.point(t,s,{edge:u?"start":"end"}),h=u?ue.before(t,c):ue.after(t,c);if(h)return ue.range(t,h)}var d=this.getWindow(t).document;if(d.caretRangeFromPoint)o=d.caretRangeFromPoint(n,r);else{var p=d.caretPositionFromPoint(n,r);p&&((o=d.createRange()).setStart(p.offsetNode,p.offset),o.setEnd(p.offsetNode,p.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: "+e);return Bx.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!1})},toSlateRange:function(t,e,n){var r,i,o,a,s,l=n.exactMatch,u=n.suppressThrow;if((wx(e)?e.anchorNode:e.startContainer)&&(wx(e)?(r=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=Ix&&window.document.activeElement&&window.document.activeElement.shadowRoot?e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:e.isCollapsed):(r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,s=e.collapsed)),null==r||null==o||null==i||null==a)throw new Error("Cannot resolve a Slate range from DOM range: "+e);var c=Bx.toSlatePoint(t,[r,i],{exactMatch:l,suppressThrow:u});if(!c)return null;var h=s?c:Bx.toSlatePoint(t,[o,a],{exactMatch:l,suppressThrow:u});if(!h)return null;var d={anchor:c,focus:h};return Te.isExpanded(d)&&Te.isForward(d)&&xx(o)&&ue.void(t,{at:d.focus,mode:"highest"})&&(d=ue.unhangRange(t,d,{voids:!0})),d},toSlatePoint:function(t,e,n){var r,i=n.exactMatch,o=n.suppressThrow,a=Gy(i?e:function(t){var e,n=Gy(t,2),r=n[0],i=n[1];if(xx(r)&&r.childNodes.length){var o=i===r.childNodes.length,a=o?i-1:i;for(r=(e=Gy(Ex(r,a,o?"backward":"forward"),2))[0],o=(a=e[1])<i;xx(r)&&r.childNodes.length;){var s=o?r.childNodes.length-1:0;r=Cx(r,s,o?"backward":"forward")}i=o&&null!=r.textContent?r.textContent.length:0}return[r,i]}(e),2),s=a[0],l=a[1],u=s.parentNode,c=null,h=0;if(u){var d=u.closest('[data-slate-void="true"]'),p=u.closest("[data-slate-leaf]"),f=null;if(p){c=p.closest('[data-slate-node="text"]');var m=Bx.getWindow(t).document.createRange();m.setStart(c,0),m.setEnd(s,l);var g=m.cloneContents();qy(qy([],Gy(Hr(g.querySelectorAll("[data-slate-zero-width]")))),Gy(Hr(g.querySelectorAll("[contenteditable=false]")))).forEach((function(t){t.parentNode.removeChild(t)})),h=g.textContent.length,f=c}else d&&((p=d.querySelector("[data-slate-leaf]"))?(c=p.closest('[data-slate-node="text"]'),h=(f=p).textContent.length,f.querySelectorAll("[data-slate-zero-width]").forEach((function(t){h-=t.textContent.length}))):h=1);f&&h===f.textContent.length&&(u.hasAttribute("data-slate-zero-width")||Rx&&(null===(r=f.textContent)||void 0===r?void 0:r.endsWith("\n")))&&h--}if(!c){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: "+e)}var v=Bx.toSlateNode(t,c);return{path:Bx.findPath(t,v),offset:h}},hasRange:function(t,e){var n=e.anchor,r=e.focus;return ue.hasPath(t,n.path)&&ue.hasPath(t,r.path)},getNodeType:function(t){return re.isElement(t)?t.type:""},checkNodeType:function(t,e){return this.getNodeType(t)===e},getNodesStr:function(t){return t.map((function(t){return fe.string(t)})).join("")},getSelectedElems:function(t){var e,n,r=[],i=ue.nodes(t,{universal:!0});try{for(var o=Wy(i),a=o.next();!a.done;a=o.next()){var s=Gy(a.value,1)[0];re.isElement(s)&&r.push(s)}}catch(Cut){e={error:Cut}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},getSelectedNodeByType:function(t,e){var n=this,r=Gy(ue.nodes(t,{match:function(t){return n.checkNodeType(t,e)},universal:!0}),1),i=r[0];return null==i?null:i[0]},getSelectedTextNode:function(t){var e=Gy(ue.nodes(t,{match:function(t){return ke.isText(t)},universal:!0}),1),n=e[0];return null==n?null:n[0]},isNodeSelected:function(t,e){var n=Gy(ue.nodes(t,{match:function(t){return t===e},universal:!0}),1),r=n[0];return null!=r&&Gy(r,1)[0]===e},isSelectionAtLineEnd:function(t,e){var n=t.selection;return!!n&&(ue.isEnd(t,n.anchor,e)||ue.isEnd(t,n.focus,e))},getTextarea:function(t){var e=Wb.get(t);if(null==e)throw new Error("Cannot find textarea instance by editor");return e},getToolbar:function(t){return Xb.get(t)||null},getHoverbar:function(t){return Zb.get(t)||null},normalizeContent:function(t){t.children.forEach((function(e,n){t.normalizeNode([e,[n]])}))},getLeftLengthOfMaxLength:function(t){var e=t.getConfig(),n=e.maxLength,r=e.onMaxLength;if("number"!=typeof n||n<=0)return 1/0;var i=n-t.getText().replace(/\r|\n|(\r\n)/g,"").length;return i<=0&&r&&r(t),i},cleanExposedTexNodeInSelectionBlock:function(t){var e,n,r,i,o=Bx.getTextarea(t).$textArea,a=null==o?void 0:o[0].childNodes;if(a)try{for(var s=Wy(Array.from(a)),l=s.next();!l.done;l=s.next()){var u=l.value;if(3!==u.nodeType)break;u.remove()}}catch(Cut){e={error:Cut}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}var c=ue.nodes(t,{match:function(e){return!(!re.isElement(e)||t.isInline(e))},universal:!0});try{for(var h=Wy(c),d=h.next();!d.done;d=h.next()){var p=d.value;if(null!=p){var f=p[0];Ax(Bx.toDOMNode(t,f),(function(t,e){var n=hi(e);n.attr("data-slate-string")||n.attr("data-slate-zero-width")||e.removeChild(t)}))}}}catch(Cut){r={error:Cut}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}},isLastNode:function(t,e){var n=t.children||[];return n[n.length-1]===e},genEmptyParagraph:function(){return{type:"paragraph",children:[{text:""}]}}},Fx=1,zx={},Ux={};function jx(t,e){var n=t.key,r=t.factory,i=t.config,o=Hy(Hy({},i),e||{});if(null!=Ux[n])throw new Error("Duplicated key '"+n+"' in menu items");Ux[n]=r,function(t,e){null!=e&&(zx[t]=e)}(n,o)}var Vx=Sp("species"),Hx=function(t){var e=up(t),n=Qp.f;Cp&&e&&!e[Vx]&&n(e,Vx,{configurable:!0,get:function(){return this}})},Wx=Qp.f,Gx=ub.fastKey,qx=bf.set,Xx=bf.getterFor,Yx={getConstructor:function(t,e,n,r){var i=t((function(t,i){mb(t,o),qx(t,{type:e,index:Lg(null),first:void 0,last:void 0,size:0}),Cp||(t.size=0),null!=i&&pb(i,t[r],{that:t,AS_ENTRIES:n})})),o=i.prototype,a=Xx(e),s=function(t,e,n){var r,i,o=a(t),s=l(t,e);return s?s.value=n:(o.last=s={index:i=Gx(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Cp?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t},l=function(t,e){var n,r=a(t),i=Gx(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Qy(o,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,Cp?t.size=0:this.size=0},delete:function(t){var e=this,n=a(e),r=l(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Cp?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=a(this),r=Ff(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Qy(o,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),Cp&&Wx(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=Xx(e),o=Xx(r);nv(t,e,(function(t,e){qx(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Hx(e)}};vb("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Yx);var Zx=lm.filter,Kx=qm("filter");Wm({target:"Array",proto:!0,forced:!Kx},{filter:function(t){return Zx(this,t,arguments.length>1?arguments[1]:void 0)}});var Jx="\t\n\v\f\r                　\u2028\u2029\ufeff",Qx=Kd("".replace),$x="["+Jx+"]",t_=RegExp("^"+$x+$x+"*"),e_=RegExp($x+$x+"*$"),n_=function(t){return function(e){var n=mg(Qd(e));return 1&t&&(n=Qx(n,t_,"")),2&t&&(n=Qx(n,e_,"")),n}},r_={start:n_(1),end:n_(2),trim:n_(3)},i_=Sf.PROPER,o_=r_.trim;Wm({target:"String",proto:!0,forced:function(t){return gp((function(){return!!Jx[t]()||"​᠎"!=="​᠎"[t]()||i_&&Jx[t].name!==t}))}("trim")},{trim:function(){return o_(this)}});var a_=jd.TypeError,s_=Sp("species"),l_=function(t,e){var n,r=kp(t).constructor;return void 0===r||null==(n=kp(r)[s_])?e:function(t){if(nm(t))return t;throw a_(jp(t)+" is not a constructor")}(n)},u_=Kv.UNSUPPORTED_Y,c_=Math.min,h_=[].push,d_=Kd(/./.exec),p_=Kd(h_),f_=Kd("".slice);xy("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=mg(Qd(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Av(t))return Np(e,r,t,i);for(var o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,u+"g");(o=Np(dy,h,r))&&!((a=h.lastIndex)>c&&(p_(l,f_(r,c,o.index)),o.length>1&&o.index<r.length&&vy(h_,l,eb(o,1)),s=o[0].length,c=a,l.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!s&&d_(h,"")||p_(l,""):p_(l,f_(r,c)),l.length>i?eb(l,0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:Np(e,this,t,n)}:e,[function(e,n){var i=Qd(this),o=null==e?void 0:Wp(e,t);return o?Np(o,e,i,n):Np(r,mg(i),e,n)},function(t,i){var o=kp(this),a=mg(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var l=l_(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(u_?"g":"y"),h=new l(u_?"^(?:"+o.source+")":o,c),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===a.length)return null===Ry(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=u_?0:f;var g,v=Ry(h,u_?f_(a,f):a);if(null===v||(g=c_(qf(h.lastIndex+(u_?f:0)),a.length))===p)f=wy(a,f,u);else{if(p_(m,f_(a,p,f)),m.length===d)return m;for(var y=1;y<=v.length-1;y++)if(p_(m,v[y]),m.length===d)return m;f=p=g}}return p_(m,f_(a,p)),m}]}),!!gp((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),u_);var m_=[];function g_(t){m_.push(t)}var v_={};function y_(t){var e=t.type,n=t.elemToHtml;v_[e||""]=n}function b_(t,e,n){var r=n.isInline(t)?"span":"div";return"<"+r+">"+e+"</"+r+">"}function x_(t,e){var n=t.type,r=void 0===n?"":n,i=t.children,o=void 0===i?[]:i,a=ue.isVoid(e,t),s="";a||(s=o.map((function(t){return Gw(t,e)})).join(""));var l=function(t){return v_[t]||b_}(r),u=l(t,s,e);return a||m_.forEach((function(e){return u=e(t,u)})),u}var __,w_,S_,M_,E_=jd.Promise,C_=Kd([].slice),T_=/(?:ipad|iphone|ipod).*applewebkit/i.test(cp),A_="process"==Tf(jd.process),D_=jd.setImmediate,P_=jd.clearImmediate,R_=jd.process,L_=jd.Dispatch,O_=jd.Function,k_=jd.MessageChannel,I_=jd.String,N_=0,B_={};try{__=jd.location}catch(Cut){}var F_=function(t){if(np(B_,t)){var e=B_[t];delete B_[t],e()}},z_=function(t){return function(){F_(t)}},U_=function(t){F_(t.data)},j_=function(t){jd.postMessage(I_(t),__.protocol+"//"+__.host)};D_&&P_||(D_=function(t){var e=C_(arguments,1);return B_[++N_]=function(){vy(sp(t)?t:O_(t),void 0,e)},w_(N_),N_},P_=function(t){delete B_[t]},A_?w_=function(t){R_.nextTick(z_(t))}:L_&&L_.now?w_=function(t){L_.now(z_(t))}:k_&&!T_?(M_=(S_=new k_).port2,S_.port1.onmessage=U_,w_=Ff(M_.postMessage,M_)):jd.addEventListener&&sp(jd.postMessage)&&!jd.importScripts&&__&&"file:"!==__.protocol&&!gp(j_)?(w_=j_,jd.addEventListener("message",U_,!1)):w_="onreadystatechange"in Pp("script")?function(t){Sg.appendChild(Pp("script")).onreadystatechange=function(){Sg.removeChild(this),F_(t)}}:function(t){setTimeout(z_(t),0)});var V_,H_,W_,G_,q_,X_,Y_,Z_,K_={set:D_,clear:P_},J_=/ipad|iphone|ipod/i.test(cp)&&void 0!==jd.Pebble,Q_=/web0s(?!.*chrome)/i.test(cp),$_=xm.f,tw=K_.set,ew=jd.MutationObserver||jd.WebKitMutationObserver,nw=jd.document,rw=jd.process,iw=jd.Promise,ow=$_(jd,"queueMicrotask"),aw=ow&&ow.value;aw||(V_=function(){var t,e;for(A_&&(t=rw.domain)&&t.exit();H_;){e=H_.fn,H_=H_.next;try{e()}catch(t){throw H_?G_():W_=void 0,t}}W_=void 0,t&&t.enter()},T_||A_||Q_||!ew||!nw?!J_&&iw&&iw.resolve?((Y_=iw.resolve(void 0)).constructor=iw,Z_=Ff(Y_.then,Y_),G_=function(){Z_(V_)}):A_?G_=function(){rw.nextTick(V_)}:(tw=Ff(tw,jd),G_=function(){tw(V_)}):(q_=!0,X_=nw.createTextNode(""),new ew(V_).observe(X_,{characterData:!0}),G_=function(){X_.data=q_=!q_}));var sw,lw,uw,cw,hw=aw||function(t){var e={fn:t,next:void 0};W_&&(W_.next=e),H_||(H_=e,G_()),W_=e},dw=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Hp(e),this.reject=Hp(n)},pw={f:function(t){return new dw(t)}},fw=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},mw="object"==typeof window,gw=K_.set,vw=Sp("species"),yw="Promise",bw=bf.getterFor(yw),xw=bf.set,_w=bf.getterFor(yw),ww=E_&&E_.prototype,Sw=E_,Mw=ww,Ew=jd.TypeError,Cw=jd.document,Tw=jd.process,Aw=pw.f,Dw=Aw,Pw=!!(Cw&&Cw.createEvent&&jd.dispatchEvent),Rw=sp(jd.PromiseRejectionEvent),Lw=!1,Ow=Vm(yw,(function(){var t=af(Sw),e=t!==String(Sw);if(!e&&66===mp)return!0;if(mp>=51&&/native code/.test(t))return!1;var n=new Sw((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[vw]=r,!(Lw=n.then((function(){}))instanceof r)||!e&&mw&&!Rw})),kw=Ow||!hg((function(t){Sw.all(t).catch((function(){}))})),Iw=function(t){var e;return!(!Tp(t)||!sp(e=t.then))&&e},Nw=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;hw((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,l,u=n[o++],c=i?u.ok:u.fail,h=u.resolve,d=u.reject,p=u.domain;try{c?(i||(2===t.rejection&&Uw(t),t.rejection=1),!0===c?a=r:(p&&p.enter(),a=c(r),p&&(p.exit(),l=!0)),a===u.promise?d(Ew("Promise-chain cycle")):(s=Iw(a))?Np(s,a,h,d):h(a)):d(r)}catch(t){p&&!l&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Fw(t)}))}},Bw=function(t,e,n){var r,i;Pw?((r=Cw.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),jd.dispatchEvent(r)):r={promise:e,reason:n},!Rw&&(i=jd["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=jd.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Fw=function(t){Np(gw,jd,(function(){var e,n=t.facade,r=t.value;if(zw(t)&&(e=fw((function(){A_?Tw.emit("unhandledRejection",r,n):Bw("unhandledrejection",n,r)})),t.rejection=A_||zw(t)?2:1,e.error))throw e.value}))},zw=function(t){return 1!==t.rejection&&!t.parent},Uw=function(t){Np(gw,jd,(function(){var e=t.facade;A_?Tw.emit("rejectionHandled",e):Bw("rejectionhandled",e,t.value)}))},jw=function(t,e,n){return function(r){t(e,r,n)}},Vw=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Nw(t,!0))},Hw=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Ew("Promise can't be resolved itself");var r=Iw(e);r?hw((function(){var n={done:!1};try{Np(r,e,jw(Hw,n,t),jw(Vw,n,t))}catch(e){Vw(n,e,t)}})):(t.value=e,t.state=1,Nw(t,!1))}catch(e){Vw({done:!1},e,t)}}};if(Ow&&(Mw=(Sw=function(t){mb(this,Mw),Hp(t),Np(sw,this);var e=bw(this);try{t(jw(Hw,e),jw(Vw,e))}catch(t){Vw(e,t)}}).prototype,(sw=function(t){xw(this,{type:yw,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Qy(Mw,{then:function(t,e){var n=_w(this),r=n.reactions,i=Aw(l_(this,Sw));return i.ok=!sp(t)||t,i.fail=sp(e)&&e,i.domain=A_?Tw.domain:void 0,n.parent=!0,r[r.length]=i,0!=n.state&&Nw(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),lw=function(){var t=new sw,e=bw(t);this.promise=t,this.resolve=jw(Hw,e),this.reject=jw(Vw,e)},pw.f=Aw=function(t){return t===Sw||t===uw?new lw(t):Dw(t)},sp(E_)&&ww!==Object.prototype)){cw=ww.then,Lw||(Mf(ww,"then",(function(t,e){var n=this;return new Sw((function(t,e){Np(cw,n,t,e)})).then(t,e)}),{unsafe:!0}),Mf(ww,"catch",Mw.catch,{unsafe:!0}));try{delete ww.constructor}catch(Cut){}Zg&&Zg(ww,Mw)}function Ww(t){Promise.resolve().then(t)}function Gw(t,e){return re.isElement(t)?x_(t,e):function(t,e){var n=t.text;if(null==n)throw new Error("Current node is not slate Text "+JSON.stringify(t));var r=n;r=function(t){return t.replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/®/g,"&reg;").replace(/©/g,"&copy;").replace(/™/g,"&trade;")}(r);var i=Bx.getParentsNodes(e,t).some((function(t){return"pre"===Bx.getNodeType(t)}));if(i||(r=r.replace(/\r\n|\r|\n/g,"<br>")),i&&(r=r.replace(/&nbsp;/g," ")),""===r){var o=Bx.getParentNode(null,t);if(!o||0!==o.children.length)return r;r="<br>"}return m_.forEach((function(e){return r=e(t,r)})),r}(t,e)}function qw(t){return"w-e-element-"+t}Wm({global:!0,wrap:!0,forced:Ow},{Promise:Sw}),Wg(Sw,yw,!1),Hx(yw),uw=up(yw),Wm({target:yw,stat:!0,forced:Ow},{reject:function(t){var e=Aw(this);return Np(e.reject,void 0,t),e.promise}}),Wm({target:yw,stat:!0,forced:Ow},{resolve:function(t){return function(t,e){if(kp(t),Tp(e)&&e.constructor===t)return e;var n=pw.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),Wm({target:yw,stat:!0,forced:kw},{all:function(t){var e=this,n=Aw(e),r=n.resolve,i=n.reject,o=fw((function(){var n=Hp(e.resolve),o=[],a=0,s=1;pb(t,(function(t){var l=a++,u=!1;s++,Np(n,e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Aw(e),r=n.reject,i=fw((function(){var i=Hp(e.resolve);pb(t,(function(t){Np(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Xw=function(t,e){var n=(e.top+e.bottom)/2;return t.top<=n&&t.bottom>=n},Yw=function(t,e,n){var r=Bx.toDOMRange(t,e).getBoundingClientRect(),i=Bx.toDOMRange(t,n).getBoundingClientRect();return Xw(r,i)&&Xw(i,r)},Zw=["span","b","strong","i","em","s","strike","u","font","sub","sup"],Kw=[];function Jw(t){Kw.push(t)}var Qw=[];function $w(t){Qw.push(t)}var tS={};function eS(t){var e=t.selector,n=t.parseElemHtml;tS[e]=n}var nS=Qp.f,rS=Rm.f,iS=bf.enforce,oS=Sp("match"),aS=jd.RegExp,sS=aS.prototype,lS=jd.SyntaxError,uS=Kd(gv),cS=Kd(sS.exec),hS=Kd("".charAt),dS=Kd("".replace),pS=Kd("".indexOf),fS=Kd("".slice),mS=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,gS=/a/g,vS=/a/g,yS=new aS(gS)!==gS,bS=Kv.MISSED_STICKY,xS=Kv.UNSUPPORTED_Y,_S=Cp&&(!yS||bS||Qv||ty||gp((function(){return vS[oS]=!1,aS(gS)!=gS||aS(vS)==vS||"/a/i"!=aS(gS,"i")})));if(Vm("RegExp",_S)){for(var wS=function(t,e){var n,r,i,o,a,s,l=Bp(sS,this),u=Av(t),c=void 0===e,h=[],d=t;if(!l&&u&&c&&t.constructor===wS)return t;if((u||Bp(sS,t))&&(t=t.source,c&&(e="flags"in d?d.flags:uS(d))),t=void 0===t?"":mg(t),e=void 0===e?"":mg(e),d=t,Qv&&"dotAll"in gS&&(r=!!e&&pS(e,"s")>-1)&&(e=dS(e,/s/g,"")),n=e,bS&&"sticky"in gS&&(i=!!e&&pS(e,"y")>-1)&&xS&&(e=dS(e,/y/g,"")),ty&&(o=function(t){for(var e,n=t.length,r=0,i="",o=[],a={},s=!1,l=!1,u=0,c="";r<=n;r++){if("\\"===(e=hS(t,r)))e+=hS(t,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:cS(mS,fS(t,r+1))&&(r+=2,l=!0),i+=e,u++;continue;case">"===e&&l:if(""===c||np(a,c))throw new lS("Invalid capture group name");a[c]=!0,o[o.length]=[c,u],l=!1,c="";continue}l?c+=e:i+=e}return[i,o]}(t),t=o[0],h=o[1]),a=gb(aS(t,e),l?this:sS,wS),(r||i||h.length)&&(s=iS(a),r&&(s.dotAll=!0,s.raw=wS(function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(e=hS(t,r))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+hS(t,++r);return i}(t),n)),i&&(s.sticky=!0),h.length&&(s.groups=h)),t!==d)try{tf(a,"source",""===d?"(?:)":d)}catch(t){}return a},SS=function(t){t in wS||nS(wS,t,{configurable:!0,get:function(){return aS[t]},set:function(e){aS[t]=e}})},MS=rS(aS),ES=0;MS.length>ES;)SS(MS[ES++]);sS.constructor=wS,wS.prototype=sS,Mf(jd,"RegExp",wS)}Hx("RegExp");var CS=new RegExp(String.fromCharCode(160),"g");function TS(t){return t.replace(CS," ")}function AS(t,e){var n=t.length;if(n){var r=t[n-1];if(ke.isText(r)){var i=Object.keys(r);if(1===i.length&&"text"===i[0])return r.text=r.text+e,!0}}return!1}function DS(t,e,n){return{type:"paragraph",children:[{text:hi(t).text().replace(/\s+/gm," ")}]}}function PS(t,e){var n=function(t,e){var n=[];if(null!=t.attr("data-w-e-is-void"))return n;var r=t[0].childNodes;return 1===r.length&&"BR"===r[0].nodeName?(n.push({text:""}),n):(r.forEach((function(t){if(t.nodeType!==yx.ELEMENT_NODE)if(t.nodeType!==yx.TEXT_NODE);else{var r=t.textContent||"";if(""===r.trim()&&r.indexOf("\n")>=0)return;r&&(r=TS(r),AS(n,r)||n.push({text:r}))}else{if("BR"===t.nodeName)return void(AS(n,"\n")||n.push({text:"\n"}));var i=hi(t);n.push(LS(i,e))}})),n)}(t,e),r=function(t){for(var e in tS)if(t[0].matches(e))return tS[e];return DS}(t),i=r(t[0],n,e);return ue.isVoid(e,i)||(0===n.length&&(i.children=[{text:t.text().replace(/\s+/gm," ")}]),Qw.forEach((function(n){i=n(t[0],i,e)}))),i}function RS(t,e){0===t.parents("pre").length&&(t[0].innerHTML=t[0].innerHTML.replace(/\s+/gm," ").replace(/<br>/g,"\n"));var n=t[0].textContent||"";n=function(t){return t.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&reg;/g,"®").replace(/&copy;/g,"©").replace(/&trade;/g,"™")}(n);var r={text:n=TS(n)};return Qw.forEach((function(n){r=n(t[0],r,e)})),r}function LS(t,e){Kw.forEach((function(e){var n=e.selector,r=e.preParseHtml;t[0].matches(n)&&(t=hi(r(t[0])))}));var n=Dx(t);return"span"===n?t.attr("data-w-e-type")?PS(t,e):RS(t,e):"code"===n?"pre"===Dx(t.parent())?PS(t,e):RS(t,e):Zw.includes(n)?RS(t,e):PS(t,e)}var OS=new Set(["doctype","!doctype","meta","script","style","link","frame","iframe","title","svg"]),kS=function(t){var e=t,n=e.onChange,r=e.insertText,i=e.apply,o=e.deleteBackward;return e.insertText=function(t){e.getConfig().readOnly||r(t)},e.apply=function(t){var n,r,o,a,s,l,u,c,h=[];switch(t.type){case"insert_text":case"remove_text":case"set_node":try{for(var d=Wy(ue.levels(e,{at:t.path})),p=d.next();!p.done;p=d.next()){var f=Gy(p.value,2),m=f[0],g=f[1],v=Bx.findKey(e,m);h.push([g,v])}}catch(Cut){n={error:Cut}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":try{for(var y=Wy(ue.levels(e,{at:ye.parent(t.path)})),b=y.next();!b.done;b=y.next()){var x=Gy(b.value,2);m=x[0],g=x[1],v=Bx.findKey(e,m),h.push([g,v])}}catch(Cut){o={error:Cut}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}break;case"move_node":try{for(var _=Wy(ue.levels(e,{at:ye.common(ye.parent(t.path),ye.parent(t.newPath))})),w=_.next();!w.done;w=_.next()){var S=Gy(w.value,2);m=S[0],g=S[1],v=Bx.findKey(e,m),h.push([g,v])}}catch(Cut){s={error:Cut}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}i(t);try{for(var M=Wy(h),E=M.next();!E.done;E=M.next()){var C=Gy(E.value,2);g=C[0],v=C[1],m=Gy(ue.node(e,g),1)[0],ux.set(m,v)}}catch(Cut){u={error:Cut}}finally{try{E&&!E.done&&(c=M.return)&&c.call(M)}finally{if(u)throw u.error}}},e.deleteBackward=function(n){if("line"!==n)return o(n);if(t.selection&&Te.isCollapsed(t.selection)){var r=ue.above(t,{match:function(e){return ue.isBlock(t,e)},at:t.selection});if(r){var i=Gy(r,2)[1],a=ue.range(t,i,t.selection.anchor),s=function(t,e){var n=ue.range(t,Te.end(e)),r=Array.from(ue.positions(t,{at:e})),i=0,o=r.length,a=Math.floor(o/2);if(Yw(t,ue.range(t,r[i]),n))return ue.range(t,r[i],n);if(r.length<2)return ue.range(t,r[r.length-1],n);for(;a!==r.length&&a!==i;)Yw(t,ue.range(t,r[a]),n)?o=a:i=a,a=Math.floor((i+o)/2);return ue.range(t,r[o],n)}(e,a);Te.isCollapsed(s)||$e.delete(t,{at:s})}}},e.onChange=function(){var t=e.selection;null!=t&&dx.set(e,t),e.emit("change"),n()},e.handleTab=function(){e.insertText("    ")},e.getHtml=function(){var t=e.children;return(void 0===t?[]:t).map((function(t){return Gw(t,e)})).join("")},e.getText=function(){var t=e.children;return(void 0===t?[]:t).map((function(t){return fe.string(t)})).join("\n")},e.getSelectionText=function(){var n=e.selection;return null==n?"":ue.string(t,n)},e.getElemsByType=function(t,n){var r,i;void 0===n&&(n=!1);var o=[],a=ue.nodes(e,{at:[],universal:!0});try{for(var s=Wy(a),l=s.next();!l.done;l=s.next()){var u=Gy(l.value,1)[0];if(re.isElement(u)&&(n?u.type.indexOf(t)>=0:u.type===t)){var c=qw(Bx.findKey(e,u).id);o.push(Hy(Hy({},u),{id:c}))}}}catch(Cut){r={error:Cut}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},e.getElemsByTypePrefix=function(t){return e.getElemsByType(t,!0)},e.isEmpty=function(){var t=e.children,n=void 0===t?[]:t;if(n.length>1)return!1;var r=n[0];if(null==r)return!0;if(re.isElement(r)&&"paragraph"===r.type){var i=r.children,o=void 0===i?[]:i;if(o.length>1)return!1;var a=o[0];if(null==a)return!0;if(ke.isText(a)&&""===a.text)return!0}return!1},e.clear=function(){$e.removeNodes(e,{at:{anchor:ue.start(e,[]),focus:ue.end(e,[])},mode:"highest"}),0===e.children.length&&$e.insertNodes(e,[{type:"paragraph",children:[{text:""}]}])},e.getParentNode=function(t){return Bx.getParentNode(e,t)},e.dangerouslyInsertHtml=function(t){if(void 0===t&&(t=""),t){var n=hi(t);if(0!==(n=n.filter((function(t){if(t.nodeType!==yx.ELEMENT_NODE)return!1;var e=Dx(hi(t));return!OS.has(e)}))).length){var r=hi('<div hidden="true"></div>');r.append(n),hi("body").append(r);var i=[];if(n.forEach((function(t){var n=!1;if(Zw.includes(t.tagName.toLowerCase()))n=!0;else for(var r in tS)if(t.matches(r)){n=!0;break}if(n){var o=hi(t);i.push(LS(o,e))}else{var a=Tx(t).trim();a&&a.split(/\r\n|\r|\n/).forEach((function(t,e){t.trim()&&i.push({type:"paragraph",children:[{text:t}]})}))}})),i.length)try{e.insertFragment(i)}catch(t){e.insertText(Tx(r[0]))}r.remove()}}},e.setHtml=function(n){if(void 0===n&&(n=""),n){var r=e.isDisabled(),i=e.isFocused(),o=JSON.stringify(e.selection);if(e.enable(),e.focus(),e.select([]),e.deleteFragment(),$e.setNodes(t,{type:"paragraph"},{mode:"highest"}),e.dangerouslyInsertHtml(n),i||(e.deselect(),e.blur()),r&&(e.deselect(),e.disable()),e.isFocused())try{e.select(JSON.parse(o))}catch(t){e.select(ue.start(e,[]))}}},e},IS=function(t){return null!=t},NS={object:!0,function:!0,undefined:!0},BS=function(t){if(!function(t){return!!IS(t)&&hasOwnProperty.call(NS,typeof t)}(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}},FS=/^\s*class[\s{/}]/,zS=Function.prototype.toString,US=function(t){return!!function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!BS(t)}(t)&&!FS.test(zS.call(t))},jS=function(t){return null!=t},VS=Object.keys,HS=function(){try{return Object.keys("primitive"),!0}catch(Cut){return!1}}()?Object.keys:function(t){return VS(jS(t)?Object(t):t)},WS=function(t){if(!jS(t))throw new TypeError("Cannot use null or undefined");return t},GS=Math.max,qS=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}()?Object.assign:function(t,e){var n,r,i,o=GS(arguments.length,2);for(t=Object(WS(t)),i=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},r=1;r<o;++r)HS(e=arguments[r]).forEach(i);if(void 0!==n)throw n;return t},XS=Array.prototype.forEach,YS=Object.create,ZS=function(t,e){var n;for(n in t)e[n]=t[n]},KS=function(t){var e=YS(null);return XS.call(arguments,(function(t){jS(t)&&ZS(Object(t),e)})),e},JS="razdwatrzy",QS=String.prototype.indexOf,$S="function"==typeof JS.contains&&!0===JS.contains("dwa")&&!1===JS.contains("foo")?String.prototype.contains:function(t){return QS.call(this,t,arguments[1])>-1},tM=Bd((function(t){var e=t.exports=function(t,e){var n,r,i,o,a;return arguments.length<2||"string"!=typeof t?(o=e,e=t,t=null):o=arguments[2],IS(t)?(n=$S.call(t,"c"),r=$S.call(t,"e"),i=$S.call(t,"w")):(n=i=!0,r=!1),a={value:e,configurable:n,enumerable:r,writable:i},o?qS(KS(o),a):a};e.gs=function(t,e,n){var r,i,o,a;return"string"!=typeof t?(o=n,n=e,e=t,t=null):o=arguments[3],IS(e)?US(e)?IS(n)?US(n)||(o=n,n=void 0):n=void 0:(o=e,e=n=void 0):e=void 0,IS(t)?(r=$S.call(t,"c"),i=$S.call(t,"e")):(r=!0,i=!1),a={get:e,set:n,configurable:r,enumerable:i},o?qS(KS(o),a):a}})),eM=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},nM=Bd((function(t,e){var n,r,i,o,a,s,l,u=Function.prototype.apply,c=Function.prototype.call,h=Object.create,d=Object.defineProperty,p=Object.defineProperties,f=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var n;return eM(e),f.call(this,"__ee__")?n=this.__ee__:(n=m.value=h(null),d(this,"__ee__",m),m.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},r=function(t,e){var r,o;return eM(e),o=this,n.call(this,t,r=function(){i.call(o,t,r),u.call(e,this,arguments)}),r.__eeOnceListener__=e,this},i=function(t,e){var n,r,i,o;if(eM(e),!f.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},o=function(t){var e,n,r,i,o;if(f.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)u.call(r,this,o)}else switch(arguments.length){case 1:c.call(i,this);break;case 2:c.call(i,this,arguments[1]);break;case 3:c.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];u.call(i,this,o)}},a={on:n,once:r,off:i,emit:o},s={on:tM(n),once:tM(r),off:tM(i),emit:tM(o)},l=p({},s),t.exports=e=function(t){return null==t?h(l):p(Object(t),s)},e.methods=a}));function rM(t){var e=px.get(t);return null==e&&(e=nM(),px.set(t,e)),e}var iM=new WeakMap;function oM(t,e){var n=iM.get(t);null==n&&(n=new Set,iM.set(t,n)),n.add(e)}function aM(t){return iM.get(t)||new Set}function sM(t){iM.set(t,new Set)}function lM(t){var e=Bx.getTextarea(t).$textAreaContainer,n=e.width(),r=e.height(),i=e.offset();return{top:i.top,left:i.left,width:n,height:r}}function uM(t){var e={top:"0",left:"0"},n=t.selection;if(null==n)return e;var r=lM(t);if(null==r)return e;var i=r.top,o=r.left,a=r.width,s=r.height,l=Bx.toDOMRange(t,n).getClientRects()[0];if(null==l)return e;l.width;var u=l.height,c={},h=l.top-i,d=l.left-o;if(d>a/2){var p=a-d;c.right=p+5+"px"}else c.left=d+5+"px";if(h>s/2){var f=s-h;c.bottom=f+5+"px"}else{var m=h+u;m<0&&(m=0),c.top=m+5+"px"}return c}function cM(t,e,n){void 0===n&&(n="modal");var r={top:"0",left:"0"};if(null==t.selection)return r;var i=re.isElement(e)&&t.isVoid(e),o=re.isElement(e)&&t.isInline(e),a=lx.get(e);if(null==a)return r;var s=a.getBoundingClientRect(),l=s.top,u=s.left,c=s.height,h=s.width;if(i){var d=function(t){var e=[];e.push(t);for(var n=0;e.length>0;){var r=e.pop();if(null==r)break;if(++n>1e4)break;var i=r.nodeName;if(1===r.nodeType){var o=i.toLowerCase();if(vx.includes(o)||"iframe"===o||"video"===o)return r;var a=r.children||[],s=a.length;if(s)for(var l=s-1;l>=0;l--)e.push(a[l])}}return null}(a);if(null!=d){var p=d.getBoundingClientRect();l=p.top,c=p.height}}var f=lM(t);if(null==f)return r;var m,g=f.top,v=f.left,y=f.width,b=f.height,x={},_=l-g,w=u-v;if("bar"===n)return x.left=w+"px",_>40?x.bottom=b-_+5+"px":x.top=_+c+5+"px",x;if("modal"===n)return i?o?w>(y-h)/2?x.right=y-w+5+"px":x.left=w+h+5+"px":x.left="20px":x.left=w+"px",i?((m=_)<0&&(m=0),x.top=m+"px"):_>(b-c)/2?x.bottom=b-_+5+"px":((m=_+c)<0&&(m=0),x.top=m+5+"px"),x;throw new Error("type '"+n+"' is invalid")}function hM(t,e){Ww((function(){var n=lM(t);if(null!=n){var r,i=n.top,o=n.left,a=n.width,s=n.height,l=e.offset(),u=l.top,c=l.left,h=e.width(),d=e.height(),p=u-i,f=c-o,m=e.attr("style");if(m.indexOf("top")>=0&&(r=p+d-s)>0){var g=e.css("top"),v=parseInt(g.toString())-r;v<0&&(v=0),e.css("top",v+"px")}if(m.indexOf("bottom")>=0&&u<0){var y=e.css("bottom"),b=parseInt(y.toString())-Math.abs(u);e.css("bottom",b+"px")}if(m.indexOf("left")>=0&&(r=f+h-a)>0){var x=e.css("left"),_=parseInt(x.toString())-r;_<0&&(_=0),e.css("left",_+"px")}if(m.indexOf("right")>=0&&c<0){var w=e.css("right"),S=parseInt(w.toString())-Math.abs(c);e.css("right",S+"px")}}}))}var dM=qm("slice"),pM=Sp("species"),fM=jd.Array,mM=Math.max;Wm({target:"Array",proto:!0,forced:!dM},{slice:function(t,e){var n,r,i,o=ym(this),a=Xf(o),s=Sm(t,a),l=Sm(void 0===e?a:e,a);if(Yf(o)&&(n=o.constructor,(nm(n)&&(n===fM||Yf(n.prototype))||Tp(n)&&null===(n=n[pM]))&&(n=void 0),n===fM||void 0===n))return C_(o,s,l);for(r=new(void 0===n?fM:n)(mM(l-s,0)),i=0;s<l;s++,i++)s in o&&eg(r,i,o[s]);return r.length=i,r}});var gM=xm.f,vM=Kd("".startsWith),yM=Kd("".slice),bM=Math.min,xM=Lv("startsWith"),_M=!xM&&!!function(){var t=gM(String.prototype,"startsWith");return t&&!t.writable}();Wm({target:"String",proto:!0,forced:!_M&&!xM},{startsWith:function(t){var e=mg(Qd(this));Pv(t);var n=qf(bM(arguments.length>1?arguments[1]:void 0,e.length)),r=mg(t);return vM?vM(e,r,n):yM(e,n,n+r.length)===r}});var wM=Object.assign,SM=Object.defineProperty,MM=Kd([].concat),EM=!wM||gp((function(){if(Cp&&1!==wM({b:1},wM(SM({},"a",{enumerable:!0,get:function(){SM(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=wM({},t)[n]||_g(wM({},e)).join("")!=r}))?function(t,e){for(var n=tp(t),r=arguments.length,i=1,o=Lm.f,a=vm.f;r>i;)for(var s,l=jf(arguments[i++]),u=o?MM(_g(l),o(l)):_g(l),c=u.length,h=0;c>h;)s=u[h++],Cp&&!Np(a,l,s)||(n[s]=l[s]);return n}:wM;Wm({target:"Object",stat:!0,forced:Object.assign!==EM},{assign:EM});var CM=["props","attrs","style","dataset","on","hook"];function TM(t){var e=t.data,n=void 0===e?{}:e,r=t.children,i=void 0===r?[]:r;Object.keys(n).forEach((function(e){var r,i,o=n[e];if("key"!==e){if(!CM.includes(e)){if(e.startsWith("data-")){var a=e.slice(5);return a=yl(a),function(t,e){null==t.data&&(t.data={});var n=t.data;null==n.dataset&&(n.dataset={}),Object.assign(n.dataset,e)}(t,((r={})[a]=o,r)),void delete n[e]}!function(t,e){null==t.data&&(t.data={});var n=t.data;null==n.props&&(n.props={}),Object.assign(n.props,e)}(t,(i={},i[e]=o,i)),delete n[e]}}else t.key=o})),i.length>0&&i.forEach((function(t){"string"!=typeof t&&TM(t)}))}var AM=[];function DM(t){AM.push(t)}var PM={};function RM(t){var e=t.type,n=t.renderElem;PM[e||""]=n}function LM(t,e,n){var r=n.isInline(t)?"span":"div";return qa(r,null,e)}function OM(t,e){var n,r=Bx.findKey(e,t),i=e.isInline(t),o=ue.isVoid(e,t),a=qw(r.id),s={id:a,key:r.id,"data-slate-node":"element","data-slate-inline":i},l=t.type,u=t.children,c=void 0===u?[]:u,h=function(t){return PM[t]||LM}(l);n=o?null:c.map((function(n,r){return BM(n,r,t,e)}));var d=h(t,n,e);if(o){s["data-slate-void"]=!0;var p=i?"span":"div",f=Gy(fe.texts(t),1),m=Gy(f[0],1)[0],g=BM(m,0,t,e),v=qa(p,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},g);d=qa(p,{style:{position:"relative"}},d,v),rx.set(m,0),ix.set(m,t)}return null==d.data&&(d.data={}),Object.assign(d.data,s),o||i||(d=function(t,e){var n=e;return AM.forEach((function(r){n=r(t,e)})),n}(t,d)),Ww((function(){var e=Mx(a);null!=e&&(sx.set(r,e),lx.set(t,e),ax.set(e,t))})),d}function kM(t,e){return void 0===e&&(e=!1),qa("span",{"data-slate-string":!0},e?t+"\n":t)}function IM(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),qa("span",{"data-slate-zero-width":e?"n":"z","data-slate-length":t},"\ufeff",e?qa("br",null):null)}function NM(t,e,n){if(null==t.text)throw new Error("Current node is not slate Text "+JSON.stringify(t));var r=Bx.findKey(n,t),i=n.getConfig().decorate;if(null==i)throw new Error("Can not get config.decorate");var o=Bx.findPath(n,t),a=i([t,o]),s=ke.decorations(t,a),l=s.map((function(r,i){var o=function(t,e,n,r,i){void 0===e&&(e=!1);var o=t.text,a=Bx.findPath(i,n),s=ye.parent(a);if(ue.isEditor(r))throw new Error("Text node "+JSON.stringify(n)+" parent is Editor");return i.isVoid(r)?IM(fe.string(r).length):""!==o||r.children[r.children.length-1]!==n||i.isInline(r)||""!==ue.string(i,s)?""===o?IM():e&&"\n"===o.slice(-1)?kM(o,!0):kM(o):IM(0,!0)}(r,i===s.length-1,t,e,n);return o=function(t,e){var n=e;return AM.forEach((function(e){n=e(t,n)})),n}(r,o),qa("span",{"data-slate-leaf":!0},o)})),u=function(t){return"w-e-text-"+t}(r.id),c=qa("span",{"data-slate-node":"text",id:u,key:r.id},l);return Ww((function(){var e=Mx(u);null!=e&&(sx.set(r,e),lx.set(t,e),ax.set(e,t))})),c}function BM(t,e,n,r){return rx.set(t,e),ix.set(t,n),re.isElement(t)?OM(t,r):NM(t,n,r)}function FM(t,e){var n,r=t.$scroll,i=function(t){return"w-e-textarea-"+t}(t.id),o=e.getConfig(),a=o.readOnly,s=o.autoFocus,l=function(t,e){return void 0===e&&(e=!1),Sa("div#"+t,{props:{contentEditable:!e}})}(i,a),u=e.children||[];l.children=u.map((function(t,n){var r=BM(t,n,e,e);return TM(r),r}));var c=tx.get(t);if(null==c&&(c=!0),c){var h=function(t,e){return hi('<div\n        id="'+t+'"\n        data-slate-editor\n        data-slate-node="value"\n        suppressContentEditableWarning\n        role="textarea"\n        spellCheck="true"\n        autoCorrect="true"\n        autoCapitalize="true"\n    ></div>')}(i);r.append(h),t.$textArea=h,n=h[0],(p=_a([Ea,Ia,Wa,Aa,Oa]))(n,l),tx.set(t,!1),ex.set(t,p)}else{var d=nx.get(t),p=ex.get(t);if(null==d||null==p)return;n=d.elm,p(d,l)}if(null!=n||null!=(n=Mx(i))){if((c?s:e.isFocused())&&n.focus({preventScroll:!0}),c){var f=bx(n);f&&cx.set(e,f)}ox.set(e,n),lx.set(e,n),ax.set(n,e),nx.set(t,l)}}function zM(t){return"object"==typeof t&&null!=t&&1===t.nodeType}function UM(t,e){return(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t}function jM(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return UM(n.overflowY,e)||UM(n.overflowX,e)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function VM(t,e,n,r,i,o,a,s){return o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0}function HM(t,e){var n=window,r=e.scrollMode,i=e.block,o=e.inline,a=e.boundary,s=e.skipOverflowHiddenElements,l="function"==typeof a?a:function(t){return t!==a};if(!zM(t))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,c=[],h=t;zM(h)&&l(h);){if((h=h.parentElement)===u){c.push(h);break}null!=h&&h===document.body&&jM(h)&&!jM(document.documentElement)||null!=h&&jM(h,s)&&c.push(h)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,g=t.getBoundingClientRect(),v=g.height,y=g.width,b=g.top,x=g.right,_=g.bottom,w=g.left,S="start"===i||"nearest"===i?b:"end"===i?_:b+v/2,M="center"===o?w+y/2:"end"===o?x:w,E=[],C=0;C<c.length;C++){var T=c[C],A=T.getBoundingClientRect(),D=A.height,P=A.width,R=A.top,L=A.right,O=A.bottom,k=A.left;if("if-needed"===r&&b>=0&&w>=0&&_<=p&&x<=d&&b>=R&&_<=O&&w>=k&&x<=L)return E;var I=getComputedStyle(T),N=parseInt(I.borderLeftWidth,10),B=parseInt(I.borderTopWidth,10),F=parseInt(I.borderRightWidth,10),z=parseInt(I.borderBottomWidth,10),U=0,j=0,V="offsetWidth"in T?T.offsetWidth-T.clientWidth-N-F:0,H="offsetHeight"in T?T.offsetHeight-T.clientHeight-B-z:0;if(u===T)U="start"===i?S:"end"===i?S-p:"nearest"===i?VM(m,m+p,p,B,z,m+S,m+S+v,v):S-p/2,j="start"===o?M:"center"===o?M-d/2:"end"===o?M-d:VM(f,f+d,d,N,F,f+M,f+M+y,y),U=Math.max(0,U+m),j=Math.max(0,j+f);else{U="start"===i?S-R-B:"end"===i?S-O+z+H:"nearest"===i?VM(R,O,D,B,z+H,S,S+v,v):S-(R+D/2)+H/2,j="start"===o?M-k-N:"center"===o?M-(k+P/2)+V/2:"end"===o?M-L+F+V:VM(k,L,P,N,F+V,M,M+y,y);var W=T.scrollLeft,G=T.scrollTop;S+=G-(U=Math.max(0,Math.min(G+U,T.scrollHeight-D+H))),M+=W-(j=Math.max(0,Math.min(W+j,T.scrollWidth-P+V)))}E.push({el:T,top:U,left:j})}return E}function WM(t){return t===Object(t)&&0!==Object.keys(t).length}function GM(t,e){var n=!t.ownerDocument.documentElement.contains(t);if(WM(e)&&"function"==typeof e.behavior)return e.behavior(n?[]:HM(t,e));if(!n){var r=function(t){return!1===t?{block:"end",inline:"nearest"}:WM(t)?t:{block:"start",inline:"nearest"}}(e);return function(t,e){void 0===e&&(e="auto");var n="scrollBehavior"in document.body.style;t.forEach((function(t){var r=t.el,i=t.top,o=t.left;r.scroll&&n?r.scroll({top:i,left:o,behavior:e}):(r.scrollTop=i,r.scrollLeft=o)}))}(HM(t,r),r.behavior)}}function qM(t,e){return _x(e)&&Bx.hasDOMNode(t,e,{editable:!0})}function XM(t,e){if(t.getConfig().readOnly)return!1;var n=YM(t,e)&&Bx.toSlateNode(t,e);return ue.isVoid(t,n)}function YM(t,e){return _x(e)&&Bx.hasDOMNode(t,e)}var ZM=new WeakMap,KM=new WeakMap,JM={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",tab:"tab",selectAll:"mod+a"},QM={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},$M={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},tE=function(t){var e=JM[t],n=QM[t],r=$M[t],i=e&&Rl(e),o=n&&Rl(n),a=r&&Rl(r);return function(t){return!(!i||!i(t))||!!(Px&&o&&o(t))||!(Px||!a||!a(t))}},eE={isBold:tE("bold"),isCompose:tE("compose"),isMoveBackward:tE("moveBackward"),isMoveForward:tE("moveForward"),isDeleteBackward:tE("deleteBackward"),isDeleteForward:tE("deleteForward"),isDeleteLineBackward:tE("deleteLineBackward"),isDeleteLineForward:tE("deleteLineForward"),isDeleteWordBackward:tE("deleteWordBackward"),isDeleteWordForward:tE("deleteWordForward"),isExtendBackward:tE("extendBackward"),isExtendForward:tE("extendForward"),isExtendLineBackward:tE("extendLineBackward"),isExtendLineForward:tE("extendLineForward"),isItalic:tE("italic"),isMoveLineBackward:tE("moveLineBackward"),isMoveLineForward:tE("moveLineForward"),isMoveWordBackward:tE("moveWordBackward"),isMoveWordForward:tE("moveWordForward"),isRedo:tE("redo"),isSplitBlock:tE("splitBlock"),isTransposeCharacter:tE("transposeCharacter"),isUndo:tE("undo"),isTab:tE("tab"),isSelectAll:tE("selectAll")};function nE(t){t.preventDefault()}var rE={beforeinput:function(t,e,n){var r=t,i=n.getConfig().readOnly;if(Nx&&!i&&qM(n,r.target)){var o=n.selection,a=r.inputType,s=r.dataTransfer||r.data||void 0;if("insertCompositionText"!==a&&"deleteCompositionText"!==a){if(r.preventDefault(),!a.startsWith("delete")||a.startsWith("deleteBy")){var l=Gy(r.getTargetRanges(),1)[0];if(l){var u=Bx.toSlateRange(n,l,{exactMatch:!1,suppressThrow:!1});o&&Te.equals(o,u)||$e.select(n,u)}}if(o&&Te.isExpanded(o)&&a.startsWith("delete")){var c=a.endsWith("Backward")?"backward":"forward";ue.deleteFragment(n,{direction:c})}else switch(a){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":ue.deleteFragment(n);break;case"deleteContent":case"deleteContentForward":ue.deleteForward(n);break;case"deleteContentBackward":ue.deleteBackward(n);break;case"deleteEntireSoftLine":ue.deleteBackward(n,{unit:"line"}),ue.deleteForward(n,{unit:"line"});break;case"deleteHardLineBackward":ue.deleteBackward(n,{unit:"block"});break;case"deleteSoftLineBackward":ue.deleteBackward(n,{unit:"line"});break;case"deleteHardLineForward":ue.deleteForward(n,{unit:"block"});break;case"deleteSoftLineForward":ue.deleteForward(n,{unit:"line"});break;case"deleteWordBackward":ue.deleteBackward(n,{unit:"word"});break;case"deleteWordForward":ue.deleteForward(n,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":ue.insertBreak(n);break;case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("insertFromPaste"===a&&!fx.get(n))break;s instanceof DataTransfer?n.insertData(s):"string"==typeof s&&ue.insertText(n,s)}}}},blur:function(t,e,n){var r=t,i=e.isUpdatingSelection,o=e.latestElement;if(!n.getConfig().readOnly&&!i&&qM(n,r.target)){var a=Bx.findDocumentOrShadowRoot(n);if(o!==a.activeElement){var s=r.relatedTarget;if(!(s===Bx.toDOMNode(n,n)||xx(s)&&s.hasAttribute("data-slate-spacer"))){if(null!=s&&_x(s)&&Bx.hasDOMNode(n,s)){var l=Bx.toSlateNode(n,s);if(re.isElement(l)&&!n.isVoid(l))return}if(Lx){var u=a.getSelection();null==u||u.removeAllRanges()}hx.delete(n)}}}},focus:function(t,e,n){var r=Bx.toDOMNode(n,n),i=Bx.findDocumentOrShadowRoot(n);e.latestElement=i.activeElement,Rx&&t.target!==r?r.focus():hx.set(n,!0)},click:function(t,e,n){if(!n.getConfig().readOnly&&YM(n,t.target)&&_x(t.target)){var r=Bx.toSlateNode(n,t.target),i=Bx.findPath(n,r);if(ue.hasPath(n,i)&&fe.get(n,i)===r){var o=ue.start(n,i),a=ue.end(n,i),s=ue.void(n,{at:o}),l=ue.void(n,{at:a});if(s&&l&&ye.equals(s[1],l[1])){var u=ue.range(n,o);$e.select(n,u)}}}},compositionstart:function(t,e,n){if(qM(n,t.target)){var r=n.selection;if(r&&Te.isExpanded(r)&&ue.deleteFragment(n),r&&Te.isCollapsed(r)){var i=Bx.toDOMRange(n,r).startContainer,o=i.textContent||"";ZM.set(n,o),KM.set(n,i)}e.isComposing=!0,function(t,e){var n;e.getConfig().placeholder&&e.isEmpty()&&t.showPlaceholder&&(null===(n=t.$placeholder)||void 0===n||n.hide(),t.showPlaceholder=!1)}(e,n)}},compositionend:function(t,e,n){var r=t;if(qM(n,r.target)){e.isComposing=!1;var i=n.selection;if(null!=i){(Ix||Rx)&&Bx.cleanExposedTexNodeInSelectionBlock(n);for(var o=Te.isBackward(i)?i.focus:i.anchor,a=Gy(ue.node(n,[o.path[0]]),1)[0],s=0;s<o.path.length;s++){var l=Gy(ue.node(n,o.path.slice(0,s+1)),1)[0];if(re.isElement(l)&&((Lx||Rx)&&"link"===l.type||"code"===l.type)){Bx.setNewKey(a);break}}var u=r.data;if(u){if(n.getConfig().maxLength){var c=Bx.getLeftLengthOfMaxLength(n);c<u.length?(Bx.toDOMRange(n,i).startContainer.textContent=ZM.get(n)||"",c>0&&ue.insertText(n,u.slice(0,c)),e.changeViewState()):ue.insertText(n,u)}else ue.insertText(n,u);Lx||setTimeout((function(){var t=n.selection;if(null!=t){var e=KM.get(n);null!=e&&Bx.toDOMRange(n,t).startContainer!==e&&(e.textContent=ZM.get(n)||"")}}))}}}},compositionupdate:function(t,e,n){qM(n,t.target)&&(e.isComposing=!0)},keydown:function(t,e,n){var r=t,i=n.selection;if(!n.getConfig().readOnly&&!e.isComposing&&qM(n,r.target)){if(function(t,e){var n=Xb.get(t),r=n&&n.getMenus(),i=Zb.get(t),o=i&&i.getMenus(),a=Hy(Hy({},r),o);for(var s in a){var l=a[s],u=l.hotkey;if(u&&Pl(u,e)&&!l.isDisabled(t)){var c=l.getValue(t);l.exec(t,c)}}}(n,r),eE.isTab(r))return nE(r),void n.handleTab();if(eE.isRedo(r))return nE(r),void("function"==typeof n.redo&&n.redo());if(eE.isUndo(r))return nE(r),void("function"==typeof n.undo&&n.undo());if(eE.isMoveLineBackward(r))return nE(r),void $e.move(n,{unit:"line",reverse:!0});if(eE.isMoveLineForward(r))return nE(r),void $e.move(n,{unit:"line"});if(eE.isExtendLineBackward(r))return nE(r),void $e.move(n,{unit:"line",edge:"focus",reverse:!0});if(eE.isExtendLineForward(r))return nE(r),void $e.move(n,{unit:"line",edge:"focus"});if(eE.isMoveBackward(r))return nE(r),void(i&&Te.isCollapsed(i)?$e.move(n,{reverse:!0}):$e.collapse(n,{edge:"start"}));if(eE.isMoveForward(r))return nE(r),void(i&&Te.isCollapsed(i)?$e.move(n):$e.collapse(n,{edge:"end"}));if(eE.isMoveWordBackward(r))return nE(r),i&&Te.isExpanded(i)&&$e.collapse(n,{edge:"focus"}),void $e.move(n,{unit:"word",reverse:!0});if(eE.isMoveWordForward(r))return nE(r),i&&Te.isExpanded(i)&&$e.collapse(n,{edge:"focus"}),void $e.move(n,{unit:"word"});if(eE.isSelectAll(r))return nE(r),void n.selectAll();if(Nx){if((Ix||Lx)&&i&&(eE.isDeleteBackward(r)||eE.isDeleteForward(r))&&Te.isCollapsed(i)){var o=fe.parent(n,i.anchor.path);if(re.isElement(o)&&ue.isVoid(n,o)&&ue.isInline(n,o))return r.preventDefault(),void $e.delete(n,{unit:"block"})}}else{if(eE.isBold(r)||eE.isItalic(r)||eE.isTransposeCharacter(r))return void nE(r);if(eE.isSplitBlock(r))return nE(r),void ue.insertBreak(n);if(eE.isDeleteBackward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"backward"}):ue.deleteBackward(n));if(eE.isDeleteForward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"forward"}):ue.deleteForward(n));if(eE.isDeleteLineBackward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"backward"}):ue.deleteBackward(n,{unit:"line"}));if(eE.isDeleteLineForward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"forward"}):ue.deleteForward(n,{unit:"line"}));if(eE.isDeleteWordBackward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"backward"}):ue.deleteBackward(n,{unit:"word"}));if(eE.isDeleteWordForward(r))return nE(r),void(i&&Te.isExpanded(i)?ue.deleteFragment(n,{direction:"forward"}):ue.deleteForward(n,{unit:"word"}))}}},keypress:function(t,e,n){if(!Nx&&!n.getConfig().readOnly&&qM(n,t.target)){t.preventDefault();var r=t.key;ue.insertText(n,r)}},copy:function(t,e,n){var r=t;if(qM(n,r.target)){r.preventDefault();var i=r.clipboardData;null!=i&&n.setFragmentData(i)}},cut:function(t,e,n){var r=t,i=n.selection;if(!n.getConfig().readOnly&&qM(n,r.target)){r.preventDefault();var o=r.clipboardData;if(null!=o&&(n.setFragmentData(o),i))if(Te.isExpanded(i))ue.deleteFragment(n);else{var a=fe.parent(n,i.anchor.path);ue.isVoid(n,a)&&$e.delete(n)}}},paste:function(t,e,n){fx.set(n,!0);var r=t;if(!n.getConfig().readOnly&&qM(n,r.target)){var i=n.getConfig().customPaste;if(i&&!1===i(n,r))return void fx.set(n,!1);if(!Nx||function(t){return t.clipboardData&&""!==t.clipboardData.getData("text/plain")&&1===t.clipboardData.types.length}(r)){r.preventDefault();var o=r.clipboardData;null!=o&&n.insertData(o)}}},dragover:function(t,e,n){if(YM(n,t.target)){var r=Bx.toSlateNode(n,t.target);ue.isVoid(n,r)&&t.preventDefault()}},dragstart:function(t,e,n){var r=t;if(YM(n,r.target)&&!n.getConfig().readOnly){var i=Bx.toSlateNode(n,r.target),o=Bx.findPath(n,i);if(ue.isVoid(n,i)||ue.void(n,{at:o,voids:!0})){var a=ue.range(n,o);$e.select(n,a)}var s=r.dataTransfer;null!=s&&(e.isDraggingInternally=!0,n.setFragmentData(s))}},dragend:function(t,e,n){var r=t;n.getConfig().readOnly||e.isDraggingInternally&&YM(n,r.target)&&(e.isDraggingInternally=!1)},drop:function(t,e,n){var r=t,i=r.dataTransfer;if(!n.getConfig().readOnly&&YM(n,r.target)&&null!=i&&!(Nx&&Lx&&i.files.length>0)){r.preventDefault();var o=n.selection,a=Bx.findEventRange(n,r);$e.select(n,a),e.isDraggingInternally&&(o&&$e.delete(n,{at:o}),e.isDraggingInternally=!1),n.insertData(i),n.isFocused()||n.focus()}}},iE=1,oE=function(){function t(t){var e=this;this.id=iE++,this.$textArea=null,this.$progressBar=hi('<div class="w-e-progress-bar"></div>'),this.$maxLengthInfo=hi('<div class="w-e-max-length-info"></div>'),this.isComposing=!1,this.isUpdatingSelection=!1,this.isDraggingInternally=!1,this.latestElement=null,this.showPlaceholder=!1,this.$placeholder=null,this.latestEditorSelection=null,this.onDOMSelectionChange=Yo((function(){var t=e.editorInstance;!function(t,e){var n=t.isComposing,r=t.isUpdatingSelection,i=t.isDraggingInternally;if(!(e.getConfig().readOnly||n||r||i)){var o=Bx.findDocumentOrShadowRoot(e),a=o.activeElement,s=Bx.toDOMNode(e,e),l=o.getSelection();if(a===s?(t.latestElement=a,hx.set(e,!0)):hx.delete(e),!l)return $e.deselect(e);var u=l.anchorNode,c=l.focusNode,h=qM(e,u)||XM(e,u),d=qM(e,c)||XM(e,c);if(h&&d){var p=Bx.toSlateRange(e,l,{exactMatch:!1,suppressThrow:!1});$e.select(e,p)}else $e.deselect(e)}}(e,t)}),100);var n=hi(t);if(0===n.length)throw new Error("Cannot find textarea DOM by selector '"+t+"'");this.$box=n;var r=hi('<div class="w-e-text-container"></div>');r.append(this.$progressBar),r.append(this.$maxLengthInfo),n.append(r);var i=hi('<div class="w-e-scroll"></div>');r.append(i),this.$scroll=i,this.$textAreaContainer=r,Ww((function(){var t=e.editorInstance,n=Bx.getWindow(t);n.document.addEventListener("selectionchange",e.onDOMSelectionChange),t.on("destroyed",(function(){n.document.removeEventListener("selectionchange",e.onDOMSelectionChange)})),r.on("click",(function(){return t.hidePanelOrModal()})),t.on("change",e.changeViewState.bind(e));var i=t.getConfig().onChange;i&&t.on("change",(function(){return i(t)})),e.onFocusAndOnBlur(),t.on("change",e.changeMaxLengthInfo.bind(e)),e.bindEvent()}))}return Object.defineProperty(t.prototype,"editorInstance",{get:function(){var t=Gb.get(this);if(null==t)throw new Error("Can not get editor instance");return t},enumerable:!1,configurable:!0}),t.prototype.bindEvent=function(){var t=this,e=this.$textArea,n=this.$scroll,r=this.editorInstance;null!=e&&(Mo(rE,(function(n,i){e.on(i,(function(e){n(e,t,r)}))})),r.getConfig().scroll&&(n.css("overflow-y","auto"),n.on("scroll",Yo((function(){r.emit("scroll")}),100))))},t.prototype.onFocusAndOnBlur=function(){var t=this,e=this.editorInstance,n=e.getConfig(),r=n.onBlur,i=n.onFocus;this.latestEditorSelection=e.selection,e.on("change",(function(){null==t.latestEditorSelection&&null!=e.selection?i&&i(e):null!=t.latestEditorSelection&&null==e.selection&&r&&r(e),t.latestEditorSelection=e.selection}))},t.prototype.changeMaxLengthInfo=function(){var t=this.editorInstance,e=t.getConfig().maxLength;if(e){var n=e-Bx.getLeftLengthOfMaxLength(t);this.$maxLengthInfo[0].innerHTML=n+"/"+e}},t.prototype.changeProgress=function(t){var e=this.$progressBar;e.css("width",t+"%"),t>=100&&setTimeout((function(){e.hide(),e.css("width","0"),e.show()}),1e3)},t.prototype.changeViewState=function(){var t=this,e=this.editorInstance;FM(this,e),function(t,e){var n,r=e.getConfig().placeholder;if(r){var i=e.isEmpty();if(i&&!t.showPlaceholder&&!t.isComposing){if(null==t.$placeholder){var o=hi('<div class="w-e-text-placeholder">'+r+"</div>");t.$textAreaContainer.append(o),t.$placeholder=o}return t.$placeholder.show(),void(t.showPlaceholder=!0)}!i&&t.showPlaceholder&&(null===(n=t.$placeholder)||void 0===n||n.hide(),t.showPlaceholder=!1)}}(this,e),Ww((function(){!function(t,e){var n=e.selection,r=Bx.findDocumentOrShadowRoot(e).getSelection();if(r&&!t.isComposing&&e.isFocused()){var i="None"!==r.type;if(n||i){var o=ox.get(e),a=!1;if(o.contains(r.anchorNode)&&o.contains(r.focusNode)&&(a=!0),i&&a&&n){var s=Bx.toSlateRange(e,r,{exactMatch:!0,suppressThrow:!0});if(s&&Te.equals(s,n)){var l=!0;if(Te.isCollapsed(n)){var u=r.anchorNode,c=r.anchorOffset;if(u===o){var h=o.childNodes,d=void 0;(d=h[c])&&d.matches("table")&&(l=!1),(d=h[c-1])&&d.matches("table")&&(l=!1)}}if(l)return}}if(!n||Bx.hasRange(e,n)){t.isUpdatingSelection=!0;var p=n&&Bx.toDOMRange(e,n);if(p){Te.isBackward(n)?r.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):r.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset);var f=p.startContainer.parentElement;f.closest("[data-slate-spacer]")||(f.getBoundingClientRect=p.getBoundingClientRect.bind(p),GM(f,{scrollMode:"if-needed",boundary:o.parentElement,block:"end",behavior:"smooth"}),delete f.getBoundingClientRect)}else r.removeAllRanges();setTimeout((function(){p&&Rx&&o.focus(),t.isUpdatingSelection=!1}))}else e.selection=Bx.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})}}}(t,e)}))},t.prototype.destroy=function(){this.$textAreaContainer.remove()},t}();function aE(t){t.removeAttr("width"),t.removeAttr("height"),t.removeAttr("fill"),t.removeAttr("class"),t.removeAttr("t"),t.removeAttr("p-id");var e=t.children();e.length&&aE(e)}function sE(){return hi('<svg viewBox="0 0 1024 1024"><path d="M498.7 655.8l-197.6-268c-8.1-10.9-0.3-26.4 13.3-26.4h395.2c13.6 0 21.4 15.4 13.3 26.4l-197.6 268c-6.6 9-20 9-26.6 0z"></path></svg>')}function lE(){return hi('<div class="w-e-bar-divider"></div>')}function uE(t,e,n,r,i){if(void 0===i&&(i=!1),e){if(r){var o=Px?"cmd":"ctrl";r=r.replace("mod",o)}if(i)r&&(t.attr("data-tooltip",r),t.addClass("w-e-menu-tooltip-v5"),t.addClass("tooltip-right"));else{var a=r?n+"\n"+r:n;t.attr("data-tooltip",a),t.addClass("w-e-menu-tooltip-v5")}}}xy("match",(function(t,e,n){return[function(e){var n=Qd(this),r=null==e?void 0:Wp(e,t);return r?Np(r,e,n):new RegExp(e)[t](mg(n))},function(t){var r=kp(this),i=mg(t),o=n(e,r,i);if(o.done)return o.value;if(!r.global)return Ry(r,i);var a=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=Ry(r,i));){var c=mg(s[0]);l[u]=c,""===c&&(r.lastIndex=wy(i,qf(r.lastIndex),a)),u++}return 0===u?null:l}]}));var cE=function(){function t(t,e){var n=this;void 0===e&&(e=!1),this.$elem=hi('<div class="w-e-bar-item"></div>'),this.$button=hi('<button type="button"></button>'),this.disabled=!1,this.menu=t;var r=t.tag,i=t.width;if("button"!==r)throw new Error("Invalid tag '"+r+"', expected 'button'");var o=t.title,a=t.hotkey,s=void 0===a?"":a,l=t.iconSvg,u=void 0===l?"":l,c=this.$button;if(u){var h=hi(u);aE(h),c.append(h)}else c.text(o);uE(c,u,o,s,e),e&&u&&c.append(hi('<span class="title">'+o+"</span>")),i&&c.css("width",i+"px"),this.$elem.append(c),Ww((function(){return n.init()}))}return t.prototype.init=function(){var t=this;this.setActive(),this.setDisabled(),this.$button.on("click",(function(e){e.preventDefault(),SE(t).hidePanelOrModal(),t.disabled||(t.exec(),t.onButtonClick())}))},t.prototype.exec=function(){var t=SE(this),e=this.menu,n=e.getValue(t);e.exec(t,n)},t.prototype.setActive=function(){var t=SE(this),e=this.$button,n="active";this.menu.isActive(t)?e.addClass(n):e.removeClass(n)},t.prototype.setDisabled=function(){var t=SE(this),e=this.$button,n=this.menu.isDisabled(t);(null==t.selection||t.isDisabled())&&(n=!0),this.menu.alwaysEnable&&(n=!1);var r="disabled";n?e.addClass(r):e.removeClass(r),this.disabled=n},t.prototype.changeMenuState=function(){this.setActive(),this.setDisabled()},t}(),hE=function(t){function e(e,n){return void 0===n&&(n=!1),t.call(this,e,n)||this}return Vy(e,t),e.prototype.onButtonClick=function(){},e}(cE),dE=function(){function t(t){this.isShow=!1,this.showTime=0,this.record(t)}return t.prototype.record=function(t){var e=Jb.get(t);null==e&&(e=new Set,Jb.set(t,e)),e.add(this),Qb.set(this,t)},t.prototype.renderContent=function(t){var e=this.$elem;e.empty(),e.append(t);var n=this.genSelfElem();n&&e.append(n)},t.prototype.appendTo=function(t){var e=this.$elem;t.append(e)},t.prototype.show=function(){if(!this.isShow){this.showTime=Date.now(),this.$elem.show(),this.isShow=!0;var t=Qb.get(this);t&&t.emit("modalOrPanelShow",this)}},t.prototype.hide=function(){if(this.isShow&&!(Date.now()-this.showTime<200)){this.$elem.hide(),this.isShow=!1;var t=Qb.get(this);t&&t.emit("modalOrPanelHide")}},t}(),pE=function(t){function e(e){var n=t.call(this,e)||this;return n.type="dropPanel",n.$elem=hi('<div class="w-e-drop-panel"></div>'),n}return Vy(e,t),e.prototype.genSelfElem=function(){return null},e}(dE),fE=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this,e,n)||this;if(r.dropPanel=null,r.menu=e,e.showDropPanel){var i=sE();r.$button.append(i)}return r}return Vy(e,t),e.prototype.onButtonClick=function(){this.menu.showDropPanel&&this.handleDropPanel()},e.prototype.handleDropPanel=function(){var t=this.menu;if(null!=t.getPanelContentElem){var e=SE(this);if(null==this.dropPanel){var n=new pE(e),r=t.getPanelContentElem(e);n.renderContent(r),n.appendTo(this.$elem),n.show(),this.dropPanel=n}else{var i=this.dropPanel;i.isShow?i.hide():(r=t.getPanelContentElem(e),i.renderContent(r),i.show())}var o=this.dropPanel;if(o.isShow){var a=this.$elem,s=a.offset().left,l=a.parents(".w-e-bar");s-l.offset().left>=l.width()/2?o.$elem.css({left:"none",right:"0"}):o.$elem.css({left:"0",right:"none"})}}},e}(cE),mE=function(t){function e(e,n){void 0===n&&(n=0);var r=t.call(this,e)||this;r.type="modal",r.$elem=hi('<div class="w-e-modal"></div>'),r.width=0,n&&(r.width=n);var i=r.$elem;return i.on("click",(function(t){return t.stopPropagation()})),i.on("keyup",(function(t){"Escape"===t.code&&(r.hide(),e.restoreSelection())})),r}return Vy(e,t),e.prototype.genSelfElem=function(){var t=this,e=hi('<span class="btn-close"><svg viewBox="0 0 1024 1024"><path d="M1024 896.1024l-128 128L512 640 128 1024 0 896 384 512 0 128 128 0 512 384 896.1024 0l128 128L640 512z"></path></svg></span>'),n=Qb.get(this);return e.on("click",(function(){t.hide(),null==n||n.restoreSelection()})),e},e.prototype.setStyle=function(t){var e=this.width,n=this.$elem;n.attr("style",""),e&&n.css("width",e+"px"),n.css(t)},e}(dE);function gE(t,e,n){var r=hi('<label class="babel-container"></label>');r.append("<span>"+t+"</span>");var i=hi('<input type="text" id="'+e+'" placeholder="'+(n||"")+'">');return r.append(i),[r[0],i[0]]}function vE(t,e){var n=hi('<div class="button-container"></div>'),r=hi('<button type="button" id="'+t+'">'+e+"</button>");return n.append(r),[n[0],r[0]]}var yE=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this,e,n)||this;return r.$body=hi("body"),r.modal=null,r.menu=e,r}return Vy(e,t),e.prototype.onButtonClick=function(){this.menu.showModal&&this.handleModal()},e.prototype.getPosition=function(){var t=SE(this),e=this.menu.getModalPositionNode(t);return re.isElement(e)?cM(t,e,"modal"):uM(t)},e.prototype.handleModal=function(){var t=SE(this),e=this.menu;if(null==this.modal){var n=new mE(t,e.modalWidth);this.renderAndShowModal(n,!0),this.modal=n}else(n=this.modal).isShow?n.hide():this.renderAndShowModal(n,!1)},e.prototype.renderAndShowModal=function(t,e){void 0===e&&(e=!1);var n=SE(this),r=this.menu;if(null!=r.getModalContentElem){var i=Bx.getTextarea(n),o=Bx.getToolbar(n),a=((null==o?void 0:o.getConfig())||{}).modalAppendToBody,s=r.getModalContentElem(n);if(t.renderContent(s),a)t.setStyle({left:"0",right:"0"});else{var l=this.getPosition();t.setStyle(l)}e&&(a?t.appendTo(this.$body):t.appendTo(i.$textAreaContainer)),t.show(),a||hM(n,t.$elem),setTimeout((function(){n.blur()}))}},e}(cE),bE=function(t){function e(e,n){var r=t.call(this,e)||this;return r.type="selectList",r.$elem=hi('<div class="w-e-select-list"></div>'),n&&r.$elem.css("width",n+"px"),r.$elem.on("click",(function(t){t.stopPropagation()})),r}return Vy(e,t),e.prototype.renderList=function(t){var e=this.$elem;e.empty();var n=hi("<ul></ul>");t.forEach((function(t){var e=t.value,r=t.text,i=t.selected,o=t.styleForRenderMenuList,a=hi('<li data-value="'+e+'"></li>');if(o&&a.css(o),i){var s=hi('<svg viewBox="0 0 1446 1024"><path d="M574.116299 786.736392 1238.811249 48.517862C1272.390222 11.224635 1329.414799 7.827718 1366.75664 41.450462 1403.840015 74.840484 1406.731043 132.084741 1373.10189 169.433699L655.118888 966.834607C653.072421 969.716875 650.835807 972.514337 648.407938 975.210759 615.017957 1012.29409 558.292155 1015.652019 521.195664 982.250188L72.778218 578.493306C35.910826 545.297758 32.859041 488.584019 66.481825 451.242134 99.871807 414.158803 156.597563 410.800834 193.694055 444.202665L574.116299 786.736392Z"></path></svg>');a.append(s),a.addClass("selected")}a.append(hi('<span data-value="'+e+'">'+r+"</span>")),a.attr("title",r),n.append(a)})),e.append(n)},e.prototype.genSelfElem=function(){return null},e}(dE),xE=function(){function t(t,e){var n=this;void 0===e&&(e=!1),this.$elem=hi('<div class="w-e-bar-item"></div>'),this.$button=hi('<button type="button" class="select-button"></button>'),this.disabled=!1,this.selectList=null;var r=t.tag,i=t.title,o=t.width,a=t.iconSvg,s=void 0===a?"":a,l=t.hotkey,u=void 0===l?"":l;if("select"!==r)throw new Error("Invalid tag '"+r+"', expected 'select'");var c=this.$button;o&&c.css("width",o+"px"),uE(c,s,i,u,e),this.$elem.append(c),this.menu=t,Ww((function(){return n.init()}))}return t.prototype.init=function(){var t=this;this.setSelectedValue(),this.$button.on("click",(function(e){e.preventDefault(),SE(t).hidePanelOrModal(),t.trigger()}))},t.prototype.trigger=function(){var t=this,e=SE(this);if(!e.isDisabled()&&!this.disabled){var n=this.menu;if(null==this.selectList){this.selectList=new bE(e,n.selectPanelWidth);var r=this.selectList,i=n.getOptions(e);r.renderList(i),r.appendTo(this.$elem),r.show(),r.$elem.on("click","li",(function(e){var n=e.target;if(null!=n){e.preventDefault();var r=hi(n).attr("data-value");t.onChange(r)}}))}else(r=this.selectList).isShow?r.hide():(i=n.getOptions(e),r.renderList(i),r.show())}},t.prototype.onChange=function(t){var e=SE(this),n=this.menu;n.exec&&n.exec(e,t)},t.prototype.setSelectedValue=function(){var t=SE(this),e=this.menu,n=e.getValue(t),r=function(t,e){for(var n=t.length,r="",i=0;i<n;i++){var o=t[i];if(o.value===e){r=o.text;break}}return r}(e.getOptions(t),n.toString()),i=this.$button,o=sE();i.empty(),i.text(r),i.append(o)},t.prototype.setDisabled=function(){var t=SE(this),e=this.menu.isDisabled(t),n=this.$button;(null==t.selection||t.isDisabled())&&(e=!0);var r="disabled";e?n.addClass(r):n.removeClass(r),this.disabled=e},t.prototype.changeMenuState=function(){this.setSelectedValue(),this.setDisabled()},t}(),_E=function(){function t(t){this.$elem=hi('<div class="w-e-bar-item w-e-bar-item-group"></div>'),this.$container=hi('<div class="w-e-bar-item-menus-container"></div>'),this.$button=hi('<button type="button"></button>');var e=t.iconSvg,n=t.title,r=this.$elem,i=this.$button;if(e){var o=hi(e);aE(o),i.append(o)}else i.text(n);var a=sE();i.append(a),r.append(i);var s=this.$container;r.append(s);var l=this.createObserver();this.observe(l)}return t.prototype.appendBarItem=function(t){var e=t.$elem;this.$container.append(e)},t.prototype.observe=function(t){var e=this.$container;t.observe(e[0],{childList:!0,subtree:!0,attributes:!0})},t.prototype.createObserver=function(){var t=this,e=this.$container,n=this.$button,r=new MutationObserver((function(){var i=e.find("button"),o=i.length;if(0!==o){var a=0;i.each((function(t){hi(t).hasClass("disabled")&&a++})),r.disconnect(),a===o?n.addClass("disabled"):n.removeClass("disabled"),t.observe(r)}}));return r},t}(),wE=new WeakMap;function SE(t){var e=Kb.get(t);if(null==e)throw new Error("Can not get editor instance");return e}function ME(t,e){void 0===e&&(e=!1);var n=wE.get(t);if(n)return n;var r=t.tag;if("button"===r){var i=t.showDropPanel,o=t.showModal;n=i?new fE(t,e):o?new yE(t,e):new hE(t,e)}if("select"===r&&(n=new xE(t,e)),null==n)throw new Error("Invalid tag in menu "+JSON.stringify(t));return wE.set(t,n),n}function EE(t,e){var n=t.selection;return null!=n&&!Te.isCollapsed(n)&&!Bx.getSelectedElems(t).some((function(e){if(t.isVoid(e))return!0;var n=e.type;return!!["pre","code","table"].includes(n)||void 0}))&&!!ke.isText(e)}var CE=function(){function t(){var t=this;this.$elem=hi('<div class="w-e-bar w-e-bar-hidden w-e-hover-bar"></div>'),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null,this.isShow=!1,this.changeHoverbarState=tu((function(){var e=t.isShow,n=t.getSelectedNodeAndMenuKeys()||{},r=n.node,i=void 0===r?null:r,o=n.menuKeys,a=void 0===o?[]:o;null!=i&&t.changeItemsState(),i&&re.isElement(i)&&e&&t.isSamePath(i,t.prevSelectedNode)||(t.hideAndClean(),null!=i&&(t.registerItems(a),t.setPosition(i),t.show()),t.prevSelectedNode=i)}),200),Ww((function(){var e=t.getEditorInstance(),n=t.$elem;n.on("mousedown",(function(t){return t.preventDefault()})),Bx.getTextarea(e).$textAreaContainer.append(n),e.on("change",t.changeHoverbarState);var r=t.hideAndClean.bind(t);e.on("scroll",r),e.on("fullScreen",r),e.on("unFullScreen",r)}))}return t.prototype.getMenus=function(){return this.menus},t.prototype.hideAndClean=function(){var t=this.$elem;t.removeClass("w-e-bar-show").addClass("w-e-bar-hidden"),this.hoverbarItems=[],t.empty(),this.isShow=!1},t.prototype.checkPositionBottom=function(){var t=this.$elem,e=!1,n=window.innerHeight;n&&n>=360&&n-t[0].getBoundingClientRect().bottom<360&&(e=!0),e?t.addClass("w-e-bar-bottom"):t.removeClass("w-e-bar-bottom")},t.prototype.show=function(){this.$elem.removeClass("w-e-bar-hidden").addClass("w-e-bar-show"),this.isShow=!0,this.checkPositionBottom()},t.prototype.changeItemsState=function(){var t=this;Ww((function(){t.hoverbarItems.forEach((function(t){t.changeMenuState()}))}))},t.prototype.registerItems=function(t){var e=this,n=this.$elem;t.forEach((function(t){if("|"!==t)e.registerSingleItem(t);else{var r=lE();n.append(r)}}))},t.prototype.registerSingleItem=function(t){var e=this.getEditorInstance(),n=this.menus,r=n[t];if(null==r){var i=Ux[t];if(null==i)throw new Error("Not found menu item factory by key '"+t+"'");if("function"!=typeof i)throw new Error("Menu item factory (key='"+t+"') is not a function");r=i(),n[t]=r}var o=ME(r);this.hoverbarItems.push(o),Kb.set(o,e),this.$elem.append(o.$elem)},t.prototype.setPosition=function(t){var e=this.getEditorInstance(),n=this.$elem;if(n.attr("style",""),re.isElement(t)){var r=cM(e,t,"bar");return n.css(r),void hM(e,n)}if(ke.isText(t))return r=uM(e),n.css(r),void hM(e,n);throw new Error("hoverbar.setPosition error, current selected node is not elem nor text")},t.prototype.getSelectedNodeAndMenuKeys=function(){var t=this.getEditorInstance();if(null==t.selection)return null;var e=this.getHoverbarKeysConf(),n=null,r=[],i=function(i){var o=e[i],a=o.match,s=o.menuKeys,l=void 0===s?[]:s,u=a||function(t,e){return Bx.checkNodeType(e,i)},c=Gy(ue.nodes(t,{match:function(e){return u(t,e)},universal:!0}),1),h=c[0];if(null!=h)return n=h[0],r=l,"break"};for(var o in e)if("break"===i(o))break;return null==n||0===r.length?null:{node:n,menuKeys:r}},t.prototype.getEditorInstance=function(){var t=Yb.get(this);if(null==t)throw new Error("Can not get editor instance");return t},t.prototype.getHoverbarKeysConf=function(){var t=this.getEditorInstance().getConfig().hoverbarKeys,e=void 0===t?{}:t,n=e.text;return n&&null==n.match&&(n.match=EE),e},t.prototype.isSamePath=function(t,e){if(null==t||null==e)return!1;var n=Bx.findPath(null,t),r=Bx.findPath(null,e);return ye.equals(n,r)},t.prototype.destroy=function(){this.changeHoverbarState.cancel(),this.$elem.remove(),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null},t}();function TE(t,e,n){var r=hi(n);return!!r.attr(e)||(r.attr(e,"true"),t.on("destroyed",(function(){r.removeAttr(e)})),!1)}function AE(t,e,n,r){if(rx.set(t,e),ix.set(t,n),re.isElement(t)){var i=t.children;if((void 0===i?[]:i).forEach((function(e,n){return AE(e,n,t,r)})),ue.isVoid(r,t)){var o=Gy(fe.texts(t),1),a=Gy(o[0],1)[0];rx.set(a,0),ix.set(a,t)}}}function DE(t){var e=t.selector,n=void 0===e?"":e,r=t.config,i=void 0===r?{}:r,o=t.content,a=t.html,s=t.plugins,l=void 0===s?[]:s,u=(t=>{var e=t,{apply:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:t}=e,{redos:n}=t;if(n.length>0){var r=n[n.length-1];hv.withoutSaving(e,(()=>{ue.withoutNormalizing(e,(()=>{for(var t of r)e.apply(t)}))})),t.redos.pop(),t.undos.push(r)}},e.undo=()=>{var{history:t}=e,{undos:n}=t;if(n.length>0){var r=n[n.length-1];hv.withoutSaving(e,(()=>{ue.withoutNormalizing(e,(()=>{var t=r.map(ve.inverse).reverse();for(var n of t)e.apply(n)}))})),t.redos.push(r),t.undos.pop()}},e.apply=t=>{var{operations:r,history:i}=e,{undos:o}=i,a=o[o.length-1],s=a&&a[a.length-1],l=fv(t,s),u=hv.isSaving(e),c=hv.isMerging(e);if(null==u&&(u=pv(t)),u){if(null==c&&(c=null!=a&&(0!==r.length||dv(t,s)||l)),a&&c)l&&a.pop(),a.push(t);else{var h=[t];o.push(h)}for(;o.length>100;)o.shift();mv(t)&&(i.redos=[])}n(t)},e})(function(t){var e=t,n=e.insertText,r=e.insertNode,i=e.insertFragment;return e.insertText=function(t){if(e.getConfig().maxLength){var r=Bx.getLeftLengthOfMaxLength(e);r<=0||(r<t.length?n(t.slice(0,r)):n(t))}else n(t)},e.insertNode=function(t){if(e.getConfig().maxLength){var n=Bx.getLeftLengthOfMaxLength(e);n<=0||n<fe.string(t).length||r(t)}else r(t)},e.insertFragment=function(t){e.getConfig().maxLength?t.forEach((function(t){e.insertNode(t)})):i(t)},e}(function(t){var e=t;return e.on=function(t,n){var r=rM(e);if(r.on(t,n),"destroyed"===t&&oM(e,n),"destroyed"!==t){var i=function(){return r.off(t,n)};r.on("destroyed",i),oM(e,i)}},e.once=function(t,n){rM(e).once(t,n)},e.off=function(t,n){rM(e).off(t,n)},e.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=rM(e);i.emit.apply(i,qy([t],Gy(n))),"destroyed"===t&&(aM(e).forEach((function(t){return i.off("destroyed",t)})),sM(e))},e}(function(t){var e=t;return e.select=function(t){$e.select(e,t)},e.deselect=function(){var n=e.selection,r=Bx.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),n&&$e.deselect(t)},e.move=function(e,n){void 0===n&&(n=!1),e&&(e<0||$e.move(t,{distance:e,unit:"character",reverse:n}))},e.moveReverse=function(t){e.move(t,!0)},e.restoreSelection=function(){var t=dx.get(e);null!=t&&(e.focus(),$e.select(e,t))},e.getSelectionPosition=function(){return uM(e)},e.getNodePosition=function(t){return cM(e,t)},e.isSelectedAll=function(){var t=e.selection;if(null==t)return!1;var n=Gy(Te.edges(t),2),r=n[0],i=n[1],o=Gy(ue.edges(e,[]),2),a=o[0],s=o[1];return!(!we.equals(r,a)||!we.equals(i,s))},e.selectAll=function(){var t=ue.start(e,[]),n=ue.end(e,[]);$e.select(e,{anchor:t,focus:n})},e}(kS(function(t){var e=t;return e.getAllMenuKeys=function(){var t=[];for(var e in Ux)t.push(e);return t},e.getConfig=function(){var t=$b.get(e);if(null==t)throw new Error("Can not get editor config");return t},e.getMenuConfig=function(t){var n=e.getConfig().MENU_CONF;return(void 0===n?{}:n)[t]||{}},e.alert=function(t,n){void 0===n&&(n="info");var r=e.getConfig().customAlert;r&&r(t,n)},e}(function(t){var e=t;return e.id="wangEditor-"+Fx++,e.isDestroyed=!1,e.isFullScreen=!1,e.focus=function(t){var n=Bx.toDOMNode(e,e),r=Bx.findDocumentOrShadowRoot(e);if(hx.set(e,!0),t){var i=ue.end(e,[]);$e.select(e,i)}r.activeElement!==n&&n.focus({preventScroll:!0})},e.isFocused=function(){return!!hx.get(e)},e.blur=function(){var t=Bx.toDOMNode(e,e),n=Bx.findDocumentOrShadowRoot(e);hx.set(e,!1),n.activeElement===t&&(t.blur(),$e.deselect(e))},e.updateView=function(){Bx.getTextarea(e).changeViewState();var t=Bx.getToolbar(e);t&&t.changeToolbarState();var n=Bx.getHoverbar(e);n&&n.changeHoverbarState()},e.destroy=function(){if(!e.isDestroyed){var t=Bx.getTextarea(e);t.destroy(),Wb.delete(e),Gb.delete(t);var n=Bx.getToolbar(e);n&&(n.destroy(),Xb.delete(e),qb.delete(n));var r=Bx.getHoverbar(e);r&&(r.destroy(),Zb.delete(e),Yb.delete(r)),e.isDestroyed=!0,e.emit("destroyed")}},e.scrollToElem=function(t){if(!e.getConfig().scroll){var n="编辑器禁用了 scroll ，编辑器内容无法滚动，请自行实现该功能";return n+="\nYou has disabled editor scroll, please do this yourself",void console.warn(n)}var r=hi("#"+t);if(0!==r.length){var i=r[0];if(!Bx.hasDOMNode(e,i))return n="Element (found by id is '"+t+"') is not in editor DOM",n+="\n 通过 id '"+t+"' 找到的 element 不在 editor DOM 之内",void console.error(n,i);var o=Bx.getTextarea(e),a=o.$textAreaContainer,s=o.$scroll,l=r.offset().top,u=a.offset().top;s[0].scrollBy({top:l-u,behavior:"smooth"})}},e.showProgressBar=function(t){t<1||Bx.getTextarea(e).changeProgress(t)},e.hidePanelOrModal=function(){var t=Jb.get(e);null!=t&&t.forEach((function(t){return t.hide()}))},e.enable=function(){e.getConfig().readOnly=!1,e.updateView()},e.disable=function(){e.getConfig().readOnly=!0,e.updateView()},e.isDisabled=function(){return e.getConfig().readOnly},e.toDOMNode=function(t){return Bx.toDOMNode(e,t)},e.fullScreen=function(){if(!e.isFullScreen){var t=null,n=Bx.getToolbar(e);n&&(t=n.$box);var r=Bx.getTextarea(e).$box.parent();if(t&&t.parent()[0]!==r[0])throw new Error("Can not set full screen, cause toolbar DOM parent is not equal to textarea DOM parent\n不能设置全屏，因为 toolbar DOM 父节点和 textarea DOM 父节点不一致");r.addClass("w-e-full-screen-container");var i=r.css("z-index");r.attr("data-z-index",i.toString()),e.isFullScreen=!0,e.emit("fullScreen")}},e.unFullScreen=function(){if(e.isFullScreen){var t=Bx.getTextarea(e).$box.parent();setTimeout((function(){t.removeClass("w-e-full-screen-container"),e.isFullScreen=!1,e.emit("unFullScreen")}),200)}},e.getEditableContainer=function(){return Bx.getTextarea(e).$textAreaContainer[0]},e}(function(t){var e=t,n=e.insertText;return e.insertFragment,e.setFragmentData=function(t){var n=e.selection;if(n){var r=Gy(Te.edges(n),2),i=r[0],o=r[1],a=ue.void(e,{at:i.path}),s=ue.void(e,{at:o.path});if(!Te.isCollapsed(n)||a){var l=Bx.toDOMRange(e,n),u=l.cloneContents(),c=u.childNodes[0];if(u.childNodes.forEach((function(t){t.textContent&&""!==t.textContent.trim()&&(c=t)})),s){var h=Gy(s,1)[0],d=l.cloneRange(),p=Bx.toDOMNode(e,h);d.setEndAfter(p),u=d.cloneContents()}if(a&&(c=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach((function(t){var e="n"===t.getAttribute("data-slate-zero-width");t.textContent=e?"\n":""})),Sx(c)){var f=c.ownerDocument.createElement("span");f.style.whiteSpace="pre",f.appendChild(c),u.appendChild(f),c=f}var m=e.getFragment(),g=JSON.stringify(m),v=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",v),t.setData("application/x-slate-fragment",v);var y=u.ownerDocument.createElement("div");return y.appendChild(u),y.setAttribute("hidden","true"),u.ownerDocument.body.appendChild(y),t.setData("text/html",y.innerHTML),t.setData("text/plain",Tx(y)),u.ownerDocument.body.removeChild(y),t}}},e.insertData=function(t){var r,i,o=t.getData("application/x-slate-fragment");if(o){var a=decodeURIComponent(window.atob(o)),s=JSON.parse(a);e.insertFragment(s)}else{var l=t.getData("text/plain"),u=t.getData("text/html");if(u)e.dangerouslyInsertHtml(u);else if(l){var c=l.split(/\r\n|\r|\n/),h=!1;try{for(var d=Wy(c),p=d.next();!p.done;p=d.next()){var f=p.value;h&&$e.splitNodes(e,{always:!0}),n(f),h=!0}}catch(t){r={error:t}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}}},e}(Mt()))))))));if(n&&function(t,e){return TE(t,"data-w-e-textarea",e)}(u,n))throw new Error("Repeated create editor by selector '"+n+"'");var c=function(t){void 0===t&&(t={});var e=eu(zx),n={},r=t.MENU_CONF,i=void 0===r?{}:r;return Mo(e,(function(t,e){n[e]=Hy(Hy({},t),i[e]||{})})),delete t.MENU_CONF,Hy({scroll:!0,readOnly:!1,autoFocus:!0,decorate:function(){return[]},maxLength:0,MENU_CONF:n,hoverbarKeys:{},customAlert:function(t,e){window.alert(e+":\n"+t)}},t)}(i);$b.set(u,c);var h=c.hoverbarKeys,d=void 0===h?{}:h;if(l.forEach((function(t){u=t(u)})),a){var p=hi("<div>"+a+"</div>");u.children=Array.from(p.children()).map((function(t){return LS(hi(t),u)}))}if(o&&o.length&&(u.children=o),0===u.children.length&&(u.children=[{type:"paragraph",children:[{text:""}]}]),Bx.normalizeContent(u),n){var f=new oE(n);Wb.set(u,f),Gb.set(f,u),f.changeViewState(),Ww((function(){var t=f.$scroll;null!=t&&t.height()<300&&console.warn("编辑区域高度 < 300px 这可能会导致 modal hoverbar 定位异常\nTextarea height < 300px . This may be cause modal and hoverbar position error",t)}));var m=void 0;Object.keys(d).length>0&&(m=new CE,Yb.set(m,u),Zb.set(u,m)),u.on("change",(function(){u.hidePanelOrModal()})),u.on("scroll",(function(){u.hidePanelOrModal()}))}else u.children.forEach((function(t,e){return AE(t,e,u,u)}));var g=c.onCreated,v=c.onDestroyed;return g&&u.on("created",(function(){return g(u)})),v&&u.on("destroyed",(function(){return v(u)})),Ww((function(){return u.emit("created")})),u}var PE=qm("splice"),RE=jd.TypeError,LE=Math.max,OE=Math.min;Wm({target:"Array",proto:!0,forced:!PE},{splice:function(t,e){var n,r,i,o,a,s,l=tp(this),u=Xf(l),c=Sm(t,u),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=u-c):(n=h-2,r=OE(LE(Wf(e),0),u-c)),u+n-r>9007199254740991)throw RE("Maximum allowed length exceeded");for(i=om(l,r),o=0;o<r;o++)(a=c+o)in l&&eg(i,o,l[a]);if(i.length=r,n<r){for(o=c;o<u-r;o++)s=o+n,(a=o+r)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-r+n;o--)delete l[o-1]}else if(n>r)for(o=u-r;o>c;o--)s=o+n-1,(a=o+r-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+c]=arguments[o+2];return l.length=u-r+n,i}});var kE=function(){function t(t,e){var n=this;this.$toolbar=hi('<div class="w-e-bar w-e-bar-show w-e-toolbar"></div>'),this.menus={},this.toolbarItems=[],this.config={},this.changeToolbarState=tu((function(){n.toolbarItems.forEach((function(t){t.changeMenuState()}))}),200),this.config=e;var r=hi(t);if(0===r.length)throw new Error("Cannot find toolbar DOM by selector '"+t+"'");this.$box=r;var i=this.$toolbar;i.on("mousedown",(function(t){return t.preventDefault()})),r.append(i),Ww((function(){n.registerItems(),n.changeToolbarState(),n.getEditorInstance().on("change",n.changeToolbarState)}))}return t.prototype.getMenus=function(){return this.menus},t.prototype.getConfig=function(){return this.config},t.prototype.registerItems=function(){var t=this,e="",n=this.$toolbar,r=this.config,i=r.toolbarKeys,o=void 0===i?[]:i,a=r.insertKeys,s=void 0===a?{index:0,keys:[]}:a,l=r.excludeKeys,u=void 0===l?[]:l,c=eu(o);s.keys.length>0&&("string"==typeof s.keys&&(s.keys=[s.keys]),s.keys.forEach((function(t,e){c.splice(s.index+e,0,t)})));var h=c.filter((function(t){if("string"==typeof t){if(u.includes(t))return!1}else if(u.includes(t.key))return!1;return!0})),d=h.length;h.forEach((function(r,i){if("|"===r){if(0===i)return;if(i+1===d)return;if("|"===e)return;var o=lE();return n.append(o),void(e=r)}if("string"==typeof r)return t.registerSingleItem(r,t),void(e=r);t.registerGroup(r),e="group"}))},t.prototype.registerGroup=function(t){var e=this,n=this.$toolbar,r=function(t){return new _E(t)}(t),i=t.menuKeys,o=void 0===i?[]:i,a=this.config.excludeKeys,s=void 0===a?[]:a;o.forEach((function(t){s.includes(t)||e.registerSingleItem(t,r)})),n.append(r.$elem)},t.prototype.registerSingleItem=function(t,e){var n=this.getEditorInstance(),r=e instanceof _E,i=this.menus,o=i[t];if(null==o){var a=Ux[t];if(null==a)throw new Error("Not found menu item factory by key '"+t+"'");if("function"!=typeof a)throw new Error("Menu item factory (key='"+t+"') is not a function");o=a(),i[t]=o}else console.warn("Duplicated toolbar menu key '"+t+"'\n重复注册了菜单栏 menu '"+t+"'");var s=ME(o,r);this.toolbarItems.push(s),Kb.set(s,n),r?e.appendBarItem(s):e.$toolbar.append(s.$elem)},t.prototype.getEditorInstance=function(){var t=qb.get(this);if(null==t)throw new Error("Can not get editor instance");return t},t.prototype.destroy=function(){this.$toolbar.remove(),this.menus={},this.toolbarItems=[]},t}();function IE(t,e){if(null==t)throw new Error("Cannot create toolbar, because editor is null");var n=e.selector,r=e.config,i=void 0===r?{}:r;if(function(t,e){return TE(t,"data-w-e-toolbar",e)}(t,n))throw new Error("Repeated create toolbar by selector '"+n+"'");var o=Hy({toolbarKeys:[],excludeKeys:[],insertKeys:{index:0,keys:[]},modalAppendToBody:!1},i||{}),a=new kE(n,o);return qb.set(a,t),Xb.set(t,a),a}var NE=Sf.EXISTS,BE=Qp.f,FE=Function.prototype,zE=Kd(FE.toString),UE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,jE=Kd(UE.exec);function VE(t){var e=t.server,n=void 0===e?"":e,r=t.fieldName,i=void 0===r?"":r,o=t.maxFileSize,a=void 0===o?10485760:o,s=t.maxNumberOfFiles,l=void 0===s?100:s,u=t.meta,c=void 0===u?{}:u,h=t.metaWithUrl,d=void 0!==h&&h,p=t.headers,f=void 0===p?{}:p,m=t.withCredentials,g=void 0!==m&&m,v=t.timeout,y=void 0===v?1e4:v,b=t.onBeforeUpload,x=void 0===b?function(t){return t}:b,_=t.onSuccess,w=void 0===_?function(t,e){}:_,S=t.onError,M=void 0===S?function(t,e,n){console.error(t.name+" upload error",e,n)}:S,E=t.onProgress,C=void 0===E?function(t){}:E;if(!n)throw new Error("Cannot get upload server address\n没有配置上传地址");if(!i)throw new Error("Cannot get fieldName\n没有配置 fieldName");var T=n;d&&(T=function(t,e){var n=Gy(t.split("#"),2),r=n[0],i=n[1],o=[];Mo(e,(function(t,e){o.push(e+"="+t)}));var a=o.join("&");return r=r.indexOf("?")>0?r+"&"+a:r+"?"+a,i?r+"#"+i:r}(T,c));var A=new Kc({onBeforeUpload:x,restrictions:{maxFileSize:a,maxNumberOfFiles:l},meta:c}).use(Id,{endpoint:T,headers:f,formData:!0,fieldName:i,bundle:!0,withCredentials:g,timeout:y});return A.on("upload-success",(function(t,e){var n=e.body;w(t,void 0===n?{}:n),A.removeFile(t.id)})),A.on("progress",(function(t){t<1||C(t)})),A.on("error",(function(t){console.error("wangEditor file upload error",t.stack)})),A.on("upload-error",(function(t,e,n){M(t,e,n),A.removeFile(t.id)})),A.on("restriction-failed",(function(t,e){M(t,e),A.removeFile(t.id)})),A}function HE(t){return HE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HE(t)}function WE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach((function(e){WE(t,e,n[e])}))}return t}function qE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function YE(t,e,n){return e&&XE(t.prototype,e),n&&XE(t,n),t}function ZE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KE(t,e){if(e&&("object"===HE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZE(t)}function JE(t){return JE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},JE(t)}function QE(t,e){return QE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},QE(t,e)}function $E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QE(t,e)}Cp&&!NE&&BE(FE,"name",{configurable:!0,get:function(){try{return jE(UE,zE(this))[1]}catch(Cut){return""}}});var tC={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},eC=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qE(this,t),this.init(e,n)}return YE(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||tC,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,GE({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),nC=function(){function t(){qE(this,t),this.observers={}}return YE(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function rC(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function iC(t){return null==t?"":""+t}function oC(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function aC(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!t[a]&&n&&(t[a]=new n),t=Object.prototype.hasOwnProperty.call(t,a)?t[a]:{}}return i()?{}:{obj:t,k:r(o.shift())}}function sC(t,e,n){var r=aC(t,e,Object);r.obj[r.k]=n}function lC(t,e){var n=aC(t,e),r=n.obj,i=n.k;if(r)return r[i]}function uC(t,e,n){var r=lC(t,n);return void 0!==r?r:lC(e,n)}function cC(t,e,n){for(var r in e)"__proto__"!==r&&"constructor"!==r&&(r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):cC(t[r],e[r],n):t[r]=e[r]);return t}function hC(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var dC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function pC(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return dC[t]})):t}var fC="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function mC(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var r=e.split(n),i=t,o=0;o<r.length;++o){if(!i)return;if("string"==typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var a=2,s=r.slice(o,o+a).join(n),l=i[s];void 0===l&&r.length>o+a;)a++,l=i[s=r.slice(o,o+a).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var u=r.slice(o+a).join(n);return u?mC(l,u,n):void 0}i=i[r[o]]}return i}}var gC=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return qE(this,e),n=KE(this,JE(e).call(this)),fC&&nC.call(ZE(n)),n.data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return $E(e,nC),YE(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[t,e];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(a=t.split("."));var s=lC(this.data,a);return s||!o||"string"!=typeof n?s:mC(this.data&&this.data[t]&&this.data[t][e],n,i)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=e,e=(a=t.split("."))[1]),this.addNamespaces(e),sC(this.data,a,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=lC(this.data,a)||{};r?cC(s,n,i):s=GE({},s,n),sC(this.data,a,s),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?GE({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(),vC={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))})),e}},yC={},bC=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qE(this,e),n=KE(this,JE(e).call(this)),fC&&nC.call(ZE(n)),oC(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,ZE(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=eC.create("translator"),n}return $E(e,nC),YE(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:t,namespaces:i};var a=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),t=a.join(r)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,n,r){var i=this;if("object"!==HE(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],n),s=a.key,l=a.namespaces,u=l[l.length-1],c=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(h){var d=n.nsSeparator||this.options.nsSeparator;return u+d+s}return s}var p=this.resolve(t,n),f=p&&p.res,m=p&&p.usedKey||s,g=p&&p.exactUsedKey||s,v=Object.prototype.toString.apply(f),y=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,_="string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f;if(x&&f&&_&&y.indexOf(v)<0&&("string"!=typeof b||"[object Array]"!==v)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,f,GE({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(o){var w="[object Array]"===v,S=w?[]:{},M=w?g:m;for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var C="".concat(M).concat(o).concat(E);S[E]=this.translate(C,GE({},n,{joinArrays:!1,ns:l})),S[E]===C&&(S[E]=f[E])}f=S}}else if(x&&"string"==typeof b&&"[object Array]"===v)(f=f.join(b))&&(f=this.extendTranslation(f,t,n,r));else{var T=!1,A=!1,D=void 0!==n.count&&"string"!=typeof n.count,P=e.hasDefaultValue(n),R=D?this.pluralResolver.getSuffix(c,n.count):"",L=n["defaultValue".concat(R)]||n.defaultValue;!this.isValidLookup(f)&&P&&(T=!0,f=L),this.isValidLookup(f)||(A=!0,f=s);var O=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,k=O&&A?void 0:f,I=P&&L!==f&&this.options.updateMissing;if(A||T||I){if(this.logger.log(I?"updateKey":"missingKey",c,u,s,I?L:f),o){var N=this.resolve(s,GE({},n,{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var B=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var z=0;z<F.length;z++)B.push(F[z]);else"all"===this.options.saveMissingTo?B=this.languageUtils.toResolveHierarchy(n.lng||this.language):B.push(n.lng||this.language);var U=function(t,e,r){i.options.missingKeyHandler?i.options.missingKeyHandler(t,u,e,I?r:k,I,n):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(t,u,e,I?r:k,I,n),i.emit("missingKey",t,u,e,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?B.forEach((function(t){i.pluralResolver.getSuffixes(t).forEach((function(e){U([t],s+e,n["defaultValue".concat(e)]||L)}))})):U(B,s,L))}f=this.extendTranslation(f,t,n,p,r),A&&f===s&&this.options.appendNamespaceToMissingKey&&(f="".concat(u,":").concat(s)),(A||T)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(t,e,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(GE({},n,{interpolation:GE({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=t.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=GE({},this.options.interpolation.defaultVariables,u)),t=this.interpolator.interpolate(t,u,n.lng||this.language,n),s){var c=t.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(e[0])),null):o.translate.apply(o,r.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,d="string"==typeof h?[h]:h;return null!=t&&d&&d.length&&!1!==n.applyPostProcessor&&(t=vC.handle(d,t,e,this.options&&this.options.postProcessPassResolved?GE({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var l=a.extractFromKey(t,s),u=l.key;n=u;var c=l.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,d=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(t){a.isValidLookup(e)||(o=t,!yC["".concat(p[0],"-").concat(t)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(yC["".concat(p[0],"-").concat(t)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!a.isValidLookup(e)){i=n;var o,l,c=u,p=[c];for(a.i18nFormat&&a.i18nFormat.addLookupKeys?a.i18nFormat.addLookupKeys(p,u,n,t,s):(h&&(o=a.pluralResolver.getSuffix(n,s.count)),h&&d&&p.push(c+o),d&&p.push(c+="".concat(a.options.contextSeparator).concat(s.context)),h&&p.push(c+=o));l=p.pop();)a.isValidLookup(e)||(r=l,e=a.getResource(n,t,l,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),e}();function xC(t){return t.charAt(0).toUpperCase()+t.slice(1)}var _C=function(){function t(e){qE(this,t),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=eC.create("languageUtils")}return YE(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=xC(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=xC(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=xC(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(t)}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var r=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(r)||(e=r)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var r=n.getLanguagePartFromCode(t);if(n.isSupportedCode(r))return e=r;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(r))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isSupportedCode(t)?i.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))})),i}}]),t}(),wC=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],SC={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}};function MC(){var t={};return wC.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:SC[e.fc]}}))})),t}var EC=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qE(this,t),this.languageUtils=e,this.options=n,this.logger=eC.create("pluralResolver"),this.rules=MC()}return YE(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){return this.getSuffixes(t).map((function(t){return e+t}))}},{key:"getSuffixes",value:function(t){var e=this,n=this.getRule(t);return n?n.numbers.map((function(n){return e.getSuffix(t,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var i=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),CC=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qE(this,t),this.logger=eC.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return YE(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:pC,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?hC(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?hC(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?hC(e.nestingPrefix):e.nestingPrefixEscaped||hC("$t("),this.nestingSuffix=e.nestingSuffix?hC(e.nestingSuffix):e.nestingSuffixEscaped||hC(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,o,a,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(t){return t.replace(/\$/g,"$$$$")}var c=function(t){if(t.indexOf(s.formatSeparator)<0){var i=uC(e,l,t);return s.alwaysFormat?s.format(i,void 0,n,GE({},r,e,{interpolationkey:t})):i}var o=t.split(s.formatSeparator),a=o.shift().trim(),u=o.join(s.formatSeparator).trim();return s.format(uC(e,l,a),u,n,GE({},r,e,{interpolationkey:a}))};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,p=[{regex:this.regexpUnescape,safeValue:function(t){return u(t)}},{regex:this.regexp,safeValue:function(t){return s.escapeValue?u(s.escape(t)):u(t)}}];return p.forEach((function(e){for(a=0;i=e.regex.exec(t);){if(void 0===(o=c(i[1].trim())))if("function"==typeof h){var n=h(t,i,r);o="string"==typeof n?n:""}else{if(d){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=iC(o));var l=e.safeValue(o);if(t=t.replace(i[0],l),d?(e.regex.lastIndex+=l.length,e.regex.lastIndex-=i[0].length):e.regex.lastIndex=0,++a>=s.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=GE({},o);function s(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);t=r[0],i=(i=this.interpolate(i,a)).replace(/'/g,'"');try{a=JSON.parse(i),e&&(a=GE({},e,a))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(i)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var l=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=e(s.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=iC(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),u&&(r=l.reduce((function(t,e){return i.format(t,e,o.lng,GE({},o,{interpolationkey:n[1].trim()}))}),r.trim())),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}(),TC=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return qE(this,e),i=KE(this,JE(e).call(this)),fC&&nC.call(ZE(i)),i.backend=t,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=eC.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return $E(e,nC),YE(e,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o=[],a=[],s=[],l=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),l.indexOf(e)<0&&l.push(e)))})),r||s.push(t)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(t,e,n){var r=t.split("|"),i=r[0],o=r[1];e&&this.emit("failedLoading",i,o,e),n&&this.store.addResourceBundle(i,o,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){!function(t,e,n,r){var i=aC(t,e,Object),o=i.obj,a=i.k;o[a]=o[a]||[],r&&(o[a]=o[a].concat(n)),r||o[a].push(n)}(n.loaded,[i],o),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){a[t].indexOf(e)<0&&a[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(s,l){s&&l&&i<5?setTimeout((function(){r.read.call(r,t,e,n,i+1,2*o,a)}),o):a(s,l)})):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&e.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&e.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),e.loaded(t,r,a)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,GE({},o,{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),e}();function AC(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===HE(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===HE(t[2])||"object"===HE(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function DC(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&(t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t.supportedLngs=t.whitelist),t.nonExplicitWhitelist&&(t.nonExplicitSupportedLngs=t.nonExplicitWhitelist),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function PC(){}var RC=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(qE(this,e),t=KE(this,JE(e).call(this)),fC&&nC.call(ZE(t)),t.options=DC(n),t.services={},t.logger=eC,t.modules={external:[]},r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),KE(t,ZE(t));setTimeout((function(){t.init(n,r)}),0)}return t}return $E(e,nC),YE(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),e.whitelist&&!e.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),e.nonExplicitWhitelist&&!e.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=GE({},AC(),this.options,DC(e)),this.format=this.options.interpolation.format,n||(n=PC),!this.options.isClone){this.modules.logger?eC.init(r(this.modules.logger),this.options):eC.init(null,this.options);var i=new _C(this.options);this.store=new gC(this.options.resources,this.options);var o=this.services;o.logger=eC,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new EC(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new CC(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new TC(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new bC(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var u=rC(),c=function(){var e=function(e,r){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),u.resolve(r),n(e,r)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PC,r=n,i="string"==typeof t?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){o.indexOf(t)<0&&o.push(t)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return a(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return a(t)})),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=rC();return t||(t=this.languages),e||(e=this.options.ns),n||(n=PC),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&vC.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=rC();this.emit("languageChanging",t);var i=function(i){t||i||!n.services.languageDetector||(i=[]);var o="string"==typeof i?i:n.services.languageUtils.getBestMatchFromCodes(i);o&&(n.language||(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o)),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(t){!function(t,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,o)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e,n){var r=this,i=function t(e,i){var o;if("object"!==HE(i)){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([e,i].concat(s))}else o=GE({},i);o.lng=o.lng||t.lng,o.lngs=o.lngs||t.lngs,o.ns=o.ns||t.ns;var u=r.options.keySeparator||".",c=n?"".concat(n).concat(u).concat(e):e;return r.t(c,o)};return"string"==typeof t?i.lng=t:i.lngs=t,i.ns=e,i.keyPrefix=n,i}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||!(!a(r,t)||i&&!a(o,t))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=rC();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=rC();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new e(t,n)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PC,i=GE({},this.options,n,{isClone:!0}),o=new e(i),a=["store","services","language"];return a.forEach((function(e){o[e]=t[e]})),o.services=GE({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new bC(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))})),o.init(i,r),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),e}(),LC=new RC,OC="translation";function kC(t,e){LC.addResourceBundle(t,OC,e,!0,!0)}LC.init({lng:"zh-CN",resources:{}});var IC=LC.t.bind(LC),NC={editor:{more:"More",justify:"Justify",indent:"Indent",image:"Image",video:"Video"}},BC={editor:{more:"更多",justify:"对齐",indent:"缩进",image:"图片",video:"视频"}};kC("en",NC),kC("zh-CN",BC),kC("en",{common:{ok:"OK",delete:"Delete",enter:"Enter"},blockQuote:{title:"Quote"},codeBlock:{title:"Code block"},color:{color:"Font color",bgColor:"Back color",default:"Default color",clear:"Clear back color"},divider:{title:"Divider"},emotion:{title:"Emotion"},fontSize:{title:"Font size",default:"Default"},fontFamily:{title:"Font family",default:"Default"},fullScreen:{title:"Full screen"},header:{title:"Header",text:"Text"},image:{netImage:"Net image",delete:"Delete image",edit:"Edit image",viewLink:"View link",src:"Image src",desc:"Description",link:"Image link"},indent:{decrease:"Decrease",increase:"Increase"},justify:{left:"Left",right:"Right",center:"Center",justify:"Justify"},lineHeight:{title:"Line height",default:"Default"},link:{insert:"Insert link",text:"Link text",url:"Link source",unLink:"Unlink",edit:"Edit link",view:"View link"},textStyle:{bold:"Bold",clear:"Clear styles",code:"Inline code",italic:"Italic",sub:"Sub",sup:"Sup",through:"Through",underline:"Underline"},undo:{undo:"undo",redo:"Redo"},todo:{todo:"Todo"}}),kC("zh-CN",{common:{ok:"确定",delete:"删除",enter:"回车"},blockQuote:{title:"引用"},codeBlock:{title:"代码块"},color:{color:"文字颜色",bgColor:"背景色",default:"默认颜色",clear:"清除背景色"},divider:{title:"分割线"},emotion:{title:"表情"},fontSize:{title:"字号",default:"默认字号"},fontFamily:{title:"字体",default:"默认字体"},fullScreen:{title:"全屏"},header:{title:"标题",text:"正文"},image:{netImage:"网络图片",delete:"删除图片",edit:"编辑图片",viewLink:"查看链接",src:"图片地址",desc:"图片描述",link:"图片链接"},indent:{decrease:"减少缩进",increase:"增加缩进"},justify:{left:"左对齐",right:"右对齐",center:"居中对齐",justify:"两端对齐"},lineHeight:{title:"行高",default:"默认行高"},link:{insert:"插入链接",text:"链接文本",url:"链接地址",unLink:"取消链接",edit:"修改链接",view:"查看链接"},textStyle:{bold:"粗体",clear:"清除格式",code:"行内代码",italic:"斜体",sub:"下标",sup:"上标",through:"删除线",underline:"下划线"},undo:{undo:"撤销",redo:"重做"},todo:{todo:"待办"}});var FC={type:"paragraph",renderElem:function(t,e,n){return qa("p",null,e)}},zC={type:"paragraph",elemToHtml:function(t,e){return""===e?"<p><br></p>":"<p>"+e+"</p>"}},UC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function jC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VC(t){var e={exports:{}};return t(e,e.exports),e.exports}var HC,WC,GC=function(t){return t&&t.Math==Math&&t},qC=GC("object"==typeof globalThis&&globalThis)||GC("object"==typeof window&&window)||GC("object"==typeof self&&self)||GC("object"==typeof UC&&UC)||function(){return this}()||Function("return this")(),XC=function(t){try{return!!t()}catch(t){return!0}},YC=!XC((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ZC=Function.prototype.call,KC=ZC.bind?ZC.bind(ZC):function(){return ZC.apply(ZC,arguments)},JC={}.propertyIsEnumerable,QC=Object.getOwnPropertyDescriptor,$C=QC&&!JC.call({1:2},1)?function(t){var e=QC(this,t);return!!e&&e.enumerable}:JC,tT={f:$C},eT=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},nT=Function.prototype,rT=nT.bind,iT=nT.call,oT=rT&&rT.bind(iT),aT=rT?function(t){return t&&oT(iT,t)}:function(t){return t&&function(){return iT.apply(t,arguments)}},sT=aT({}.toString),lT=aT("".slice),uT=function(t){return lT(sT(t),8,-1)},cT=qC.Object,hT=aT("".split),dT=XC((function(){return!cT("z").propertyIsEnumerable(0)}))?function(t){return"String"==uT(t)?hT(t,""):cT(t)}:cT,pT=qC.TypeError,fT=function(t){if(null==t)throw pT("Can't call method on "+t);return t},mT=function(t){return dT(fT(t))},gT=function(t){return"function"==typeof t},vT=function(t){return"object"==typeof t?null!==t:gT(t)},yT=function(t){return gT(t)?t:void 0},bT=function(t,e){return arguments.length<2?yT(qC[t]):qC[t]&&qC[t][e]},xT=aT({}.isPrototypeOf),_T=bT("navigator","userAgent")||"",wT=qC.process,ST=qC.Deno,MT=wT&&wT.versions||ST&&ST.version,ET=MT&&MT.v8;ET&&(WC=(HC=ET.split("."))[0]>0&&HC[0]<4?1:+(HC[0]+HC[1])),!WC&&_T&&(!(HC=_T.match(/Edge\/(\d+)/))||HC[1]>=74)&&(HC=_T.match(/Chrome\/(\d+)/))&&(WC=+HC[1]);var CT=WC,TT=!!Object.getOwnPropertySymbols&&!XC((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&CT&&CT<41})),AT=TT&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,DT=qC.Object,PT=AT?function(t){return"symbol"==typeof t}:function(t){var e=bT("Symbol");return gT(e)&&xT(e.prototype,DT(t))},RT=qC.String,LT=function(t){try{return RT(t)}catch(t){return"Object"}},OT=qC.TypeError,kT=function(t){if(gT(t))return t;throw OT(LT(t)+" is not a function")},IT=function(t,e){var n=t[e];return null==n?void 0:kT(n)},NT=qC.TypeError,BT=Object.defineProperty,FT=function(t,e){try{BT(qC,t,{value:e,configurable:!0,writable:!0})}catch(f){qC[t]=e}return e},zT=qC["__core-js_shared__"]||FT("__core-js_shared__",{}),UT=VC((function(t){(t.exports=function(t,e){return zT[t]||(zT[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),jT=qC.Object,VT=function(t){return jT(fT(t))},HT=aT({}.hasOwnProperty),WT=Object.hasOwn||function(t,e){return HT(VT(t),e)},GT=0,qT=Math.random(),XT=aT(1..toString),YT=function(t){return"Symbol("+(void 0===t?"":t)+")_"+XT(++GT+qT,36)},ZT=UT("wks"),KT=qC.Symbol,JT=KT&&KT.for,QT=AT?KT:KT&&KT.withoutSetter||YT,$T=function(t){if(!WT(ZT,t)||!TT&&"string"!=typeof ZT[t]){var e="Symbol."+t;TT&&WT(KT,t)?ZT[t]=KT[t]:ZT[t]=AT&&JT?JT(e):QT(e)}return ZT[t]},tA=qC.TypeError,eA=$T("toPrimitive"),nA=function(t,e){if(!vT(t)||PT(t))return t;var n,r=IT(t,eA);if(r){if(void 0===e&&(e="default"),n=KC(r,t,e),!vT(n)||PT(n))return n;throw tA("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&gT(n=t.toString)&&!vT(r=KC(n,t)))return r;if(gT(n=t.valueOf)&&!vT(r=KC(n,t)))return r;if("string"!==e&&gT(n=t.toString)&&!vT(r=KC(n,t)))return r;throw NT("Can't convert object to primitive value")}(t,e)},rA=function(t){var e=nA(t,"string");return PT(e)?e:e+""},iA=qC.document,oA=vT(iA)&&vT(iA.createElement),aA=function(t){return oA?iA.createElement(t):{}},sA=!YC&&!XC((function(){return 7!=Object.defineProperty(aA("div"),"a",{get:function(){return 7}}).a})),lA=Object.getOwnPropertyDescriptor,uA={f:YC?lA:function(t,e){if(t=mT(t),e=rA(e),sA)try{return lA(t,e)}catch(t){}if(WT(t,e))return eT(!KC(tT.f,t,e),t[e])}},cA=qC.String,hA=qC.TypeError,dA=function(t){if(vT(t))return t;throw hA(cA(t)+" is not an object")},pA=qC.TypeError,fA=Object.defineProperty,mA={f:YC?fA:function(t,e,n){if(dA(t),e=rA(e),dA(n),sA)try{return fA(t,e,n)}catch(t){}if("get"in n||"set"in n)throw pA("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},gA=YC?function(t,e,n){return mA.f(t,e,eT(1,n))}:function(t,e,n){return t[e]=n,t},vA=aT(Function.toString);gT(zT.inspectSource)||(zT.inspectSource=function(t){return vA(t)});var yA,bA,xA,_A=zT.inspectSource,wA=qC.WeakMap,SA=gT(wA)&&/native code/.test(_A(wA)),MA=UT("keys"),EA=function(t){return MA[t]||(MA[t]=YT(t))},CA={},TA=qC.TypeError,AA=qC.WeakMap;if(SA||zT.state){var DA=zT.state||(zT.state=new AA),PA=aT(DA.get),RA=aT(DA.has),LA=aT(DA.set);yA=function(t,e){if(RA(DA,t))throw new TA("Object already initialized");return e.facade=t,LA(DA,t,e),e},bA=function(t){return PA(DA,t)||{}},xA=function(t){return RA(DA,t)}}else{var OA=EA("state");CA[OA]=!0,yA=function(t,e){if(WT(t,OA))throw new TA("Object already initialized");return e.facade=t,gA(t,OA,e),e},bA=function(t){return WT(t,OA)?t[OA]:{}},xA=function(t){return WT(t,OA)}}var kA={set:yA,get:bA,has:xA,enforce:function(t){return xA(t)?bA(t):yA(t,{})},getterFor:function(t){return function(e){var n;if(!vT(e)||(n=bA(e)).type!==t)throw TA("Incompatible receiver, "+t+" required");return n}}},IA=Function.prototype,NA=YC&&Object.getOwnPropertyDescriptor,BA=WT(IA,"name"),FA={EXISTS:BA,PROPER:BA&&"something"===function(){}.name,CONFIGURABLE:BA&&(!YC||YC&&NA(IA,"name").configurable)},zA=VC((function(t){var e=FA.CONFIGURABLE,n=kA.get,r=kA.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;gT(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!WT(o,"name")||e&&o.name!==h)&&gA(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==qC?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:gA(t,n,o)):u?t[n]=o:FT(n,o)})(Function.prototype,"toString",(function(){return gT(this)&&n(this).source||_A(this)}))})),UA=Math.ceil,jA=Math.floor,VA=function(t){var e=+t;return e!=e||0===e?0:(e>0?jA:UA)(e)},HA=Math.max,WA=Math.min,GA=function(t,e){var n=VA(t);return n<0?HA(n+e,0):WA(n,e)},qA=Math.min,XA=function(t){return t>0?qA(VA(t),9007199254740991):0},YA=function(t){return XA(t.length)},ZA=function(t){return function(e,n,r){var i,o=mT(e),a=YA(o),s=GA(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},KA={includes:ZA(!0),indexOf:ZA(!1)},JA=KA.indexOf,QA=aT([].push),$A=function(t,e){var n,r=mT(t),i=0,o=[];for(n in r)!WT(CA,n)&&WT(r,n)&&QA(o,n);for(;e.length>i;)WT(r,n=e[i++])&&(~JA(o,n)||QA(o,n));return o},tD=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],eD=tD.concat("length","prototype"),nD={f:Object.getOwnPropertyNames||function(t){return $A(t,eD)}},rD={f:Object.getOwnPropertySymbols},iD=aT([].concat),oD=bT("Reflect","ownKeys")||function(t){var e=nD.f(dA(t)),n=rD.f;return n?iD(e,n(t)):e},aD=function(t,e){for(var n=oD(e),r=mA.f,i=uA.f,o=0;o<n.length;o++){var a=n[o];WT(t,a)||r(t,a,i(e,a))}},sD=/#|\.prototype\./,lD=function(t,e){var n=cD[uD(t)];return n==dD||n!=hD&&(gT(e)?XC(e):!!e)},uD=lD.normalize=function(t){return String(t).replace(sD,".").toLowerCase()},cD=lD.data={},hD=lD.NATIVE="N",dD=lD.POLYFILL="P",pD=lD,fD=uA.f,mD=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?qC:u?qC[s]||FT(s,{}):(qC[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=fD(n,r))&&a.value:n[r],!pD(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;aD(o,i)}(t.sham||i&&i.sham)&&gA(o,"sham",!0),zA(n,r,o,t)}},gD=aT(aT.bind),vD=Array.isArray||function(t){return"Array"==uT(t)},yD={};yD[$T("toStringTag")]="z";var bD="[object z]"===String(yD),xD=$T("toStringTag"),_D=qC.Object,wD="Arguments"==uT(function(){return arguments}()),SD=bD?uT:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=_D(t),xD))?n:wD?uT(e):"Object"==(r=uT(e))&&gT(e.callee)?"Arguments":r},MD=function(){},ED=[],CD=bT("Reflect","construct"),TD=/^\s*(?:class|function)\b/,AD=aT(TD.exec),DD=!TD.exec(MD),PD=function(t){if(!gT(t))return!1;try{return CD(MD,ED,t),!0}catch(t){return!1}},RD=!CD||XC((function(){var t;return PD(PD.call)||!PD(Object)||!PD((function(){t=!0}))||t}))?function(t){if(!gT(t))return!1;switch(SD(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return DD||!!AD(TD,_A(t))}:PD,LD=$T("species"),OD=qC.Array,kD=function(t,e){return new(function(t){var e;return vD(t)&&(e=t.constructor,(RD(e)&&(e===OD||vD(e.prototype))||vT(e)&&null===(e=e[LD]))&&(e=void 0)),void 0===e?OD:e}(t))(0===e?0:e)},ID=aT([].push),ND=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=VT(l),m=dT(f),g=function(t,e){return kT(t),void 0===e?t:gD?gD(t,e):function(){return t.apply(e,arguments)}}(u,c),v=YA(m),y=0,b=h||kD,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:ID(x,d)}else switch(t){case 4:return!1;case 7:ID(x,d)}return o?-1:r||i?i:x}},BD={forEach:ND(0),map:ND(1),filter:ND(2),some:ND(3),every:ND(4),find:ND(5),findIndex:ND(6),filterReject:ND(7)},FD=$T("species"),zD=function(t){return CT>=51||!XC((function(){var e=[];return(e.constructor={})[FD]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},UD=BD.filter;mD({target:"Array",proto:!0,forced:!zD("filter")},{filter:function(t){return UD(this,t,arguments.length>1?arguments[1]:void 0)}});var jD=bD?{}.toString:function(){return"[object "+SD(this)+"]"};bD||zA(Object.prototype,"toString",jD,{unsafe:!0});var VD,HD=qC.String,WD=function(t){if("Symbol"===SD(t))throw TypeError("Cannot convert a Symbol value to a string");return HD(t)},GD=function(){var t=dA(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},qD=qC.RegExp,XD=XC((function(){var t=qD("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),YD=XD||XC((function(){return!qD("a","y").sticky})),ZD={BROKEN_CARET:XD||XC((function(){var t=qD("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:YD,UNSUPPORTED_Y:XD},KD=Object.keys||function(t){return $A(t,tD)},JD=YC?Object.defineProperties:function(t,e){dA(t);for(var n,r=mT(e),i=KD(e),o=i.length,a=0;o>a;)mA.f(t,n=i[a++],r[n]);return t},QD=bT("document","documentElement"),$D=EA("IE_PROTO"),tP=function(){},eP=function(t){return"<script>"+t+"<\/script>"},nP=function(t){t.write(eP("")),t.close();var e=t.parentWindow.Object;return t=null,e},rP=function(){try{VD=new ActiveXObject("htmlfile")}catch(t){}var t,e;rP="undefined"!=typeof document?document.domain&&VD?nP(VD):((e=aA("iframe")).style.display="none",QD.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(eP("document.F=Object")),t.close(),t.F):nP(VD);for(var n=tD.length;n--;)delete rP.prototype[tD[n]];return rP()};CA[$D]=!0;var iP,oP,aP=Object.create||function(t,e){var n;return null!==t?(tP.prototype=dA(t),n=new tP,tP.prototype=null,n[$D]=t):n=rP(),void 0===e?n:JD(n,e)},sP=qC.RegExp,lP=XC((function(){var t=sP(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),uP=qC.RegExp,cP=XC((function(){var t=uP("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),hP=kA.get,dP=UT("native-string-replace",String.prototype.replace),pP=RegExp.prototype.exec,fP=pP,mP=aT("".charAt),gP=aT("".indexOf),vP=aT("".replace),yP=aT("".slice),bP=(oP=/b*/g,KC(pP,iP=/a/,"a"),KC(pP,oP,"a"),0!==iP.lastIndex||0!==oP.lastIndex),xP=ZD.BROKEN_CARET,_P=void 0!==/()??/.exec("")[1];(bP||_P||xP||lP||cP)&&(fP=function(t){var e,n,r,i,o,a,s,l=this,u=hP(l),c=WD(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=KC(fP,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=xP&&l.sticky,f=KC(GD,l),m=l.source,g=0,v=c;if(p&&(f=vP(f,"y",""),-1===gP(f,"g")&&(f+="g"),v=yP(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==mP(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),_P&&(n=new RegExp("^"+m+"$(?!\\s)",f)),bP&&(r=l.lastIndex),i=KC(pP,p?n:l,v),p?i?(i.input=yP(i.input,g),i[0]=yP(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:bP&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),_P&&i&&i.length>1&&KC(dP,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=aP(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var wP=fP;mD({target:"RegExp",proto:!0,forced:/./.exec!==wP},{exec:wP});var SP=Function.prototype,MP=SP.apply,EP=SP.bind,CP=SP.call,TP="object"==typeof Reflect&&Reflect.apply||(EP?CP.bind(MP):function(){return CP.apply(MP,arguments)}),AP=$T("species"),DP=RegExp.prototype,PP=function(t,e,n,r){var i=$T(t),o=!XC((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!XC((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[AP]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=aT(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=aT(t),l=e.exec;return l===wP||l===DP.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));zA(String.prototype,t,l[0]),zA(DP,i,l[1])}r&&gA(DP[i],"sham",!0)},RP=aT("".charAt),LP=aT("".charCodeAt),OP=aT("".slice),kP=function(t){return function(e,n){var r,i,o=WD(fT(e)),a=VA(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=LP(o,a))<55296||r>56319||a+1===s||(i=LP(o,a+1))<56320||i>57343?t?RP(o,a):r:t?OP(o,a,a+2):i-56320+(r-55296<<10)+65536}},IP={codeAt:kP(!1),charAt:kP(!0)}.charAt,NP=function(t,e,n){return e+(n?IP(t,e).length:1)},BP=Math.floor,FP=aT("".charAt),zP=aT("".replace),UP=aT("".slice),jP=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,VP=/\$([$&'`]|\d{1,2})/g,HP=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=VP;return void 0!==i&&(i=VT(i),l=jP),zP(o,l,(function(o,l){var u;switch(FP(l,0)){case"$":return"$";case"&":return t;case"`":return UP(e,0,n);case"'":return UP(e,a);case"<":u=i[UP(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=BP(c/10);return 0===h?o:h<=s?void 0===r[h-1]?FP(l,1):r[h-1]+FP(l,1):o}u=r[c-1]}return void 0===u?"":u}))},WP=qC.TypeError,GP=function(t,e){var n=t.exec;if(gT(n)){var r=KC(n,t,e);return null!==r&&dA(r),r}if("RegExp"===uT(t))return KC(wP,t,e);throw WP("RegExp#exec called on incompatible receiver")},qP=$T("replace"),XP=Math.max,YP=Math.min,ZP=aT([].concat),KP=aT([].push),JP=aT("".indexOf),QP=aT("".slice),$P="$0"==="a".replace(/./,"$0"),tR=!!/./[qP]&&""===/./[qP]("a","$0");PP("replace",(function(t,e,n){var r=tR?"$":"$0";return[function(t,n){var r=fT(this),i=null==t?void 0:IT(t,qP);return i?KC(i,t,r,n):KC(e,WD(r),t,n)},function(t,i){var o=dA(this),a=WD(t);if("string"==typeof i&&-1===JP(i,r)&&-1===JP(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var l=gT(i);l||(i=WD(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=GP(o,a);if(null===d)break;if(KP(h,d),!u)break;""===WD(d[0])&&(o.lastIndex=NP(a,XA(o.lastIndex),c))}for(var p,f="",m=0,g=0;g<h.length;g++){for(var v=WD((d=h[g])[0]),y=XP(YP(VA(d.index),a.length),0),b=[],x=1;x<d.length;x++)KP(b,void 0===(p=d[x])?p:String(p));var _=d.groups;if(l){var w=ZP([v],b,y,a);void 0!==_&&KP(w,_);var S=WD(TP(i,void 0,w))}else S=HP(v,a,y,b,_,i);y>=m&&(f+=QP(a,m,y)+S,m=y+v.length)}return f+QP(a,m)}]}),!!XC((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!$P||tR);var eR=$T("unscopables"),nR=Array.prototype;null==nR[eR]&&mA.f(nR,eR,{configurable:!0,value:aP(null)});var rR=function(t){nR[eR][t]=!0},iR=BD.find,oR=!0;"find"in[]&&Array(1).find((function(){oR=!1})),mD({target:"Array",proto:!0,forced:oR},{find:function(t){return iR(this,t,arguments.length>1?arguments[1]:void 0)}}),rR("find");var aR=$T("match"),sR=function(t){var e;return vT(t)&&(void 0!==(e=t[aR])?!!e:"RegExp"==uT(t))},lR=qC.TypeError,uR=$T("species"),cR=function(t,e){var n,r=dA(t).constructor;return void 0===r||null==(n=dA(r)[uR])?e:function(t){if(RD(t))return t;throw lR(LT(t)+" is not a constructor")}(n)},hR=function(t,e,n){var r=rA(e);r in t?mA.f(t,r,eT(0,n)):t[r]=n},dR=qC.Array,pR=Math.max,fR=function(t,e,n){for(var r=YA(t),i=GA(e,r),o=GA(void 0===n?r:n,r),a=dR(pR(o-i,0)),s=0;i<o;i++,s++)hR(a,s,t[i]);return a.length=s,a},mR=ZD.UNSUPPORTED_Y,gR=Math.min,vR=[].push,yR=aT(/./.exec),bR=aT(vR),xR=aT("".slice);PP("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=WD(fT(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!sR(t))return KC(e,r,t,i);for(var o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,u+"g");(o=KC(wP,h,r))&&!((a=h.lastIndex)>c&&(bR(l,xR(r,c,o.index)),o.length>1&&o.index<r.length&&TP(vR,l,fR(o,1)),s=o[0].length,c=a,l.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!s&&yR(h,"")||bR(l,""):bR(l,xR(r,c)),l.length>i?fR(l,0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:KC(e,this,t,n)}:e,[function(e,n){var i=fT(this),o=null==e?void 0:IT(e,t);return o?KC(o,e,i,n):KC(r,WD(i),e,n)},function(t,i){var o=dA(this),a=WD(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var l=cR(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(mR?"g":"y"),h=new l(mR?"^(?:"+o.source+")":o,c),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===a.length)return null===GP(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=mR?0:f;var g,v=GP(h,mR?xR(a,f):a);if(null===v||(g=gR(XA(h.lastIndex+(mR?f:0)),a.length))===p)f=NP(a,f,u);else{if(bR(m,xR(a,p,f)),m.length===d)return m;for(var y=1;y<=v.length-1;y++)if(bR(m,v[y]),m.length===d)return m;f=p=g}}return bR(m,xR(a,p)),m}]}),!!XC((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),mR);var _R,wR="\t\n\v\f\r                　\u2028\u2029\ufeff",SR=aT("".replace),MR="["+wR+"]",ER=RegExp("^"+MR+MR+"*"),CR=RegExp(MR+MR+"*$"),TR=function(t){return function(e){var n=WD(fT(e));return 1&t&&(n=SR(n,ER,"")),2&t&&(n=SR(n,CR,"")),n}},AR={start:TR(1),end:TR(2),trim:TR(3)},DR=FA.PROPER,PR=AR.trim;function RR(t){return 0===hi("<div>"+t+"</div>").children().filter((function(t){return"BR"!==t.tagName})).length}function LR(t){return 0===t.length?"":t[0].outerHTML}function OR(t){return t.length?t[0].tagName.toLowerCase():""}function kR(t,e){for(var n="",r=(t.attr("style")||"").split(";"),i=r.length,o=0;o<i;o++){var a=r[o];if(a){var s=a.split(":");s[0].trim()===e&&(n=s[1].trim())}}return n}mD({target:"String",proto:!0,forced:(_R="trim",XC((function(){return!!wR[_R]()||"​᠎"!=="​᠎"[_R]()||DR&&wR[_R].name!==_R})))},{trim:function(){return PR(this)}}),mD({global:!0},{globalThis:qC}),Ci&&(hi.fn.css=Ci),Li&&(hi.fn.append=Li),Oi&&(hi.fn.prepend=Oi),di&&(hi.fn.addClass=di),pi&&(hi.fn.removeClass=pi),fi&&(hi.fn.hasClass=fi),bi&&(hi.fn.on=bi),xi&&(hi.fn.off=xi),Hi&&(hi.fn.focus=Hi),mi&&(hi.fn.attr=mi),gi&&(hi.fn.removeAttr=gi),Mi&&(hi.fn.hide=Mi),Ei&&(hi.fn.show=Ei),Ii&&(hi.fn.parents=Ii),vi&&(hi.fn.dataset=vi),yi&&(hi.fn.val=yi),Pi&&(hi.fn.text=Pi),Di&&(hi.fn.html=Di),Bi&&(hi.fn.children=Bi),Fi&&(hi.fn.remove=Fi),Ni&&(hi.fn.find=Ni),_i&&(hi.fn.width=_i),wi&&(hi.fn.height=wi),Ai&&(hi.fn.filter=Ai),zi&&(hi.fn.empty=zi);var IR={selector:"p",parseElemHtml:function(t,e,n){var r=hi(t);return 0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]),{type:"paragraph",children:e}}},NR=function(t,e){return NR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},NR(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function BR(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}NR(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var FR=function(){return FR=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},FR.apply(this,arguments)};function zR(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function UR(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function jR(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function VR(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function HR(t){var e=VR(ue.nodes(t,{match:function(e){return t.children[0]===e},mode:"highest"}),1),n=e[0];if(null==n)return!1;var r=n[0];if(!re.isElement(r))return!1;if("paragraph"===r.type)return!1;if(""!==fe.string(r))return!1;var i=r.children,o=void 0===i?[]:i;return!!ke.isText(o[0])&&($e.setNodes(t,{type:"paragraph"}),!0)}var WR={renderElems:[FC],elemsToHtml:[zC],parseElemsHtml:[IR],editorPlugin:function(t){var e=t.deleteBackward,n=t.deleteForward;t.insertText,t.insertBreak;var r=t;return r.deleteBackward=function(t){HR(r)||e(t)},r.deleteForward=function(t){HR(r)||n(t)},r}},GR=/"/g,qR=aT("".replace),XR=function(t,e,n,r){var i=WD(fT(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+qR(WD(r),GR,"&quot;")+'"'),o+">"+i+"</"+e+">"},YR=function(t){return XC((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))};function ZR(t,e){var n=e,r=t,i=r.bold,o=r.italic,a=r.underline;return i&&(n="<strong>"+n+"</strong>"),r.code&&(n="<code>"+n+"</code>"),o&&(n="<em>"+n+"</em>"),a&&(n="<u>"+n+"</u>"),r.through&&(n="<s>"+n+"</s>"),r.sub&&(n="<sub>"+n+"</sub>"),r.sup&&(n="<sup>"+n+"</sup>"),n}function KR(t,e){return 0!==t.length&&(!!t[0].matches(e)||t.find(e).length>0)}mD({target:"String",proto:!0,forced:YR("bold")},{bold:function(){return XR(this,"b","","")}}),mD({target:"String",proto:!0,forced:YR("italics")},{italics:function(){return XR(this,"i","","")}}),mD({target:"String",proto:!0,forced:YR("sub")},{sub:function(){return XR(this,"sub","","")}}),mD({target:"String",proto:!0,forced:YR("sup")},{sup:function(){return XR(this,"sup","","")}});var JR={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},QR=aA("span").classList,$R=QR&&QR.constructor&&QR.constructor.prototype,tL=$R===Object.prototype?void 0:$R,eL=function(t,e){var n=[][t];return!!n&&XC((function(){n.call(null,e||function(){throw 1},1)}))},nL=BD.forEach,rL=eL("forEach")?[].forEach:function(t){return nL(this,t,arguments.length>1?arguments[1]:void 0)},iL=function(t){if(t&&t.forEach!==rL)try{gA(t,"forEach",rL)}catch(Cut){t.forEach=rL}};for(var oL in JR)JR[oL]&&iL(qC[oL]&&qC[oL].prototype);function aL(t,e){return null==t.selection||!!VR(ue.nodes(t,{match:function(e){return"pre"===Bx.getNodeType(e)||!!ue.isVoid(t,e)},universal:!0}),1)[0]}function sL(t,e){Object.keys(e).forEach((function(e){"text"!==e&&ue.removeMark(t,e)}))}iL(tL),mD({target:"Object",stat:!0,forced:XC((function(){KD(1)}))},{keys:function(t){return KD(VT(t))}});var lL=function(){function t(){this.marksNeedToRemove=[],this.tag="button"}return t.prototype.getValue=function(t){var e=this.mark,n=ue.marks(t);return n?n[e]:!!VR(ue.nodes(t,{match:function(t){return!0===t[e]}}),1)[0]},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){return aL(t,this.mark)},t.prototype.exec=function(t,e){var n=this.mark,r=this.marksNeedToRemove;e?t.removeMark(n):(t.addMark(n,!0),r&&r.forEach((function(e){return t.removeMark(e)})))},t}(),uL='<svg viewBox="0 0 1024 1024"><path d="M707.872 484.64A254.88 254.88 0 0 0 768 320c0-141.152-114.848-256-256-256H192v896h384c141.152 0 256-114.848 256-256a256.096 256.096 0 0 0-124.128-219.36zM384 192h101.504c55.968 0 101.504 57.408 101.504 128s-45.536 128-101.504 128H384V192z m159.008 640H384v-256h159.008c58.464 0 106.016 57.408 106.016 128s-47.552 128-106.016 128z"></path></svg>',cL='<svg viewBox="0 0 1024 1024"><path d="M704 64l128 0 0 416c0 159.072-143.264 288-320 288s-320-128.928-320-288l0-416 128 0 0 416c0 40.16 18.24 78.688 51.36 108.512 36.896 33.216 86.848 51.488 140.64 51.488s103.744-18.304 140.64-51.488c33.12-29.792 51.36-68.352 51.36-108.512l0-416zM192 832l640 0 0 128-640 0z"></path></svg>',hL='<svg viewBox="0 0 1024 1024"><path d="M896 64v64h-128L448 896h128v64H128v-64h128L576 128h-128V64z"></path></svg>',dL='<svg viewBox="0 0 1024 1024"><path d="M1024 512v64h-234.496c27.52 38.496 42.496 82.688 42.496 128 0 70.88-36.672 139.04-100.576 186.976C672.064 935.488 594.144 960 512 960s-160.064-24.512-219.424-69.024C228.64 843.04 192 774.88 192 704h128c0 69.376 87.936 128 192 128s192-58.624 192-128-87.936-128-192-128H0v-64h299.52a385.984 385.984 0 0 1-6.944-5.024C228.64 459.04 192 390.88 192 320s36.672-139.04 100.576-186.976C351.936 88.512 429.856 64 512 64s160.064 24.512 219.424 69.024C795.328 180.96 832 249.12 832 320h-128c0-69.376-87.936-128-192-128s-192 58.624-192 128 87.936 128 192 128c78.976 0 154.048 22.688 212.48 64H1024z"></path></svg>',pL='<svg viewBox="0 0 1024 1024"><path d="M576 736l96 96 320-320L672 192l-96 96 224 224zM448 288l-96-96L32 512l320 320 96-96-224-224z"></path></svg>',fL='<svg viewBox="0 0 1024 1024"><path d="M864 0a160 160 0 0 1 128 256l-64 64-224-224 64-64c26.752-20.096 59.968-32 96-32zM64 736l-64 288 288-64 592-592-224-224L64 736z m651.584-372.416l-448 448-55.168-55.168 448-448 55.168 55.168z"></path></svg>',mL='<svg viewBox="0 0 1024 1024"><path d="M924.402464 1023.068211H0.679665V99.345412h461.861399v98.909208H99.596867v725.896389h725.896389V561.206811h98.909208z" p-id="10909"></path><path d="M930.805104 22.977336l69.965436 69.965436-453.492405 453.492404-69.965435-69.901489z" p-id="10910"></path><path d="M1022.464381 304.030081h-98.917201V99.345412H709.230573V0.428211h313.233808z"></path></svg>',gL='<svg viewBox="0 0 1024 1024"><path d="M64 864h896v96H64zM360.58 576h302.85l81.53 224h102.16L579.24 64H444.77L176.89 800h102.16l81.53-224zM512 159.96L628.49 480H395.52L512 159.96z"></path></svg>',vL='<svg viewBox="0 0 1024 1024"><path d="M510.030769 315.076923l84.676923 196.923077h-177.230769l76.8-196.923077h15.753846zM945.230769 157.538462v708.923076c0 43.323077-35.446154 78.769231-78.769231 78.769231H157.538462c-43.323077 0-78.769231-35.446154-78.769231-78.769231V157.538462c0-43.323077 35.446154-78.769231 78.769231-78.769231h708.923076c43.323077 0 78.769231 35.446154 78.769231 78.769231z m-108.307692 643.938461L600.615385 216.615385c-5.907692-11.815385-15.753846-19.692308-29.538462-19.692308h-139.815385c-11.815385 0-23.630769 7.876923-27.56923 19.692308l-216.615385 584.861538c-3.938462 11.815385 3.938462 25.6 17.723077 25.6h80.738462c11.815385 0 23.630769-9.846154 27.56923-21.661538l63.015385-175.261539h263.876923l68.923077 175.261539c3.938462 11.815385 15.753846 21.661538 27.569231 21.661538h80.738461c13.784615 0 23.630769-13.784615 19.692308-25.6z"></path></svg>',yL='<svg viewBox="0 0 1024 1024"><path d="M64 512h384v128h-128V1024h-128V640h-128z m896-256H708.2496v768h-136.4992V256H320V128h640z"></path></svg>',bL='<svg viewBox="0 0 1024 1024"><path d="M956.788364 152.110545h-24.110546l23.924364 9.029819 0.186182 121.018181h-65.070546l-86.574545-130.048H566.551273v650.14691l130.048 64.977454v65.163636h-390.050909v-65.163636l129.954909-64.977454V152.110545H198.283636L111.429818 282.065455H46.545455V69.259636C46.545455 33.792 82.664727 22.062545 98.955636 22.062545h812.683637c23.738182 0 45.056 15.173818 45.056 41.053091V169.425455v-17.221819z"></path></svg>',xL='<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m384 192h640v128H384z m0 192h640v128H384z m0 192h640v128H384zM0 832h1024v128H0z m256-512v384l-256-192z"></path></svg>',_L='<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m384 192h640v128H384z m0 192h640v128H384z m0 192h640v128H384zM0 832h1024v128H0z m0-128V320l256 192z"></path></svg>',wL='<svg viewBox="0 0 1024 1024"><path d="M768 793.6v102.4H51.2v-102.4h716.8z m204.8-230.4v102.4H51.2v-102.4h921.6z m-204.8-230.4v102.4H51.2v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',SL='<svg viewBox="0 0 1024 1024"><path d="M972.8 793.6v102.4H256v-102.4h716.8z m0-230.4v102.4H51.2v-102.4h921.6z m0-230.4v102.4H256v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',ML='<svg viewBox="0 0 1024 1024"><path d="M870.4 793.6v102.4H153.6v-102.4h716.8z m102.4-230.4v102.4H51.2v-102.4h921.6z m-102.4-230.4v102.4H153.6v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',EL='<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m0 192h1024v128H0z m0 192h1024v128H0z m0 192h1024v128H0z m0 192h1024v128H0z"></path></svg>',CL='<svg viewBox="0 0 1024 1024"><path d="M768 206.016v50.016h128v64h-192V174.016l128-60V64h-128V0h192v146.016zM676 256h-136L352 444 164 256H28l256 256-256 256h136L352 580 540 768h136l-256-256z"></path></svg>',TL='<svg viewBox="0 0 1024 1024"><path d="M768 910.016v50.016h128v64h-192v-146.016l128-60V768h-128v-64h192v146.016zM676 256h-136L352 444 164 256H28l256 256-256 256h136L352 580 540 768h136l-256-256z"></path></svg>',AL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="bold",e.title=IC("textStyle.bold"),e.iconSvg=uL,e.hotkey="mod+b",e}return BR(e,t),e}(lL),DL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="code",e.title=IC("textStyle.code"),e.iconSvg=pL,e.hotkey="mod+e",e}return BR(e,t),e}(lL),PL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="italic",e.title=IC("textStyle.italic"),e.iconSvg=hL,e.hotkey="mod+i",e}return BR(e,t),e}(lL),RL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="through",e.title=IC("textStyle.through"),e.iconSvg=dL,e.hotkey="mod+shift+x",e}return BR(e,t),e}(lL),LL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="underline",e.title=IC("textStyle.underline"),e.iconSvg=cL,e.hotkey="mod+u",e}return BR(e,t),e}(lL),OL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="sub",e.marksNeedToRemove=["sup"],e.title=IC("textStyle.sub"),e.iconSvg=TL,e.hotkey="",e}return BR(e,t),e}(lL),kL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mark="sup",e.marksNeedToRemove=["sub"],e.title=IC("textStyle.sup"),e.iconSvg=CL,e.hotkey="",e}return BR(e,t),e}(lL),IL=function(){function t(){this.title=IC("textStyle.clear"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M969.382408 288.738615l-319.401123-270.852152a67.074236 67.074236 0 0 0-96.459139 5.74922l-505.931379 574.922021a68.35184 68.35184 0 0 0-17.886463 47.910169 74.101061 74.101061 0 0 0 24.274486 47.910168l156.50655 132.232065h373.060512L975.131628 383.281347a67.074236 67.074236 0 0 0-5.74922-96.459139z m-440.134747 433.746725H264.144729l-90.071117-78.572676c-5.74922-5.74922-12.137243-12.137243-12.137243-17.886463a36.411728 36.411728 0 0 1 5.749221-24.274485l210.804741-240.828447 265.102932 228.691204z m-439.495945 180.781036h843.218964a60.047411 60.047411 0 1 1 0 120.733624H89.751716a60.047411 60.047411 0 1 1 0-120.733624z m0 0"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return aL(t)},t.prototype.exec=function(t,e){var n,r,i=ue.nodes(t,{match:function(t){return ke.isText(t)},universal:!0});try{for(var o=jR(i),a=o.next();!a.done;a=o.next())sL(t,a.value[0])}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t}(),NL={renderStyle:function(t,e){var n=t,r=n.bold,i=n.italic,o=n.underline,a=n.code,s=n.through,l=n.sub,u=n.sup,c=e;return r&&(c=qa("strong",null,c)),a&&(c=qa("code",null,c)),i&&(c=qa("em",null,c)),o&&(c=qa("u",null,c)),s&&(c=qa("s",null,c)),l&&(c=qa("sub",null,c)),u&&(c=qa("sup",null,c)),c},menus:[{key:"bold",factory:function(){return new AL}},{key:"underline",factory:function(){return new LL}},{key:"italic",factory:function(){return new PL}},{key:"through",factory:function(){return new RL}},{key:"code",factory:function(){return new DL}},{key:"sub",factory:function(){return new OL}},{key:"sup",factory:function(){return new kL}},{key:"clearStyle",factory:function(){return new IL}}],styleToHtml:function(t,e){if(!ke.isText(t))return e;if(RR(e))return ZR(t,e);var n=hi(e);if("br"===OR(n))return ZR(t,"<br>");var r=n.html();return r=ZR(t,r),n.html(r),LR(n)},parseStyleHtml:function(t,e,n){var r=hi(t);if(!ke.isText(e))return e;var i=e;return KR(r,"b,strong")&&(i.bold=!0),KR(r,"i,em")&&(i.italic=!0),KR(r,"u")&&(i.underline=!0),KR(r,"s,strike")&&(i.through=!0),KR(r,"sub")&&(i.sub=!0),KR(r,"sup")&&(i.sup=!0),KR(r,"code")&&(i.code=!0),i}};function BL(t){return function(e,n,r){return qa("h"+t,null,n)}}var FL={type:"header1",renderElem:BL(1)},zL={type:"header2",renderElem:BL(2)},UL={type:"header3",renderElem:BL(3)},jL={type:"header4",renderElem:BL(4)},VL={type:"header5",renderElem:BL(5)},HL=FA.PROPER,WL=RegExp.prototype,GL=WL.toString,qL=aT(GD),XL=XC((function(){return"/a/b"!=GL.call({source:"a",flags:"b"})})),YL=HL&&"toString"!=GL.name;(XL||YL)&&zA(RegExp.prototype,"toString",(function(){var t=dA(this),e=WD(t.source),n=t.flags;return"/"+e+"/"+WD(void 0===n&&xT(WL,t)&&!("flags"in WL)?qL(t):n)}),{unsafe:!0});var ZL,KL=qC.TypeError,JL=function(t){if(sR(t))throw KL("The method doesn't accept regular expressions");return t},QL=$T("match"),$L=function(t){var e=/./;try{"/./"[t](e)}catch(f){try{return e[QL]=!1,"/./"[t](e)}catch(t){}}return!1},tO=uA.f,eO=aT("".startsWith),nO=aT("".slice),rO=Math.min,iO=$L("startsWith");function oO(t){var e=VR(ue.nodes(t,{match:function(t){return Bx.getNodeType(t).startsWith("header")},universal:!0}),1),n=e[0];if(null==n)return"paragraph";var r=VR(n,1)[0];return Bx.getNodeType(r)}function aO(t){return null==t.selection||!VR(ue.nodes(t,{match:function(t){var e=Bx.getNodeType(t);return"paragraph"===e||!!e.startsWith("header")},universal:!0,mode:"highest"}),1)[0]}function sO(t,e){e&&$e.setNodes(t,{type:e})}mD({target:"String",proto:!0,forced:!(!iO&&(ZL=tO(String.prototype,"startsWith"),ZL&&!ZL.writable))&&!iO},{startsWith:function(t){var e=WD(fT(this));JL(t);var n=XA(rO(arguments.length>1?arguments[1]:void 0,e.length)),r=WD(t);return eO?eO(e,r,n):nO(e,n,n+r.length)===r}});var lO=function(){function t(){this.title=IC("header.title"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M960 960c-51.2 0-102.4-3.2-153.6-3.2-51.2 0-99.2 3.2-150.4 3.2-19.2 0-28.8-22.4-28.8-38.4 0-51.2 57.6-28.8 86.4-48 19.2-12.8 19.2-60.8 19.2-80v-224-19.2c-9.6-3.2-19.2-3.2-28.8-3.2H320c-9.6 0-19.2 0-28.8 3.2V780.8c0 22.4 0 80 22.4 92.8 28.8 19.2 96-6.4 96 44.8 0 16-9.6 41.6-28.8 41.6-54.4 0-105.6-3.2-160-3.2-48 0-96 3.2-147.2 3.2-19.2 0-28.8-22.4-28.8-38.4 0-51.2 51.2-28.8 80-48 19.2-12.8 19.2-60.8 19.2-83.2V294.4c0-28.8 3.2-115.2-22.4-131.2-25.6-16-86.4 9.6-86.4-41.6 0-16 6.4-41.6 28.8-41.6 51.2 0 105.6 3.2 156.8 3.2 48 0 96-3.2 144-3.2 19.2 0 28.8 22.4 28.8 41.6 0 48-57.6 25.6-83.2 41.6-19.2 12.8-19.2 73.6-19.2 92.8v201.6c6.4 3.2 16 3.2 22.4 3.2h400c6.4 0 12.8 0 22.4-3.2V256c0-22.4 0-80-19.2-92.8-28.8-16-86.4 6.4-86.4-41.6 0-16 9.6-41.6 28.8-41.6 51.2 0 99.2 3.2 150.4 3.2 48 0 99.2-3.2 147.2-3.2 19.2 0 28.8 22.4 28.8 41.6 0 51.2-57.6 25.6-86.4 41.6-19.2 12.8-19.2 70.4-19.2 92.8v537.6c0 19.2 0 67.2 19.2 80 28.8 19.2 89.6-6.4 89.6 44.8 0 19.2-6.4 41.6-28.8 41.6z"></path></svg>',this.tag="select",this.width=60}return t.prototype.getOptions=function(t){var e=[{value:"header1",text:"H1",styleForRenderMenuList:{"font-size":"32px","font-weight":"bold"}},{value:"header2",text:"H2",styleForRenderMenuList:{"font-size":"24px","font-weight":"bold"}},{value:"header3",text:"H3",styleForRenderMenuList:{"font-size":"18px","font-weight":"bold"}},{value:"header4",text:"H4",styleForRenderMenuList:{"font-size":"16px","font-weight":"bold"}},{value:"header5",text:"H5",styleForRenderMenuList:{"font-size":"13px","font-weight":"bold"}},{value:"paragraph",text:IC("header.text")}],n=this.getValue(t).toString();return e.forEach((function(t){t.value===n?t.selected=!0:delete t.selected})),e},t.prototype.isActive=function(t){return!1},t.prototype.getValue=function(t){return oO(t)},t.prototype.isDisabled=function(t){return aO(t)},t.prototype.exec=function(t,e){sO(t,e.toString())},t}(),uO=function(){function t(){this.tag="button"}return t.prototype.getValue=function(t){return oO(t)},t.prototype.isActive=function(t){return this.getValue(t)===this.type},t.prototype.isDisabled=function(t){return aO(t)},t.prototype.exec=function(t,e){var n=this.type;sO(t,e===n?"paragraph":n)},t}(),cO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="H1",e.type="header1",e}return BR(e,t),e}(uO),hO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="H2",e.type="header2",e}return BR(e,t),e}(uO),dO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="H3",e.type="header3",e}return BR(e,t),e}(uO),pO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="H4",e.type="header4",e}return BR(e,t),e}(uO),fO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="H5",e.type="header5",e}return BR(e,t),e}(uO),mO={key:"headerSelect",factory:function(){return new lO}},gO={key:"header1",factory:function(){return new cO}},vO={key:"header2",factory:function(){return new hO}},yO={key:"header3",factory:function(){return new dO}},bO={key:"header4",factory:function(){return new pO}},xO={key:"header5",factory:function(){return new fO}};function _O(t){return function(e,n){return"<h"+t+">"+n+"</h"+t+">"}}function wO(t){return function(e,n,r){var i=hi(e);return 0===(n=n.filter((function(t){return!!ke.isText(t)||!!r.isInline(t)}))).length&&(n=[{text:i.text().replace(/\s+/gm," ")}]),{type:"header"+t,children:n}}}var SO={renderElems:[FL,zL,UL,jL,VL],elemsToHtml:[{type:"header1",elemToHtml:_O(1)},{type:"header2",elemToHtml:_O(2)},{type:"header3",elemToHtml:_O(3)},{type:"header4",elemToHtml:_O(4)},{type:"header5",elemToHtml:_O(5)}],parseElemsHtml:[{selector:"h1",parseElemHtml:wO(1)},{selector:"h2",parseElemHtml:wO(2)},{selector:"h3",parseElemHtml:wO(3)},{selector:"h4",parseElemHtml:wO(4)},{selector:"h5",parseElemHtml:wO(5)}],menus:[mO,gO,vO,yO,bO,xO],editorPlugin:function(t){var e=t.insertBreak;t.insertNode;var n=t;return n.insertBreak=function(){var r=VR(ue.nodes(n,{match:function(t){return Bx.getNodeType(t).startsWith("header")},universal:!0}),1)[0];r&&Bx.isSelectionAtLineEnd(t,r[1])?$e.insertNodes(n,{type:"paragraph",children:[{text:""}]},{mode:"highest"}):e()},n}},MO=Object.assign,EO=Object.defineProperty,CO=aT([].concat),TO=!MO||XC((function(){if(YC&&1!==MO({b:1},MO(EO({},"a",{enumerable:!0,get:function(){EO(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=MO({},t)[n]||KD(MO({},e)).join("")!=r}))?function(t,e){for(var n=VT(t),r=arguments.length,i=1,o=rD.f,a=tT.f;r>i;)for(var s,l=dT(arguments[i++]),u=o?CO(KD(l),o(l)):KD(l),c=u.length,h=0;c>h;)s=u[h++],YC&&!KC(a,l,s)||(n[s]=l[s]);return n}:MO;function AO(t,e){null==t.data&&(t.data={});var n=t.data;null==n.style&&(n.style={}),Object.assign(n.style,e)}mD({target:"Object",stat:!0,forced:Object.assign!==TO},{assign:TO});var DO={selector:"font",preParseHtml:function(t){var e=hi(t);if("font"!==OR(e))return t;var n=e.attr("color")||"";return n&&(e.removeAttr("color"),e.css("color",n)),e[0]}},PO=function(){function t(){this.tag="button",this.showDropPanel=!0,this.$content=null}return t.prototype.exec=function(t,e){},t.prototype.getValue=function(t){var e=this.mark,n=ue.marks(t);return n&&n[e]?n[e]:""},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){return null==t.selection||!!VR(ue.nodes(t,{match:function(e){return"pre"===Bx.getNodeType(e)||!!ue.isVoid(t,e)},universal:!0}),1)[0]},t.prototype.getPanelContentElem=function(t){var e=this.mark;if(null==this.$content){var n=hi('<ul class="w-e-panel-content-color"></ul>');n.on("click","li",(function(n){var r=n.target;if(null!=r&&(n.preventDefault(),null!=t.selection)){var i=hi(r).attr("data-value");"0"===i?ue.removeMark(t,e):ue.addMark(t,e,i)}})),this.$content=n}var r=this.$content;if(null==r)return document.createElement("ul");r.empty();var i=this.getValue(t),o=t.getMenuConfig(e).colors;(void 0===o?[]:o).forEach((function(t){var e=hi('<div class="color-block" data-value="'+t+'"></div>');e.css("background-color",t);var n=hi('<li data-value="'+t+'"></li>');i===t&&n.addClass("active"),n.append(e),r.append(n)}));var a="";"color"===e&&(a=IC("color.default")),"bgColor"===e&&(a=IC("color.clear"));var s=hi('\n      <li data-value="0" class="clear">\n        <svg viewBox="0 0 1024 1024"><path d="M236.8 128L896 787.2V128H236.8z m614.4 704L192 172.8V832h659.2zM192 64h704c38.4 0 64 25.6 64 64v704c0 38.4-25.6 64-64 64H192c-38.4 0-64-25.6-64-64V128c0-38.4 25.6-64 64-64z"></path></svg>\n        '+a+"\n      </li>\n    ");return r.prepend(s),r[0]},t}(),RO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("color.color"),e.iconSvg=gL,e.mark="color",e}return BR(e,t),e}(PO),LO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("color.bgColor"),e.iconSvg=vL,e.mark="bgColor",e}return BR(e,t),e}(PO),OO=["rgb(0, 0, 0)","rgb(38, 38, 38)","rgb(89, 89, 89)","rgb(140, 140, 140)","rgb(191, 191, 191)","rgb(217, 217, 217)","rgb(233, 233, 233)","rgb(245, 245, 245)","rgb(250, 250, 250)","rgb(255, 255, 255)","rgb(225, 60, 57)","rgb(231, 95, 51)","rgb(235, 144, 58)","rgb(245, 219, 77)","rgb(114, 192, 64)","rgb(89, 191, 192)","rgb(66, 144, 247)","rgb(54, 88, 226)","rgb(106, 57, 201)","rgb(216, 68, 147)","rgb(251, 233, 230)","rgb(252, 237, 225)","rgb(252, 239, 212)","rgb(252, 251, 207)","rgb(231, 246, 213)","rgb(218, 244, 240)","rgb(217, 237, 250)","rgb(224, 232, 250)","rgb(237, 225, 248)","rgb(246, 226, 234)","rgb(255, 163, 158)","rgb(255, 187, 150)","rgb(255, 213, 145)","rgb(255, 251, 143)","rgb(183, 235, 143)","rgb(135, 232, 222)","rgb(145, 213, 255)","rgb(173, 198, 255)","rgb(211, 173, 247)","rgb(255, 173, 210)","rgb(255, 77, 79)","rgb(255, 122, 69)","rgb(255, 169, 64)","rgb(255, 236, 61)","rgb(115, 209, 61)","rgb(54, 207, 201)","rgb(64, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 171)","rgb(207, 19, 34)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 6)","rgb(56, 158, 13)","rgb(8, 151, 156)","rgb(9, 109, 217)","rgb(29, 57, 196)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(130, 0, 20)","rgb(135, 20, 0)","rgb(135, 56, 0)","rgb(97, 71, 0)","rgb(19, 82, 0)","rgb(0, 71, 79)","rgb(0, 58, 140)","rgb(6, 17, 120)","rgb(34, 7, 94)","rgb(120, 6, 80)"],kO={renderStyle:function(t,e){var n=t,r=n.color,i=n.bgColor,o=e;return r&&AO(o,{color:r}),i&&AO(o,{backgroundColor:i}),o},styleToHtml:function(t,e){if(!ke.isText(t))return e;var n,r=t,i=r.color,o=r.bgColor;return i||o?((RR(e)||"span"!==OR(n=hi(e)))&&(n=hi("<span>"+e+"</span>")),i&&n.css("color",i),o&&n.css("background-color",o),LR(n)):e},preParseHtml:[DO],parseStyleHtml:function(t,e,n){var r=hi(t);if(!ke.isText(e))return e;var i=e,o=kR(r,"color");o&&(i.color=o);var a=kR(r,"background-color");return a&&(i.bgColor=a),i},menus:[{key:"color",factory:function(){return new RO},config:{colors:OO}},{key:"bgColor",factory:function(){return new LO},config:{colors:OO}}]},IO=function(t){if("string"!=typeof t)return!1;var e=t.match(NO);if(!e)return!1;var n=e[1];return!!n&&!(!BO.test(n)&&!FO.test(n))},NO=/^(?:\w+:)?\/\/(\S+)$/,BO=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,FO=/^[^\s\.]+\.\S{2,}$/,zO=KA.includes;function UO(t){return void 0===t&&(t="r"),t+"-"+Eo()}function jO(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function VO(t,e,n,r){return zR(this,void 0,void 0,(function(){var i,o;return UR(this,(function(a){switch(a.label){case 0:return(i=e.getMenuConfig(t).checkLink)?[4,i(n,r)]:[3,2];case 1:if("string"==typeof(o=a.sent()))return e.alert(o,"error"),[2,!1];if(null==o)return[2,!1];a.label=2;case 2:return[2,!0]}}))}))}function HO(t,e,n){return zR(this,void 0,void 0,(function(){var r;return UR(this,(function(i){switch(i.label){case 0:return(r=e.getMenuConfig(t).parseLinkUrl)?[4,r(n)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,n]}}))}))}function WO(t){return null==t.selection||!!Bx.getSelectedElems(t).some((function(e){var n=e.type;return!!t.isVoid(e)||!!["pre","code","link"].includes(n)||void 0}))}function GO(t,e){return{type:"link",url:jO(t),children:e?[{text:e}]:[]}}function qO(t,e,n){return zR(this,void 0,void 0,(function(){var r,i,o;return UR(this,(function(a){switch(a.label){case 0:return n?(e||(e=n),t.restoreSelection(),WO(t)?[2]:[4,VO("insertLink",t,e,n)]):[2];case 1:return a.sent()?[4,HO("insertLink",t,n)]:[2];case 2:return r=a.sent(),null==(i=t.selection)||(Te.isCollapsed(i)?(t.insertText(" "),o=GO(r,e),$e.insertNodes(t,o),t.insertFragment([{text:" "}])):ue.string(t,i)!==e?(t.deleteFragment(),o=GO(r,e),$e.insertNodes(t,o)):(o=GO(r),$e.wrapNodes(t,o,{split:!0}),$e.collapse(t,{edge:"end"}))),[2]}}))}))}mD({target:"Array",proto:!0},{includes:function(t){return zO(this,t,arguments.length>1?arguments[1]:void 0)}}),rR("includes");var XO={type:"link",renderElem:function(t,e,n){var r=t,i=r.url,o=r.target;return qa("a",{href:i,target:void 0===o?"_blank":o},e)}},YO={type:"link",elemToHtml:function(t,e){var n=t,r=n.url,i=n.target;return'<a href="'+r+'" target="'+(void 0===i?"_blank":i)+'">'+e+"</a>"}},ZO={selector:"a",parseElemHtml:function(t,e,n){var r=hi(t);return 0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]),{type:"link",url:r.attr("href")||"",target:r.attr("target")||"",children:e}}};function KO(){return UO("w-e-insert-link")}var JO=function(){function t(){this.title=IC("link.insert"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M440.224 635.776a51.84 51.84 0 0 1-36.768-15.232c-95.136-95.136-95.136-249.92 0-345.056l192-192C641.536 37.408 702.816 12.032 768 12.032s126.432 25.376 172.544 71.456c95.136 95.136 95.136 249.92 0 345.056l-87.776 87.776a51.968 51.968 0 1 1-73.536-73.536l87.776-87.776a140.16 140.16 0 0 0 0-197.984c-26.432-26.432-61.6-40.992-99.008-40.992s-72.544 14.56-99.008 40.992l-192 192a140.16 140.16 0 0 0 0 197.984 51.968 51.968 0 0 1-36.768 88.768z"></path><path d="M256 1012a242.4 242.4 0 0 1-172.544-71.456c-95.136-95.136-95.136-249.92 0-345.056l87.776-87.776a51.968 51.968 0 1 1 73.536 73.536l-87.776 87.776a140.16 140.16 0 0 0 0 197.984c26.432 26.432 61.6 40.992 99.008 40.992s72.544-14.56 99.008-40.992l192-192a140.16 140.16 0 0 0 0-197.984 51.968 51.968 0 1 1 73.536-73.536c95.136 95.136 95.136 249.92 0 345.056l-192 192A242.4 242.4 0 0 1 256 1012z"></path></svg>',this.tag="button",this.showModal=!0,this.modalWidth=300,this.$content=null,this.textInputId=KO(),this.urlInputId=KO(),this.buttonId=KO()}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){return WO(t)},t.prototype.getModalPositionNode=function(t){return null},t.prototype.getModalContentElem=function(t){var e=t.selection,n=this,r=n.textInputId,i=n.urlInputId,o=n.buttonId,a=VR(gE(IC("link.text"),r),2),s=a[0],l=a[1],u=hi(l),c=VR(gE(IC("link.url"),i),2),h=c[0],d=c[1],p=hi(d),f=VR(vE(o,IC("common.ok")),1)[0];if(null==this.$content){var m=hi("<div></div>");m.on("click","#"+o,(function(e){e.preventDefault();var n=m.find("#"+r).val(),o=m.find("#"+i).val();qO(t,n,o),t.hidePanelOrModal()})),this.$content=m}var g=this.$content;if(g.empty(),g.append(s),g.append(h),g.append(f),null==e||Te.isCollapsed(e))u.val("");else{var v=ue.string(t,e);u.val(v)}return p.val(""),setTimeout((function(){u.focus()})),g[0]},t}();function QO(){return UO("w-e-update-link")}var $O=function(){function t(){this.title=IC("link.edit"),this.iconSvg=fL,this.tag="button",this.showModal=!0,this.modalWidth=300,this.$content=null,this.urlInputId=QO(),this.buttonId=QO()}return t.prototype.getSelectedLinkElem=function(t){var e=Bx.getSelectedNodeByType(t,"link");return null==e?null:e},t.prototype.getValue=function(t){var e=this.getSelectedLinkElem(t);return e&&e.url||""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){return null==t.selection||null==this.getSelectedLinkElem(t)},t.prototype.getModalPositionNode=function(t){return Bx.getSelectedNodeByType(t,"link")},t.prototype.getModalContentElem=function(t){var e=this.urlInputId,n=this.buttonId,r=VR(gE(IC("link.url"),e),2),i=r[0],o=r[1],a=hi(o),s=VR(vE(n,IC("common.ok")),1)[0];if(null==this.$content){var l=hi("<div></div>");l.on("click","button",(function(n){n.preventDefault(),t.restoreSelection();var r=Bx.getSelectedNodeByType(t,"link"),i=r?fe.string(r):"",o=l.find("#"+e).val();!function(t,e,n){zR(this,void 0,void 0,(function(){var r,i;return UR(this,(function(o){switch(o.label){case 0:return n?[4,VO("editLink",t,e,n)]:[2];case 1:return o.sent()?[4,HO("editLink",t,n)]:[2];case 2:return r=o.sent(),i={url:jO(r)},$e.setNodes(t,i,{match:function(t){return Bx.checkNodeType(t,"link")}}),[2]}}))}))}(t,i,o),t.hidePanelOrModal()})),this.$content=l}var u=this.$content;u.empty(),u.append(i),u.append(s);var c=this.getValue(t);return a.val(c),setTimeout((function(){a.focus()})),u[0]},t}(),tk=function(){function t(){this.title=IC("link.unLink"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M608.16328 811.815036c9.371954 9.371954 9.371954 24.56788 0 33.941834l-89.347563 89.347564c-118.525421 118.523421-311.38448 118.531421-429.919901 0-118.527421-118.529421-118.527421-311.39048 0-429.917901l89.349564-89.349563c9.371954-9.371954 24.56788-9.371954 33.941834 0l79.195613 79.195613c9.371954 9.371954 9.371954 24.56788 0 33.941834l-89.349563 89.347564c-56.143726 56.145726-56.143726 147.49928 0 203.645005 56.143726 56.143726 147.49928 56.145726 203.647005 0l89.347564-89.347563c9.371954-9.371954 24.56788-9.371954 33.941834 0l79.193613 79.195613z m-113.135447-520.429459c9.371954 9.371954 24.56788 9.371954 33.941834 0l89.347564-89.347564c56.143726-56.149726 147.49928-56.145726 203.647006 0 56.143726 56.145726 56.143726 147.49928 0 203.645006l-89.349564 89.347564c-9.371954 9.371954-9.371954 24.56788 0 33.941834l79.195613 79.195613c9.371954 9.371954 24.56788 9.371954 33.941834 0l89.349564-89.349563c118.529421-118.529421 118.529421-311.38848 0-429.917901-118.531421-118.527421-311.38848-118.527421-429.919901 0l-89.347563 89.347564c-9.371954 9.371954-9.371954 24.56788 0 33.941834l79.193613 79.195613z m469.653707 718.556492l45.253779-45.253779c18.745908-18.745908 18.745908-49.13776 0-67.881669L127.195629 14.062931c-18.745908-18.745908-49.13776-18.745908-67.881669 0L14.058181 59.31871c-18.745908 18.745908-18.745908 49.13776 0 67.881669l882.74169 882.74169c18.745908 18.743908 49.13776 18.743908 67.881669 0z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||null==Bx.getSelectedNodeByType(t,"link")},t.prototype.exec=function(t,e){this.isDisabled(t)||$e.unwrapNodes(t,{match:function(t){return Bx.checkNodeType(t,"link")}})},t}(),ek=function(){function t(){this.title=IC("link.view"),this.iconSvg=mL,this.tag="button"}return t.prototype.getSelectedLinkElem=function(t){var e=Bx.getSelectedNodeByType(t,"link");return null==e?null:e},t.prototype.getValue=function(t){var e=this.getSelectedLinkElem(t);return e&&e.url||""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||null==this.getSelectedLinkElem(t)},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){if(!e||"string"!=typeof e)throw new Error("View link failed, link url is '"+e+"'");window.open(e,"_blank")}},t}(),nk={checkLink:function(t,e){return!0},parseLinkUrl:function(t){return t}},rk={renderElems:[XO],elemsToHtml:[YO],parseElemsHtml:[ZO],menus:[{key:"insertLink",factory:function(){return new JO},config:nk},{key:"editLink",factory:function(){return new $O},config:nk},{key:"unLink",factory:function(){return new tk}},{key:"viewLink",factory:function(){return new ek}}],editorPlugin:function(t){var e=t.isInline,n=t.insertData,r=t.normalizeNode;t.insertNode,t.insertText;var i=t;return i.isInline=function(t){return"link"===t.type||e(t)},i.insertData=function(t){var e=t.getData("text/plain");if(IO(e)){if(!WO(i)){var r=i.selection;if(null!=r){var o=ue.string(i,r);qO(i,o,e)}}}else n(t)},i.normalizeNode=function(t){var e=VR(t,2),n=e[0],o=e[1];return"link"!==Bx.getNodeType(n)?r([n,o]):""===fe.string(n)?$e.removeNodes(i,{at:o}):r([n,o])},i}},ik=aT(1..valueOf),ok=qC.RangeError,ak=qC.RangeError,sk=qC.String,lk=Math.floor,uk=aT((function(t){var e=WD(fT(this)),n="",r=VA(t);if(r<0||r==1/0)throw ok("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n})),ck=aT("".slice),hk=aT(1..toFixed),dk=function(t,e,n){return 0===e?n:e%2==1?dk(t,e-1,n*t):dk(t*t,e/2,n)},pk=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=lk(i/1e7)},fk=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=lk(r/e),r=r%e*1e7},mk=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=sk(t[e]);n=""===n?r:n+uk("0",7-r.length)+r}return n};function gk(t,e){return"w-e-image-container-"+Bx.findKey(t,e).id}function vk(t,e,n,r){var i=hi("body"),o=gk(t,e),a=r.width,s=r.height,l=0,u=0,c=0,h=!1,d=null;function p(e){d=function(){var t=hi("#"+o);if(0===t.length)throw new Error("Cannot find image container elem");return t}(),l=e;var n=d.find("img");if(0===n.length)throw new Error("Cannot find image elem");u=n.width(),c=n.height(),i.on("mousemove",f),i.on("mouseup",m);var r=Bx.getHoverbar(t);r&&r.hideAndClean()}var f=Yo((function(t){t.preventDefault();var e=t.clientX,n=u+(h?l-e:e-l),r=c*(n/u);null!=d&&(n<=15||r<=15||(d.css("width",n+"px"),d.css("height",r+"px")))}),100);function m(n){if(i.off("mousemove",f),null!=d){var r=d.width().toFixed(2),o=d.height().toFixed(2),a={style:FR(FR({},e.style),{width:r+"px",height:o+"px"})};$e.setNodes(t,a,{at:Bx.findPath(t,e)}),i.off("mouseup",m)}}var g={};return a&&(g.width=a),s&&(g.height=s),qa("div",{id:o,style:g,className:"w-e-image-container w-e-selected-image-container",on:{mousedown:function(t){var e=hi(t.target);e.hasClass("w-e-image-dragger")&&(t.preventDefault(),(e.hasClass("left-top")||e.hasClass("left-bottom"))&&(h=!0),p(t.clientX))}}},n,qa("div",{className:"w-e-image-dragger left-top"}),qa("div",{className:"w-e-image-dragger right-top"}),qa("div",{className:"w-e-image-dragger left-bottom"}),qa("div",{className:"w-e-image-dragger right-bottom"}))}mD({target:"Number",proto:!0,forced:XC((function(){return"0.000"!==hk(8e-5,3)||"1"!==hk(.9,0)||"1.25"!==hk(1.255,2)||"1000000000000000128"!==hk(0xde0b6b3a7640080,0)}))||!XC((function(){hk({})}))},{toFixed:function(t){var e,n,r,i,o=ik(this),a=VA(t),s=[0,0,0,0,0,0],l="",u="0";if(a<0||a>20)throw ak("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return sk(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*dk(2,69,1))-69)<0?o*dk(2,-e,1):o/dk(2,e,1),n*=4503599627370496,(e=52-e)>0){for(pk(s,0,n),r=a;r>=7;)pk(s,1e7,0),r-=7;for(pk(s,dk(10,r,1),0),r=e-1;r>=23;)fk(s,1<<23),r-=23;fk(s,1<<r),pk(s,1,1),fk(s,2),u=mk(s)}else pk(s,0,n),pk(s,1<<-e,0),u=mk(s)+uk("0",a);return a>0?l+((i=u.length)<=a?"0."+uk("0",a-i)+u:ck(u,0,i-a)+"."+ck(u,i-a)):l+u}});var yk={type:"image",renderElem:function(t,e,n){var r=t,i=r.src,o=r.alt,a=void 0===o?"":o,s=r.href,l=void 0===s?"":s,u=r.style,c=void 0===u?{}:u,h=c.width,d=void 0===h?"":h,p=c.height,f=void 0===p?"":p,m=Bx.isNodeSelected(n,t),g={};d&&(g.width="100%"),f&&(g.height="100%");var v=qa("img",{style:g,src:i,alt:a,"data-href":l}),y=n.isDisabled();return m&&!y?vk(n,t,v,{width:d,height:f}):function(t,e,n,r){var i=r.width,o=r.height,a={};i&&(a.width=i),o&&(a.height=o);var s=gk(t,e);return qa("div",{id:s,style:a,className:"w-e-image-container"},n)}(n,t,v,{width:d,height:f})}},bk={type:"image",elemToHtml:function(t,e){var n=t,r=n.src,i=n.alt,o=void 0===i?"":i,a=n.href,s=void 0===a?"":a,l=n.style,u=void 0===l?{}:l,c=u.width,h=void 0===c?"":c,d=u.height,p=void 0===d?"":d,f="";return h&&(f+="width: "+h+";"),p&&(f+="height: "+p+";"),'<img src="'+r+'" alt="'+o+'" data-href="'+s+'" style="'+f+'"/>'}},xk={selector:"img",parseElemHtml:function(t,e,n){var r=hi(t),i=r.attr("data-href")||"";return i=decodeURIComponent(i),{type:"image",src:r.attr("src")||"",alt:r.attr("alt")||"",href:i,style:{width:kR(r,"width"),height:kR(r,"height")},children:[{text:""}]}}};function _k(t,e,n,r,i){return void 0===r&&(r=""),void 0===i&&(i=""),zR(this,void 0,void 0,(function(){var o,a;return UR(this,(function(s){switch(s.label){case 0:return(o=e.getMenuConfig(t).checkImage)?[4,o(n,r,i)]:[3,2];case 1:if("string"==typeof(a=s.sent()))return e.alert(a,"error"),[2,!1];if(null==a)return[2,!1];s.label=2;case 2:return[2,!0]}}))}))}function wk(t,e,n){return zR(this,void 0,void 0,(function(){var r;return UR(this,(function(i){switch(i.label){case 0:return(r=e.getMenuConfig(t).parseImageSrc)?[4,r(n)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,n]}}))}))}function Sk(t,e,n,r){return void 0===n&&(n=""),void 0===r&&(r=""),zR(this,void 0,void 0,(function(){var i,o,a;return UR(this,(function(s){switch(s.label){case 0:return[4,_k("insertImage",t,e,n,r)];case 1:return s.sent()?[4,wk("insertImage",t,e)]:[2];case 2:return i=s.sent(),o={type:"image",src:jO(i),href:r,alt:n,style:{},children:[{text:""}]},null===t.selection&&t.restoreSelection(),Bx.getSelectedNodeByType(t,"image")&&t.move(1),Ek(t)||($e.insertNodes(t,o),(a=t.getMenuConfig("insertImage").onInsertedImage)&&a(o)),[2]}}))}))}function Mk(t,e,n,r,i){return void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i={}),zR(this,void 0,void 0,(function(){var o,a,s,l,u,c;return UR(this,(function(h){switch(h.label){case 0:return[4,_k("editImage",t,e,n,r)];case 1:return h.sent()?[4,wk("editImage",t,e)]:[2];case 2:return o=h.sent(),null==(a=Bx.getSelectedNodeByType(t,"image"))||(s=a.style,l={src:o,alt:n,href:r,style:FR(FR({},void 0===s?{}:s),i)},$e.setNodes(t,l,{match:function(t){return Bx.checkNodeType(t,"image")}}),u=Bx.getSelectedNodeByType(t,"image"),(c=t.getMenuConfig("editImage").onUpdatedImage)&&c(u)),[2]}}))}))}function Ek(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||!!VR(ue.nodes(t,{match:function(e){var n=Bx.getNodeType(e);return"code"===n||"pre"===n||"link"===n||"list-item"===n||!!n.startsWith("header")||"blockquote"===n||!!ue.isVoid(t,e)},universal:!0}),1)[0]}function Ck(){return UO("w-e-insert-image")}var Tk=function(){function t(){this.title=IC("image.netImage"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M959.877 128l0.123 0.123v767.775l-0.123 0.122H64.102l-0.122-0.122V128.123l0.122-0.123h895.775zM960 64H64C28.795 64 0 92.795 0 128v768c0 35.205 28.795 64 64 64h896c35.205 0 64-28.795 64-64V128c0-35.205-28.795-64-64-64zM832 288.01c0 53.023-42.988 96.01-96.01 96.01s-96.01-42.987-96.01-96.01S682.967 192 735.99 192 832 234.988 832 288.01zM896 832H128V704l224.01-384 256 320h64l224.01-192z"></path></svg>',this.tag="button",this.showModal=!0,this.modalWidth=300,this.$content=null,this.srcInputId=Ck(),this.altInputId=Ck(),this.hrefInputId=Ck(),this.buttonId=Ck()}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){return Ek(t)},t.prototype.getModalPositionNode=function(t){return null},t.prototype.getModalContentElem=function(t){var e=this,n=this,r=n.srcInputId,i=n.altInputId,o=n.hrefInputId,a=n.buttonId,s=VR(gE(IC("image.src"),r),2),l=s[0],u=s[1],c=hi(u),h=VR(gE(IC("image.desc"),i),2),d=h[0],p=h[1],f=hi(p),m=VR(gE(IC("image.link"),o),2),g=m[0],v=m[1],y=hi(v),b=VR(vE(a,IC("common.ok")),1)[0];if(null==this.$content){var x=hi("<div></div>");x.on("click","#"+a,(function(n){n.preventDefault();var a=x.find("#"+r).val().trim(),s=x.find("#"+i).val().trim(),l=x.find("#"+o).val().trim();e.insertImage(t,a,s,l),t.hidePanelOrModal()})),this.$content=x}var _=this.$content;return _.empty(),_.append(l),_.append(d),_.append(g),_.append(b),c.val(""),f.val(""),y.val(""),setTimeout((function(){c.focus()})),_[0]},t.prototype.insertImage=function(t,e,n,r){void 0===n&&(n=""),void 0===r&&(r=""),e&&(t.restoreSelection(),this.isDisabled(t)||Sk(t,e,n,r))},t}(),Ak=function(){function t(){this.title=IC("image.delete"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M826.8032 356.5312c-19.328 0-36.3776 15.6928-36.3776 35.0464v524.2624c0 19.328-16 34.56-35.328 34.56H264.9344c-19.328 0-35.5072-15.3088-35.5072-34.56V390.0416c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.6928-33.5104 35.0464V915.712c0 57.9328 44.6208 108.288 102.528 108.288H755.2c57.9328 0 108.0832-50.4576 108.0832-108.288V391.4752c-0.1024-19.2512-17.1264-34.944-36.48-34.944z" p-id="9577"></path><path d="M437.1712 775.7568V390.6048c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.616-33.5104 35.0464v385.152c0 19.328 14.1568 35.0464 33.5104 35.0464s33.5104-15.7184 33.5104-35.0464zM649.7024 775.7568V390.6048c0-19.328-17.0496-35.0464-36.3776-35.0464s-36.3776 15.616-36.3776 35.0464v385.152c0 19.328 17.0496 35.0464 36.3776 35.0464s36.3776-15.7184 36.3776-35.0464zM965.0432 217.0368h-174.6176V145.5104c0-57.9328-47.2064-101.76-104.6528-101.76h-350.976c-57.8304 0-105.3952 43.8528-105.3952 101.76v71.5264H54.784c-19.4304 0-35.0464 14.1568-35.0464 33.5104 0 19.328 15.616 33.5104 35.0464 33.5104h910.3616c19.328 0 35.0464-14.1568 35.0464-33.5104 0-19.3536-15.6928-33.5104-35.1488-33.5104z m-247.3728 0H297.3952V145.5104c0-19.328 18.2016-34.7648 37.4272-34.7648h350.976c19.1488 0 31.872 15.1296 31.872 34.7648v71.5264z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||null==Bx.getSelectedNodeByType(t,"image")},t.prototype.exec=function(t,e){this.isDisabled(t)||$e.removeNodes(t,{match:function(t){return Bx.checkNodeType(t,"image")}})},t}();function Dk(){return UO("w-e-edit-image")}var Pk=function(){function t(){this.title=IC("image.edit"),this.iconSvg=fL,this.tag="button",this.showModal=!0,this.modalWidth=300,this.$content=null,this.srcInputId=Dk(),this.altInputId=Dk(),this.hrefInputId=Dk(),this.buttonId=Dk()}return t.prototype.getValue=function(t){return""},t.prototype.getImageNode=function(t){return Bx.getSelectedNodeByType(t,"image")},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"image")},t.prototype.getModalPositionNode=function(t){return this.getImageNode(t)},t.prototype.getModalContentElem=function(t){var e=this,n=this,r=n.srcInputId,i=n.altInputId,o=n.hrefInputId,a=n.buttonId,s=this.getImageNode(t);if(null==s)throw new Error("Not found selected image node");var l=VR(gE(IC("image.src"),r),2),u=l[0],c=l[1],h=hi(c),d=VR(gE(IC("image.desc"),i),2),p=d[0],f=d[1],m=hi(f),g=VR(gE(IC("image.link"),o),2),v=g[0],y=g[1],b=hi(y),x=VR(vE(a,IC("common.ok")),1)[0];if(null==this.$content){var _=hi("<div></div>");_.on("click","#"+a,(function(n){n.preventDefault();var a=_.find("#"+r).val(),s=_.find("#"+i).val(),l=_.find("#"+o).val();e.updateImage(t,a,s,l),t.hidePanelOrModal()})),this.$content=_}var w=this.$content;w.empty(),w.append(u),w.append(p),w.append(v),w.append(x);var S=s,M=S.src,E=S.alt,C=void 0===E?"":E,T=S.href,A=void 0===T?"":T;return h.val(M),m.val(C),b.val(A),setTimeout((function(){h.focus()})),w[0]},t.prototype.updateImage=function(t,e,n,r,i){void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i={}),e&&(t.restoreSelection(),this.isDisabled(t)||Mk(t,e,n,r,i))},t}(),Rk=function(){function t(){this.title=IC("image.viewLink"),this.iconSvg=mL,this.tag="button"}return t.prototype.getValue=function(t){var e=Bx.getSelectedNodeByType(t,"image");return e&&e.href||""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||!this.getValue(t)},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){if(!e||"string"!=typeof e)throw new Error("View image link failed, image.href is '"+e+"'");window.open(e,"_blank")}},t}(),Lk=function(){function t(){this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.getSelectedNode=function(t){return Bx.getSelectedNodeByType(t,"image")},t.prototype.isDisabled=function(t){return null==t.selection||null==this.getSelectedNode(t)},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=this.getSelectedNode(t);if(null!=n){var r=Bx.getHoverbar(t);r&&r.hideAndClean();var i=n.style,o={style:FR(FR({},void 0===i?{}:i),{width:this.value,height:""})};$e.setNodes(t,o,{match:function(t){return Bx.checkNodeType(t,"image")}})}}},t}(),Ok=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="30%",e.value="30%",e}return BR(e,t),e}(Lk),kk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="50%",e.value="50%",e}return BR(e,t),e}(Lk),Ik=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="100%",e.value="100%",e}return BR(e,t),e}(Lk),Nk={onInsertedImage:function(t){},onUpdatedImage:function(t){},checkImage:function(t,e,n){return!0},parseImageSrc:function(t){return t}},Bk={renderElems:[yk],elemsToHtml:[bk],parseElemsHtml:[xk],menus:[{key:"insertImage",factory:function(){return new Tk},config:Nk},{key:"deleteImage",factory:function(){return new Ak}},{key:"editImage",factory:function(){return new Pk},config:Nk},{key:"viewImageLink",factory:function(){return new Rk}},{key:"imageWidth30",factory:function(){return new Ok}},{key:"imageWidth50",factory:function(){return new kk}},{key:"imageWidth100",factory:function(){return new Ik}}],editorPlugin:function(t){var e=t.isInline,n=t.isVoid;t.insertNode;var r=t;return r.isInline=function(t){return"image"===t.type||e(t)},r.isVoid=function(t){return"image"===t.type||n(t)},r}},Fk={type:"todo",renderElem:function(t,e,n){var r=!1;n.isDisabled()&&(r=!0);var i=t.checked,o=qa("div",{style:{margin:"5px 0"}},qa("span",{contentEditable:!1,style:{marginRight:"0.5em"}},qa("input",{type:"checkbox",checked:i,disabled:r,on:{change:function(e){var r=Bx.findPath(n,t),i={checked:e.target.checked};$e.setNodes(n,i,{at:r})}}})),qa("span",null,e));return o}},zk=function(){function t(){this.title=IC("todo.todo"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M278.755556 403.911111l-79.644445 79.644445L455.111111 739.555556l568.888889-568.888889-79.644444-79.644445L455.111111 580.266667l-176.355555-176.355556zM910.222222 910.222222H113.777778V113.777778h568.888889V0H113.777778C51.2 0 0 51.2 0 113.777778v796.444444c0 62.577778 51.2 113.777778 113.777778 113.777778h796.444444c62.577778 0 113.777778-51.2 113.777778-113.777778V455.111111h-113.777778v455.111111z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!!Bx.getSelectedNodeByType(t,"todo")},t.prototype.isDisabled=function(t){return null==t.selection||!!Bx.getSelectedElems(t).some((function(e){if(ue.isVoid(t,e)&&ue.isBlock(t,e))return!0;var n=e.type;return!!["pre","table","bulleted-list","numbered-list"].includes(n)||void 0}))},t.prototype.exec=function(t,e){var n=this.isActive(t);$e.setNodes(t,{type:n?"paragraph":"todo"})},t}(),Uk={selector:'div[data-w-e-type="todo"]',parseElemHtml:function(t,e,n){var r=hi(t);0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]);var i=!1;return null!=r.find('input[type="checkbox"]').attr("checked")&&(i=!0),{type:"todo",checked:i,children:e}}},jk={renderElems:[Fk],elemsToHtml:[{type:"todo",elemToHtml:function(t,e){return'<div data-w-e-type="todo"><input type="checkbox" disabled '+(t.checked?"checked":"")+">"+e+"</div>"}}],preParseHtml:[{selector:"ul.w-e-todo",preParseHtml:function(t){var e=hi(t).find("li"),n=hi('<div data-w-e-type="todo"></div>'),r=e.find("input[type]");return n.append(r),e.children()[0].remove(),n[0].innerHTML=n[0].innerHTML+e[0].innerHTML,n[0]}}],parseElemsHtml:[Uk],menus:[{key:"todo",factory:function(){return new zk}}],editorPlugin:function(t){var e=t.deleteBackward,n=t;return n.deleteBackward=function(n){var r=t.selection;if(r&&Te.isCollapsed(r)){var i=Bx.getSelectedNodeByType(t,"todo");if(i&&0===fe.string(i).length)return void $e.setNodes(t,{type:"paragraph"},{mode:"highest"})}e(n)},n}},Vk={type:"blockquote",renderElem:function(t,e,n){return qa("blockquote",null,e)}},Hk={type:"blockquote",elemToHtml:function(t,e){return"<blockquote>"+e+"</blockquote>"}},Wk={selector:"blockquote",parseElemHtml:function(t,e,n){var r=hi(t);return 0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]),{type:"blockquote",children:e}}},Gk=function(){function t(){this.title=IC("blockQuote.title"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M894.6 907.1H605.4c-32.6 0-59-26.4-59-59V608.2l-4-14.9c0-315.9 125.5-485.1 376.5-507.5v59.8C752.7 180.4 711.3 315.8 711.3 442.4v41.2l31.5 12.3h151.8c32.6 0 59 26.4 59 59v293.2c0 32.5-26.4 59-59 59z m-472 0H133.4c-32.6 0-59-26.4-59-59V608.2l-4-14.9c0-315.9 125.5-485.1 376.5-507.5v59.8C280.7 180.4 239.3 315.8 239.3 442.4v41.2l31.5 12.3h151.8c32.6 0 59 26.4 59 59v293.2c0 32.5-26.4 59-59 59z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!!Bx.getSelectedNodeByType(t,"blockquote")},t.prototype.isDisabled=function(t){return null==t.selection||!VR(ue.nodes(t,{match:function(t){var e=Bx.getNodeType(t);return"paragraph"===e||"blockquote"===e},universal:!0,mode:"highest"}),1)[0]},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=this.isActive(t)?"paragraph":"blockquote";$e.setNodes(t,{type:n},{mode:"highest"})}},t}(),qk={key:"blockquote",factory:function(){return new Gk}},Xk=aT([].slice),Yk=zD("slice"),Zk=$T("species"),Kk=qC.Array,Jk=Math.max;mD({target:"Array",proto:!0,forced:!Yk},{slice:function(t,e){var n,r,i,o=mT(this),a=YA(o),s=GA(t,a),l=GA(void 0===e?a:e,a);if(vD(o)&&(n=o.constructor,(RD(n)&&(n===Kk||vD(n.prototype))||vT(n)&&null===(n=n[Zk]))&&(n=void 0),n===Kk||void 0===n))return Xk(o,s,l);for(r=new(void 0===n?Kk:n)(Jk(l-s,0)),i=0;s<l;s++,i++)s in o&&hR(r,i,o[s]);return r.length=i,r}});var Qk={renderElems:[Vk],elemsToHtml:[Hk],parseElemsHtml:[Wk],menus:[qk],editorPlugin:function(t){var e=t.insertBreak,n=t.insertText,r=t;return r.insertBreak=function(){var i=r.selection;if(null==i)return e();var o=VR(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"blockquote")},universal:!0}),1)[0];if(!o)return e();var a=o[0],s=Bx.findPath(t,a),l=ue.end(t,s);if(we.equals(l,i.focus)){var u=fe.string(a);if(u&&"\n"===u.slice(-1))return t.deleteBackward("character"),void $e.insertNodes(r,{type:"paragraph",children:[{text:""}]},{mode:"highest"})}n("\n")},r}},$k=function(){function t(){this.title=IC("emotion.title"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M512 1024C230.4 1024 0 793.6 0 512S230.4 0 512 0s512 230.4 512 512-230.4 512-512 512z m0-102.4c226.742857 0 409.6-182.857143 409.6-409.6S738.742857 102.4 512 102.4 102.4 285.257143 102.4 512s182.857143 409.6 409.6 409.6z m-204.8-358.4h409.6c0 113.371429-91.428571 204.8-204.8 204.8s-204.8-91.428571-204.8-204.8z m0-102.4c-43.885714 0-76.8-32.914286-76.8-76.8s32.914286-76.8 76.8-76.8 76.8 32.914286 76.8 76.8-32.914286 76.8-76.8 76.8z m409.6 0c-43.885714 0-76.8-32.914286-76.8-76.8s32.914286-76.8 76.8-76.8c43.885714 0 76.8 32.914286 76.8 76.8s-32.914286 76.8-76.8 76.8z"></path></svg>',this.tag="button",this.showDropPanel=!0,this.$content=null}return t.prototype.exec=function(t,e){},t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||!!VR(ue.nodes(t,{match:function(e){return"pre"===Bx.getNodeType(e)||!!ue.isVoid(t,e)},universal:!0}),1)[0]},t.prototype.getPanelContentElem=function(t){if(null==this.$content){var e=hi('<ul class="w-e-panel-content-emotion"></ul>');e.on("click","li",(function(e){var n=e.target;if(null!=n){e.preventDefault();var r=hi(n).text();t.insertText(r)}})),this.$content=e}var n=this.$content;if(null==n)return document.createElement("ul");n.empty();var r=t.getMenuConfig("emotion").emotions;return(void 0===r?[]:r).forEach((function(t){var e=hi("<li>"+t+"</li>");n.append(e)})),n[0]},t}(),tI={menus:[{key:"emotion",factory:function(){return new $k},config:{emotions:"😀 😃 😄 😁 😆 😅 😂 🤣 😊 😇 🙂 🙃 😉 😌 😍 😘 😗 😙 😚 😋 😛 😝 😜 🤓 😎 😏 😒 😞 😔 😟 😕 🙁 😣 😖 😫 😩 😢 😭 😤 😠 😡 😳 😱 😨 🤗 🤔 😶 😑 😬 🙄 😯 😴 😷 🤑 😈 🤡 💩 👻 💀 👀 👣 👐 🙌 👏 🤝 👍 👎 👊 ✊ 🤛 🤜 🤞 ✌️ 🤘 👌 👈 👉 👆 👇 ☝️ ✋ 🤚 🖐 🖖 👋 🤙 💪 🖕 ✍️ 🙏".split(" ")}}]},eI={1:"12px",2:"14px",3:"16px",4:"19px",5:"24px",6:"32px",7:"48px"},nI={selector:"font",preParseHtml:function(t){var e=hi(t);if("font"!==OR(e))return t;var n=e.attr("size")||"";n&&(e.removeAttr("size"),e.css("font-size",eI[n]));var r=e.attr("face")||"";return r&&(e.removeAttr("face"),e.css("font-family",r)),e[0]}},rI=aT("".indexOf);mD({target:"String",proto:!0,forced:!$L("includes")},{includes:function(t){return!!~rI(WD(fT(this)),WD(JL(t)),arguments.length>1?arguments[1]:void 0)}});var iI,oI,aI=function(){function t(){this.tag="select",this.width=80}return t.prototype.isActive=function(t){return!1},t.prototype.getValue=function(t){var e=this.mark,n=ue.marks(t);return n&&n[e]?n[e]:""},t.prototype.isDisabled=function(t){return null==t.selection||(this.mark,!!VR(ue.nodes(t,{match:function(e){return"pre"===Bx.getNodeType(e)||!!ue.isVoid(t,e)},universal:!0}),1)[0])},t.prototype.exec=function(t,e){var n=this.mark;e?t.addMark(n,e):t.removeMark(n)},t}(),sI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("fontSize.title"),e.iconSvg=yL,e.mark="fontSize",e}return BR(e,t),e.prototype.getOptions=function(t){var e=[],n=t.getMenuConfig(this.mark).fontSizeList,r=void 0===n?[]:n;e.push({text:IC("fontSize.default"),value:""}),r.forEach((function(t){e.push({text:t,value:t})}));var i=this.getValue(t);return e.forEach((function(t){t.value===i?t.selected=!0:delete t.selected})),e},e}(aI),lI=function(t){return t&&t.Math==Math&&t},uI=lI("object"==typeof globalThis&&globalThis)||lI("object"==typeof window&&window)||lI("object"==typeof self&&self)||lI("object"==typeof UC&&UC)||function(){return this}()||Function("return this")(),cI=Function.prototype,hI=cI.apply,dI=cI.bind,pI=cI.call,fI="object"==typeof Reflect&&Reflect.apply||(dI?pI.bind(hI):function(){return pI.apply(hI,arguments)}),mI=Function.prototype,gI=mI.bind,vI=mI.call,yI=gI&&gI.bind(vI),bI=gI?function(t){return t&&yI(vI,t)}:function(t){return t&&function(){return vI.apply(t,arguments)}},xI=function(t){return"function"==typeof t},_I=function(t){try{return!!t()}catch(t){return!0}},wI=!_I((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),SI=Function.prototype.call,MI=SI.bind?SI.bind(SI):function(){return SI.apply(SI,arguments)},EI={}.propertyIsEnumerable,CI=Object.getOwnPropertyDescriptor,TI=CI&&!EI.call({1:2},1)?function(t){var e=CI(this,t);return!!e&&e.enumerable}:EI,AI={f:TI},DI=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},PI=bI({}.toString),RI=bI("".slice),LI=function(t){return RI(PI(t),8,-1)},OI=uI.Object,kI=bI("".split),II=_I((function(){return!OI("z").propertyIsEnumerable(0)}))?function(t){return"String"==LI(t)?kI(t,""):OI(t)}:OI,NI=uI.TypeError,BI=function(t){if(null==t)throw NI("Can't call method on "+t);return t},FI=function(t){return II(BI(t))},zI=function(t){return"object"==typeof t?null!==t:xI(t)},UI={},jI=function(t){return xI(t)?t:void 0},VI=function(t,e){return arguments.length<2?jI(UI[t])||jI(uI[t]):UI[t]&&UI[t][e]||uI[t]&&uI[t][e]},HI=bI({}.isPrototypeOf),WI=VI("navigator","userAgent")||"",GI=uI.process,qI=uI.Deno,XI=GI&&GI.versions||qI&&qI.version,YI=XI&&XI.v8;YI&&(oI=(iI=YI.split("."))[0]>0&&iI[0]<4?1:+(iI[0]+iI[1])),!oI&&WI&&(!(iI=WI.match(/Edge\/(\d+)/))||iI[1]>=74)&&(iI=WI.match(/Chrome\/(\d+)/))&&(oI=+iI[1]);var ZI=oI,KI=!!Object.getOwnPropertySymbols&&!_I((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ZI&&ZI<41})),JI=KI&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,QI=uI.Object,$I=JI?function(t){return"symbol"==typeof t}:function(t){var e=VI("Symbol");return xI(e)&&HI(e.prototype,QI(t))},tN=uI.String,eN=uI.TypeError,nN=function(t){if(xI(t))return t;throw eN(function(t){try{return tN(t)}catch(t){return"Object"}}(t)+" is not a function")},rN=uI.TypeError,iN=Object.defineProperty,oN=uI["__core-js_shared__"]||function(t,e){try{iN(uI,t,{value:e,configurable:!0,writable:!0})}catch(f){uI[t]=e}return e}("__core-js_shared__",{}),aN=VC((function(t){(t.exports=function(t,e){return oN[t]||(oN[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"pure",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),sN=uI.Object,lN=function(t){return sN(BI(t))},uN=bI({}.hasOwnProperty),cN=Object.hasOwn||function(t,e){return uN(lN(t),e)},hN=0,dN=Math.random(),pN=bI(1..toString),fN=function(t){return"Symbol("+(void 0===t?"":t)+")_"+pN(++hN+dN,36)},mN=aN("wks"),gN=uI.Symbol,vN=gN&&gN.for,yN=JI?gN:gN&&gN.withoutSetter||fN,bN=function(t){if(!cN(mN,t)||!KI&&"string"!=typeof mN[t]){var e="Symbol."+t;KI&&cN(gN,t)?mN[t]=gN[t]:mN[t]=JI&&vN?vN(e):yN(e)}return mN[t]},xN=uI.TypeError,_N=bN("toPrimitive"),wN=function(t,e){if(!zI(t)||$I(t))return t;var n,r,i=null==(n=t[_N])?void 0:nN(n);if(i){if(void 0===e&&(e="default"),r=MI(i,t,e),!zI(r)||$I(r))return r;throw xN("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&xI(n=t.toString)&&!zI(r=MI(n,t)))return r;if(xI(n=t.valueOf)&&!zI(r=MI(n,t)))return r;if("string"!==e&&xI(n=t.toString)&&!zI(r=MI(n,t)))return r;throw rN("Can't convert object to primitive value")}(t,e)},SN=function(t){var e=wN(t,"string");return $I(e)?e:e+""},MN=uI.document,EN=zI(MN)&&zI(MN.createElement),CN=function(t){return EN?MN.createElement(t):{}},TN=!wI&&!_I((function(){return 7!=Object.defineProperty(CN("div"),"a",{get:function(){return 7}}).a})),AN=Object.getOwnPropertyDescriptor,DN={f:wI?AN:function(t,e){if(t=FI(t),e=SN(e),TN)try{return AN(t,e)}catch(t){}if(cN(t,e))return DI(!MI(AI.f,t,e),t[e])}},PN=/#|\.prototype\./,RN=function(t,e){var n=ON[LN(t)];return n==IN||n!=kN&&(xI(e)?_I(e):!!e)},LN=RN.normalize=function(t){return String(t).replace(PN,".").toLowerCase()},ON=RN.data={},kN=RN.NATIVE="N",IN=RN.POLYFILL="P",NN=RN,BN=bI(bI.bind),FN=function(t,e){return nN(t),void 0===e?t:BN?BN(t,e):function(){return t.apply(e,arguments)}},zN=uI.String,UN=uI.TypeError,jN=function(t){if(zI(t))return t;throw UN(zN(t)+" is not an object")},VN=uI.TypeError,HN=Object.defineProperty,WN={f:wI?HN:function(t,e,n){if(jN(t),e=SN(e),jN(n),TN)try{return HN(t,e,n)}catch(t){}if("get"in n||"set"in n)throw VN("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},GN=wI?function(t,e,n){return WN.f(t,e,DI(1,n))}:function(t,e,n){return t[e]=n,t},qN=DN.f,XN=function(t){var e=function(n,r,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,i)}return fI(t,this,arguments)};return e.prototype=t.prototype,e},YN=function(t,e){var n,r,i,o,a,s,l,u,c=t.target,h=t.global,d=t.stat,p=t.proto,f=h?uI:d?uI[c]:(uI[c]||{}).prototype,m=h?UI:UI[c]||GN(UI,c,{})[c],g=m.prototype;for(i in e)n=!NN(h?i:c+(d?".":"#")+i,t.forced)&&f&&cN(f,i),a=m[i],n&&(s=t.noTargetGet?(u=qN(f,i))&&u.value:f[i]),o=n&&s?s:e[i],n&&typeof a==typeof o||(l=t.bind&&n?FN(o,uI):t.wrap&&n?XN(o):p&&xI(o)?bI(o):o,(t.sham||o&&o.sham||a&&a.sham)&&GN(l,"sham",!0),GN(m,i,l),p&&(cN(UI,r=c+"Prototype")||GN(UI,r,{}),GN(UI[r],i,o),t.real&&g&&!g[i]&&GN(g,i,o)))},ZN=Array.isArray||function(t){return"Array"==LI(t)},KN=Math.ceil,JN=Math.floor,QN=function(t){var e=+t;return e!=e||0===e?0:(e>0?JN:KN)(e)},$N=Math.min,tB=function(t){return(e=t.length)>0?$N(QN(e),9007199254740991):0;var e},eB=function(t,e,n){var r=SN(e);r in t?WN.f(t,r,DI(0,n)):t[r]=n},nB={};nB[bN("toStringTag")]="z";var rB="[object z]"===String(nB),iB=bN("toStringTag"),oB=uI.Object,aB="Arguments"==LI(function(){return arguments}()),sB=rB?LI:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=oB(t),iB))?n:aB?LI(e):"Object"==(r=LI(e))&&xI(e.callee)?"Arguments":r},lB=bI(Function.toString);xI(oN.inspectSource)||(oN.inspectSource=function(t){return lB(t)});var uB=oN.inspectSource,cB=function(){},hB=[],dB=VI("Reflect","construct"),pB=/^\s*(?:class|function)\b/,fB=bI(pB.exec),mB=!pB.exec(cB),gB=function(t){if(!xI(t))return!1;try{return dB(cB,hB,t),!0}catch(t){return!1}},vB=!dB||_I((function(){var t;return gB(gB.call)||!gB(Object)||!gB((function(){t=!0}))||t}))?function(t){if(!xI(t))return!1;switch(sB(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return mB||!!fB(pB,uB(t))}:gB,yB=bN("species"),bB=uI.Array,xB=function(t,e){return new(function(t){var e;return ZN(t)&&(e=t.constructor,(vB(e)&&(e===bB||ZN(e.prototype))||zI(e)&&null===(e=e[yB]))&&(e=void 0)),void 0===e?bB:e}(t))(0===e?0:e)},_B=bN("species"),wB=bN("isConcatSpreadable"),SB=uI.TypeError,MB=ZI>=51||!_I((function(){var t=[];return t[wB]=!1,t.concat()[0]!==t})),EB=function(t){return ZI>=51||!_I((function(){var e=[];return(e.constructor={})[_B]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("concat"),CB=function(t){if(!zI(t))return!1;var e=t[wB];return void 0!==e?!!e:ZN(t)};YN({target:"Array",proto:!0,forced:!MB||!EB},{concat:function(t){var e,n,r,i,o,a=lN(this),s=xB(a,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(CB(o=-1===e?a:arguments[e])){if(l+(i=tB(o))>9007199254740991)throw SB("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in o&&eB(s,l,o[n])}else{if(l>=9007199254740991)throw SB("Maximum allowed index exceeded");eB(s,l++,o)}return s.length=l,s}});var TB,AB=uI.String,DB=function(t){if("Symbol"===sB(t))throw TypeError("Cannot convert a Symbol value to a string");return AB(t)},PB=Math.max,RB=Math.min,LB=function(t,e){var n=QN(t);return n<0?PB(n+e,0):RB(n,e)},OB=function(t){return function(e,n,r){var i,o=FI(e),a=tB(o),s=LB(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},kB={includes:OB(!0),indexOf:OB(!1)},IB={},NB=kB.indexOf,BB=bI([].push),FB=function(t,e){var n,r=FI(t),i=0,o=[];for(n in r)!cN(IB,n)&&cN(r,n)&&BB(o,n);for(;e.length>i;)cN(r,n=e[i++])&&(~NB(o,n)||BB(o,n));return o},zB=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],UB=Object.keys||function(t){return FB(t,zB)},jB=wI?Object.defineProperties:function(t,e){jN(t);for(var n,r=FI(e),i=UB(e),o=i.length,a=0;o>a;)WN.f(t,n=i[a++],r[n]);return t},VB=VI("document","documentElement"),HB=aN("keys"),WB=function(t){return HB[t]||(HB[t]=fN(t))},GB=WB("IE_PROTO"),qB=function(){},XB=function(t){return"<script>"+t+"<\/script>"},YB=function(t){t.write(XB("")),t.close();var e=t.parentWindow.Object;return t=null,e},ZB=function(){try{TB=new ActiveXObject("htmlfile")}catch(t){}var t,e;ZB="undefined"!=typeof document?document.domain&&TB?YB(TB):((e=CN("iframe")).style.display="none",VB.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(XB("document.F=Object")),t.close(),t.F):YB(TB);for(var n=zB.length;n--;)delete ZB.prototype[zB[n]];return ZB()};IB[GB]=!0;var KB,JB,QB,$B=Object.create||function(t,e){var n;return null!==t?(qB.prototype=jN(t),n=new qB,qB.prototype=null,n[GB]=t):n=ZB(),void 0===e?n:jB(n,e)},tF=zB.concat("length","prototype"),eF={f:Object.getOwnPropertyNames||function(t){return FB(t,tF)}},nF=uI.Array,rF=Math.max,iF=eF.f,oF="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],aF=function(t){try{return iF(t)}catch(t){return function(t,e,n){for(var r=tB(t),i=LB(e,r),o=LB(void 0===n?r:n,r),a=nF(rF(o-i,0)),s=0;i<o;i++,s++)eB(a,s,t[i]);return a.length=s,a}(oF)}},sF={f:function(t){return oF&&"Window"==LI(t)?aF(t):iF(FI(t))}},lF={f:Object.getOwnPropertySymbols},uF=bI([].slice),cF=function(t,e,n,r){r&&r.enumerable?t[e]=n:GN(t,e,n)},hF={f:bN},dF=WN.f,pF=function(t){var e=UI.Symbol||(UI.Symbol={});cN(e,t)||dF(e,t,{value:hF.f(t)})},fF=rB?{}.toString:function(){return"[object "+sB(this)+"]"},mF=WN.f,gF=bN("toStringTag"),vF=function(t,e,n,r){if(t){var i=n?t:t.prototype;cN(i,gF)||mF(i,gF,{configurable:!0,value:e}),r&&!rB&&GN(i,"toString",fF)}},yF=uI.WeakMap,bF=xI(yF)&&/native code/.test(uB(yF)),xF=uI.TypeError,_F=uI.WeakMap;if(bF||oN.state){var wF=oN.state||(oN.state=new _F),SF=bI(wF.get),MF=bI(wF.has),EF=bI(wF.set);KB=function(t,e){if(MF(wF,t))throw new xF("Object already initialized");return e.facade=t,EF(wF,t,e),e},JB=function(t){return SF(wF,t)||{}},QB=function(t){return MF(wF,t)}}else{var CF=WB("state");IB[CF]=!0,KB=function(t,e){if(cN(t,CF))throw new xF("Object already initialized");return e.facade=t,GN(t,CF,e),e},JB=function(t){return cN(t,CF)?t[CF]:{}},QB=function(t){return cN(t,CF)}}var TF={set:KB,get:JB,has:QB,enforce:function(t){return QB(t)?JB(t):KB(t,{})},getterFor:function(t){return function(e){var n;if(!zI(e)||(n=JB(e)).type!==t)throw xF("Incompatible receiver, "+t+" required");return n}}},AF=bI([].push),DF=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=lN(l),m=II(f),g=FN(u,c),v=tB(m),y=0,b=h||xB,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:AF(x,d)}else switch(t){case 4:return!1;case 7:AF(x,d)}return o?-1:r||i?i:x}},PF={forEach:DF(0),map:DF(1),filter:DF(2),some:DF(3),every:DF(4),find:DF(5),findIndex:DF(6),filterReject:DF(7)}.forEach,RF=WB("hidden"),LF=bN("toPrimitive"),OF=TF.set,kF=TF.getterFor("Symbol"),IF=Object.prototype,NF=uI.Symbol,BF=NF&&NF.prototype,FF=uI.TypeError,zF=uI.QObject,UF=VI("JSON","stringify"),jF=DN.f,VF=WN.f,HF=sF.f,WF=AI.f,GF=bI([].push),qF=aN("symbols"),XF=aN("op-symbols"),YF=aN("string-to-symbol-registry"),ZF=aN("symbol-to-string-registry"),KF=aN("wks"),JF=!zF||!zF.prototype||!zF.prototype.findChild,QF=wI&&_I((function(){return 7!=$B(VF({},"a",{get:function(){return VF(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=jF(IF,e);r&&delete IF[e],VF(t,e,n),r&&t!==IF&&VF(IF,e,r)}:VF,$F=function(t,e){var n=qF[t]=$B(BF);return OF(n,{type:"Symbol",tag:t,description:e}),wI||(n.description=e),n},tz=function(t,e,n){t===IF&&tz(XF,e,n),jN(t);var r=SN(e);return jN(n),cN(qF,r)?(n.enumerable?(cN(t,RF)&&t[RF][r]&&(t[RF][r]=!1),n=$B(n,{enumerable:DI(0,!1)})):(cN(t,RF)||VF(t,RF,DI(1,{})),t[RF][r]=!0),QF(t,r,n)):VF(t,r,n)},ez=function(t,e){jN(t);var n=FI(e),r=UB(n).concat(oz(n));return PF(r,(function(e){wI&&!MI(nz,n,e)||tz(t,e,n[e])})),t},nz=function(t){var e=SN(t),n=MI(WF,this,e);return!(this===IF&&cN(qF,e)&&!cN(XF,e))&&(!(n||!cN(this,e)||!cN(qF,e)||cN(this,RF)&&this[RF][e])||n)},rz=function(t,e){var n=FI(t),r=SN(e);if(n!==IF||!cN(qF,r)||cN(XF,r)){var i=jF(n,r);return!i||!cN(qF,r)||cN(n,RF)&&n[RF][r]||(i.enumerable=!0),i}},iz=function(t){var e=HF(FI(t)),n=[];return PF(e,(function(t){cN(qF,t)||cN(IB,t)||GF(n,t)})),n},oz=function(t){var e=t===IF,n=HF(e?XF:FI(t)),r=[];return PF(n,(function(t){!cN(qF,t)||e&&!cN(IF,t)||GF(r,qF[t])})),r};if(KI||(BF=(NF=function(){if(HI(BF,this))throw FF("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?DB(arguments[0]):void 0,e=fN(t),n=function(t){this===IF&&MI(n,XF,t),cN(this,RF)&&cN(this[RF],e)&&(this[RF][e]=!1),QF(this,e,DI(1,t))};return wI&&JF&&QF(IF,e,{configurable:!0,set:n}),$F(e,t)}).prototype,cF(BF,"toString",(function(){return kF(this).tag})),cF(NF,"withoutSetter",(function(t){return $F(fN(t),t)})),AI.f=nz,WN.f=tz,DN.f=rz,eF.f=sF.f=iz,lF.f=oz,hF.f=function(t){return $F(bN(t),t)},wI&&VF(BF,"description",{configurable:!0,get:function(){return kF(this).description}})),YN({global:!0,wrap:!0,forced:!KI,sham:!KI},{Symbol:NF}),PF(UB(KF),(function(t){pF(t)})),YN({target:"Symbol",stat:!0,forced:!KI},{for:function(t){var e=DB(t);if(cN(YF,e))return YF[e];var n=NF(e);return YF[e]=n,ZF[n]=e,n},keyFor:function(t){if(!$I(t))throw FF(t+" is not a symbol");if(cN(ZF,t))return ZF[t]},useSetter:function(){JF=!0},useSimple:function(){JF=!1}}),YN({target:"Object",stat:!0,forced:!KI,sham:!wI},{create:function(t,e){return void 0===e?$B(t):ez($B(t),e)},defineProperty:tz,defineProperties:ez,getOwnPropertyDescriptor:rz}),YN({target:"Object",stat:!0,forced:!KI},{getOwnPropertyNames:iz,getOwnPropertySymbols:oz}),YN({target:"Object",stat:!0,forced:_I((function(){lF.f(1)}))},{getOwnPropertySymbols:function(t){return lF.f(lN(t))}}),UF){var az=!KI||_I((function(){var t=NF();return"[null]"!=UF([t])||"{}"!=UF({a:t})||"{}"!=UF(Object(t))}));YN({target:"JSON",stat:!0,forced:az},{stringify:function(t,e,n){var r=uF(arguments),i=e;if((zI(e)||void 0!==t)&&!$I(t))return ZN(e)||(e=function(t,e){if(xI(i)&&(e=MI(i,this,t,e)),!$I(e))return e}),r[1]=e,fI(UF,null,r)}})}if(!BF[LF]){var sz=BF.valueOf;cF(BF,LF,(function(t){return MI(sz,this)}))}vF(NF,"Symbol"),IB[RF]=!0,pF("asyncIterator"),pF("hasInstance"),pF("isConcatSpreadable"),pF("iterator"),pF("match"),pF("matchAll"),pF("replace"),pF("search"),pF("species"),pF("split"),pF("toPrimitive"),pF("toStringTag"),pF("unscopables"),vF(uI.JSON,"JSON",!0);var lz,uz,cz,hz=UI.Symbol,dz={},pz=Function.prototype,fz=wI&&Object.getOwnPropertyDescriptor,mz=cN(pz,"name"),gz={EXISTS:mz,PROPER:mz&&"something"===function(){}.name,CONFIGURABLE:mz&&(!wI||wI&&fz(pz,"name").configurable)},vz=!_I((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),yz=WB("IE_PROTO"),bz=uI.Object,xz=bz.prototype,_z=vz?bz.getPrototypeOf:function(t){var e=lN(t);if(cN(e,yz))return e[yz];var n=e.constructor;return xI(n)&&e instanceof n?n.prototype:e instanceof bz?xz:null},wz=bN("iterator"),Sz=!1;[].keys&&("next"in(cz=[].keys())?(uz=_z(_z(cz)))!==Object.prototype&&(lz=uz):Sz=!0);var Mz=null==lz||_I((function(){var t={};return lz[wz].call(t)!==t}));lz=Mz?{}:$B(lz),xI(lz[wz])||cF(lz,wz,(function(){return this}));var Ez={IteratorPrototype:lz,BUGGY_SAFARI_ITERATORS:Sz},Cz=Ez.IteratorPrototype,Tz=function(){return this};uI.String,uI.TypeError,Object.setPrototypeOf||"__proto__"in{}&&function(){var t={};try{bI(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set)(t,[]),t instanceof Array}catch(m){}}();var Az=gz.PROPER,Dz=Ez.BUGGY_SAFARI_ITERATORS,Pz=bN("iterator"),Rz=function(){return this},Lz=function(t,e,n,r,i,o,a){!function(t,e,n,r){var i=e+" Iterator";t.prototype=$B(Cz,{next:DI(+!r,n)}),vF(t,i,!1,!0),dz[i]=Tz}(n,e,r);var s,l,u,c=function(t){if(t===i&&m)return m;if(!Dz&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,f=p[Pz]||p["@@iterator"]||i&&p[i],m=!Dz&&f||c(i),g="Array"==e&&p.entries||f;if(g&&(s=_z(g.call(new t)))!==Object.prototype&&s.next&&(vF(s,h,!0,!0),dz[h]=Rz),Az&&"values"==i&&f&&"values"!==f.name&&(d=!0,m=function(){return MI(f,this)}),i)if(l={values:c("values"),keys:o?m:c("keys"),entries:c("entries")},a)for(u in l)(Dz||d||!(u in p))&&cF(p,u,l[u]);else YN({target:e,proto:!0,forced:Dz||d},l);return a&&p[Pz]!==m&&cF(p,Pz,m,{name:i}),dz[e]=m,l},Oz=TF.set,kz=TF.getterFor("Array Iterator");Lz(Array,"Array",(function(t,e){Oz(this,{type:"Array Iterator",target:FI(t),index:0,kind:e})}),(function(){var t=kz(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),dz.Arguments=dz.Array;var Iz=bN("toStringTag");for(var Nz in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Bz=uI[Nz],Fz=Bz&&Bz.prototype;Fz&&sB(Fz)!==Iz&&GN(Fz,Iz,Nz),dz[Nz]=dz.Array}var zz=hz;pF("asyncDispose"),pF("dispose"),pF("matcher"),pF("metadata"),pF("observable"),pF("patternMatch"),pF("replaceAll");var Uz=zz,jz=bI("".charAt),Vz=bI("".charCodeAt),Hz=bI("".slice),Wz=function(t){return function(e,n){var r,i,o=DB(BI(e)),a=QN(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=Vz(o,a))<55296||r>56319||a+1===s||(i=Vz(o,a+1))<56320||i>57343?t?jz(o,a):r:t?Hz(o,a,a+2):i-56320+(r-55296<<10)+65536}},Gz={codeAt:Wz(!1),charAt:Wz(!0)}.charAt,qz=TF.set,Xz=TF.getterFor("String Iterator");Lz(String,"String",(function(t){qz(this,{type:"String Iterator",string:DB(t),index:0})}),(function(){var t,e=Xz(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Gz(n,r),e.index+=t.length,{value:t,done:!1})}));var Yz=hF.f("iterator"),Zz=VC((function(t){function e(n){return"function"==typeof Uz&&"symbol"==typeof Yz?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Uz&&t.constructor===Uz&&t!==Uz.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),Kz=jC(Zz),Jz=FA.EXISTS,Qz=mA.f,$z=Function.prototype,tU=aT($z.toString),eU=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,nU=aT(eU.exec);YC&&!Jz&&Qz($z,"name",{configurable:!0,get:function(){try{return nU(eU,tU(this))[1]}catch(m){return""}}});var rU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("fontFamily.title"),e.iconSvg=bL,e.mark="fontFamily",e.selectPanelWidth=150,e}return BR(e,t),e.prototype.getOptions=function(t){var e=[],n=t.getMenuConfig(this.mark).fontFamilyList,r=void 0===n?[]:n;e.push({text:IC("fontFamily.default"),value:""}),r.forEach((function(t){if("string"==typeof t)e.push({text:t,value:t,styleForRenderMenuList:{"font-family":t}});else if("object"===Kz(t)){var n=t.name,r=t.value;e.push({text:n,value:r,styleForRenderMenuList:{"font-family":r}})}}));var i=this.getValue(t);return e.forEach((function(t){t.value===i?t.selected=!0:delete t.selected})),e},e}(aI),iU={renderStyle:function(t,e){var n=t,r=n.fontSize,i=n.fontFamily,o=e;return r&&AO(o,{fontSize:r}),i&&AO(o,{fontFamily:i}),o},styleToHtml:function(t,e){if(!ke.isText(t))return e;var n,r=t,i=r.fontSize,o=r.fontFamily;return i||o?((RR(e)||"span"!==OR(n=hi(e)))&&(n=hi("<span>"+e+"</span>")),i&&n.css("font-size",i),o&&n.css("font-family",o),LR(n)):e},preParseHtml:[nI],parseStyleHtml:function(t,e,n){var r=hi(t);if(!ke.isText(e))return e;var i=e,o=n.getMenuConfig("fontSize").fontSizeList,a=void 0===o?[]:o,s=kR(r,"font-size");s&&a.includes(s)&&(i.fontSize=s);var l=n.getMenuConfig("fontFamily").fontFamilyList,u=void 0===l?[]:l,c=kR(r,"font-family");return c&&u.includes(c)&&(i.fontFamily=c),i},menus:[{key:"fontSize",factory:function(){return new sI},config:{fontSizeList:["12px","13px","14px","15px","16px","19px","22px","24px","29px","32px","40px","48px"]}},{key:"fontFamily",factory:function(){return new rU},config:{fontFamilyList:["黑体",{name:"仿宋",value:"仿宋"},"楷体","标楷体","华文仿宋","华文楷体",{name:"宋体",value:"宋体"},"微软雅黑","Arial","Tahoma","Verdana","Times New Roman","Courier New"]}}]},oU={selector:"p,h1,h2,h3,h4,h5",preParseHtml:function(t){var e=hi(t),n=kR(e,"padding-left");return/\dem/.test(n)&&e.css("text-indent","2em"),/\dpx/.test(n)&&parseInt(n,10)%32==0&&e.css("text-indent","2em"),e[0]}},aU=function(){function t(){this.tag="button"}return t.prototype.getValue=function(t){var e=VR(ue.nodes(t,{match:function(t){return!!t.indent},universal:!0}),1),n=e[0];return null==n?"":VR(n,1)[0].indent||""},t.prototype.isActive=function(t){return!1},t.prototype.getMatchNode=function(t){var e=VR(ue.nodes(t,{match:function(t){var e=Bx.getNodeType(t);return"paragraph"===e||!!e.startsWith("header")},universal:!0,mode:"highest"}),1)[0];return null==e?null:e[0]},t}(),sU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("indent.decrease"),e.iconSvg=xL,e}return BR(e,t),e.prototype.isDisabled=function(t){var e=this.getMatchNode(t);return null==e||!e.indent},e.prototype.exec=function(t,e){$e.setNodes(t,{indent:null},{match:function(t){return re.isElement(t)}})},e}(aU),lU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("indent.increase"),e.iconSvg=_L,e}return BR(e,t),e.prototype.isDisabled=function(t){var e=this.getMatchNode(t);return null==e||!!e.indent},e.prototype.exec=function(t,e){$e.setNodes(t,{indent:"2em"},{match:function(t){return re.isElement(t)},mode:"highest"})},e}(aU),uU={renderStyle:function(t,e){if(!re.isElement(t))return e;var n=t.indent,r=e;return n&&AO(r,{textIndent:n}),r},styleToHtml:function(t,e){if(!re.isElement(t))return e;var n=t.indent;if(!n)return e;var r=hi(e);return r.css("text-indent",n),LR(r)},preParseHtml:[oU],parseStyleHtml:function(t,e,n){var r=hi(t);if(!re.isElement(e))return e;var i=e,o=kR(r,"text-indent");return o&&(i.indent=o),i},menus:[{key:"indent",factory:function(){return new lU}},{key:"delIndent",factory:function(){return new sU}}]},cU=function(){function t(){this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.getMatchNode=function(t){var e=VR(ue.nodes(t,{match:function(t){var e=Bx.getNodeType(t);return"paragraph"===e||"blockquote"===e||!!e.startsWith("header")},universal:!0,mode:"highest"}),1)[0];return null==e?null:e[0]},t.prototype.isDisabled=function(t){return null==t.selection||!!Bx.getSelectedElems(t).some((function(e){if(ue.isVoid(t,e)&&ue.isBlock(t,e))return!0;var n=e.type;return!!["pre","code"].includes(n)||void 0}))},t}(),hU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("justify.left"),e.iconSvg=wL,e}return BR(e,t),e.prototype.exec=function(t,e){$e.setNodes(t,{textAlign:"left"},{match:function(e){return re.isElement(e)&&!t.isInline(e)}})},e}(cU),dU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("justify.right"),e.iconSvg=SL,e}return BR(e,t),e.prototype.exec=function(t,e){$e.setNodes(t,{textAlign:"right"},{match:function(e){return re.isElement(e)&&!t.isInline(e)}})},e}(cU),pU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("justify.center"),e.iconSvg=ML,e}return BR(e,t),e.prototype.exec=function(t,e){$e.setNodes(t,{textAlign:"center"},{match:function(e){return re.isElement(e)&&!t.isInline(e)}})},e}(cU),fU=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=IC("justify.justify"),e.iconSvg=EL,e}return BR(e,t),e.prototype.exec=function(t,e){$e.setNodes(t,{textAlign:"justify"},{match:function(e){return re.isElement(e)&&!t.isInline(e)}})},e}(cU),mU={renderStyle:function(t,e){if(!re.isElement(t))return e;var n=t.textAlign,r=e;return n&&AO(r,{textAlign:n}),r},styleToHtml:function(t,e){if(!re.isElement(t))return e;var n=t.textAlign;if(!n)return e;var r=hi(e);return r.css("text-align",n),LR(r)},parseStyleHtml:function(t,e,n){var r=hi(t);if(!re.isElement(e))return e;var i=e,o=kR(r,"text-align");return o&&(i.textAlign=o),i},menus:[{key:"justifyLeft",factory:function(){return new hU}},{key:"justifyRight",factory:function(){return new dU}},{key:"justifyCenter",factory:function(){return new pU}},{key:"justifyJustify",factory:function(){return new fU}}]},gU=function(){function t(){this.title=IC("lineHeight.title"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M964 788a8 8 0 0 1 8 8v98a8 8 0 0 1-8 8H438a8 8 0 0 1-8-8v-98a8 8 0 0 1 8-8h526zM198.93 144.306c6.668-5.798 16.774-5.094 22.573 1.574l122.26 140.582a16 16 0 0 1 3.927 10.5c0 8.836-7.164 16-16 16h-61.8a8 8 0 0 0-8 8v390.077h69.819a16 16 0 0 1 10.502 3.928c6.666 5.8 7.37 15.906 1.57 22.573L221.476 878.123a16 16 0 0 1-1.57 1.57c-6.668 5.8-16.774 5.097-22.574-1.57L75.051 737.538a16 16 0 0 1-3.928-10.5c0-8.837 7.163-16 16-16h69.822V312.96H87.127a16 16 0 0 1-10.502-3.928c-6.666-5.8-7.37-15.906-1.57-22.573l122.303-140.582a16 16 0 0 1 1.572-1.572zM964 465a8 8 0 0 1 8 8v98a8 8 0 0 1-8 8H438a8 8 0 0 1-8-8v-98a8 8 0 0 1 8-8h526z m0-323a8 8 0 0 1 8 8v98a8 8 0 0 1-8 8H438a8 8 0 0 1-8-8v-98a8 8 0 0 1 8-8h526z"></path></svg>',this.tag="select",this.width=80}return t.prototype.getOptions=function(t){var e=[],n=t.getMenuConfig("lineHeight").lineHeightList,r=void 0===n?[]:n;e.push({text:IC("lineHeight.default"),value:""}),r.forEach((function(t){e.push({text:t,value:t})}));var i=this.getValue(t);return e.forEach((function(t){t.value===i?t.selected=!0:delete t.selected})),e},t.prototype.getMatchNode=function(t){var e=VR(ue.nodes(t,{match:function(t){var e=Bx.getNodeType(t);return!!e.startsWith("header")||!!["paragraph","blockquote","bulleted-list","numbered-list"].includes(e)},universal:!0,mode:"highest"}),1)[0];return null==e?null:e[0]},t.prototype.isActive=function(t){return!1},t.prototype.getValue=function(t){var e=this.getMatchNode(t);return null==e?"":re.isElement(e)&&e.lineHeight||""},t.prototype.isDisabled=function(t){return null==t.selection||null==this.getMatchNode(t)},t.prototype.exec=function(t,e){$e.setNodes(t,{lineHeight:e.toString()},{mode:"highest"})},t}(),vU={renderStyle:function(t,e){if(!re.isElement(t))return e;var n=t.lineHeight,r=e;return n&&AO(r,{lineHeight:n}),r},styleToHtml:function(t,e){if(!re.isElement(t))return e;var n=t.lineHeight;if(!n)return e;var r=hi(e);return r.css("line-height",n),LR(r)},parseStyleHtml:function(t,e,n){var r=hi(t);if(!re.isElement(e))return e;var i=e,o=n.getMenuConfig("lineHeight").lineHeightList,a=void 0===o?[]:o,s=kR(r,"line-height");return s&&a.includes(s)&&(i.lineHeight=s),i},menus:[{key:"lineHeight",factory:function(){return new gU},config:{lineHeightList:["1","1.15","1.5","2","2.5","3"]}}]},yU=function(){function t(){this.title=IC("undo.redo"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M0.00032 576a510.72 510.72 0 0 0 173.344 384l84.672-96A383.136 383.136 0 0 1 128.00032 576C128.00032 363.936 299.93632 192 512.00032 192c106.048 0 202.048 42.976 271.52 112.48L640.00032 448h384V64l-149.984 149.984A510.272 510.272 0 0 0 512.00032 64C229.21632 64 0.00032 293.216 0.00032 576z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection},t.prototype.exec=function(t,e){"function"==typeof t.redo&&t.redo()},t}(),bU=function(){function t(){this.title=IC("undo.undo"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M512 64A510.272 510.272 0 0 0 149.984 213.984L0.032 64v384h384L240.512 304.48A382.784 382.784 0 0 1 512.032 192c212.064 0 384 171.936 384 384 0 114.688-50.304 217.632-130.016 288l84.672 96a510.72 510.72 0 0 0 173.344-384c0-282.784-229.216-512-512-512z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection},t.prototype.exec=function(t,e){"function"==typeof t.undo&&t.undo()},t}(),xU={menus:[{key:"redo",factory:function(){return new yU}},{key:"undo",factory:function(){return new bU}}]},_U={type:"divider",renderElem:function(t,e,n){var r=Bx.isNodeSelected(n,t);return Sa("div",{props:{contentEditable:!1,className:"w-e-textarea-divider"},dataset:{selected:r?"true":""},style:{},on:{mousedown:function(t){return t.preventDefault()}}},[Sa("hr")])}},wU={type:"divider",elemToHtml:function(t,e){return"<hr/>"}},SU={selector:"hr",parseElemHtml:function(t,e,n){return{type:"divider",children:[{text:""}]}}},MU=function(){function t(){this.title=IC("divider.title"),this.iconSvg='<svg viewBox="0 0 1092 1024"><path d="M0 51.2m51.2 0l989.866667 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-989.866667 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"></path><path d="M0 460.8m51.2 0l170.666667 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-170.666667 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"></path><path d="M819.2 460.8m51.2 0l170.666667 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-170.666667 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"></path><path d="M409.6 460.8m51.2 0l170.666667 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-170.666667 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"></path><path d="M0 870.4m51.2 0l989.866667 0q51.2 0 51.2 51.2l0 0q0 51.2-51.2 51.2l-989.866667 0q-51.2 0-51.2-51.2l0 0q0-51.2 51.2-51.2Z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||!!Bx.getSelectedElems(t).some((function(e){if(t.isVoid(e))return!0;var n=Bx.getNodeType(e);return"table"===n||"pre"===n||void 0}))},t.prototype.exec=function(t,e){$e.insertNodes(t,{type:"divider",children:[{text:""}]},{mode:"highest"})},t}(),EU={renderElems:[_U],elemsToHtml:[wU],parseElemsHtml:[SU],menus:[{key:"divider",factory:function(){return new MU}}],editorPlugin:function(t){var e=t.isVoid,n=t.normalizeNode,r=t;return r.isVoid=function(t){return"divider"===t.type||e(t)},r.normalizeNode=function(t){var e=VR(t,2),i=e[0],o=e[1];if("divider"!==Bx.getNodeType(i))return n([i,o]);Bx.isLastNode(r,i)&&$e.insertNodes(r,Bx.genEmptyParagraph(),{at:[o[0]+1]})},r}},CU=BD.map;mD({target:"Array",proto:!0,forced:!zD("map")},{map:function(t){return CU(this,t,arguments.length>1?arguments[1]:void 0)}});var TU=aT([].join),AU=dT!=Object,DU=eL("join",",");mD({target:"Array",proto:!0,forced:AU||!DU},{join:function(t){return TU(mT(this),void 0===t?",":t)}});var PU=function(){function t(){this.title=IC("codeBlock.title"),this.iconSvg='<svg viewBox="0 0 1280 1024"><path d="M832 736l96 96 320-320L928 192l-96 96 224 224zM448 288l-96-96L32 512l320 320 96-96-224-224zM701.312 150.528l69.472 18.944-192 704.032-69.472-18.944 192-704.032z"></path></svg>',this.tag="button"}return t.prototype.getSelectCodeElem=function(t){var e=Bx.getSelectedNodeByType(t,"code");if(null==e)return null;var n=Bx.getParentNode(t,e);return null==n||"pre"!==Bx.getNodeType(n)?null:e},t.prototype.getValue=function(t){var e=this.getSelectCodeElem(t);return null==e?"":e.language||""},t.prototype.isActive=function(t){return!!this.getSelectCodeElem(t)},t.prototype.isDisabled=function(t){if(null==t.selection)return!0;var e=Bx.getSelectedElems(t);return!!e.some((function(e){return t.isVoid(e)}))||!e.some((function(t){var e=Bx.getNodeType(t);if("pre"===e||"paragraph"===e)return!0}))},t.prototype.exec=function(t,e){this.isActive(t)?this.changeToPlainText(t):this.changeToCodeBlock(t,e.toString())},t.prototype.changeToPlainText=function(t){var e=this.getSelectCodeElem(t);if(null!=e){var n=fe.string(e);$e.removeNodes(t,{mode:"highest"});var r=n.split("\n").map((function(t){return{type:"paragraph",children:[{text:t}]}}));$e.insertNodes(t,r,{mode:"highest"})}},t.prototype.changeToCodeBlock=function(t,e){var n,r,i=[],o=ue.nodes(t,{match:function(e){return t.children.includes(e)},universal:!0});try{for(var a=jR(o),s=a.next();!s.done;s=a.next()){var l=VR(s.value,1)[0];l&&i.push(fe.string(l))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}$e.removeNodes(t,{mode:"highest"});var u={type:"pre",children:[{type:"code",language:e,children:[{text:i.join("\n")}]}]};$e.insertNodes(t,u,{mode:"highest"})},t}(),RU={key:"codeBlock",factory:function(){return new PU}};mD({target:"String",proto:!0,forced:YR("anchor")},{anchor:function(t){return XR(this,"a","name",t)}}),PP("match",(function(t,e,n){return[function(e){var n=fT(this),r=null==e?void 0:IT(e,t);return r?KC(r,e,n):new RegExp(e)[t](WD(n))},function(t){var r=dA(this),i=WD(t),o=n(e,r,i);if(o.done)return o.value;if(!r.global)return GP(r,i);var a=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=GP(r,i));){var c=WD(s[0]);l[u]=c,""===c&&(r.lastIndex=NP(i,XA(r.lastIndex),a)),u++}return 0===u?null:l}]}));var LU={type:"pre",renderElem:function(t,e,n){return qa("pre",null,e)}},OU={type:"code",renderElem:function(t,e,n){return qa("code",null,e)}},kU={selector:"pre",parseElemHtml:function(t,e,n){var r=hi(t);return 0===(e=e.filter((function(t){return"code"===Bx.getNodeType(t)}))).length&&(e=[{type:"code",language:"",children:[{text:r[0].textContent||""}]}]),{type:"pre",children:e.filter((function(t){return"code"===Bx.getNodeType(t)}))}}},IU={menus:[RU],editorPlugin:function(t){var e=t.insertBreak,n=t.normalizeNode,r=t.insertData;t.insertNode;var i=t;return i.insertBreak=function(){var t=Bx.getSelectedNodeByType(i,"code");if(null!=t){var n=function(t,e){var n=e.selection;if(null==n)return"";var r=fe.string(t),i=n.anchor.offset,o=r.slice(0,i).split("\n"),a=o.length;return 0===a?"":o[a-1]}(t,i);if(n){var r=n.match(/^\s+/);if(null!=r&&null!=r[0]){var o=r[0];return void i.insertText("\n"+o)}}i.insertText("\n")}else e()},i.normalizeNode=function(t){var e=VR(t,2),r=e[0],o=e[1],a=Bx.getNodeType(r);return"code"===a&&o.length<=1&&$e.setNodes(i,{type:"paragraph"},{at:o}),"pre"===a&&(Bx.isLastNode(i,r)&&$e.insertNodes(i,Bx.genEmptyParagraph(),{at:[o[0]+1]}),"code"!==Bx.getNodeType(r.children[0])&&($e.unwrapNodes(i),$e.setNodes(i,{type:"paragraph"},{mode:"highest"}))),n([r,o])},i.insertData=function(t){if(null!=Bx.getSelectedNodeByType(i,"code")){var e=t.getData("text/plain");ue.insertText(i,e)}else r(t)},i},renderElems:[LU,OU],elemsToHtml:[{type:"code",elemToHtml:function(t,e){return"<code>"+e+"</code>"}},{type:"pre",elemToHtml:function(t,e){return"<pre>"+e+"</pre>"}}],preParseHtml:[{selector:"pre>code",preParseHtml:function(t){var e=hi(t);if("code"!==OR(e))return t;var n=e.find("xmp");if(0===n.length)return t;var r=n.text();return n.remove(),e.text(r),e[0]}}],parseElemsHtml:[{selector:"pre>code",parseElemHtml:function(t,e,n){return{type:"code",language:"",children:[{text:hi(t)[0].textContent||""}]}}},kU]},NU=function(){function t(){this.title=IC("fullScreen.title"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M133.705143 335.433143V133.851429h201.581714a29.622857 29.622857 0 0 0 29.622857-29.549715V68.754286a29.622857 29.622857 0 0 0-29.622857-29.622857H61.732571A22.893714 22.893714 0 0 0 38.765714 62.025143V335.725714c0 16.310857 13.238857 29.622857 29.622857 29.622857h35.547429a29.842286 29.842286 0 0 0 29.696-29.842285zM690.980571 133.851429h201.581715v201.654857c0 16.310857 13.238857 29.549714 29.622857 29.549714h35.547428a29.622857 29.622857 0 0 0 29.549715-29.549714V61.952a22.893714 22.893714 0 0 0-22.820572-22.893714h-273.554285a29.622857 29.622857 0 0 0-29.549715 29.622857v35.547428c0 16.310857 13.238857 29.696 29.622857 29.696zM335.286857 892.781714H133.705143V691.2a29.622857 29.622857 0 0 0-29.622857-29.622857H68.534857a29.622857 29.622857 0 0 0-29.549714 29.622857v273.554286c0 12.653714 10.24 22.893714 22.820571 22.893714h273.554286a29.622857 29.622857 0 0 0 29.696-29.622857v-35.547429a29.769143 29.769143 0 0 0-29.769143-29.696z m557.348572-201.581714v201.581714H690.907429a29.622857 29.622857 0 0 0-29.622858 29.622857v35.547429c0 16.310857 13.238857 29.622857 29.622858 29.622857h273.554285c12.580571 0 22.893714-10.313143 22.893715-22.893714V691.2a29.622857 29.622857 0 0 0-29.622858-29.622857h-35.547428a29.622857 29.622857 0 0 0-29.696 29.622857z"></path></svg>',this.tag="button",this.alwaysEnable=!0}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return t.isFullScreen},t.prototype.isDisabled=function(t){return!1},t.prototype.exec=function(t,e){t.isFullScreen?t.unFullScreen():t.fullScreen()},t}(),BU={menus:[{key:"fullScreen",factory:function(){return new NU}}]},FU=function(){function t(){this.title=IC("common.enter"),this.iconSvg='<svg viewBox="0 0 1255 1024"><path d="M1095.111111 731.477333h-625.777778V1024L0 658.318222 469.333333 292.408889v292.636444h625.777778V0h156.444445v731.477333z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!!Te.isExpanded(e)},t.prototype.exec=function(t,e){var n=t.selection;if(null!=n){var r=[n.anchor.path[0]];$e.insertNodes(t,{type:"paragraph",children:[{text:""}]},{at:r}),t.select(ue.start(t,r))}},t}(),zU=[NL,kO,iU,uU,mU,vU,Bk,EU,tI,rk,IU,Qk,SO,WR,jk,xU,BU,{menus:[{key:"enter",factory:function(){return new FU}}]}];kC("en",{listModule:{unOrderedList:"Unordered list",orderedList:"Ordered list"}}),kC("zh-CN",{listModule:{unOrderedList:"无序列表",orderedList:"有序列表"}});var UU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function jU(t){var e={exports:{}};return t(e,e.exports),e.exports}var VU,HU,WU=function(t){return t&&t.Math==Math&&t},GU=WU("object"==typeof globalThis&&globalThis)||WU("object"==typeof window&&window)||WU("object"==typeof self&&self)||WU("object"==typeof UU&&UU)||function(){return this}()||Function("return this")(),qU=function(t){try{return!!t()}catch(t){return!0}},XU=!qU((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),YU=Function.prototype.call,ZU=YU.bind?YU.bind(YU):function(){return YU.apply(YU,arguments)},KU={}.propertyIsEnumerable,JU=Object.getOwnPropertyDescriptor,QU={f:JU&&!KU.call({1:2},1)?function(t){var e=JU(this,t);return!!e&&e.enumerable}:KU},$U=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},tj=Function.prototype,ej=tj.bind,nj=tj.call,rj=ej&&ej.bind(nj),ij=ej?function(t){return t&&rj(nj,t)}:function(t){return t&&function(){return nj.apply(t,arguments)}},oj=ij({}.toString),aj=ij("".slice),sj=function(t){return aj(oj(t),8,-1)},lj=GU.Object,uj=ij("".split),cj=qU((function(){return!lj("z").propertyIsEnumerable(0)}))?function(t){return"String"==sj(t)?uj(t,""):lj(t)}:lj,hj=GU.TypeError,dj=function(t){if(null==t)throw hj("Can't call method on "+t);return t},pj=function(t){return cj(dj(t))},fj=function(t){return"function"==typeof t},mj=function(t){return"object"==typeof t?null!==t:fj(t)},gj=function(t){return fj(t)?t:void 0},vj=function(t,e){return arguments.length<2?gj(GU[t]):GU[t]&&GU[t][e]},yj=ij({}.isPrototypeOf),bj=vj("navigator","userAgent")||"",xj=GU.process,_j=GU.Deno,wj=xj&&xj.versions||_j&&_j.version,Sj=wj&&wj.v8;Sj&&(HU=(VU=Sj.split("."))[0]>0&&VU[0]<4?1:+(VU[0]+VU[1])),!HU&&bj&&(!(VU=bj.match(/Edge\/(\d+)/))||VU[1]>=74)&&(VU=bj.match(/Chrome\/(\d+)/))&&(HU=+VU[1]);var Mj=HU,Ej=!!Object.getOwnPropertySymbols&&!qU((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Mj&&Mj<41})),Cj=Ej&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Tj=GU.Object,Aj=Cj?function(t){return"symbol"==typeof t}:function(t){var e=vj("Symbol");return fj(e)&&yj(e.prototype,Tj(t))},Dj=GU.String,Pj=GU.TypeError,Rj=function(t){if(fj(t))return t;throw Pj(function(t){try{return Dj(t)}catch(t){return"Object"}}(t)+" is not a function")},Lj=function(t,e){var n=t[e];return null==n?void 0:Rj(n)},Oj=GU.TypeError,kj=Object.defineProperty,Ij=function(t,e){try{kj(GU,t,{value:e,configurable:!0,writable:!0})}catch(g){GU[t]=e}return e},Nj=GU["__core-js_shared__"]||Ij("__core-js_shared__",{}),Bj=jU((function(t){(t.exports=function(t,e){return Nj[t]||(Nj[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Fj=GU.Object,zj=function(t){return Fj(dj(t))},Uj=ij({}.hasOwnProperty),jj=Object.hasOwn||function(t,e){return Uj(zj(t),e)},Vj=0,Hj=Math.random(),Wj=ij(1..toString),Gj=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Wj(++Vj+Hj,36)},qj=Bj("wks"),Xj=GU.Symbol,Yj=Xj&&Xj.for,Zj=Cj?Xj:Xj&&Xj.withoutSetter||Gj,Kj=function(t){if(!jj(qj,t)||!Ej&&"string"!=typeof qj[t]){var e="Symbol."+t;Ej&&jj(Xj,t)?qj[t]=Xj[t]:qj[t]=Cj&&Yj?Yj(e):Zj(e)}return qj[t]},Jj=GU.TypeError,Qj=Kj("toPrimitive"),$j=function(t,e){if(!mj(t)||Aj(t))return t;var n,r=Lj(t,Qj);if(r){if(void 0===e&&(e="default"),n=ZU(r,t,e),!mj(n)||Aj(n))return n;throw Jj("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&fj(n=t.toString)&&!mj(r=ZU(n,t)))return r;if(fj(n=t.valueOf)&&!mj(r=ZU(n,t)))return r;if("string"!==e&&fj(n=t.toString)&&!mj(r=ZU(n,t)))return r;throw Oj("Can't convert object to primitive value")}(t,e)},tV=function(t){var e=$j(t,"string");return Aj(e)?e:e+""},eV=GU.document,nV=mj(eV)&&mj(eV.createElement),rV=function(t){return nV?eV.createElement(t):{}},iV=!XU&&!qU((function(){return 7!=Object.defineProperty(rV("div"),"a",{get:function(){return 7}}).a})),oV=Object.getOwnPropertyDescriptor,aV={f:XU?oV:function(t,e){if(t=pj(t),e=tV(e),iV)try{return oV(t,e)}catch(t){}if(jj(t,e))return $U(!ZU(QU.f,t,e),t[e])}},sV=GU.String,lV=GU.TypeError,uV=function(t){if(mj(t))return t;throw lV(sV(t)+" is not an object")},cV=GU.TypeError,hV=Object.defineProperty,dV={f:XU?hV:function(t,e,n){if(uV(t),e=tV(e),uV(n),iV)try{return hV(t,e,n)}catch(t){}if("get"in n||"set"in n)throw cV("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},pV=XU?function(t,e,n){return dV.f(t,e,$U(1,n))}:function(t,e,n){return t[e]=n,t},fV=ij(Function.toString);fj(Nj.inspectSource)||(Nj.inspectSource=function(t){return fV(t)});var mV,gV,vV,yV=Nj.inspectSource,bV=GU.WeakMap,xV=fj(bV)&&/native code/.test(yV(bV)),_V=Bj("keys"),wV=function(t){return _V[t]||(_V[t]=Gj(t))},SV={},MV=GU.TypeError,EV=GU.WeakMap;if(xV||Nj.state){var CV=Nj.state||(Nj.state=new EV),TV=ij(CV.get),AV=ij(CV.has),DV=ij(CV.set);mV=function(t,e){if(AV(CV,t))throw new MV("Object already initialized");return e.facade=t,DV(CV,t,e),e},gV=function(t){return TV(CV,t)||{}},vV=function(t){return AV(CV,t)}}else{var PV=wV("state");SV[PV]=!0,mV=function(t,e){if(jj(t,PV))throw new MV("Object already initialized");return e.facade=t,pV(t,PV,e),e},gV=function(t){return jj(t,PV)?t[PV]:{}},vV=function(t){return jj(t,PV)}}var RV,LV={set:mV,get:gV,has:vV,enforce:function(t){return vV(t)?gV(t):mV(t,{})},getterFor:function(t){return function(e){var n;if(!mj(e)||(n=gV(e)).type!==t)throw MV("Incompatible receiver, "+t+" required");return n}}},OV=Function.prototype,kV=XU&&Object.getOwnPropertyDescriptor,IV=jj(OV,"name"),NV={EXISTS:IV,PROPER:IV&&"something"===function(){}.name,CONFIGURABLE:IV&&(!XU||XU&&kV(OV,"name").configurable)},BV=jU((function(t){var e=NV.CONFIGURABLE,n=LV.get,r=LV.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;fj(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!jj(o,"name")||e&&o.name!==h)&&pV(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==GU?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:pV(t,n,o)):u?t[n]=o:Ij(n,o)})(Function.prototype,"toString",(function(){return fj(this)&&n(this).source||yV(this)}))})),FV=Math.ceil,zV=Math.floor,UV=function(t){var e=+t;return e!=e||0===e?0:(e>0?zV:FV)(e)},jV=Math.max,VV=Math.min,HV=Math.min,WV=function(t){return t>0?HV(UV(t),9007199254740991):0},GV=function(t){return WV(t.length)},qV=function(t){return function(e,n,r){var i,o=pj(e),a=GV(o),s=function(t,e){var n=UV(t);return n<0?jV(n+e,0):VV(n,e)}(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},XV={includes:qV(!0),indexOf:qV(!1)},YV=XV.indexOf,ZV=ij([].push),KV=function(t,e){var n,r=pj(t),i=0,o=[];for(n in r)!jj(SV,n)&&jj(r,n)&&ZV(o,n);for(;e.length>i;)jj(r,n=e[i++])&&(~YV(o,n)||ZV(o,n));return o},JV=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],QV=JV.concat("length","prototype"),$V={f:Object.getOwnPropertyNames||function(t){return KV(t,QV)}},tH={f:Object.getOwnPropertySymbols},eH=ij([].concat),nH=vj("Reflect","ownKeys")||function(t){var e=$V.f(uV(t)),n=tH.f;return n?eH(e,n(t)):e},rH=function(t,e){for(var n=nH(e),r=dV.f,i=aV.f,o=0;o<n.length;o++){var a=n[o];jj(t,a)||r(t,a,i(e,a))}},iH=/#|\.prototype\./,oH=function(t,e){var n=sH[aH(t)];return n==uH||n!=lH&&(fj(e)?qU(e):!!e)},aH=oH.normalize=function(t){return String(t).replace(iH,".").toLowerCase()},sH=oH.data={},lH=oH.NATIVE="N",uH=oH.POLYFILL="P",cH=oH,hH=aV.f,dH=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?GU:u?GU[s]||Ij(s,{}):(GU[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=hH(n,r))&&a.value:n[r],!cH(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;rH(o,i)}(t.sham||i&&i.sham)&&pV(o,"sham",!0),BV(n,r,o,t)}},pH=Object.keys||function(t){return KV(t,JV)},fH=XU?Object.defineProperties:function(t,e){uV(t);for(var n,r=pj(e),i=pH(e),o=i.length,a=0;o>a;)dV.f(t,n=i[a++],r[n]);return t},mH=vj("document","documentElement"),gH=wV("IE_PROTO"),vH=function(){},yH=function(t){return"<script>"+t+"<\/script>"},bH=function(t){t.write(yH("")),t.close();var e=t.parentWindow.Object;return t=null,e},xH=function(){try{RV=new ActiveXObject("htmlfile")}catch(t){}var t,e;xH="undefined"!=typeof document?document.domain&&RV?bH(RV):((e=rV("iframe")).style.display="none",mH.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(yH("document.F=Object")),t.close(),t.F):bH(RV);for(var n=JV.length;n--;)delete xH.prototype[JV[n]];return xH()};SV[gH]=!0;var _H=Object.create||function(t,e){var n;return null!==t?(vH.prototype=uV(t),n=new vH,vH.prototype=null,n[gH]=t):n=xH(),void 0===e?n:fH(n,e)},wH=Kj("unscopables"),SH=Array.prototype;null==SH[wH]&&dV.f(SH,wH,{configurable:!0,value:_H(null)});var MH,EH=XV.includes;function CH(t){if("bulleted-list"===t)return"ul";if("numbered-list"===t)return"ol";if("list-item"===t)return"li";throw new Error("list type '"+t+"' is invalid")}function TH(t){var e=Bx.getNodeType(t);return["bulleted-list","numbered-list"].includes(e)}function AH(t){return function(e,n,r){var i=CH(t);return qa(i,null,n)}}dH({target:"Array",proto:!0},{includes:function(t){return EH(this,t,arguments.length>1?arguments[1]:void 0)}}),MH="includes",SH[wH][MH]=!0;var DH={type:"bulleted-list",renderElem:AH("bulleted-list")},PH={type:"numbered-list",renderElem:AH("numbered-list")},RH={type:"list-item",renderElem:AH("list-item")};function LH(t){var e=CH(t);return function(t,n){return"<"+e+">"+n+"</"+e+">"}}var OH={type:"bulleted-list",elemToHtml:LH("bulleted-list")},kH={type:"numbered-list",elemToHtml:LH("numbered-list")},IH={type:"list-item",elemToHtml:LH("list-item")},NH=ij(ij.bind),BH=Array.isArray||function(t){return"Array"==sj(t)},FH={};FH[Kj("toStringTag")]="z";var zH="[object z]"===String(FH),UH=Kj("toStringTag"),jH=GU.Object,VH="Arguments"==sj(function(){return arguments}()),HH=zH?sj:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=jH(t),UH))?n:VH?sj(e):"Object"==(r=sj(e))&&fj(e.callee)?"Arguments":r},WH=function(){},GH=[],qH=vj("Reflect","construct"),XH=/^\s*(?:class|function)\b/,YH=ij(XH.exec),ZH=!XH.exec(WH),KH=function(t){if(!fj(t))return!1;try{return qH(WH,GH,t),!0}catch(t){return!1}},JH=!qH||qU((function(){var t;return KH(KH.call)||!KH(Object)||!KH((function(){t=!0}))||t}))?function(t){if(!fj(t))return!1;switch(HH(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return ZH||!!YH(XH,yV(t))}:KH,QH=Kj("species"),$H=GU.Array,tW=function(t,e){return new(function(t){var e;return BH(t)&&(e=t.constructor,(JH(e)&&(e===$H||BH(e.prototype))||mj(e)&&null===(e=e[QH]))&&(e=void 0)),void 0===e?$H:e}(t))(0===e?0:e)},eW=ij([].push),nW=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=zj(l),m=cj(f),g=function(t,e){return Rj(t),void 0===e?t:NH?NH(t,e):function(){return t.apply(e,arguments)}}(u,c),v=GV(m),y=0,b=h||tW,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:eW(x,d)}else switch(t){case 4:return!1;case 7:eW(x,d)}return o?-1:r||i?i:x}},rW={forEach:nW(0),map:nW(1),filter:nW(2),some:nW(3),every:nW(4),find:nW(5),findIndex:nW(6),filterReject:nW(7)},iW=Kj("species"),oW=function(t){return Mj>=51||!qU((function(){var e=[];return(e.constructor={})[iW]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},aW=rW.filter;dH({target:"Array",proto:!0,forced:!oW("filter")},{filter:function(t){return aW(this,t,arguments.length>1?arguments[1]:void 0)}});var sW=zH?{}.toString:function(){return"[object "+HH(this)+"]"};zH||BV(Object.prototype,"toString",sW,{unsafe:!0});var lW,uW,cW=GU.String,hW=function(t){if("Symbol"===HH(t))throw TypeError("Cannot convert a Symbol value to a string");return cW(t)},dW=function(){var t=uV(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},pW=GU.RegExp,fW=qU((function(){var t=pW("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),mW=fW||qU((function(){return!pW("a","y").sticky})),gW={BROKEN_CARET:fW||qU((function(){var t=pW("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:mW,UNSUPPORTED_Y:fW},vW=GU.RegExp,yW=qU((function(){var t=vW(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),bW=GU.RegExp,xW=qU((function(){var t=bW("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),_W=LV.get,wW=Bj("native-string-replace",String.prototype.replace),SW=RegExp.prototype.exec,MW=SW,EW=ij("".charAt),CW=ij("".indexOf),TW=ij("".replace),AW=ij("".slice),DW=(uW=/b*/g,ZU(SW,lW=/a/,"a"),ZU(SW,uW,"a"),0!==lW.lastIndex||0!==uW.lastIndex),PW=gW.BROKEN_CARET,RW=void 0!==/()??/.exec("")[1];(DW||RW||PW||yW||xW)&&(MW=function(t){var e,n,r,i,o,a,s,l=this,u=_W(l),c=hW(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=ZU(MW,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=PW&&l.sticky,f=ZU(dW,l),m=l.source,g=0,v=c;if(p&&(f=TW(f,"y",""),-1===CW(f,"g")&&(f+="g"),v=AW(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==EW(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),RW&&(n=new RegExp("^"+m+"$(?!\\s)",f)),DW&&(r=l.lastIndex),i=ZU(SW,p?n:l,v),p?i?(i.input=AW(i.input,g),i[0]=AW(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:DW&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),RW&&i&&i.length>1&&ZU(wW,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=_H(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var LW=MW;dH({target:"RegExp",proto:!0,forced:/./.exec!==LW},{exec:LW});var OW=Function.prototype,kW=OW.apply,IW=OW.bind,NW=OW.call,BW="object"==typeof Reflect&&Reflect.apply||(IW?NW.bind(kW):function(){return NW.apply(kW,arguments)}),FW=Kj("species"),zW=RegExp.prototype,UW=ij("".charAt),jW=ij("".charCodeAt),VW=ij("".slice),HW=function(t){return function(e,n){var r,i,o=hW(dj(e)),a=UV(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=jW(o,a))<55296||r>56319||a+1===s||(i=jW(o,a+1))<56320||i>57343?t?UW(o,a):r:t?VW(o,a,a+2):i-56320+(r-55296<<10)+65536}},WW={codeAt:HW(!1),charAt:HW(!0)}.charAt,GW=function(t,e,n){return e+(n?WW(t,e).length:1)},qW=Math.floor,XW=ij("".charAt),YW=ij("".replace),ZW=ij("".slice),KW=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,JW=/\$([$&'`]|\d{1,2})/g,QW=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=JW;return void 0!==i&&(i=zj(i),l=KW),YW(o,l,(function(o,l){var u;switch(XW(l,0)){case"$":return"$";case"&":return t;case"`":return ZW(e,0,n);case"'":return ZW(e,a);case"<":u=i[ZW(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=qW(c/10);return 0===h?o:h<=s?void 0===r[h-1]?XW(l,1):r[h-1]+XW(l,1):o}u=r[c-1]}return void 0===u?"":u}))},$W=GU.TypeError,tG=function(t,e){var n=t.exec;if(fj(n)){var r=ZU(n,t,e);return null!==r&&uV(r),r}if("RegExp"===sj(t))return ZU(LW,t,e);throw $W("RegExp#exec called on incompatible receiver")},eG=Kj("replace"),nG=Math.max,rG=Math.min,iG=ij([].concat),oG=ij([].push),aG=ij("".indexOf),sG=ij("".slice),lG="$0"==="a".replace(/./,"$0"),uG=!!/./[eG]&&""===/./[eG]("a","$0");!function(t,e,n,r){var i=Kj(t),o=!qU((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!qU((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[FW]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=ij(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=ij(t),l=e.exec;return l===LW||l===zW.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));BV(String.prototype,t,l[0]),BV(zW,i,l[1])}r&&pV(zW[i],"sham",!0)}("replace",(function(t,e,n){var r=uG?"$":"$0";return[function(t,n){var r=dj(this),i=null==t?void 0:Lj(t,eG);return i?ZU(i,t,r,n):ZU(e,hW(r),t,n)},function(t,i){var o=uV(this),a=hW(t);if("string"==typeof i&&-1===aG(i,r)&&-1===aG(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var l=fj(i);l||(i=hW(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=tG(o,a);if(null===d)break;if(oG(h,d),!u)break;""===hW(d[0])&&(o.lastIndex=GW(a,WV(o.lastIndex),c))}for(var p,f="",m=0,g=0;g<h.length;g++){for(var v=hW((d=h[g])[0]),y=nG(rG(UV(d.index),a.length),0),b=[],x=1;x<d.length;x++)oG(b,void 0===(p=d[x])?p:String(p));var _=d.groups;if(l){var w=iG([v],b,y,a);void 0!==_&&oG(w,_);var S=hW(BW(i,void 0,w))}else S=QW(v,a,y,b,_,i);y>=m&&(f+=sG(a,m,y)+S,m=y+v.length)}return f+sG(a,m)}]}),!!qU((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!lG||uG),dH({global:!0},{globalThis:GU});var cG={selector:"li",parseElemHtml:function(t,e,n){var r=hi(t);return 0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]),{type:"list-item",children:e}}},hG={selector:"ul",parseElemHtml:function(t,e,n){return{type:"bulleted-list",children:e.filter((function(t){return"list-item"===Bx.getNodeType(t)}))}}},dG={selector:"ol",parseElemHtml:function(t,e,n){return{type:"numbered-list",children:e.filter((function(t){return"list-item"===Bx.getNodeType(t)}))}}},pG=function(t,e){return pG=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},pG(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function fG(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}pG(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function mG(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var gG,vG=function(){function t(){this.tag="button"}return t.prototype.getListNode=function(t){var e=this.type;return Bx.getSelectedNodeByType(t,e)},t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!!this.getListNode(t)},t.prototype.isDisabled=function(t){return null==t.selection||!!Bx.getSelectedElems(t).some((function(e){if(ue.isVoid(t,e)&&ue.isBlock(t,e))return!0;var n=e.type;return!!["pre","code","table"].includes(n)||void 0}))},t.prototype.getMatchListType=function(t){var e=mG(ue.nodes(t,{match:function(t){return TH(t)},universal:!0}),1),n=e[0];if(null==n)return"";var r=mG(n,1)[0];return Bx.getNodeType(r)},t.prototype.exec=function(t,e){var n=this.type,r=this.isActive(t);$e.unwrapNodes(t,{match:function(t){return TH(t)},split:!0}),$e.setNodes(t,{type:r?"paragraph":"list-item"});var i={type:n,children:[]};r||$e.wrapNodes(t,i);var o=this.getMatchListType(t);""!=o&&o!==n&&$e.wrapNodes(t,i)},t}(),yG='<svg viewBox="0 0 1024 1024"><path d="M384 64h640v128H384V64z m0 384h640v128H384v-128z m0 384h640v128H384v-128zM0 128a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m0 384a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m0 384a128 128 0 1 1 256 0 128 128 0 0 1-256 0z"></path></svg>',bG='<svg viewBox="0 0 1024 1024"><path d="M384 832h640v128H384z m0-384h640v128H384z m0-384h640v128H384zM192 0v256H128V64H64V0zM128 526.016v50.016h128v64H64v-146.016l128-60V384H64v-64h192v146.016zM256 704v320H64v-64h128v-64H64v-64h128v-64H64v-64z"></path></svg>',xG=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bulleted-list",e.title=IC("listModule.unOrderedList"),e.iconSvg=yG,e}return fG(e,t),e}(vG),_G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="numbered-list",e.title=IC("listModule.orderedList"),e.iconSvg=bG,e}return fG(e,t),e}(vG),wG={key:"bulletedList",factory:function(){return new xG}},SG={key:"numberedList",factory:function(){return new _G}},MG=/"/g,EG=ij("".replace);dH({target:"String",proto:!0,forced:(gG="anchor",qU((function(){var t=""[gG]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{anchor:function(t){return e="a",n="name",r=t,i=hW(dj(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+EG(hW(r),MG,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var CG=function(t,e,n){var r=tV(e);r in t?dV.f(t,r,$U(0,n)):t[r]=n},TG=Kj("isConcatSpreadable"),AG=GU.TypeError,DG=Mj>=51||!qU((function(){var t=[];return t[TG]=!1,t.concat()[0]!==t})),PG=oW("concat"),RG=function(t){if(!mj(t))return!1;var e=t[TG];return void 0!==e?!!e:BH(t)};dH({target:"Array",proto:!0,forced:!DG||!PG},{concat:function(t){var e,n,r,i,o,a=zj(this),s=tW(a,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(RG(o=-1===e?a:arguments[e])){if(l+(i=GV(o))>9007199254740991)throw AG("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in o&&CG(s,l,o[n])}else{if(l>=9007199254740991)throw AG("Maximum allowed index exceeded");CG(s,l++,o)}return s.length=l,s}});var LG={renderElems:[DH,PH,RH],elemsToHtml:[OH,kH,IH],parseElemsHtml:[cG,dG,hG],menus:[wG,SG],editorPlugin:function(t){var e=t.insertBreak,n=t.deleteBackward;t.insertNode;var r=t;return r.insertBreak=function(){var t=r.selection;if(null!=t){var n=Bx.getSelectedNodeByType(r,"list-item");if(null!=n){var i=Bx.getParentNode(r,n),o=(null==i?void 0:i.children)||[];if(n===o[o.length-1]&&""===fe.string(n)){$e.removeNodes(r,{match:function(t){return Bx.checkNodeType(t,"list-item")}});var a=[t.anchor.path[0]+1];return $e.insertNodes(r,Bx.genEmptyParagraph(),{at:a}),void r.select({path:a.concat(0),offset:0})}e()}else e()}else e()},r.deleteBackward=function(t){var e=function(t){var e=mG(ue.nodes(t,{match:function(e){return t.children[0]===e},mode:"highest"}),1),n=e[0];if(null==n)return!1;var r=n[0];return!(!re.isElement(r)||fe.string(r)||!TH(r)||($e.unwrapNodes(t,{match:function(t){return TH(t)},split:!0}),$e.setNodes(t,{type:"paragraph"}),0))}(r);e||n(t)},r}},OG=en((function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",y="[object Object]",b="[object Promise]",x="[object Proxy]",_="[object RegExp]",w="[object Set]",S="[object String]",M="[object Symbol]",E="[object Undefined]",C="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",D="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",L="[object Int16Array]",O="[object Int32Array]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,j={};j[D]=j[P]=j[R]=j[L]=j[O]=j[k]=j[I]=j[N]=j[B]=!0,j[s]=j[l]=j[T]=j[c]=j[A]=j[h]=j[d]=j[p]=j[m]=j[g]=j[y]=j[_]=j[w]=j[S]=j[C]=!1;var V="object"==typeof tn&&tn&&tn.Object===Object&&tn,H="object"==typeof self&&self&&self.Object===Object&&self,W=V||H||Function("return this")(),G=e&&!e.nodeType&&e,q=G&&t&&!t.nodeType&&t,X=q&&q.exports===G,Y=X&&V.process,Z=function(){try{return Y&&Y.binding&&Y.binding("util")}catch(Cut){}}(),K=Z&&Z.isTypedArray;function J(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Q(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function $(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}function tt(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function et(t){return function(e){return t(e)}}function nt(t,e){return t.has(e)}function rt(t,e){return null==t?void 0:t[e]}function it(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ot(t,e){return function(n){return t(e(n))}}function at(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var st=Array.prototype,lt=Function.prototype,ut=Object.prototype,ct=W["__core-js_shared__"],ht=lt.toString,dt=ut.hasOwnProperty,pt=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ft=ut.toString,mt=RegExp("^"+ht.call(dt).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=X?W.Buffer:void 0,vt=W.Symbol,yt=W.Uint8Array,bt=ut.propertyIsEnumerable,xt=st.splice,_t=vt?vt.toStringTag:void 0,wt=Object.getOwnPropertySymbols,St=gt?gt.isBuffer:void 0,Mt=ot(Object.keys,Object),Et=Ce(W,"DataView"),Ct=Ce(W,"Map"),Tt=Ce(W,"Promise"),At=Ce(W,"Set"),Dt=Ce(W,"WeakMap"),Pt=Ce(Object,"create"),Rt=Ie(Et),Lt=Ie(Ct),Ot=Ie(Tt),kt=Ie(At),It=Ie(Dt),Nt=vt?vt.prototype:void 0,Bt=Nt?Nt.valueOf:void 0;function Ft(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=Pt?Pt(null):{},this.size=0}function Ut(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function jt(t){var e=this.__data__;if(Pt){var n=e[t];return n===r?void 0:n}return dt.call(e,t)?e[t]:void 0}function Vt(t){var e=this.__data__;return Pt?void 0!==e[t]:dt.call(e,t)}function Ht(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pt&&void 0===e?r:e,this}function Wt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Gt(){this.__data__=[],this.size=0}function qt(t){var e=this.__data__,n=de(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():xt.call(e,n,1),--this.size,!0}function Xt(t){var e=this.__data__,n=de(e,t);return n<0?void 0:e[n][1]}function Yt(t){return de(this.__data__,t)>-1}function Zt(t,e){var n=this.__data__,r=de(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Kt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Jt(){this.size=0,this.__data__={hash:new Ft,map:new(Ct||Wt),string:new Ft}}function Qt(t){var e=Ee(this,t)["delete"](t);return this.size-=e?1:0,e}function $t(t){return Ee(this,t).get(t)}function te(t){return Ee(this,t).has(t)}function ee(t,e){var n=Ee(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function ne(t){var e=-1,n=null==t?0:t.length;this.__data__=new Kt;while(++e<n)this.add(t[e])}function re(t){return this.__data__.set(t,r),this}function ie(t){return this.__data__.has(t)}function oe(t){var e=this.__data__=new Wt(t);this.size=e.size}function ae(){this.__data__=new Wt,this.size=0}function se(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function le(t){return this.__data__.get(t)}function ue(t){return this.__data__.has(t)}function ce(t,e){var r=this.__data__;if(r instanceof Wt){var i=r.__data__;if(!Ct||i.length<n-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Kt(i)}return r.set(t,e),this.size=r.size,this}function he(t,e){var n=Fe(t),r=!n&&Be(t),i=!n&&!r&&Ue(t),o=!n&&!r&&!i&&qe(t),a=n||r||i||o,s=a?tt(t.length,String):[],l=s.length;for(var u in t)!e&&!dt.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Pe(u,l))||s.push(u);return s}function de(t,e){var n=t.length;while(n--)if(Ne(t[n][0],e))return n;return-1}function pe(t,e,n){var r=e(t);return Fe(t)?r:Q(r,n(t))}function fe(t){return null==t?void 0===t?E:v:_t&&_t in Object(t)?Te(t):ke(t)}function me(t){return Ge(t)&&fe(t)==s}function ge(t,e,n,r,i){return t===e||(null==t||null==e||!Ge(t)&&!Ge(e)?t!==t&&e!==e:ve(t,e,n,r,ge,i))}function ve(t,e,n,r,o,a){var u=Fe(t),c=Fe(e),h=u?l:De(t),d=c?l:De(e);h=h==s?y:h,d=d==s?y:d;var p=h==y,f=d==y,m=h==d;if(m&&Ue(t)){if(!Ue(e))return!1;u=!0,p=!1}if(m&&!p)return a||(a=new oe),u||qe(t)?_e(t,e,n,r,o,a):we(t,e,h,n,r,o,a);if(!(n&i)){var g=p&&dt.call(t,"__wrapped__"),v=f&&dt.call(e,"__wrapped__");if(g||v){var b=g?t.value():t,x=v?e.value():e;return a||(a=new oe),o(b,x,n,r,a)}}return!!m&&(a||(a=new oe),Se(t,e,n,r,o,a))}function ye(t){if(!We(t)||Le(t))return!1;var e=Ve(t)?mt:z;return e.test(Ie(t))}function be(t){return Ge(t)&&He(t.length)&&!!j[fe(t)]}function xe(t){if(!Oe(t))return Mt(t);var e=[];for(var n in Object(t))dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function _e(t,e,n,r,a,s){var l=n&i,u=t.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var d=-1,p=!0,f=n&o?new ne:void 0;s.set(t,e),s.set(e,t);while(++d<u){var m=t[d],g=e[d];if(r)var v=l?r(g,m,d,e,t,s):r(m,g,d,t,e,s);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!$(e,(function(t,e){if(!nt(f,e)&&(m===t||a(m,t,n,r,s)))return f.push(e)}))){p=!1;break}}else if(m!==g&&!a(m,g,n,r,s)){p=!1;break}}return s["delete"](t),s["delete"](e),p}function we(t,e,n,r,a,s,l){switch(n){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!s(new yt(t),new yt(e)));case c:case h:case g:return Ne(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case S:return t==e+"";case m:var u=it;case w:var p=r&i;if(u||(u=at),t.size!=e.size&&!p)return!1;var f=l.get(t);if(f)return f==e;r|=o,l.set(t,e);var v=_e(u(t),u(e),r,a,s,l);return l["delete"](t),v;case M:if(Bt)return Bt.call(t)==Bt.call(e)}return!1}function Se(t,e,n,r,o,a){var s=n&i,l=Me(t),u=l.length,c=Me(e),h=c.length;if(u!=h&&!s)return!1;var d=u;while(d--){var p=l[d];if(!(s?p in e:dt.call(e,p)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var m=!0;a.set(t,e),a.set(e,t);var g=s;while(++d<u){p=l[d];var v=t[p],y=e[p];if(r)var b=s?r(y,v,p,e,t,a):r(v,y,p,t,e,a);if(!(void 0===b?v===y||o(v,y,n,r,a):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var x=t.constructor,_=e.constructor;x==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(m=!1)}return a["delete"](t),a["delete"](e),m}function Me(t){return pe(t,Xe,Ae)}function Ee(t,e){var n=t.__data__;return Re(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ce(t,e){var n=rt(t,e);return ye(n)?n:void 0}function Te(t){var e=dt.call(t,_t),n=t[_t];try{t[_t]=void 0;var r=!0}catch(Cut){}var i=ft.call(t);return r&&(e?t[_t]=n:delete t[_t]),i}Ft.prototype.clear=zt,Ft.prototype["delete"]=Ut,Ft.prototype.get=jt,Ft.prototype.has=Vt,Ft.prototype.set=Ht,Wt.prototype.clear=Gt,Wt.prototype["delete"]=qt,Wt.prototype.get=Xt,Wt.prototype.has=Yt,Wt.prototype.set=Zt,Kt.prototype.clear=Jt,Kt.prototype["delete"]=Qt,Kt.prototype.get=$t,Kt.prototype.has=te,Kt.prototype.set=ee,ne.prototype.add=ne.prototype.push=re,ne.prototype.has=ie,oe.prototype.clear=ae,oe.prototype["delete"]=se,oe.prototype.get=le,oe.prototype.has=ue,oe.prototype.set=ce;var Ae=wt?function(t){return null==t?[]:(t=Object(t),J(wt(t),(function(e){return bt.call(t,e)})))}:Ye,De=fe;function Pe(t,e){return e=null==e?a:e,!!e&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<e}function Re(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Le(t){return!!pt&&pt in t}function Oe(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ut;return t===n}function ke(t){return ft.call(t)}function Ie(t){if(null!=t){try{return ht.call(t)}catch(Cut){}try{return t+""}catch(Cut){}}return""}function Ne(t,e){return t===e||t!==t&&e!==e}(Et&&De(new Et(new ArrayBuffer(1)))!=A||Ct&&De(new Ct)!=m||Tt&&De(Tt.resolve())!=b||At&&De(new At)!=w||Dt&&De(new Dt)!=C)&&(De=function(t){var e=fe(t),n=e==y?t.constructor:void 0,r=n?Ie(n):"";if(r)switch(r){case Rt:return A;case Lt:return m;case Ot:return b;case kt:return w;case It:return C}return e});var Be=me(function(){return arguments}())?me:function(t){return Ge(t)&&dt.call(t,"callee")&&!bt.call(t,"callee")},Fe=Array.isArray;function ze(t){return null!=t&&He(t.length)&&!Ve(t)}var Ue=St||Ze;function je(t,e){return ge(t,e)}function Ve(t){if(!We(t))return!1;var e=fe(t);return e==p||e==f||e==u||e==x}function He(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function We(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ge(t){return null!=t&&"object"==typeof t}var qe=K?et(K):be;function Xe(t){return ze(t)?he(t):xe(t)}function Ye(){return[]}function Ze(){return!1}t.exports=je}));kC("en",{tableModule:{deleteCol:"Delete column",deleteRow:"Delete row",deleteTable:"Delete table",widthAuto:"Width auto",insertCol:"Insert column",insertRow:"Insert row",insertTable:"Insert table",header:"Header"}}),kC("zh-CN",{tableModule:{deleteCol:"删除列",deleteRow:"删除行",deleteTable:"删除表格",widthAuto:"宽度自适应",insertCol:"插入列",insertRow:"插入行",insertTable:"插入表格",header:"表头"}});var kG="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function IG(t){var e={exports:{}};return t(e,e.exports),e.exports}var NG,BG,FG=function(t){return t&&t.Math==Math&&t},zG=FG("object"==typeof globalThis&&globalThis)||FG("object"==typeof window&&window)||FG("object"==typeof self&&self)||FG("object"==typeof kG&&kG)||function(){return this}()||Function("return this")(),UG=function(t){try{return!!t()}catch(t){return!0}},jG=!UG((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),VG=Function.prototype.call,HG=VG.bind?VG.bind(VG):function(){return VG.apply(VG,arguments)},WG={}.propertyIsEnumerable,GG=Object.getOwnPropertyDescriptor,qG={f:GG&&!WG.call({1:2},1)?function(t){var e=GG(this,t);return!!e&&e.enumerable}:WG},XG=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},YG=Function.prototype,ZG=YG.bind,KG=YG.call,JG=ZG&&ZG.bind(KG),QG=ZG?function(t){return t&&JG(KG,t)}:function(t){return t&&function(){return KG.apply(t,arguments)}},$G=QG({}.toString),tq=QG("".slice),eq=function(t){return tq($G(t),8,-1)},nq=zG.Object,rq=QG("".split),iq=UG((function(){return!nq("z").propertyIsEnumerable(0)}))?function(t){return"String"==eq(t)?rq(t,""):nq(t)}:nq,oq=zG.TypeError,aq=function(t){if(null==t)throw oq("Can't call method on "+t);return t},sq=function(t){return iq(aq(t))},lq=function(t){return"function"==typeof t},uq=function(t){return"object"==typeof t?null!==t:lq(t)},cq=function(t){return lq(t)?t:void 0},hq=function(t,e){return arguments.length<2?cq(zG[t]):zG[t]&&zG[t][e]},dq=QG({}.isPrototypeOf),pq=hq("navigator","userAgent")||"",fq=zG.process,mq=zG.Deno,gq=fq&&fq.versions||mq&&mq.version,vq=gq&&gq.v8;vq&&(BG=(NG=vq.split("."))[0]>0&&NG[0]<4?1:+(NG[0]+NG[1])),!BG&&pq&&(!(NG=pq.match(/Edge\/(\d+)/))||NG[1]>=74)&&(NG=pq.match(/Chrome\/(\d+)/))&&(BG=+NG[1]);var yq=BG,bq=!!Object.getOwnPropertySymbols&&!UG((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&yq&&yq<41})),xq=bq&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_q=zG.Object,wq=xq?function(t){return"symbol"==typeof t}:function(t){var e=hq("Symbol");return lq(e)&&dq(e.prototype,_q(t))},Sq=zG.String,Mq=function(t){try{return Sq(t)}catch(t){return"Object"}},Eq=zG.TypeError,Cq=function(t){if(lq(t))return t;throw Eq(Mq(t)+" is not a function")},Tq=function(t,e){var n=t[e];return null==n?void 0:Cq(n)},Aq=zG.TypeError,Dq=Object.defineProperty,Pq=function(t,e){try{Dq(zG,t,{value:e,configurable:!0,writable:!0})}catch(f){zG[t]=e}return e},Rq=zG["__core-js_shared__"]||Pq("__core-js_shared__",{}),Lq=IG((function(t){(t.exports=function(t,e){return Rq[t]||(Rq[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Oq=zG.Object,kq=function(t){return Oq(aq(t))},Iq=QG({}.hasOwnProperty),Nq=Object.hasOwn||function(t,e){return Iq(kq(t),e)},Bq=0,Fq=Math.random(),zq=QG(1..toString),Uq=function(t){return"Symbol("+(void 0===t?"":t)+")_"+zq(++Bq+Fq,36)},jq=Lq("wks"),Vq=zG.Symbol,Hq=Vq&&Vq.for,Wq=xq?Vq:Vq&&Vq.withoutSetter||Uq,Gq=function(t){if(!Nq(jq,t)||!bq&&"string"!=typeof jq[t]){var e="Symbol."+t;bq&&Nq(Vq,t)?jq[t]=Vq[t]:jq[t]=xq&&Hq?Hq(e):Wq(e)}return jq[t]},qq=zG.TypeError,Xq=Gq("toPrimitive"),Yq=function(t,e){if(!uq(t)||wq(t))return t;var n,r=Tq(t,Xq);if(r){if(void 0===e&&(e="default"),n=HG(r,t,e),!uq(n)||wq(n))return n;throw qq("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&lq(n=t.toString)&&!uq(r=HG(n,t)))return r;if(lq(n=t.valueOf)&&!uq(r=HG(n,t)))return r;if("string"!==e&&lq(n=t.toString)&&!uq(r=HG(n,t)))return r;throw Aq("Can't convert object to primitive value")}(t,e)},Zq=function(t){var e=Yq(t,"string");return wq(e)?e:e+""},Kq=zG.document,Jq=uq(Kq)&&uq(Kq.createElement),Qq=function(t){return Jq?Kq.createElement(t):{}},$q=!jG&&!UG((function(){return 7!=Object.defineProperty(Qq("div"),"a",{get:function(){return 7}}).a})),tX=Object.getOwnPropertyDescriptor,eX={f:jG?tX:function(t,e){if(t=sq(t),e=Zq(e),$q)try{return tX(t,e)}catch(t){}if(Nq(t,e))return XG(!HG(qG.f,t,e),t[e])}},nX=zG.String,rX=zG.TypeError,iX=function(t){if(uq(t))return t;throw rX(nX(t)+" is not an object")},oX=zG.TypeError,aX=Object.defineProperty,sX={f:jG?aX:function(t,e,n){if(iX(t),e=Zq(e),iX(n),$q)try{return aX(t,e,n)}catch(t){}if("get"in n||"set"in n)throw oX("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},lX=jG?function(t,e,n){return sX.f(t,e,XG(1,n))}:function(t,e,n){return t[e]=n,t},uX=QG(Function.toString);lq(Rq.inspectSource)||(Rq.inspectSource=function(t){return uX(t)});var cX,hX,dX,pX=Rq.inspectSource,fX=zG.WeakMap,mX=lq(fX)&&/native code/.test(pX(fX)),gX=Lq("keys"),vX=function(t){return gX[t]||(gX[t]=Uq(t))},yX={},bX=zG.TypeError,xX=zG.WeakMap;if(mX||Rq.state){var _X=Rq.state||(Rq.state=new xX),wX=QG(_X.get),SX=QG(_X.has),MX=QG(_X.set);cX=function(t,e){if(SX(_X,t))throw new bX("Object already initialized");return e.facade=t,MX(_X,t,e),e},hX=function(t){return wX(_X,t)||{}},dX=function(t){return SX(_X,t)}}else{var EX=vX("state");yX[EX]=!0,cX=function(t,e){if(Nq(t,EX))throw new bX("Object already initialized");return e.facade=t,lX(t,EX,e),e},hX=function(t){return Nq(t,EX)?t[EX]:{}},dX=function(t){return Nq(t,EX)}}var CX={set:cX,get:hX,has:dX,enforce:function(t){return dX(t)?hX(t):cX(t,{})},getterFor:function(t){return function(e){var n;if(!uq(e)||(n=hX(e)).type!==t)throw bX("Incompatible receiver, "+t+" required");return n}}},TX=Function.prototype,AX=jG&&Object.getOwnPropertyDescriptor,DX=Nq(TX,"name"),PX={EXISTS:DX,PROPER:DX&&"something"===function(){}.name,CONFIGURABLE:DX&&(!jG||jG&&AX(TX,"name").configurable)},RX=IG((function(t){var e=PX.CONFIGURABLE,n=CX.get,r=CX.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;lq(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Nq(o,"name")||e&&o.name!==h)&&lX(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==zG?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:lX(t,n,o)):u?t[n]=o:Pq(n,o)})(Function.prototype,"toString",(function(){return lq(this)&&n(this).source||pX(this)}))})),LX=Math.ceil,OX=Math.floor,kX=function(t){var e=+t;return e!=e||0===e?0:(e>0?OX:LX)(e)},IX=Math.max,NX=Math.min,BX=function(t,e){var n=kX(t);return n<0?IX(n+e,0):NX(n,e)},FX=Math.min,zX=function(t){return t>0?FX(kX(t),9007199254740991):0},UX=function(t){return zX(t.length)},jX=function(t){return function(e,n,r){var i,o=sq(e),a=UX(o),s=BX(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},VX={includes:jX(!0),indexOf:jX(!1)}.indexOf,HX=QG([].push),WX=function(t,e){var n,r=sq(t),i=0,o=[];for(n in r)!Nq(yX,n)&&Nq(r,n)&&HX(o,n);for(;e.length>i;)Nq(r,n=e[i++])&&(~VX(o,n)||HX(o,n));return o},GX=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qX=GX.concat("length","prototype"),XX={f:Object.getOwnPropertyNames||function(t){return WX(t,qX)}},YX={f:Object.getOwnPropertySymbols},ZX=QG([].concat),KX=hq("Reflect","ownKeys")||function(t){var e=XX.f(iX(t)),n=YX.f;return n?ZX(e,n(t)):e},JX=function(t,e){for(var n=KX(e),r=sX.f,i=eX.f,o=0;o<n.length;o++){var a=n[o];Nq(t,a)||r(t,a,i(e,a))}},QX=/#|\.prototype\./,$X=function(t,e){var n=eY[tY(t)];return n==rY||n!=nY&&(lq(e)?UG(e):!!e)},tY=$X.normalize=function(t){return String(t).replace(QX,".").toLowerCase()},eY=$X.data={},nY=$X.NATIVE="N",rY=$X.POLYFILL="P",iY=$X,oY=eX.f,aY=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?zG:u?zG[s]||Pq(s,{}):(zG[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=oY(n,r))&&a.value:n[r],!iY(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;JX(o,i)}(t.sham||i&&i.sham)&&lX(o,"sham",!0),RX(n,r,o,t)}},sY={};sY[Gq("toStringTag")]="z";var lY,uY="[object z]"===String(sY),cY=Gq("toStringTag"),hY=zG.Object,dY="Arguments"==eq(function(){return arguments}()),pY=uY?eq:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=hY(t),cY))?n:dY?eq(e):"Object"==(r=eq(e))&&lq(e.callee)?"Arguments":r},fY=zG.String,mY=function(t){if("Symbol"===pY(t))throw TypeError("Cannot convert a Symbol value to a string");return fY(t)},gY=/"/g,vY=QG("".replace);aY({target:"String",proto:!0,forced:(lY="anchor",UG((function(){var t=""[lY]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{anchor:function(t){return e="a",n="name",r=t,i=mY(aq(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+vY(mY(r),gY,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var yY,bY=function(){var t=iX(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},xY=zG.RegExp,_Y=UG((function(){var t=xY("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),wY=_Y||UG((function(){return!xY("a","y").sticky})),SY={BROKEN_CARET:_Y||UG((function(){var t=xY("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:wY,UNSUPPORTED_Y:_Y},MY=Object.keys||function(t){return WX(t,GX)},EY=jG?Object.defineProperties:function(t,e){iX(t);for(var n,r=sq(e),i=MY(e),o=i.length,a=0;o>a;)sX.f(t,n=i[a++],r[n]);return t},CY=hq("document","documentElement"),TY=vX("IE_PROTO"),AY=function(){},DY=function(t){return"<script>"+t+"<\/script>"},PY=function(t){t.write(DY("")),t.close();var e=t.parentWindow.Object;return t=null,e},RY=function(){try{yY=new ActiveXObject("htmlfile")}catch(t){}var t,e;RY="undefined"!=typeof document?document.domain&&yY?PY(yY):((e=Qq("iframe")).style.display="none",CY.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(DY("document.F=Object")),t.close(),t.F):PY(yY);for(var n=GX.length;n--;)delete RY.prototype[GX[n]];return RY()};yX[TY]=!0;var LY,OY,kY=Object.create||function(t,e){var n;return null!==t?(AY.prototype=iX(t),n=new AY,AY.prototype=null,n[TY]=t):n=RY(),void 0===e?n:EY(n,e)},IY=zG.RegExp,NY=UG((function(){var t=IY(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),BY=zG.RegExp,FY=UG((function(){var t=BY("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),zY=CX.get,UY=Lq("native-string-replace",String.prototype.replace),jY=RegExp.prototype.exec,VY=jY,HY=QG("".charAt),WY=QG("".indexOf),GY=QG("".replace),qY=QG("".slice),XY=(OY=/b*/g,HG(jY,LY=/a/,"a"),HG(jY,OY,"a"),0!==LY.lastIndex||0!==OY.lastIndex),YY=SY.BROKEN_CARET,ZY=void 0!==/()??/.exec("")[1];(XY||ZY||YY||NY||FY)&&(VY=function(t){var e,n,r,i,o,a,s,l=this,u=zY(l),c=mY(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=HG(VY,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=YY&&l.sticky,f=HG(bY,l),m=l.source,g=0,v=c;if(p&&(f=GY(f,"y",""),-1===WY(f,"g")&&(f+="g"),v=qY(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==HY(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),ZY&&(n=new RegExp("^"+m+"$(?!\\s)",f)),XY&&(r=l.lastIndex),i=HG(jY,p?n:l,v),p?i?(i.input=qY(i.input,g),i[0]=qY(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:XY&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),ZY&&i&&i.length>1&&HG(UY,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=kY(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var KY=VY;aY({target:"RegExp",proto:!0,forced:/./.exec!==KY},{exec:KY});var JY=Array.isArray||function(t){return"Array"==eq(t)},QY=function(){},$Y=[],tZ=hq("Reflect","construct"),eZ=/^\s*(?:class|function)\b/,nZ=QG(eZ.exec),rZ=!eZ.exec(QY),iZ=function(t){if(!lq(t))return!1;try{return tZ(QY,$Y,t),!0}catch(t){return!1}},oZ=!tZ||UG((function(){var t;return iZ(iZ.call)||!iZ(Object)||!iZ((function(){t=!0}))||t}))?function(t){if(!lq(t))return!1;switch(pY(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return rZ||!!nZ(eZ,pX(t))}:iZ,aZ=function(t,e,n){var r=Zq(e);r in t?sX.f(t,r,XG(0,n)):t[r]=n},sZ=Gq("species"),lZ=function(t){return yq>=51||!UG((function(){var e=[];return(e.constructor={})[sZ]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},uZ=QG([].slice),cZ=lZ("slice"),hZ=Gq("species"),dZ=zG.Array,pZ=Math.max;function fZ(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function mZ(t){var e=t.selection;if(null==e)return!1;var n=fZ(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"table-cell")}}),1)[0];if(n){var r=fZ(n,2)[1],i=ue.start(t,r);if(we.equals(e.anchor,i))return!0}return!1}function gZ(t,e){var n,r,i=ue.nodes(t,{at:e,match:function(t){return"table"===Bx.getNodeType(t)}}),o=!1;try{for(var a=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=a.next();!s.done;s=a.next())s.value,o=!0}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}aY({target:"Array",proto:!0,forced:!cZ},{slice:function(t,e){var n,r,i,o=sq(this),a=UX(o),s=BX(t,a),l=BX(void 0===e?a:e,a);if(JY(o)&&(n=o.constructor,(oZ(n)&&(n===dZ||JY(n.prototype))||uq(n)&&null===(n=n[hZ]))&&(n=void 0),n===dZ||void 0===n))return uZ(o,s,l);for(r=new(void 0===n?dZ:n)(pZ(l-s,0)),i=0;s<l;s++,i++)s in o&&aZ(r,i,o[s]);return r.length=i,r}});var vZ=QG(QG.bind),yZ=Gq("species"),bZ=zG.Array,xZ=function(t,e){return new(function(t){var e;return JY(t)&&(e=t.constructor,(oZ(e)&&(e===bZ||JY(e.prototype))||uq(e)&&null===(e=e[yZ]))&&(e=void 0)),void 0===e?bZ:e}(t))(0===e?0:e)},_Z=QG([].push),wZ=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=kq(l),m=iq(f),g=function(t,e){return Cq(t),void 0===e?t:vZ?vZ(t,e):function(){return t.apply(e,arguments)}}(u,c),v=UX(m),y=0,b=h||xZ,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:_Z(x,d)}else switch(t){case 4:return!1;case 7:_Z(x,d)}return o?-1:r||i?i:x}},SZ={forEach:wZ(0),map:wZ(1),filter:wZ(2),some:wZ(3),every:wZ(4),find:wZ(5),findIndex:wZ(6),filterReject:wZ(7)},MZ=SZ.map;aY({target:"Array",proto:!0,forced:!lZ("map")},{map:function(t){return MZ(this,t,arguments.length>1?arguments[1]:void 0)}});var EZ=uY?{}.toString:function(){return"[object "+pY(this)+"]"};function CZ(t){var e=t.children||[];return 0===e.length?[]:(e[0]||{}).children||[]}function TZ(t){return CZ(t).every((function(t){return!!t.isHeader}))}uY||RX(Object.prototype,"toString",EZ,{unsafe:!0});var AZ=PX.PROPER,DZ=RegExp.prototype,PZ=DZ.toString,RZ=QG(bY),LZ=UG((function(){return"/a/b"!=PZ.call({source:"a",flags:"b"})})),OZ=AZ&&"toString"!=PZ.name;(LZ||OZ)&&RX(RegExp.prototype,"toString",(function(){var t=iX(this),e=mY(t.source),n=t.flags;return"/"+e+"/"+mY(void 0===n&&dq(DZ,t)&&!("flags"in DZ)?RZ(t):n)}),{unsafe:!0});var kZ=Gq("unscopables"),IZ=Array.prototype;null==IZ[kZ]&&sX.f(IZ,kZ,{configurable:!0,value:kY(null)});var NZ,BZ=SZ.find,FZ=!0;"find"in[]&&Array(1).find((function(){FZ=!1})),aY({target:"Array",proto:!0,forced:FZ},{find:function(t){return BZ(this,t,arguments.length>1?arguments[1]:void 0)}}),NZ="find",IZ[kZ][NZ]=!0;var zZ=Function.prototype,UZ=zZ.apply,jZ=zZ.bind,VZ=zZ.call,HZ="object"==typeof Reflect&&Reflect.apply||(jZ?VZ.bind(UZ):function(){return VZ.apply(UZ,arguments)}),WZ=Gq("species"),GZ=RegExp.prototype,qZ=function(t,e,n,r){var i=Gq(t),o=!UG((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!UG((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[WZ]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=QG(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=QG(t),l=e.exec;return l===KY||l===GZ.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));RX(String.prototype,t,l[0]),RX(GZ,i,l[1])}r&&lX(GZ[i],"sham",!0)},XZ=Gq("match"),YZ=zG.TypeError,ZZ=Gq("species"),KZ=function(t,e){var n,r=iX(t).constructor;return void 0===r||null==(n=iX(r)[ZZ])?e:function(t){if(oZ(t))return t;throw YZ(Mq(t)+" is not a constructor")}(n)},JZ=QG("".charAt),QZ=QG("".charCodeAt),$Z=QG("".slice),tK=function(t){return function(e,n){var r,i,o=mY(aq(e)),a=kX(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=QZ(o,a))<55296||r>56319||a+1===s||(i=QZ(o,a+1))<56320||i>57343?t?JZ(o,a):r:t?$Z(o,a,a+2):i-56320+(r-55296<<10)+65536}},eK={codeAt:tK(!1),charAt:tK(!0)}.charAt,nK=function(t,e,n){return e+(n?eK(t,e).length:1)},rK=zG.Array,iK=Math.max,oK=function(t,e,n){for(var r=UX(t),i=BX(e,r),o=BX(void 0===n?r:n,r),a=rK(iK(o-i,0)),s=0;i<o;i++,s++)aZ(a,s,t[i]);return a.length=s,a},aK=zG.TypeError,sK=function(t,e){var n=t.exec;if(lq(n)){var r=HG(n,t,e);return null!==r&&iX(r),r}if("RegExp"===eq(t))return HG(KY,t,e);throw aK("RegExp#exec called on incompatible receiver")},lK=SY.UNSUPPORTED_Y,uK=Math.min,cK=[].push,hK=QG(/./.exec),dK=QG(cK),pK=QG("".slice);qZ("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=mY(aq(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!uq(r=t)||!(void 0!==(i=r[XZ])?i:"RegExp"==eq(r)))return HG(e,o,t,a);for(var s,l,u,c=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=new RegExp(t.source,h+"g");(s=HG(KY,p,o))&&!((l=p.lastIndex)>d&&(dK(c,pK(o,d,s.index)),s.length>1&&s.index<o.length&&HZ(cK,c,oK(s,1)),u=s[0].length,d=l,c.length>=a));)p.lastIndex===s.index&&p.lastIndex++;return d===o.length?!u&&hK(p,"")||dK(c,""):dK(c,pK(o,d)),c.length>a?oK(c,0,a):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:HG(e,this,t,n)}:e,[function(e,n){var i=aq(this),o=null==e?void 0:Tq(e,t);return o?HG(o,e,i,n):HG(r,mY(i),e,n)},function(t,i){var o=iX(this),a=mY(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var l=KZ(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(lK?"g":"y"),h=new l(lK?"^(?:"+o.source+")":o,c),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===a.length)return null===sK(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=lK?0:f;var g,v=sK(h,lK?pK(a,f):a);if(null===v||(g=uK(zX(h.lastIndex+(lK?f:0)),a.length))===p)f=nK(a,f,u);else{if(dK(m,pK(a,p,f)),m.length===d)return m;for(var y=1;y<=v.length-1;y++)if(dK(m,v[y]),m.length===d)return m;f=p=g}}return dK(m,pK(a,p)),m}]}),!!UG((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),lK);var fK="\t\n\v\f\r                　\u2028\u2029\ufeff",mK=QG("".replace),gK="["+fK+"]",vK=RegExp("^"+gK+gK+"*"),yK=RegExp(gK+gK+"*$"),bK=function(t){return function(e){var n=mY(aq(e));return 1&t&&(n=mK(n,vK,"")),2&t&&(n=mK(n,yK,"")),n}},xK={start:bK(1),end:bK(2),trim:bK(3)},_K=PX.PROPER,wK=xK.trim;function SK(t){return t.length?t[0].tagName.toLowerCase():""}aY({target:"String",proto:!0,forced:function(t){return UG((function(){return!!fK[t]()||"​᠎"!=="​᠎"[t]()||_K&&fK[t].name!==t}))}("trim")},{trim:function(){return wK(this)}}),aY({global:!0},{globalThis:zG}),Li&&(hi.fn.append=Li),bi&&(hi.fn.on=bi),Hi&&(hi.fn.focus=Hi),mi&&(hi.fn.attr=mi),yi&&(hi.fn.val=yi),Di&&(hi.fn.html=Di),vi&&(hi.fn.dataset=vi),di&&(hi.fn.addClass=di),pi&&(hi.fn.removeClass=pi),Bi&&(hi.fn.children=Bi),Ti&&(hi.fn.each=Ti),Ni&&(hi.fn.find=Ni);var MK=!1,EK=0,CK=0,TK=null,AK=null,DK=hi("body");function PK(t){MK=!1,AK=null,TK=null,DK.off("mousemove",RK),DK.off("mouseup",PK)}DK.on("mousedown",(function(t){var e=t.target;if(("TH"===e.tagName||"TD"===e.tagName)&&"col-resize"===e.style.cursor){e.style.cursor="auto",t.preventDefault(),MK=!0;var n=t.clientX;EK=n;var r=e.getBoundingClientRect().width;CK=r,DK.on("mousemove",RK),DK.on("mouseup",PK)}}));var RK=Yo((function(t){if(MK&&null!=AK&&null!=TK){t.preventDefault();var e=t.clientX,n=CK+(e-EK);(n=Math.floor(100*n)/100)<30&&(n=30),$e.setNodes(AK,{width:n.toString()},{at:TK})}}),100),LK={type:"table",renderElem:function(t,e,n){var r=function(t,e){if(t.isDisabled())return!1;var n=t.selection;if(null==n)return!0;if(Te.isCollapsed(n))return!0;var r=n.anchor,i=n.focus,o=Bx.findPath(t,e),a=ue.start(t,o),s=ue.end(t,o),l=we.compare(r,s)<=0&&we.compare(r,a)>=0,u=we.compare(i,s)<=0&&we.compare(i,a)>=0;return!!(l&&u&&ye.equals(r.path.slice(0,3),i.path.slice(0,3)))}(n,t),i=t.width,o=void 0===i?"auto":i,a=Bx.isNodeSelected(n,t),s=CZ(t),l=qa("div",{className:"table-container","data-selected":a,on:{mousedown:function(e){"DIV"===e.target.tagName&&e.preventDefault();var r=Bx.findPath(n,t),i=ue.start(n,r),o=n.selection;null!=o?o.anchor.path[0]!==r[0]&&n.select(i):n.select(i)}}},qa("table",{width:o,contentEditable:r},qa("colgroup",null,s.map((function(t){var e=t.width;return qa("col",{width:void 0===e?"auto":e})}))),qa("tbody",null,e)));return l}},OK={type:"table-row",renderElem:function(t,e,n){return qa("tr",null,e)}},kK={type:"table-cell",renderElem:function(t,e,n){var r=function(t,e){var n=Bx.getParentNode(t,e);if(null==n)return!1;var r=Bx.getParentNode(t,n);return null!=r&&CZ(r).some((function(t){return t===e}))}(n,t),i=t,o=i.colSpan,a=void 0===o?1:o,s=i.rowSpan,l=void 0===s?1:s,u=i.isHeader,c=void 0!==u&&u;if(!r)return qa("td",{colSpan:a,rowSpan:l},e);var h=qa(c?"th":"td",{colSpan:a,rowSpan:l,style:{borderRightWidth:"3px"},on:{mousemove:Yo((function(e){var r=this.elm;if(null!=r){var i=r.getBoundingClientRect(),o=i.left,a=i.width,s=i.top,l=i.height,u=e.clientX,c=e.clientY;MK||(u>o+a-5&&u<o+a&&c>s&&c<s+l?(r.style.cursor="col-resize",AK=n,TK=Bx.findPath(n,t)):MK||(r.style.cursor="auto",AK=null,TK=null))}}),100)}},e);return h}},IK={type:"table",elemToHtml:function(t,e){var n=t.width;return'<table style="width: '+(void 0===n?"auto":n)+';"><tbody>'+e+"</tbody></table>"}},NK={type:"table-row",elemToHtml:function(t,e){return"<tr>"+e+"</tr>"}},BK={type:"table-cell",elemToHtml:function(t,e){var n=t,r=n.colSpan,i=void 0===r?1:r,o=n.rowSpan,a=void 0===o?1:o,s=n.isHeader,l=void 0!==s&&s,u=n.width,c=l?"th":"td";return"<"+c+' colSpan="'+i+'" rowSpan="'+a+'" width="'+(void 0===u?"auto":u)+'">'+e+"</"+c+">"}},FK={selector:"table",preParseHtml:function(t){var e=hi(t);if("table"!==SK(e))return t;var n=e.find("tbody");if(0===n.length)return t;var r=e.find("tr");return e.append(r),n.remove(),e[0]}},zK=SZ.filter;aY({target:"Array",proto:!0,forced:!lZ("filter")},{filter:function(t){return zK(this,t,arguments.length>1?arguments[1]:void 0)}});var UK=Math.floor,jK=QG("".charAt),VK=QG("".replace),HK=QG("".slice),WK=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,GK=/\$([$&'`]|\d{1,2})/g,qK=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=GK;return void 0!==i&&(i=kq(i),l=WK),VK(o,l,(function(o,l){var u;switch(jK(l,0)){case"$":return"$";case"&":return t;case"`":return HK(e,0,n);case"'":return HK(e,a);case"<":u=i[HK(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=UK(c/10);return 0===h?o:h<=s?void 0===r[h-1]?jK(l,1):r[h-1]+jK(l,1):o}u=r[c-1]}return void 0===u?"":u}))},XK=Gq("replace"),YK=Math.max,ZK=Math.min,KK=QG([].concat),JK=QG([].push),QK=QG("".indexOf),$K=QG("".slice),tJ="$0"==="a".replace(/./,"$0"),eJ=!!/./[XK]&&""===/./[XK]("a","$0");qZ("replace",(function(t,e,n){var r=eJ?"$":"$0";return[function(t,n){var r=aq(this),i=null==t?void 0:Tq(t,XK);return i?HG(i,t,r,n):HG(e,mY(r),t,n)},function(t,i){var o=iX(this),a=mY(t);if("string"==typeof i&&-1===QK(i,r)&&-1===QK(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var l=lq(i);l||(i=mY(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=sK(o,a);if(null===d)break;if(JK(h,d),!u)break;""===mY(d[0])&&(o.lastIndex=nK(a,zX(o.lastIndex),c))}for(var p,f="",m=0,g=0;g<h.length;g++){for(var v=mY((d=h[g])[0]),y=YK(ZK(kX(d.index),a.length),0),b=[],x=1;x<d.length;x++)JK(b,void 0===(p=d[x])?p:String(p));var _=d.groups;if(l){var w=KK([v],b,y,a);void 0!==_&&JK(w,_);var S=mY(HZ(i,void 0,w))}else S=qK(v,a,y,b,_,i);y>=m&&(f+=$K(a,m,y)+S,m=y+v.length)}return f+$K(a,m)}]}),!!UG((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!tJ||eJ);var nJ={selector:"td,th",parseElemHtml:function(t,e,n){var r=hi(t);0===(e=e.filter((function(t){return!!ke.isText(t)||!!n.isInline(t)}))).length&&(e=[{text:r.text().replace(/\s+/gm," ")}]);var i=parseInt(r.attr("colSpan")||"1"),o=parseInt(r.attr("rowSpan")||"1"),a=r.attr("width")||"auto";return{type:"table-cell",isHeader:"th"===SK(r),colSpan:i,rowSpan:o,width:a,children:e}}},rJ={selector:"tr",parseElemHtml:function(t,e,n){return{type:"table-row",children:e.filter((function(t){return"table-cell"===Bx.getNodeType(t)}))}}},iJ={selector:"table",parseElemHtml:function(t,e,n){var r=hi(t),i="auto";return"100%"===function(t,e){for(var n="",r=(t.attr("style")||"").split(";"),i=r.length,o=0;o<i;o++){var a=r[o];if(a){var s=a.split(":");s[0].trim()===e&&(n=s[1].trim())}}return n}(r,"width")&&(i="100%"),"100%"===r.attr("width")&&(i="100%"),{type:"table",width:i,children:e.filter((function(t){return"table-row"===Bx.getNodeType(t)}))}}},oJ=function(){function t(){this.title=IC("tableModule.insertTable"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M0 64v896h1024V64H0z m384 576v-192h256v192h-256z m256 64v192h-256v-192h256z m0-512v192h-256V192h256zM320 192v192H64V192h256z m-256 256h256v192H64v-192z m640 0h256v192h-256v-192z m0-64V192h256v192h-256zM64 704h256v192H64v-192z m640 192v-192h256v192h-256z"></path></svg>',this.tag="button",this.showDropPanel=!0,this.$content=null}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||!!Bx.getSelectedElems(t).some((function(e){var n=Bx.getNodeType(e);return"pre"===n||"table"===n||!!t.isVoid(e)}))},t.prototype.getPanelContentElem=function(t){var e=this;if(this.$content)return this.$content[0];for(var n=hi('<div class="w-e-panel-content-table"></div>'),r=hi("<span>0 &times; 0</span>"),i=hi("<table></table>"),o=0;o<10;o++){for(var a=hi("<tr></tr>"),s=0;s<10;s++){var l=hi("<td></td>");l.attr("data-x",s.toString()),l.attr("data-y",o.toString()),a.append(l),l.on("mouseenter",(function(t){var e=t.target;if(null!=e){var n=hi(e).dataset(),o=n.x,a=n.y;r[0].innerHTML=o+1+" &times; "+(a+1),i.children().each((function(t){hi(t).children().each((function(t){var e=hi(t),n=e.dataset(),r=n.x,i=n.y;r<=o&&i<=a?e.addClass("active"):e.removeClass("active")}))}))}})),l.on("click",(function(n){n.preventDefault();var r=n.target;if(null!=r){var i=hi(r).dataset(),o=i.x,a=i.y;e.insertTable(t,a+1,o+1)}}))}i.append(a)}return n.append(i),n.append(r),this.$content=n,n[0]},t.prototype.insertTable=function(t,e,n){var r=parseInt(e,10),i=parseInt(n,10);if(r&&i&&!(r<=0||i<=0)){var o=Bx.getSelectedNodeByType(t,"paragraph");o&&""===fe.string(o)&&$e.removeNodes(t,{mode:"highest"});var a=function(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],o=0;o<e;o++){var a={type:"table-cell",children:[{text:""}]};0===r&&(a.isHeader=!0),i.push(a)}n.push({type:"table-row",children:i})}return{type:"table",width:"auto",children:n}}(r,i);$e.insertNodes(t,a,{mode:"highest"})}},t}(),aJ=function(){function t(){this.title=IC("tableModule.deleteTable"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M826.8032 356.5312c-19.328 0-36.3776 15.6928-36.3776 35.0464v524.2624c0 19.328-16 34.56-35.328 34.56H264.9344c-19.328 0-35.5072-15.3088-35.5072-34.56V390.0416c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.6928-33.5104 35.0464V915.712c0 57.9328 44.6208 108.288 102.528 108.288H755.2c57.9328 0 108.0832-50.4576 108.0832-108.288V391.4752c-0.1024-19.2512-17.1264-34.944-36.48-34.944z" p-id="9577"></path><path d="M437.1712 775.7568V390.6048c0-19.328-14.1568-35.0464-33.5104-35.0464s-33.5104 15.616-33.5104 35.0464v385.152c0 19.328 14.1568 35.0464 33.5104 35.0464s33.5104-15.7184 33.5104-35.0464zM649.7024 775.7568V390.6048c0-19.328-17.0496-35.0464-36.3776-35.0464s-36.3776 15.616-36.3776 35.0464v385.152c0 19.328 17.0496 35.0464 36.3776 35.0464s36.3776-15.7184 36.3776-35.0464zM965.0432 217.0368h-174.6176V145.5104c0-57.9328-47.2064-101.76-104.6528-101.76h-350.976c-57.8304 0-105.3952 43.8528-105.3952 101.76v71.5264H54.784c-19.4304 0-35.0464 14.1568-35.0464 33.5104 0 19.328 15.616 33.5104 35.0464 33.5104h910.3616c19.328 0 35.0464-14.1568 35.0464-33.5104 0-19.3536-15.6928-33.5104-35.1488-33.5104z m-247.3728 0H297.3952V145.5104c0-19.328 18.2016-34.7648 37.4272-34.7648h350.976c19.1488 0 31.872 15.1296 31.872 34.7648v71.5264z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return null==t.selection||null==Bx.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){this.isDisabled(t)||$e.removeNodes(t,{mode:"highest"})},t}(),sJ=function(){function t(){this.title=IC("tableModule.insertRow"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M707.7888 521.0112h-147.456v-147.456H488.2432v147.456h-147.456v68.8128h147.456v147.456h72.0896v-147.456h147.456zM0 917.504V0h1048.576v917.504H0zM327.68 65.536H65.536v196.608H327.68V65.536z m327.68 0H393.216v196.608h262.144V65.536z m327.68 0h-262.144v196.608h262.144V65.536z m0 258.8672H65.536v462.0288H983.04V324.4032z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=fZ(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"table-cell")},universal:!0}),1),r=fZ(n[0],2),i=r[0],o=r[1],a=Bx.getParentNode(t,i),s=(null==a?void 0:a.children.length)||0;if(0!==s){for(var l={type:"table-row",children:[]},u=0;u<s;u++)l.children.push({type:"table-cell",children:[{text:""}]});var c=ye.parent(o),h=ye.next(c);$e.insertNodes(t,l,{at:h})}}},t}(),lJ=function(){function t(){this.title=IC("tableModule.deleteRow"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M907.6736 586.5472L747.1104 425.984l163.84-163.84-78.6432-78.6432-163.84 163.84L507.904 186.7776 429.2608 262.144l163.84 163.84-167.1168 167.1168 78.6432 78.6432 167.1168-167.1168 160.5632 160.5632 75.3664-78.6432zM0 917.504V0h1048.576v917.504H0z m983.04-327.68h-22.9376l-65.536-65.536H983.04V327.68h-91.7504l65.536-65.536h26.2144V65.536H65.536v196.608h317.8496l65.536 65.536H65.536v196.608h380.1088l-65.536 65.536H65.536v196.608H983.04v-196.608z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table-row")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=fZ(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"table-row")},universal:!0}),1),r=fZ(n[0],2),i=r[0],o=r[1],a=Bx.getParentNode(t,i);((null==a?void 0:a.children.length)||0)<=1?$e.removeNodes(t,{mode:"highest"}):$e.removeNodes(t,{at:o})}},t}(),uJ={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},cJ=Qq("span").classList,hJ=cJ&&cJ.constructor&&cJ.constructor.prototype,dJ=hJ===Object.prototype?void 0:hJ,pJ=SZ.forEach,fJ=function(t,e){var n=[][t];return!!n&&UG((function(){n.call(null,e||function(){throw 1},1)}))}("forEach"),mJ=fJ?[].forEach:function(t){return pJ(this,t,arguments.length>1?arguments[1]:void 0)},gJ=function(t){if(t&&t.forEach!==mJ)try{lX(t,"forEach",mJ)}catch(Cut){t.forEach=mJ}};for(var vJ in uJ)uJ[vJ]&&gJ(zG[vJ]&&zG[vJ].prototype);gJ(dJ);var yJ=function(){function t(){this.title=IC("tableModule.insertCol"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M327.68 193.3312v186.7776H140.9024v91.7504H327.68v186.7776h88.4736V471.8592h190.0544V380.1088H416.1536V193.3312zM0 917.504V0h1048.576v917.504H0zM655.36 65.536H65.536v720.896H655.36V65.536z m327.68 0h-262.144v196.608h262.144V65.536z m0 262.144h-262.144v196.608h262.144V327.68z m0 262.144h-262.144v196.608h262.144v-196.608z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=fZ(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"table-cell")},universal:!0}),1),r=fZ(n[0],2),i=r[0],o=r[1],a=Bx.getParentNode(t,i);if(null!=a){var s=Bx.getParentNode(t,a);null!=s&&(s.children||[]).forEach((function(e,n){re.isElement(e)&&(e.children||[]).forEach((function(e){var r=Bx.findPath(t,e);if(r.length===o.length&&OG(r.slice(-1),o.slice(-1))){var i={type:"table-cell",children:[{text:""}]};0===n&&TZ(s)&&(i.isHeader=!0),$e.insertNodes(t,i,{at:r})}}))}))}}},t}(),bJ=function(){function t(){this.title=IC("tableModule.deleteCol"),this.iconSvg='<svg viewBox="0 0 1048 1024"><path d="M327.68 510.976L393.216 445.44v-13.1072L327.68 366.7968V510.976z m327.68-78.4384l65.536-65.536V507.904L655.36 442.368v-9.8304z m393.216 484.9664V0H0v917.504h1048.576z m-65.536-131.072h-262.144v-52.4288l-13.1072 13.1072-52.4288-52.4288v91.7504H393.216v-91.7504l-52.4288 52.4288-13.1072-13.1072v52.4288H65.536V65.536H327.68v121.2416l36.0448-36.0448 29.4912 29.4912V62.2592h262.144V180.224l49.152-49.152 16.384 16.384V62.2592h262.144V786.432z m-294.912-108.1344l-160.5632-160.5632-167.1168 167.1168-78.6432-78.6432 167.1168-167.1168L288.3584 278.528l78.6432-78.6432 160.5632 160.5632 163.84-163.84 78.6432 78.6432-163.84 163.84 160.5632 160.5632-78.6432 78.6432z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table-cell")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=fZ(ue.nodes(t,{match:function(t){return Bx.checkNodeType(t,"table-cell")},universal:!0}),1),r=fZ(n[0],2),i=r[0],o=r[1],a=Bx.getParentNode(t,i),s=(null==a?void 0:a.children.length)||0;if(!a||s<=1)$e.removeNodes(t,{mode:"highest"});else{var l=Bx.getParentNode(t,a);null!=l&&(l.children||[]).forEach((function(e){re.isElement(e)&&(e.children||[]).forEach((function(e){var n=Bx.findPath(t,e);n.length===o.length&&OG(n.slice(-1),o.slice(-1))&&$e.removeNodes(t,{at:n})}))}))}}},t}(),xJ=function(){function t(){this.title=IC("tableModule.header"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M704 128l-64 0L384 128 320 128 0 128l0 256 0 64 0 192 0 64 0 256 320 0 64 0 256 0 64 0 320 0 0-256 0-64L1024 448 1024 384 1024 128 704 128zM640 640 384 640 384 448l256 0L640 640zM64 448l256 0 0 192L64 640 64 448zM320 896 64 896l0-192 256 0L320 896zM640 896 384 896l0-192 256 0L640 896zM960 896l-256 0 0-192 256 0L960 896zM960 640l-256 0L704 448l256 0L960 640z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){var e=Bx.getSelectedNodeByType(t,"table");return null!=e&&TZ(e)},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n=!e,r=Bx.getSelectedNodeByType(t,"table");null!=r&&CZ(r).forEach((function(e){return $e.setNodes(t,{isHeader:n},{at:Bx.findPath(t,e)})}))}},t}(),_J=function(){function t(){this.title=IC("tableModule.widthAuto"),this.iconSvg='<svg viewBox="0 0 1228 1024"><path d="M862.514337 563.200461H404.581995v121.753478a13.311987 13.311987 0 0 1-6.655993 11.468789 10.23999 10.23999 0 0 1-12.083188-1.433599l-204.799795-179.199821a13.721586 13.721586 0 0 1 0-20.479979l204.799795-179.302221a10.23999 10.23999 0 0 1 12.185588-1.535998 13.209587 13.209587 0 0 1 6.553593 11.673588v115.097485h457.932342V319.693504a11.571188 11.571188 0 0 1 18.841582-10.239989l204.799795 179.19982a13.721586 13.721586 0 0 1 0 20.47998l-204.799795 179.199821a10.23999 10.23999 0 0 1-12.185588 1.535998 13.311987 13.311987 0 0 1-6.655994-11.571188V563.200461zM136.499064 14.951409v993.893406a15.257585 15.257585 0 0 1-15.155185 15.052785H15.155185A15.155185 15.155185 0 0 1 0 1008.844815V14.951409a15.257585 15.257585 0 0 1 15.155185-15.052785h106.086294a15.155185 15.155185 0 0 1 15.257585 15.155185zM1228.798771 14.951409v993.893406a15.257585 15.257585 0 0 1-15.155185 15.052785h-106.188693a15.155185 15.155185 0 0 1-15.155185-15.052785V14.951409a15.257585 15.257585 0 0 1 15.155185-15.052785h106.086293A15.155185 15.155185 0 0 1 1228.798771 15.053809z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){var e=Bx.getSelectedNodeByType(t,"table");return null!=e&&"100%"===e.width},t.prototype.isActive=function(t){return!!this.getValue(t)},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||null==Bx.getSelectedNodeByType(t,"table")},t.prototype.exec=function(t,e){if(!this.isDisabled(t)){var n={width:e?"auto":"100%"};$e.setNodes(t,n,{mode:"highest"})}},t}(),wJ={renderElems:[LK,OK,kK],elemsToHtml:[IK,NK,BK],preParseHtml:[FK],parseElemsHtml:[nJ,rJ,iJ],menus:[{key:"insertTable",factory:function(){return new oJ}},{key:"deleteTable",factory:function(){return new aJ}},{key:"insertTableRow",factory:function(){return new sJ}},{key:"deleteTableRow",factory:function(){return new lJ}},{key:"insertTableCol",factory:function(){return new yJ}},{key:"deleteTableCol",factory:function(){return new bJ}},{key:"tableHeader",factory:function(){return new xJ}},{key:"tableFullWidth",factory:function(){return new _J}}],editorPlugin:function(t){var e=t.insertBreak,n=t.deleteBackward,r=t.deleteForward,i=t.normalizeNode,o=t.insertData,a=t.handleTab,s=t.selectAll,l=t;return l.insertBreak=function(){null==Bx.getSelectedNodeByType(l,"table")?e():l.insertText("\n")},l.deleteBackward=function(t){if(!mZ(l)){var e=l.selection;if(e){var r=ue.before(l,e);if(r){var i=gZ(l,r),o=gZ(l,e);if(i&&!o)return}}n(t)}},l.handleTab=function(){var e;if(Bx.getSelectedNodeByType(l,"table")){var n=ue.above(t);Bx.checkNodeType(n[0],"table-cell")&&$e.select(t,n[1]);var r=ue.next(t);if(r)r[0]&&r[0].text&&(r=null!==(e=ue.above(t,{at:r[1]}))&&void 0!==e?e:r),$e.select(t,r[1]);else{var i=l.children||[],o=i.length;if(Bx.checkNodeType(i[o-1],"table")){var s=Bx.genEmptyParagraph();$e.insertNodes(l,s,{at:[o]}),l.handleTab()}}}else a()},l.deleteForward=function(t){mZ(l)||r(t)},l.normalizeNode=function(t){var e=fZ(t,2),n=e[0],r=e[1];if("table"!==Bx.getNodeType(n))return i([n,r]);if(Bx.isLastNode(l,n)){var o=Bx.genEmptyParagraph();$e.insertNodes(l,o,{at:[r[0]+1]})}},l.insertData=function(t){if(null!=Bx.getSelectedNodeByType(l,"table")){var e=t.getData("text/plain");"\n"===e||/<img[^>]+>/.test(t.getData("text/html"))?o(t):ue.insertText(l,e)}else o(t)},l.selectAll=function(){var t=l.selection;if(null!=t){var e=Bx.getSelectedNodeByType(l,"table-cell");if(null!=e){var n=t.anchor,r=t.focus;if(ye.equals(n.path.slice(0,3),r.path.slice(0,3)))if(0!==fe.string(e).length){var i=Bx.findPath(l,e),o={anchor:ue.start(l,i),focus:ue.end(l,i)};l.select(o)}else s();else s()}else s()}else s()},l}};kC("en",{videoModule:{delete:"Delete",uploadVideo:"Upload video",insertVideo:"Insert video",videoSrc:"video source",insertPlaceHolder:"video file url, or third-party <iframe>",ok:"Ok",editSize:"Edit size",width:"Width",height:"Height"}}),kC("zh-CN",{videoModule:{delete:"删除视频",uploadVideo:"上传视频",insertVideo:"插入视频",videoSrc:"视频地址",insertPlaceHolder:"视频文件 url 或第三方 <iframe>",ok:"确定",editSize:"修改尺寸",width:"宽度",height:"高度"}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var SJ=function(){return SJ=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},SJ.apply(this,arguments)};function MJ(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function EJ(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function CJ(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function TJ(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function AJ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=CJ(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}var DJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function PJ(t){var e={exports:{}};return t(e,e.exports),e.exports}var RJ,LJ,OJ=function(t){return t&&t.Math==Math&&t},kJ=OJ("object"==typeof globalThis&&globalThis)||OJ("object"==typeof window&&window)||OJ("object"==typeof self&&self)||OJ("object"==typeof DJ&&DJ)||function(){return this}()||Function("return this")(),IJ=function(t){try{return!!t()}catch(t){return!0}},NJ=!IJ((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),BJ=Function.prototype.call,FJ=BJ.bind?BJ.bind(BJ):function(){return BJ.apply(BJ,arguments)},zJ={}.propertyIsEnumerable,UJ=Object.getOwnPropertyDescriptor,jJ={f:UJ&&!zJ.call({1:2},1)?function(t){var e=UJ(this,t);return!!e&&e.enumerable}:zJ},VJ=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},HJ=Function.prototype,WJ=HJ.bind,GJ=HJ.call,qJ=WJ&&WJ.bind(GJ),XJ=WJ?function(t){return t&&qJ(GJ,t)}:function(t){return t&&function(){return GJ.apply(t,arguments)}},YJ=XJ({}.toString),ZJ=XJ("".slice),KJ=function(t){return ZJ(YJ(t),8,-1)},JJ=kJ.Object,QJ=XJ("".split),$J=IJ((function(){return!JJ("z").propertyIsEnumerable(0)}))?function(t){return"String"==KJ(t)?QJ(t,""):JJ(t)}:JJ,tQ=kJ.TypeError,eQ=function(t){if(null==t)throw tQ("Can't call method on "+t);return t},nQ=function(t){return $J(eQ(t))},rQ=function(t){return"function"==typeof t},iQ=function(t){return"object"==typeof t?null!==t:rQ(t)},oQ=function(t){return rQ(t)?t:void 0},aQ=function(t,e){return arguments.length<2?oQ(kJ[t]):kJ[t]&&kJ[t][e]},sQ=XJ({}.isPrototypeOf),lQ=aQ("navigator","userAgent")||"",uQ=kJ.process,cQ=kJ.Deno,hQ=uQ&&uQ.versions||cQ&&cQ.version,dQ=hQ&&hQ.v8;dQ&&(LJ=(RJ=dQ.split("."))[0]>0&&RJ[0]<4?1:+(RJ[0]+RJ[1])),!LJ&&lQ&&(!(RJ=lQ.match(/Edge\/(\d+)/))||RJ[1]>=74)&&(RJ=lQ.match(/Chrome\/(\d+)/))&&(LJ=+RJ[1]);var pQ=LJ,fQ=!!Object.getOwnPropertySymbols&&!IJ((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&pQ&&pQ<41})),mQ=fQ&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gQ=kJ.Object,vQ=mQ?function(t){return"symbol"==typeof t}:function(t){var e=aQ("Symbol");return rQ(e)&&sQ(e.prototype,gQ(t))},yQ=kJ.String,bQ=function(t){try{return yQ(t)}catch(t){return"Object"}},xQ=kJ.TypeError,_Q=function(t){if(rQ(t))return t;throw xQ(bQ(t)+" is not a function")},wQ=function(t,e){var n=t[e];return null==n?void 0:_Q(n)},SQ=kJ.TypeError,MQ=Object.defineProperty,EQ=function(t,e){try{MQ(kJ,t,{value:e,configurable:!0,writable:!0})}catch(f){kJ[t]=e}return e},CQ=kJ["__core-js_shared__"]||EQ("__core-js_shared__",{}),TQ=PJ((function(t){(t.exports=function(t,e){return CQ[t]||(CQ[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),AQ=kJ.Object,DQ=function(t){return AQ(eQ(t))},PQ=XJ({}.hasOwnProperty),RQ=Object.hasOwn||function(t,e){return PQ(DQ(t),e)},LQ=0,OQ=Math.random(),kQ=XJ(1..toString),IQ=function(t){return"Symbol("+(void 0===t?"":t)+")_"+kQ(++LQ+OQ,36)},NQ=TQ("wks"),BQ=kJ.Symbol,FQ=BQ&&BQ.for,zQ=mQ?BQ:BQ&&BQ.withoutSetter||IQ,UQ=function(t){if(!RQ(NQ,t)||!fQ&&"string"!=typeof NQ[t]){var e="Symbol."+t;fQ&&RQ(BQ,t)?NQ[t]=BQ[t]:NQ[t]=mQ&&FQ?FQ(e):zQ(e)}return NQ[t]},jQ=kJ.TypeError,VQ=UQ("toPrimitive"),HQ=function(t,e){if(!iQ(t)||vQ(t))return t;var n,r=wQ(t,VQ);if(r){if(void 0===e&&(e="default"),n=FJ(r,t,e),!iQ(n)||vQ(n))return n;throw jQ("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&rQ(n=t.toString)&&!iQ(r=FJ(n,t)))return r;if(rQ(n=t.valueOf)&&!iQ(r=FJ(n,t)))return r;if("string"!==e&&rQ(n=t.toString)&&!iQ(r=FJ(n,t)))return r;throw SQ("Can't convert object to primitive value")}(t,e)},WQ=function(t){var e=HQ(t,"string");return vQ(e)?e:e+""},GQ=kJ.document,qQ=iQ(GQ)&&iQ(GQ.createElement),XQ=function(t){return qQ?GQ.createElement(t):{}},YQ=!NJ&&!IJ((function(){return 7!=Object.defineProperty(XQ("div"),"a",{get:function(){return 7}}).a})),ZQ=Object.getOwnPropertyDescriptor,KQ={f:NJ?ZQ:function(t,e){if(t=nQ(t),e=WQ(e),YQ)try{return ZQ(t,e)}catch(t){}if(RQ(t,e))return VJ(!FJ(jJ.f,t,e),t[e])}},JQ=kJ.String,QQ=kJ.TypeError,$Q=function(t){if(iQ(t))return t;throw QQ(JQ(t)+" is not an object")},t$=kJ.TypeError,e$=Object.defineProperty,n$={f:NJ?e$:function(t,e,n){if($Q(t),e=WQ(e),$Q(n),YQ)try{return e$(t,e,n)}catch(t){}if("get"in n||"set"in n)throw t$("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},r$=NJ?function(t,e,n){return n$.f(t,e,VJ(1,n))}:function(t,e,n){return t[e]=n,t},i$=XJ(Function.toString);rQ(CQ.inspectSource)||(CQ.inspectSource=function(t){return i$(t)});var o$,a$,s$,l$=CQ.inspectSource,u$=kJ.WeakMap,c$=rQ(u$)&&/native code/.test(l$(u$)),h$=TQ("keys"),d$=function(t){return h$[t]||(h$[t]=IQ(t))},p$={},f$=kJ.TypeError,m$=kJ.WeakMap;if(c$||CQ.state){var g$=CQ.state||(CQ.state=new m$),v$=XJ(g$.get),y$=XJ(g$.has),b$=XJ(g$.set);o$=function(t,e){if(y$(g$,t))throw new f$("Object already initialized");return e.facade=t,b$(g$,t,e),e},a$=function(t){return v$(g$,t)||{}},s$=function(t){return y$(g$,t)}}else{var x$=d$("state");p$[x$]=!0,o$=function(t,e){if(RQ(t,x$))throw new f$("Object already initialized");return e.facade=t,r$(t,x$,e),e},a$=function(t){return RQ(t,x$)?t[x$]:{}},s$=function(t){return RQ(t,x$)}}var _$={set:o$,get:a$,has:s$,enforce:function(t){return s$(t)?a$(t):o$(t,{})},getterFor:function(t){return function(e){var n;if(!iQ(e)||(n=a$(e)).type!==t)throw f$("Incompatible receiver, "+t+" required");return n}}},w$=Function.prototype,S$=NJ&&Object.getOwnPropertyDescriptor,M$=RQ(w$,"name"),E$={EXISTS:M$,PROPER:M$&&"something"===function(){}.name,CONFIGURABLE:M$&&(!NJ||NJ&&S$(w$,"name").configurable)},C$=PJ((function(t){var e=E$.CONFIGURABLE,n=_$.get,r=_$.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;rQ(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!RQ(o,"name")||e&&o.name!==h)&&r$(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==kJ?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:r$(t,n,o)):u?t[n]=o:EQ(n,o)})(Function.prototype,"toString",(function(){return rQ(this)&&n(this).source||l$(this)}))})),T$=Math.ceil,A$=Math.floor,D$=function(t){var e=+t;return e!=e||0===e?0:(e>0?A$:T$)(e)},P$=Math.max,R$=Math.min,L$=function(t,e){var n=D$(t);return n<0?P$(n+e,0):R$(n,e)},O$=Math.min,k$=function(t){return t>0?O$(D$(t),9007199254740991):0},I$=function(t){return k$(t.length)},N$=function(t){return function(e,n,r){var i,o=nQ(e),a=I$(o),s=L$(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},B$={includes:N$(!0),indexOf:N$(!1)},F$=B$.indexOf,z$=XJ([].push),U$=function(t,e){var n,r=nQ(t),i=0,o=[];for(n in r)!RQ(p$,n)&&RQ(r,n)&&z$(o,n);for(;e.length>i;)RQ(r,n=e[i++])&&(~F$(o,n)||z$(o,n));return o},j$=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],V$=j$.concat("length","prototype"),H$={f:Object.getOwnPropertyNames||function(t){return U$(t,V$)}},W$={f:Object.getOwnPropertySymbols},G$=XJ([].concat),q$=aQ("Reflect","ownKeys")||function(t){var e=H$.f($Q(t)),n=W$.f;return n?G$(e,n(t)):e},X$=function(t,e){for(var n=q$(e),r=n$.f,i=KQ.f,o=0;o<n.length;o++){var a=n[o];RQ(t,a)||r(t,a,i(e,a))}},Y$=/#|\.prototype\./,Z$=function(t,e){var n=J$[K$(t)];return n==$$||n!=Q$&&(rQ(e)?IJ(e):!!e)},K$=Z$.normalize=function(t){return String(t).replace(Y$,".").toLowerCase()},J$=Z$.data={},Q$=Z$.NATIVE="N",$$=Z$.POLYFILL="P",t0=Z$,e0=KQ.f,n0=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?kJ:u?kJ[s]||EQ(s,{}):(kJ[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=e0(n,r))&&a.value:n[r],!t0(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;X$(o,i)}(t.sham||i&&i.sham)&&r$(o,"sham",!0),C$(n,r,o,t)}},r0={};r0[UQ("toStringTag")]="z";var i0,o0="[object z]"===String(r0),a0=UQ("toStringTag"),s0=kJ.Object,l0="Arguments"==KJ(function(){return arguments}()),u0=o0?KJ:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=s0(t),a0))?n:l0?KJ(e):"Object"==(r=KJ(e))&&rQ(e.callee)?"Arguments":r},c0=kJ.String,h0=function(t){if("Symbol"===u0(t))throw TypeError("Cannot convert a Symbol value to a string");return c0(t)},d0="\t\n\v\f\r                　\u2028\u2029\ufeff",p0=XJ("".replace),f0="["+d0+"]",m0=RegExp("^"+f0+f0+"*"),g0=RegExp(f0+f0+"*$"),v0=function(t){return function(e){var n=h0(eQ(e));return 1&t&&(n=p0(n,m0,"")),2&t&&(n=p0(n,g0,"")),n}},y0={start:v0(1),end:v0(2),trim:v0(3)},b0=E$.PROPER,x0=y0.trim;function _0(t){return t.length?t[0].tagName.toLowerCase():""}function w0(t,e,n){void 0===e&&(e="auto"),void 0===n&&(n="auto");var r=hi(t);return r.attr("width",e),r.attr("height",n),r[0].outerHTML}n0({target:"String",proto:!0,forced:(i0="trim",IJ((function(){return!!d0[i0]()||"​᠎"!=="​᠎"[i0]()||b0&&d0[i0].name!==i0})))},{trim:function(){return x0(this)}}),n0({global:!0},{globalThis:kJ}),Li&&(hi.fn.append=Li),bi&&(hi.fn.on=bi),Hi&&(hi.fn.focus=Hi),mi&&(hi.fn.attr=mi),yi&&(hi.fn.val=yi),Di&&(hi.fn.html=Di),ki&&(hi.fn.parent=ki),fi&&(hi.fn.hasClass=fi),zi&&(hi.fn.empty=zi);var S0,M0={type:"video",renderElem:function(t,e,n){var r,i=t,o=i.src,a=void 0===o?"":o,s=i.width,l=void 0===s?"auto":s,u=i.height,c=void 0===u?"auto":u,h=Bx.isNodeSelected(n,t);if(0===a.trim().indexOf("<iframe ")){var d=w0(a,l,c);r=qa("div",{className:"w-e-textarea-video-container","data-selected":h?"true":"",innerHTML:d})}else{var p=qa("video",{controls:!0},qa("source",{src:a,type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos.\n 抱歉，浏览器不支持 video 视频");"auto"!==l&&(p.data.width=l),"auto"!==c&&(p.data.height=c),r=qa("div",{className:"w-e-textarea-video-container","data-selected":h?"true":""},p)}return Sa("div",{props:{contentEditable:!1},on:{mousedown:function(t){return t.preventDefault()}}},r)}},E0={type:"video",elemToHtml:function(t,e){var n=t,r=n.src,i=void 0===r?"":r,o=n.width,a=void 0===o?"auto":o,s=n.height,l=void 0===s?"auto":s,u='<div data-w-e-type="video" data-w-e-is-void>\n';return 0===i.trim().indexOf("<iframe ")?u+=w0(i,a,l):u+='<video controls="true" width="'+a+'" height="'+l+'"><source src="'+i+'" type="video/mp4"/></video>',u+"\n</div>"}},C0=Object.keys||function(t){return U$(t,j$)},T0=NJ?Object.defineProperties:function(t,e){$Q(t);for(var n,r=nQ(e),i=C0(e),o=i.length,a=0;o>a;)n$.f(t,n=i[a++],r[n]);return t},A0=aQ("document","documentElement"),D0=d$("IE_PROTO"),P0=function(){},R0=function(t){return"<script>"+t+"<\/script>"},L0=function(t){t.write(R0("")),t.close();var e=t.parentWindow.Object;return t=null,e},O0=function(){try{S0=new ActiveXObject("htmlfile")}catch(t){}var t,e;O0="undefined"!=typeof document?document.domain&&S0?L0(S0):((e=XQ("iframe")).style.display="none",A0.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(R0("document.F=Object")),t.close(),t.F):L0(S0);for(var n=j$.length;n--;)delete O0.prototype[j$[n]];return O0()};p$[D0]=!0;var k0=Object.create||function(t,e){var n;return null!==t?(P0.prototype=$Q(t),n=new P0,P0.prototype=null,n[D0]=t):n=O0(),void 0===e?n:T0(n,e)},I0=UQ("unscopables"),N0=Array.prototype;null==N0[I0]&&n$.f(N0,I0,{configurable:!0,value:k0(null)});var B0=function(t){N0[I0][t]=!0},F0=B$.includes;n0({target:"Array",proto:!0},{includes:function(t){return F0(this,t,arguments.length>1?arguments[1]:void 0)}}),B0("includes");var z0={selector:"iframe,video,p",preParseHtml:function(t){var e=hi(t),n=e;if("p"===_0(e)){var r=e.children();if(1===r.length){var i=r[0],o=i.tagName.toLowerCase();["iframe","video"].includes(o)&&(n=hi(i))}}var a=_0(n);if("iframe"!==a&&"video"!==a)return n[0];if("video"===n.parent().attr("data-w-e-type"))return n[0];var s=hi('<div data-w-e-type="video" data-w-e-is-void></div>');return s.append(n),s[0]}},U0=XJ(XJ.bind),j0=function(t,e){return _Q(t),void 0===e?t:U0?U0(t,e):function(){return t.apply(e,arguments)}},V0=Array.isArray||function(t){return"Array"==KJ(t)},H0=function(){},W0=[],G0=aQ("Reflect","construct"),q0=/^\s*(?:class|function)\b/,X0=XJ(q0.exec),Y0=!q0.exec(H0),Z0=function(t){if(!rQ(t))return!1;try{return G0(H0,W0,t),!0}catch(t){return!1}},K0=!G0||IJ((function(){var t;return Z0(Z0.call)||!Z0(Object)||!Z0((function(){t=!0}))||t}))?function(t){if(!rQ(t))return!1;switch(u0(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Y0||!!X0(q0,l$(t))}:Z0,J0=UQ("species"),Q0=kJ.Array,$0=function(t,e){return new(function(t){var e;return V0(t)&&(e=t.constructor,(K0(e)&&(e===Q0||V0(e.prototype))||iQ(e)&&null===(e=e[J0]))&&(e=void 0)),void 0===e?Q0:e}(t))(0===e?0:e)},t1=XJ([].push),e1=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=DQ(l),m=$J(f),g=j0(u,c),v=I$(m),y=0,b=h||$0,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:t1(x,d)}else switch(t){case 4:return!1;case 7:t1(x,d)}return o?-1:r||i?i:x}},n1={forEach:e1(0),map:e1(1),filter:e1(2),some:e1(3),every:e1(4),find:e1(5),findIndex:e1(6),filterReject:e1(7)},r1=n1.find,i1=!0;"find"in[]&&Array(1).find((function(){i1=!1})),n0({target:"Array",proto:!0,forced:i1},{find:function(t){return r1(this,t,arguments.length>1?arguments[1]:void 0)}}),B0("find");var o1=o0?{}.toString:function(){return"[object "+u0(this)+"]"};function a1(t,e,n){return void 0===e&&(e="auto"),void 0===n&&(n="auto"),{type:"video",src:t,width:e,height:n,children:[{text:""}]}}o0||C$(Object.prototype,"toString",o1,{unsafe:!0});var s1,l1,u1={selector:'div[data-w-e-type="video"]',parseElemHtml:function(t,e,n){var r=hi(t),i="",o="auto",a="auto",s=r.find("iframe");if(s.length>0)return o=s.attr("width")||"auto",a=s.attr("height")||"auto",a1(i=s[0].outerHTML,o,a);var l=r.find("video");return(i=l.attr("src")||"")||l.length>0&&(i=l.find("source").attr("src")||""),a1(i,o=l.attr("width")||"auto",a=l.attr("height")||"auto")}},c1=function(){var t=$Q(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},h1=kJ.RegExp,d1=IJ((function(){var t=h1("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),p1=d1||IJ((function(){return!h1("a","y").sticky})),f1={BROKEN_CARET:d1||IJ((function(){var t=h1("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:p1,UNSUPPORTED_Y:d1},m1=kJ.RegExp,g1=IJ((function(){var t=m1(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),v1=kJ.RegExp,y1=IJ((function(){var t=v1("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),b1=_$.get,x1=TQ("native-string-replace",String.prototype.replace),_1=RegExp.prototype.exec,w1=_1,S1=XJ("".charAt),M1=XJ("".indexOf),E1=XJ("".replace),C1=XJ("".slice),T1=(l1=/b*/g,FJ(_1,s1=/a/,"a"),FJ(_1,l1,"a"),0!==s1.lastIndex||0!==l1.lastIndex),A1=f1.BROKEN_CARET,D1=void 0!==/()??/.exec("")[1];(T1||D1||A1||g1||y1)&&(w1=function(t){var e,n,r,i,o,a,s,l=this,u=b1(l),c=h0(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=FJ(w1,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=A1&&l.sticky,f=FJ(c1,l),m=l.source,g=0,v=c;if(p&&(f=E1(f,"y",""),-1===M1(f,"g")&&(f+="g"),v=C1(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==S1(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),D1&&(n=new RegExp("^"+m+"$(?!\\s)",f)),T1&&(r=l.lastIndex),i=FJ(_1,p?n:l,v),p?i?(i.input=C1(i.input,g),i[0]=C1(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:T1&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),D1&&i&&i.length>1&&FJ(x1,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=k0(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var P1=w1;n0({target:"RegExp",proto:!0,forced:/./.exec!==P1},{exec:P1});var R1=Function.prototype,L1=R1.apply,O1=R1.bind,k1=R1.call,I1="object"==typeof Reflect&&Reflect.apply||(O1?k1.bind(L1):function(){return k1.apply(L1,arguments)}),N1=UQ("species"),B1=RegExp.prototype,F1=XJ("".charAt),z1=XJ("".charCodeAt),U1=XJ("".slice),j1=function(t){return function(e,n){var r,i,o=h0(eQ(e)),a=D$(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=z1(o,a))<55296||r>56319||a+1===s||(i=z1(o,a+1))<56320||i>57343?t?F1(o,a):r:t?U1(o,a,a+2):i-56320+(r-55296<<10)+65536}},V1={codeAt:j1(!1),charAt:j1(!0)},H1=V1.charAt,W1=function(t,e,n){return e+(n?H1(t,e).length:1)},G1=Math.floor,q1=XJ("".charAt),X1=XJ("".replace),Y1=XJ("".slice),Z1=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,K1=/\$([$&'`]|\d{1,2})/g,J1=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,l=K1;return void 0!==i&&(i=DQ(i),l=Z1),X1(o,l,(function(o,l){var u;switch(q1(l,0)){case"$":return"$";case"&":return t;case"`":return Y1(e,0,n);case"'":return Y1(e,a);case"<":u=i[Y1(l,1,-1)];break;default:var c=+l;if(0===c)return o;if(c>s){var h=G1(c/10);return 0===h?o:h<=s?void 0===r[h-1]?q1(l,1):r[h-1]+q1(l,1):o}u=r[c-1]}return void 0===u?"":u}))},Q1=kJ.TypeError,$1=function(t,e){var n=t.exec;if(rQ(n)){var r=FJ(n,t,e);return null!==r&&$Q(r),r}if("RegExp"===KJ(t))return FJ(P1,t,e);throw Q1("RegExp#exec called on incompatible receiver")},t2=UQ("replace"),e2=Math.max,n2=Math.min,r2=XJ([].concat),i2=XJ([].push),o2=XJ("".indexOf),a2=XJ("".slice),s2="$0"==="a".replace(/./,"$0"),l2=!!/./[t2]&&""===/./[t2]("a","$0");function u2(t){return void 0===t&&(t="r"),t+"-"+Eo()}!function(t,e,n,r){var i=UQ(t),o=!IJ((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!IJ((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[N1]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=XJ(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=XJ(t),l=e.exec;return l===P1||l===B1.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));C$(String.prototype,t,l[0]),C$(B1,i,l[1])}r&&r$(B1[i],"sham",!0)}("replace",(function(t,e,n){var r=l2?"$":"$0";return[function(t,n){var r=eQ(this),i=null==t?void 0:wQ(t,t2);return i?FJ(i,t,r,n):FJ(e,h0(r),t,n)},function(t,i){var o=$Q(this),a=h0(t);if("string"==typeof i&&-1===o2(i,r)&&-1===o2(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var l=rQ(i);l||(i=h0(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=$1(o,a);if(null===d)break;if(i2(h,d),!u)break;""===h0(d[0])&&(o.lastIndex=W1(a,k$(o.lastIndex),c))}for(var p,f="",m=0,g=0;g<h.length;g++){for(var v=h0((d=h[g])[0]),y=e2(n2(D$(d.index),a.length),0),b=[],x=1;x<d.length;x++)i2(b,void 0===(p=d[x])?p:String(p));var _=d.groups;if(l){var w=r2([v],b,y,a);void 0!==_&&i2(w,_);var S=h0(I1(i,void 0,w))}else S=J1(v,a,y,b,_,i);y>=m&&(f+=a2(a,m,y)+S,m=y+v.length)}return f+a2(a,m)}]}),!!IJ((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!s2||l2);var c2=kJ.Promise,h2=function(t,e,n){for(var r in e)C$(t,r,e[r],n);return t},d2=kJ.String,p2=kJ.TypeError,f2=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=XJ(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return $Q(n),function(t){if("object"==typeof t||rQ(t))return t;throw p2("Can't set "+d2(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),m2=n$.f,g2=UQ("toStringTag"),v2=function(t,e,n){t&&!RQ(t=n?t:t.prototype,g2)&&m2(t,g2,{configurable:!0,value:e})},y2=UQ("species"),b2=kJ.TypeError,x2=function(t,e){if(sQ(e,t))return t;throw b2("Incorrect invocation")},_2={},w2=UQ("iterator"),S2=Array.prototype,M2=UQ("iterator"),E2=function(t){if(null!=t)return wQ(t,M2)||wQ(t,"@@iterator")||_2[u0(t)]},C2=kJ.TypeError,T2=function(t,e,n){var r,i;$Q(t);try{if(!(r=wQ(t,"return"))){if("throw"===e)throw n;return n}r=FJ(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return $Q(r),n},A2=kJ.TypeError,D2=function(t,e){this.stopped=t,this.result=e},P2=D2.prototype,R2=function(t,e,n){var r,i,o,a,s,l,u,c,h=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=j0(e,h),g=function(t){return r&&T2(r,"normal",t),new D2(!0,t)},v=function(t){return d?($Q(t),f?m(t[0],t[1],g):m(t[0],t[1])):f?m(t,g):m(t)};if(p)r=t;else{if(!(i=E2(t)))throw A2(bQ(t)+" is not iterable");if(void 0!==(c=i)&&(_2.Array===c||S2[w2]===c)){for(o=0,a=I$(t);a>o;o++)if((s=v(t[o]))&&sQ(P2,s))return s;return new D2(!1)}r=function(t,e){var n=arguments.length<2?E2(t):e;if(_Q(n))return $Q(FJ(n,t));throw C2(bQ(t)+" is not iterable")}(t,i)}for(l=r.next;!(u=FJ(l,r)).done;){try{s=v(u.value)}catch(t){T2(r,"throw",t)}if("object"==typeof s&&s&&sQ(P2,s))return s}return new D2(!1)},L2=UQ("iterator"),O2=!1;try{var k2=0,I2={next:function(){return{done:!!k2++}},return:function(){O2=!0}};I2[L2]=function(){return this},Array.from(I2,(function(){throw 2}))}catch(m){}var N2,B2,F2,z2,U2=function(t,e){if(!e&&!O2)return!1;var n=!1;try{var r={};r[L2]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},j2=kJ.TypeError,V2=UQ("species"),H2=function(t,e){var n,r=$Q(t).constructor;return void 0===r||null==(n=$Q(r)[V2])?e:function(t){if(K0(t))return t;throw j2(bQ(t)+" is not a constructor")}(n)},W2=XJ([].slice),G2=/(?:ipad|iphone|ipod).*applewebkit/i.test(lQ),q2="process"==KJ(kJ.process),X2=kJ.setImmediate,Y2=kJ.clearImmediate,Z2=kJ.process,K2=kJ.Dispatch,J2=kJ.Function,Q2=kJ.MessageChannel,$2=kJ.String,t3=0,e3={};try{N2=kJ.location}catch(m){}var n3=function(t){if(RQ(e3,t)){var e=e3[t];delete e3[t],e()}},r3=function(t){return function(){n3(t)}},i3=function(t){n3(t.data)},o3=function(t){kJ.postMessage($2(t),N2.protocol+"//"+N2.host)};X2&&Y2||(X2=function(t){var e=W2(arguments,1);return e3[++t3]=function(){I1(rQ(t)?t:J2(t),void 0,e)},B2(t3),t3},Y2=function(t){delete e3[t]},q2?B2=function(t){Z2.nextTick(r3(t))}:K2&&K2.now?B2=function(t){K2.now(r3(t))}:Q2&&!G2?(z2=(F2=new Q2).port2,F2.port1.onmessage=i3,B2=j0(z2.postMessage,z2)):kJ.addEventListener&&rQ(kJ.postMessage)&&!kJ.importScripts&&N2&&"file:"!==N2.protocol&&!IJ(o3)?(B2=o3,kJ.addEventListener("message",i3,!1)):B2="onreadystatechange"in XQ("script")?function(t){A0.appendChild(XQ("script")).onreadystatechange=function(){A0.removeChild(this),n3(t)}}:function(t){setTimeout(r3(t),0)});var a3,s3,l3,u3,c3,h3,d3,p3,f3={set:X2,clear:Y2},m3=/ipad|iphone|ipod/i.test(lQ)&&void 0!==kJ.Pebble,g3=/web0s(?!.*chrome)/i.test(lQ),v3=KQ.f,y3=f3.set,b3=kJ.MutationObserver||kJ.WebKitMutationObserver,x3=kJ.document,_3=kJ.process,w3=kJ.Promise,S3=v3(kJ,"queueMicrotask"),M3=S3&&S3.value;M3||(a3=function(){var t,e;for(q2&&(t=_3.domain)&&t.exit();s3;){e=s3.fn,s3=s3.next;try{e()}catch(t){throw s3?u3():l3=void 0,t}}l3=void 0,t&&t.enter()},G2||q2||g3||!b3||!x3?!m3&&w3&&w3.resolve?((d3=w3.resolve(void 0)).constructor=w3,p3=j0(d3.then,d3),u3=function(){p3(a3)}):q2?u3=function(){_3.nextTick(a3)}:(y3=j0(y3,kJ),u3=function(){y3(a3)}):(c3=!0,h3=x3.createTextNode(""),new b3(a3).observe(h3,{characterData:!0}),u3=function(){h3.data=c3=!c3}));var E3,C3,T3,A3,D3=M3||function(t){var e={fn:t,next:void 0};l3&&(l3.next=e),s3||(s3=e,u3()),l3=e},P3=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=_Q(e),this.reject=_Q(n)},R3={f:function(t){return new P3(t)}},L3=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},O3="object"==typeof window,k3=f3.set,I3=UQ("species"),N3="Promise",B3=_$.getterFor(N3),F3=_$.set,z3=_$.getterFor(N3),U3=c2&&c2.prototype,j3=c2,V3=U3,H3=kJ.TypeError,W3=kJ.document,G3=kJ.process,q3=R3.f,X3=q3,Y3=!!(W3&&W3.createEvent&&kJ.dispatchEvent),Z3=rQ(kJ.PromiseRejectionEvent),K3=!1,J3=t0(N3,(function(){var t=l$(j3),e=t!==String(j3);if(!e&&66===pQ)return!0;if(pQ>=51&&/native code/.test(t))return!1;var n=new j3((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[I3]=r,!(K3=n.then((function(){}))instanceof r)||!e&&O3&&!Z3})),Q3=J3||!U2((function(t){j3.all(t).catch((function(){}))})),$3=function(t){var e;return!(!iQ(t)||!rQ(e=t.then))&&e},t4=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;D3((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,l,u=n[o++],c=i?u.ok:u.fail,h=u.resolve,d=u.reject,p=u.domain;try{c?(i||(2===t.rejection&&i4(t),t.rejection=1),!0===c?a=r:(p&&p.enter(),a=c(r),p&&(p.exit(),l=!0)),a===u.promise?d(H3("Promise-chain cycle")):(s=$3(a))?FJ(s,a,h,d):h(a)):d(r)}catch(t){p&&!l&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&n4(t)}))}},e4=function(t,e,n){var r,i;Y3?((r=W3.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),kJ.dispatchEvent(r)):r={promise:e,reason:n},!Z3&&(i=kJ["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=kJ.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},n4=function(t){FJ(k3,kJ,(function(){var e,n=t.facade,r=t.value;if(r4(t)&&(e=L3((function(){q2?G3.emit("unhandledRejection",r,n):e4("unhandledrejection",n,r)})),t.rejection=q2||r4(t)?2:1,e.error))throw e.value}))},r4=function(t){return 1!==t.rejection&&!t.parent},i4=function(t){FJ(k3,kJ,(function(){var e=t.facade;q2?G3.emit("rejectionHandled",e):e4("rejectionhandled",e,t.value)}))},o4=function(t,e,n){return function(r){t(e,r,n)}},a4=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,t4(t,!0))},s4=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw H3("Promise can't be resolved itself");var r=$3(e);r?D3((function(){var n={done:!1};try{FJ(r,e,o4(s4,n,t),o4(a4,n,t))}catch(e){a4(n,e,t)}})):(t.value=e,t.state=1,t4(t,!1))}catch(e){a4({done:!1},e,t)}}};if(J3&&(V3=(j3=function(t){x2(this,V3),_Q(t),FJ(E3,this);var e=B3(this);try{t(o4(s4,e),o4(a4,e))}catch(t){a4(e,t)}}).prototype,(E3=function(t){F3(this,{type:N3,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h2(V3,{then:function(t,e){var n=z3(this),r=n.reactions,i=q3(H2(this,j3));return i.ok=!rQ(t)||t,i.fail=rQ(e)&&e,i.domain=q2?G3.domain:void 0,n.parent=!0,r[r.length]=i,0!=n.state&&t4(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),C3=function(){var t=new E3,e=B3(t);this.promise=t,this.resolve=o4(s4,e),this.reject=o4(a4,e)},R3.f=q3=function(t){return t===j3||t===T3?new C3(t):X3(t)},rQ(c2)&&U3!==Object.prototype)){A3=U3.then,K3||(C$(U3,"then",(function(t,e){var n=this;return new j3((function(t,e){FJ(A3,n,t,e)})).then(t,e)}),{unsafe:!0}),C$(U3,"catch",V3.catch,{unsafe:!0}));try{delete U3.constructor}catch(m){}f2&&f2(U3,V3)}function l4(t,e){return MJ(this,void 0,void 0,(function(){var n,r,i,o,a,s,l;return EJ(this,(function(u){switch(u.label){case 0:return e?(t.restoreSelection(),n=t.getMenuConfig("insertVideo"),r=n.onInsertedVideo,i=n.checkVideo,o=n.parseVideoSrc,[4,i(e)]):[2];case 1:return"string"==typeof(a=u.sent())?(t.alert(a,"error"),[2]):null==a?[2]:[4,o(e)];case 2:return 0!==(s=u.sent()).trim().indexOf("<iframe ")&&(s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;")),l={type:"video",src:s,children:[{text:""}]},Promise.resolve().then((function(){$e.insertNodes(t,l)})),r(l),[2]}}))}))}function u4(){return u2("w-e-insert-video")}n0({global:!0,wrap:!0,forced:J3},{Promise:j3}),v2(j3,N3,!1),function(t){var e=aQ(t),n=n$.f;NJ&&e&&!e[y2]&&n(e,y2,{configurable:!0,get:function(){return this}})}(N3),T3=aQ(N3),n0({target:N3,stat:!0,forced:J3},{reject:function(t){var e=q3(this);return FJ(e.reject,void 0,t),e.promise}}),n0({target:N3,stat:!0,forced:J3},{resolve:function(t){return function(t,e){if($Q(t),iQ(e)&&e.constructor===t)return e;var n=R3.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),n0({target:N3,stat:!0,forced:Q3},{all:function(t){var e=this,n=q3(e),r=n.resolve,i=n.reject,o=L3((function(){var n=_Q(e.resolve),o=[],a=0,s=1;R2(t,(function(t){var l=a++,u=!1;s++,FJ(n,e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=q3(e),r=n.reject,i=L3((function(){var i=_Q(e.resolve);R2(t,(function(t){FJ(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var c4=function(){function t(){this.title=IC("videoModule.insertVideo"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M981.184 160.096C837.568 139.456 678.848 128 512 128S186.432 139.456 42.816 160.096C15.296 267.808 0 386.848 0 512s15.264 244.16 42.816 351.904C186.464 884.544 345.152 896 512 896s325.568-11.456 469.184-32.096C1008.704 756.192 1024 637.152 1024 512s-15.264-244.16-42.816-351.904zM384 704V320l320 192-320 192z"></path></svg>',this.tag="button",this.showModal=!0,this.modalWidth=320,this.$content=null,this.srcInputId=u4(),this.buttonId=u4()}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||!!Bx.getSelectedElems(t).some((function(e){return"pre"===Bx.getNodeType(e)||!!t.isVoid(e)}))},t.prototype.getModalPositionNode=function(t){return null},t.prototype.getModalContentElem=function(t){var e=this,n=this.srcInputId,r=this.buttonId,i=TJ(gE(IC("videoModule.videoSrc"),n,IC("videoModule.insertPlaceHolder")),2),o=i[0],a=i[1],s=hi(a),l=TJ(vE(r,IC("videoModule.ok")),1)[0];if(null==this.$content){var u=hi("<div></div>");u.on("click","#"+r,(function(r){return MJ(e,void 0,void 0,(function(){var e;return EJ(this,(function(i){switch(i.label){case 0:return r.preventDefault(),e=u.find("#"+n).val().trim(),[4,l4(t,e)];case 1:return i.sent(),t.hidePanelOrModal(),[2]}}))}))})),this.$content=u}var c=this.$content;return c.empty(),c.append(o),c.append(l),s.val(""),setTimeout((function(){s.focus()})),c[0]},t}(),h4=XJ([].join),d4=$J!=Object,p4=function(t,e){var n=[][t];return!!n&&IJ((function(){n.call(null,e||function(){throw 1},1)}))}("join",",");n0({target:"Array",proto:!0,forced:d4||!p4},{join:function(t){return h4(nQ(this),void 0===t?",":t)}});var f4,m4,g4,v4=!IJ((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),y4=d$("IE_PROTO"),b4=kJ.Object,x4=b4.prototype,_4=v4?b4.getPrototypeOf:function(t){var e=DQ(t);if(RQ(e,y4))return e[y4];var n=e.constructor;return rQ(n)&&e instanceof n?n.prototype:e instanceof b4?x4:null},w4=UQ("iterator"),S4=!1;[].keys&&("next"in(g4=[].keys())?(m4=_4(_4(g4)))!==Object.prototype&&(f4=m4):S4=!0);var M4=null==f4||IJ((function(){var t={};return f4[w4].call(t)!==t}));M4&&(f4={}),rQ(f4[w4])||C$(f4,w4,(function(){return this}));var E4={IteratorPrototype:f4,BUGGY_SAFARI_ITERATORS:S4},C4=E4.IteratorPrototype,T4=function(){return this},A4=E$.PROPER,D4=E$.CONFIGURABLE,P4=E4.IteratorPrototype,R4=E4.BUGGY_SAFARI_ITERATORS,L4=UQ("iterator"),O4=function(){return this},k4=function(t,e,n,r,i,o,a){!function(t,e,n,r){var i=e+" Iterator";t.prototype=k0(C4,{next:VJ(+!r,n)}),v2(t,i,!1),_2[i]=T4}(n,e,r);var s,l,u,c=function(t){if(t===i&&m)return m;if(!R4&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,f=p[L4]||p["@@iterator"]||i&&p[i],m=!R4&&f||c(i),g="Array"==e&&p.entries||f;if(g&&(s=_4(g.call(new t)))!==Object.prototype&&s.next&&(_4(s)!==P4&&(f2?f2(s,P4):rQ(s[L4])||C$(s,L4,O4)),v2(s,h,!0)),A4&&"values"==i&&f&&"values"!==f.name&&(D4?r$(p,"name","values"):(d=!0,m=function(){return FJ(f,this)})),i)if(l={values:c("values"),keys:o?m:c("keys"),entries:c("entries")},a)for(u in l)(R4||d||!(u in p))&&C$(p,u,l[u]);else n0({target:e,proto:!0,forced:R4||d},l);return p[L4]!==m&&C$(p,L4,m,{name:i}),_2[e]=m,l},I4=_$.set,N4=_$.getterFor("Array Iterator"),B4=k4(Array,"Array",(function(t,e){I4(this,{type:"Array Iterator",target:nQ(t),index:0,kind:e})}),(function(){var t=N4(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");_2.Arguments=_2.Array,B0("keys"),B0("values"),B0("entries");var F4=V1.charAt,z4=_$.set,U4=_$.getterFor("String Iterator");k4(String,"String",(function(t){z4(this,{type:"String Iterator",string:h0(t),index:0})}),(function(){var t,e=U4(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=F4(n,r),e.index+=t.length,{value:t,done:!1})}));var j4=function(t,e,n){var r=WQ(e);r in t?n$.f(t,r,VJ(0,n)):t[r]=n},V4=kJ.Array,H4=Math.max,W4=H$.f,G4="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],q4=function(t){try{return W4(t)}catch(t){return function(t,e,n){for(var r=I$(t),i=L$(e,r),o=L$(void 0===n?r:n,r),a=V4(H4(o-i,0)),s=0;i<o;i++,s++)j4(a,s,t[i]);return a.length=s,a}(G4)}},X4={f:function(t){return G4&&"Window"==KJ(t)?q4(t):W4(nQ(t))}},Y4=IJ((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Z4=Object.isExtensible,K4=IJ((function(){Z4(1)}))||Y4?function(t){return!!iQ(t)&&(!Y4||"ArrayBuffer"!=KJ(t))&&(!Z4||Z4(t))}:Z4,J4=!IJ((function(){return Object.isExtensible(Object.preventExtensions({}))})),Q4=PJ((function(t){var e=n$.f,n=!1,r=IQ("meta"),i=0,o=function(t){e(t,r,{value:{objectID:"O"+i++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},n=!0;var t=H$.f,e=XJ([].splice),i={};i[r]=1,t(i).length&&(H$.f=function(n){for(var i=t(n),o=0,a=i.length;o<a;o++)if(i[o]===r){e(i,o,1);break}return i},n0({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:X4.f}))},fastKey:function(t,e){if(!iQ(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!RQ(t,r)){if(!K4(t))return"F";if(!e)return"E";o(t)}return t[r].objectID},getWeakData:function(t,e){if(!RQ(t,r)){if(!K4(t))return!0;if(!e)return!1;o(t)}return t[r].weakData},onFreeze:function(t){return J4&&n&&K4(t)&&!RQ(t,r)&&o(t),t}};p$[r]=!0})),$4=Q4.getWeakData,t5=_$.set,e5=_$.getterFor,n5=n1.find,r5=n1.findIndex,i5=XJ([].splice),o5=0,a5=function(t){return t.frozen||(t.frozen=new s5)},s5=function(){this.entries=[]},l5=function(t,e){return n5(t.entries,(function(t){return t[0]===e}))};s5.prototype={get:function(t){var e=l5(this,t);if(e)return e[1]},has:function(t){return!!l5(this,t)},set:function(t,e){var n=l5(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=r5(this.entries,(function(e){return e[0]===t}));return~e&&i5(this.entries,e,1),!!~e}};var u5,c5={getConstructor:function(t,e,n,r){var i=t((function(t,i){x2(t,o),t5(t,{type:e,id:o5++,frozen:void 0}),null!=i&&R2(i,t[r],{that:t,AS_ENTRIES:n})})),o=i.prototype,a=e5(e),s=function(t,e,n){var r=a(t),i=$4($Q(e),!0);return!0===i?a5(r).set(e,n):i[r.id]=n,t};return h2(o,{delete:function(t){var e=a(this);if(!iQ(t))return!1;var n=$4(t);return!0===n?a5(e).delete(t):n&&RQ(n,e.id)&&delete n[e.id]},has:function(t){var e=a(this);if(!iQ(t))return!1;var n=$4(t);return!0===n?a5(e).has(t):n&&RQ(n,e.id)}}),h2(o,n?{get:function(t){var e=a(this);if(iQ(t)){var n=$4(t);return!0===n?a5(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),i}},h5=_$.enforce,d5=!kJ.ActiveXObject&&"ActiveXObject"in kJ,p5=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},f5=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=kJ[t],s=a&&a.prototype,l=a,u={},c=function(t){var e=XJ(s[t]);C$(s,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!iQ(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return i&&!iQ(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!iQ(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(t0(t,!rQ(a)||!(i||s.forEach&&!IJ((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,o),Q4.enable();else if(t0(t,!0)){var h=new l,d=h[o](i?{}:-0,1)!=h,p=IJ((function(){h.has(1)})),f=U2((function(t){new a(t)})),m=!i&&IJ((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));f||((l=e((function(t,e){x2(t,s);var n=function(t,e,n){var r,i;return f2&&rQ(r=e.constructor)&&r!==n&&iQ(i=r.prototype)&&i!==n.prototype&&f2(t,i),t}(new a,t,l);return null!=e&&R2(e,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=l),(p||m)&&(c("delete"),c("has"),r&&c("get")),(m||d)&&c(o),i&&s.clear&&delete s.clear}return u[t]=l,n0({global:!0,forced:l!=a},u),v2(l,t),i||n.setStrong(l,t,r),l}("WeakMap",p5,c5);if(c$&&d5){u5=c5.getConstructor(p5,"WeakMap",!0),Q4.enable();var m5=f5.prototype,g5=XJ(m5.delete),v5=XJ(m5.has),y5=XJ(m5.get),b5=XJ(m5.set);h2(m5,{delete:function(t){if(iQ(t)&&!K4(t)){var e=h5(this);return e.frozen||(e.frozen=new u5),g5(this,t)||e.frozen.delete(t)}return g5(this,t)},has:function(t){if(iQ(t)&&!K4(t)){var e=h5(this);return e.frozen||(e.frozen=new u5),v5(this,t)||e.frozen.has(t)}return v5(this,t)},get:function(t){if(iQ(t)&&!K4(t)){var e=h5(this);return e.frozen||(e.frozen=new u5),v5(this,t)?y5(this,t):e.frozen.get(t)}return y5(this,t)},set:function(t,e){if(iQ(t)&&!K4(t)){var n=h5(this);n.frozen||(n.frozen=new u5),v5(this,t)?b5(this,t,e):n.frozen.set(t,e)}else b5(this,t,e);return this}})}var x5={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_5=XQ("span").classList,w5=_5&&_5.constructor&&_5.constructor.prototype,S5=w5===Object.prototype?void 0:w5,M5=UQ("iterator"),E5=UQ("toStringTag"),C5=B4.values,T5=function(t,e){if(t){if(t[M5]!==C5)try{r$(t,M5,C5)}catch(e){t[M5]=C5}if(t[E5]||r$(t,E5,e),x5[e])for(var n in B4)if(t[n]!==B4[n])try{r$(t,n,B4[n])}catch(e){t[n]=B4[n]}}};for(var A5 in x5)T5(kJ[A5]&&kJ[A5].prototype,A5);T5(S5,"DOMTokenList");var D5=E$.EXISTS,P5=n$.f,R5=Function.prototype,L5=XJ(R5.toString),O5=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,k5=XJ(O5.exec);NJ&&!D5&&P5(R5,"name",{configurable:!0,get:function(){try{return k5(O5,L5(this))[1]}catch(m){return""}}});var I5=UQ("species"),N5=function(t){return pQ>=51||!IJ((function(){var e=[];return(e.constructor={})[I5]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("slice"),B5=UQ("species"),F5=kJ.Array,z5=Math.max;function U5(t){return t.getMenuConfig("uploadVideo")}n0({target:"Array",proto:!0,forced:!N5},{slice:function(t,e){var n,r,i,o=nQ(this),a=I$(o),s=L$(t,a),l=L$(void 0===e?a:e,a);if(V0(o)&&(n=o.constructor,(K0(n)&&(n===F5||V0(n.prototype))||iQ(n)&&null===(n=n[B5]))&&(n=void 0),n===F5||void 0===n))return W2(o,s,l);for(r=new(void 0===n?F5:n)(z5(l-s,0)),i=0;s<l;s++,i++)s in o&&j4(r,i,o[s]);return r.length=i,r}});var j5=new WeakMap;function V5(t,e){return MJ(this,void 0,void 0,(function(){var n,r,i,o;return EJ(this,(function(a){switch(a.label){case 0:return n=function(t){var e=j5.get(t);if(null!=e)return e;var n=U5(t),r=n.onSuccess,i=n.onProgress,o=n.onFailed,a=n.customInsert,s=n.onError;return e=VE(SJ(SJ({},n),{onProgress:function(e){t.showProgressBar(e),i&&i(e)},onSuccess:function(e,n){if(a)a(n,(function(e){return l4(t,e)}));else{var i=n.errno,s=void 0===i?1:i,l=n.data,u=void 0===l?{}:l;if(0!==s)return console.error("'"+e.name+"' upload failed",n),void o(e,n);var c=u.url;l4(t,void 0===c?"":c),r(e,n)}},onError:function(t,e,n){var r=t.name;console.error("'"+r+" upload error",e,n),s&&s(t,e,n)}})),j5.set(t,e),e}(t),r=e.name,i=e.type,o=e.size,n.addFile({name:r,type:i,size:o,data:e}),[4,n.upload()];case 1:return a.sent(),[2]}}))}))}var H5=function(){function t(){this.title=IC("videoModule.uploadVideo"),this.iconSvg='<svg viewBox="0 0 1056 1024"><path d="M805.902261 521.819882a251.441452 251.441452 0 0 0-251.011972 246.600033 251.051015 251.051015 0 1 0 502.023944 8.823877 253.237463 253.237463 0 0 0-251.011972-255.42391z m59.463561 240.001647v129.898403h-116.701631v-129.898403h-44.041298l101.279368-103.504859 101.279368 103.504859z" p-id="6802"></path><path d="M788.254507 0.000781H99.094092A98.663439 98.663439 0 0 0 0.001171 99.093701v590.067495a98.663439 98.663439 0 0 0 99.092921 99.092921h411.7549a266.434235 266.434235 0 0 1-2.186448-41.815807 275.843767 275.843767 0 0 1 275.180024-270.729042 270.650955 270.650955 0 0 1 103.504859 19.834201V99.093701A101.51363 101.51363 0 0 0 788.254507 0.000781zM295.054441 640.747004V147.507894l394.146189 246.600033z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){var n=this.getMenuConfig(t),r=n.allowedFileTypes,i=void 0===r?[]:r,o=n.customBrowseAndUpload;if(o)o((function(e){return l4(t,e)}));else{var a="";i.length>0&&(a='accept="'+i.join(", ")+'"');var s=hi("body"),l=hi('<input type="file" '+a+" multiple/>");l.hide(),s.append(l),l.click(),l.on("change",(function(){var e=l[0].files;!function(t,e){var n,r;MJ(this,void 0,void 0,(function(){var i,o,a,s,l,u;return EJ(this,(function(c){switch(c.label){case 0:if(null==e)return[2];i=Array.prototype.slice.call(e),o=U5(t).customUpload,c.label=1;case 1:c.trys.push([1,9,10,15]),a=AJ(i),c.label=2;case 2:return[4,a.next()];case 3:return(s=c.sent()).done?[3,8]:(l=s.value,o?[4,o(l,(function(e){return l4(t,e)}))]:[3,5]);case 4:return c.sent(),[3,7];case 5:return[4,V5(t,l)];case 6:c.sent(),c.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return u=c.sent(),n={error:u},[3,15];case 10:return c.trys.push([10,,13,14]),s&&!s.done&&(r=a.return)?[4,r.call(a)]:[3,12];case 11:c.sent(),c.label=12;case 12:return[3,14];case 13:if(n)throw n.error;return[7];case 14:return[7];case 15:return[2]}}))}))}(t,e)}))}},t.prototype.isDisabled=function(t){var e=t.selection;return null==e||!Te.isCollapsed(e)||!!Bx.getSelectedElems(t).some((function(e){return"pre"===Bx.getNodeType(e)||!!t.isVoid(e)}))},t.prototype.getMenuConfig=function(t){return t.getMenuConfig("uploadVideo")},t}(),W5=E$.PROPER,G5=RegExp.prototype,q5=G5.toString,X5=XJ(c1),Y5=IJ((function(){return"/a/b"!=q5.call({source:"a",flags:"b"})})),Z5=W5&&"toString"!=q5.name;function K5(){return u2("w-e-insert-video")}(Y5||Z5)&&C$(RegExp.prototype,"toString",(function(){var t=$Q(this),e=h0(t.source),n=t.flags;return"/"+e+"/"+h0(void 0===n&&sQ(G5,t)&&!("flags"in G5)?X5(t):n)}),{unsafe:!0});var J5=function(){function t(){this.title=IC("videoModule.editSize"),this.tag="button",this.showModal=!0,this.modalWidth=320,this.$content=null,this.widthInputId=K5(),this.heightInputId=K5(),this.buttonId=K5()}return t.prototype.getSelectedVideoNode=function(t){return Bx.getSelectedNodeByType(t,"video")},t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){return null==t.selection||null==this.getSelectedVideoNode(t)},t.prototype.getModalPositionNode=function(t){return this.getSelectedVideoNode(t)},t.prototype.getModalContentElem=function(t){var e=this,n=e.widthInputId,r=e.heightInputId,i=e.buttonId,o=TJ(gE(IC("videoModule.width"),n,"auto"),2),a=o[0],s=o[1],l=hi(s),u=TJ(gE(IC("videoModule.height"),r,"auto"),2),c=u[0],h=u[1],d=hi(h),p=TJ(vE(i,IC("videoModule.ok")),1)[0];if(null==this.$content){var f=hi("<div></div>");f.on("click","#"+i,(function(e){e.preventDefault();var i=f.find("#"+n).val().trim(),o=f.find("#"+r).val().trim(),a=parseInt(i),s=parseInt(o),l=a?a.toString():"auto",u=s?s.toString():"auto";t.restoreSelection(),$e.setNodes(t,{width:l,height:u},{match:function(t){return Bx.checkNodeType(t,"video")}}),t.hidePanelOrModal()})),this.$content=f}var m=this.$content;m.empty(),m.append(a),m.append(c),m.append(p);var g=this.getSelectedVideoNode(t);if(null==g)return m[0];var v=g.width,y=void 0===v?"auto":v,b=g.height,x=void 0===b?"auto":b;return l.val(y),d.val(x),setTimeout((function(){l.focus()})),m[0]},t}(),Q5={renderElems:[M0],elemsToHtml:[E0],preParseHtml:[z0],parseElemsHtml:[u1],menus:[{key:"insertVideo",factory:function(){return new c4},config:{onInsertedVideo:function(t){},checkVideo:function(t){return!0},parseVideoSrc:function(t){return t}}},{key:"uploadVideo",factory:function(){return new H5},config:{server:"",fieldName:"wangeditor-uploaded-video",maxFileSize:10485760,maxNumberOfFiles:5,allowedFileTypes:["video/*"],meta:{},metaWithUrl:!1,withCredentials:!1,timeout:3e4,onBeforeUpload:function(t){return t},onProgress:function(t){},onSuccess:function(t,e){},onFailed:function(t,e){},onError:function(t,e,n){}}},{key:"editVideoSize",factory:function(){return new J5}}],editorPlugin:function(t){var e=t.isVoid,n=t.normalizeNode,r=t;return r.isVoid=function(t){return"video"===t.type||e(t)},r.normalizeNode=function(t){var e=TJ(t,2),i=e[0],o=e[1];return"video"===Bx.getNodeType(i)&&Bx.isLastNode(r,i)&&$e.insertNodes(r,Bx.genEmptyParagraph(),{at:[o[0]+1]}),n([i,o])},r}};kC("en",{uploadImgModule:{uploadImage:"Upload Image",uploadError:"{{fileName}} upload error"}}),kC("zh-CN",{uploadImgModule:{uploadImage:"上传图片",uploadError:"{{fileName}} 上传出错"}});var $5="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function t6(t){var e={exports:{}};return t(e,e.exports),e.exports}var e6,n6,r6=function(t){return t&&t.Math==Math&&t},i6=r6("object"==typeof globalThis&&globalThis)||r6("object"==typeof window&&window)||r6("object"==typeof self&&self)||r6("object"==typeof $5&&$5)||function(){return this}()||Function("return this")(),o6=function(t){try{return!!t()}catch(t){return!0}},a6=!o6((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s6=Function.prototype.call,l6=s6.bind?s6.bind(s6):function(){return s6.apply(s6,arguments)},u6={}.propertyIsEnumerable,c6=Object.getOwnPropertyDescriptor,h6={f:c6&&!u6.call({1:2},1)?function(t){var e=c6(this,t);return!!e&&e.enumerable}:u6},d6=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p6=Function.prototype,f6=p6.bind,m6=p6.call,g6=f6&&f6.bind(m6),v6=f6?function(t){return t&&g6(m6,t)}:function(t){return t&&function(){return m6.apply(t,arguments)}},y6=v6({}.toString),b6=v6("".slice),x6=function(t){return b6(y6(t),8,-1)},_6=i6.Object,w6=v6("".split),S6=o6((function(){return!_6("z").propertyIsEnumerable(0)}))?function(t){return"String"==x6(t)?w6(t,""):_6(t)}:_6,M6=i6.TypeError,E6=function(t){if(null==t)throw M6("Can't call method on "+t);return t},C6=function(t){return S6(E6(t))},T6=function(t){return"function"==typeof t},A6=function(t){return"object"==typeof t?null!==t:T6(t)},D6=function(t){return T6(t)?t:void 0},P6=function(t,e){return arguments.length<2?D6(i6[t]):i6[t]&&i6[t][e]},R6=v6({}.isPrototypeOf),L6=P6("navigator","userAgent")||"",O6=i6.process,k6=i6.Deno,I6=O6&&O6.versions||k6&&k6.version,N6=I6&&I6.v8;N6&&(n6=(e6=N6.split("."))[0]>0&&e6[0]<4?1:+(e6[0]+e6[1])),!n6&&L6&&(!(e6=L6.match(/Edge\/(\d+)/))||e6[1]>=74)&&(e6=L6.match(/Chrome\/(\d+)/))&&(n6=+e6[1]);var B6=n6,F6=!!Object.getOwnPropertySymbols&&!o6((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&B6&&B6<41})),z6=F6&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,U6=i6.Object,j6=z6?function(t){return"symbol"==typeof t}:function(t){var e=P6("Symbol");return T6(e)&&R6(e.prototype,U6(t))},V6=i6.String,H6=function(t){try{return V6(t)}catch(t){return"Object"}},W6=i6.TypeError,G6=function(t){if(T6(t))return t;throw W6(H6(t)+" is not a function")},q6=function(t,e){var n=t[e];return null==n?void 0:G6(n)},X6=i6.TypeError,Y6=Object.defineProperty,Z6=function(t,e){try{Y6(i6,t,{value:e,configurable:!0,writable:!0})}catch(f){i6[t]=e}return e},K6=i6["__core-js_shared__"]||Z6("__core-js_shared__",{}),J6=t6((function(t){(t.exports=function(t,e){return K6[t]||(K6[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Q6=i6.Object,$6=function(t){return Q6(E6(t))},t8=v6({}.hasOwnProperty),e8=Object.hasOwn||function(t,e){return t8($6(t),e)},n8=0,r8=Math.random(),i8=v6(1..toString),o8=function(t){return"Symbol("+(void 0===t?"":t)+")_"+i8(++n8+r8,36)},a8=J6("wks"),s8=i6.Symbol,l8=s8&&s8.for,u8=z6?s8:s8&&s8.withoutSetter||o8,c8=function(t){if(!e8(a8,t)||!F6&&"string"!=typeof a8[t]){var e="Symbol."+t;F6&&e8(s8,t)?a8[t]=s8[t]:a8[t]=z6&&l8?l8(e):u8(e)}return a8[t]},h8=i6.TypeError,d8=c8("toPrimitive"),p8=function(t,e){if(!A6(t)||j6(t))return t;var n,r=q6(t,d8);if(r){if(void 0===e&&(e="default"),n=l6(r,t,e),!A6(n)||j6(n))return n;throw h8("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&T6(n=t.toString)&&!A6(r=l6(n,t)))return r;if(T6(n=t.valueOf)&&!A6(r=l6(n,t)))return r;if("string"!==e&&T6(n=t.toString)&&!A6(r=l6(n,t)))return r;throw X6("Can't convert object to primitive value")}(t,e)},f8=function(t){var e=p8(t,"string");return j6(e)?e:e+""},m8=i6.document,g8=A6(m8)&&A6(m8.createElement),v8=function(t){return g8?m8.createElement(t):{}},y8=!a6&&!o6((function(){return 7!=Object.defineProperty(v8("div"),"a",{get:function(){return 7}}).a})),b8=Object.getOwnPropertyDescriptor,x8={f:a6?b8:function(t,e){if(t=C6(t),e=f8(e),y8)try{return b8(t,e)}catch(t){}if(e8(t,e))return d6(!l6(h6.f,t,e),t[e])}},_8=i6.String,w8=i6.TypeError,S8=function(t){if(A6(t))return t;throw w8(_8(t)+" is not an object")},M8=i6.TypeError,E8=Object.defineProperty,C8={f:a6?E8:function(t,e,n){if(S8(t),e=f8(e),S8(n),y8)try{return E8(t,e,n)}catch(t){}if("get"in n||"set"in n)throw M8("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},T8=a6?function(t,e,n){return C8.f(t,e,d6(1,n))}:function(t,e,n){return t[e]=n,t},A8=v6(Function.toString);T6(K6.inspectSource)||(K6.inspectSource=function(t){return A8(t)});var D8,P8,R8,L8=K6.inspectSource,O8=i6.WeakMap,k8=T6(O8)&&/native code/.test(L8(O8)),I8=J6("keys"),N8=function(t){return I8[t]||(I8[t]=o8(t))},B8={},F8=i6.TypeError,z8=i6.WeakMap;if(k8||K6.state){var U8=K6.state||(K6.state=new z8),j8=v6(U8.get),V8=v6(U8.has),H8=v6(U8.set);D8=function(t,e){if(V8(U8,t))throw new F8("Object already initialized");return e.facade=t,H8(U8,t,e),e},P8=function(t){return j8(U8,t)||{}},R8=function(t){return V8(U8,t)}}else{var W8=N8("state");B8[W8]=!0,D8=function(t,e){if(e8(t,W8))throw new F8("Object already initialized");return e.facade=t,T8(t,W8,e),e},P8=function(t){return e8(t,W8)?t[W8]:{}},R8=function(t){return e8(t,W8)}}var G8={set:D8,get:P8,has:R8,enforce:function(t){return R8(t)?P8(t):D8(t,{})},getterFor:function(t){return function(e){var n;if(!A6(e)||(n=P8(e)).type!==t)throw F8("Incompatible receiver, "+t+" required");return n}}},q8=Function.prototype,X8=a6&&Object.getOwnPropertyDescriptor,Y8=e8(q8,"name"),Z8={EXISTS:Y8,PROPER:Y8&&"something"===function(){}.name,CONFIGURABLE:Y8&&(!a6||a6&&X8(q8,"name").configurable)},K8=t6((function(t){var e=Z8.CONFIGURABLE,n=G8.get,r=G8.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;T6(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!e8(o,"name")||e&&o.name!==h)&&T8(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==i6?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:T8(t,n,o)):u?t[n]=o:Z6(n,o)})(Function.prototype,"toString",(function(){return T6(this)&&n(this).source||L8(this)}))})),J8=Math.ceil,Q8=Math.floor,$8=function(t){var e=+t;return e!=e||0===e?0:(e>0?Q8:J8)(e)},t9=Math.max,e9=Math.min,n9=function(t,e){var n=$8(t);return n<0?t9(n+e,0):e9(n,e)},r9=Math.min,i9=function(t){return t>0?r9($8(t),9007199254740991):0},o9=function(t){return i9(t.length)},a9=function(t){return function(e,n,r){var i,o=C6(e),a=o9(o),s=n9(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},s9={includes:a9(!0),indexOf:a9(!1)}.indexOf,l9=v6([].push),u9=function(t,e){var n,r=C6(t),i=0,o=[];for(n in r)!e8(B8,n)&&e8(r,n)&&l9(o,n);for(;e.length>i;)e8(r,n=e[i++])&&(~s9(o,n)||l9(o,n));return o},c9=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],h9=c9.concat("length","prototype"),d9={f:Object.getOwnPropertyNames||function(t){return u9(t,h9)}},p9={f:Object.getOwnPropertySymbols},f9=v6([].concat),m9=P6("Reflect","ownKeys")||function(t){var e=d9.f(S8(t)),n=p9.f;return n?f9(e,n(t)):e},g9=function(t,e){for(var n=m9(e),r=C8.f,i=x8.f,o=0;o<n.length;o++){var a=n[o];e8(t,a)||r(t,a,i(e,a))}},v9=/#|\.prototype\./,y9=function(t,e){var n=x9[b9(t)];return n==w9||n!=_9&&(T6(e)?o6(e):!!e)},b9=y9.normalize=function(t){return String(t).replace(v9,".").toLowerCase()},x9=y9.data={},_9=y9.NATIVE="N",w9=y9.POLYFILL="P",S9=y9,M9=x8.f,E9=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?i6:u?i6[s]||Z6(s,{}):(i6[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=M9(n,r))&&a.value:n[r],!S9(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;g9(o,i)}(t.sham||i&&i.sham)&&T8(o,"sham",!0),K8(n,r,o,t)}},C9=Array.isArray||function(t){return"Array"==x6(t)},T9={};T9[c8("toStringTag")]="z";var A9,D9="[object z]"===String(T9),P9=c8("toStringTag"),R9=i6.Object,L9="Arguments"==x6(function(){return arguments}()),O9=D9?x6:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=R9(t),P9))?n:L9?x6(e):"Object"==(r=x6(e))&&T6(e.callee)?"Arguments":r},k9=function(){},I9=[],N9=P6("Reflect","construct"),B9=/^\s*(?:class|function)\b/,F9=v6(B9.exec),z9=!B9.exec(k9),U9=function(t){if(!T6(t))return!1;try{return N9(k9,I9,t),!0}catch(t){return!1}},j9=!N9||o6((function(){var t;return U9(U9.call)||!U9(Object)||!U9((function(){t=!0}))||t}))?function(t){if(!T6(t))return!1;switch(O9(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return z9||!!F9(B9,L8(t))}:U9,V9=function(t,e,n){var r=f8(e);r in t?C8.f(t,r,d6(0,n)):t[r]=n},H9=c8("species"),W9=v6([].slice),G9=(A9="slice",B6>=51||!o6((function(){var t=[];return(t.constructor={})[H9]=function(){return{foo:1}},1!==t[A9](Boolean).foo}))),q9=c8("species"),X9=i6.Array,Y9=Math.max;E9({target:"Array",proto:!0,forced:!G9},{slice:function(t,e){var n,r,i,o=C6(this),a=o9(o),s=n9(t,a),l=n9(void 0===e?a:e,a);if(C9(o)&&(n=o.constructor,(j9(n)&&(n===X9||C9(n.prototype))||A6(n)&&null===(n=n[q9]))&&(n=void 0),n===X9||void 0===n))return W9(o,s,l);for(r=new(void 0===n?X9:n)(Y9(l-s,0)),i=0;s<l;s++,i++)s in o&&V9(r,i,o[s]);return r.length=i,r}});var Z9=D9?{}.toString:function(){return"[object "+O9(this)+"]"};D9||K8(Object.prototype,"toString",Z9,{unsafe:!0});var K9,J9=i6.String,Q9=function(t){if("Symbol"===O9(t))throw TypeError("Cannot convert a Symbol value to a string");return J9(t)},$9=function(){var t=S8(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},t7=i6.RegExp,e7=o6((function(){var t=t7("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),n7=e7||o6((function(){return!t7("a","y").sticky})),r7={BROKEN_CARET:e7||o6((function(){var t=t7("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:n7,UNSUPPORTED_Y:e7},i7=Object.keys||function(t){return u9(t,c9)},o7=a6?Object.defineProperties:function(t,e){S8(t);for(var n,r=C6(e),i=i7(e),o=i.length,a=0;o>a;)C8.f(t,n=i[a++],r[n]);return t},a7=P6("document","documentElement"),s7=N8("IE_PROTO"),l7=function(){},u7=function(t){return"<script>"+t+"<\/script>"},c7=function(t){t.write(u7("")),t.close();var e=t.parentWindow.Object;return t=null,e},h7=function(){try{K9=new ActiveXObject("htmlfile")}catch(t){}var t,e;h7="undefined"!=typeof document?document.domain&&K9?c7(K9):((e=v8("iframe")).style.display="none",a7.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(u7("document.F=Object")),t.close(),t.F):c7(K9);for(var n=c9.length;n--;)delete h7.prototype[c9[n]];return h7()};B8[s7]=!0;var d7,p7,f7=Object.create||function(t,e){var n;return null!==t?(l7.prototype=S8(t),n=new l7,l7.prototype=null,n[s7]=t):n=h7(),void 0===e?n:o7(n,e)},m7=i6.RegExp,g7=o6((function(){var t=m7(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),v7=i6.RegExp,y7=o6((function(){var t=v7("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),b7=G8.get,x7=J6("native-string-replace",String.prototype.replace),_7=RegExp.prototype.exec,w7=_7,S7=v6("".charAt),M7=v6("".indexOf),E7=v6("".replace),C7=v6("".slice),T7=(p7=/b*/g,l6(_7,d7=/a/,"a"),l6(_7,p7,"a"),0!==d7.lastIndex||0!==p7.lastIndex),A7=r7.BROKEN_CARET,D7=void 0!==/()??/.exec("")[1];(T7||D7||A7||g7||y7)&&(w7=function(t){var e,n,r,i,o,a,s,l=this,u=b7(l),c=Q9(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=l6(w7,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=A7&&l.sticky,f=l6($9,l),m=l.source,g=0,v=c;if(p&&(f=E7(f,"y",""),-1===M7(f,"g")&&(f+="g"),v=C7(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==S7(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),D7&&(n=new RegExp("^"+m+"$(?!\\s)",f)),T7&&(r=l.lastIndex),i=l6(_7,p?n:l,v),p?i?(i.input=C7(i.input,g),i[0]=C7(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:T7&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),D7&&i&&i.length>1&&l6(x7,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=f7(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var P7=w7;E9({target:"RegExp",proto:!0,forced:/./.exec!==P7},{exec:P7});var R7=Function.prototype,L7=R7.apply,O7=R7.bind,k7=R7.call,I7="object"==typeof Reflect&&Reflect.apply||(O7?k7.bind(L7):function(){return k7.apply(L7,arguments)}),N7=c8("species"),B7=RegExp.prototype,F7=c8("match"),z7=i6.TypeError,U7=c8("species"),j7=function(t,e){var n,r=S8(t).constructor;return void 0===r||null==(n=S8(r)[U7])?e:function(t){if(j9(t))return t;throw z7(H6(t)+" is not a constructor")}(n)},V7=v6("".charAt),H7=v6("".charCodeAt),W7=v6("".slice),G7=function(t){return function(e,n){var r,i,o=Q9(E6(e)),a=$8(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=H7(o,a))<55296||r>56319||a+1===s||(i=H7(o,a+1))<56320||i>57343?t?V7(o,a):r:t?W7(o,a,a+2):i-56320+(r-55296<<10)+65536}},q7={codeAt:G7(!1),charAt:G7(!0)},X7=q7.charAt,Y7=function(t,e,n){return e+(n?X7(t,e).length:1)},Z7=i6.Array,K7=Math.max,J7=function(t,e,n){for(var r=o9(t),i=n9(e,r),o=n9(void 0===n?r:n,r),a=Z7(K7(o-i,0)),s=0;i<o;i++,s++)V9(a,s,t[i]);return a.length=s,a},Q7=i6.TypeError,$7=function(t,e){var n=t.exec;if(T6(n)){var r=l6(n,t,e);return null!==r&&S8(r),r}if("RegExp"===x6(t))return l6(P7,t,e);throw Q7("RegExp#exec called on incompatible receiver")},ttt=r7.UNSUPPORTED_Y,ett=Math.min,ntt=[].push,rtt=v6(/./.exec),itt=v6(ntt),ott=v6("".slice);!function(t,e,n,r){var i=c8(t),o=!o6((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!o6((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[N7]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=v6(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=v6(t),l=e.exec;return l===P7||l===B7.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));K8(String.prototype,t,l[0]),K8(B7,i,l[1])}r&&T8(B7[i],"sham",!0)}("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=Q9(E6(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!A6(r=t)||!(void 0!==(i=r[F7])?i:"RegExp"==x6(r)))return l6(e,o,t,a);for(var s,l,u,c=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=new RegExp(t.source,h+"g");(s=l6(P7,p,o))&&!((l=p.lastIndex)>d&&(itt(c,ott(o,d,s.index)),s.length>1&&s.index<o.length&&I7(ntt,c,J7(s,1)),u=s[0].length,d=l,c.length>=a));)p.lastIndex===s.index&&p.lastIndex++;return d===o.length?!u&&rtt(p,"")||itt(c,""):itt(c,ott(o,d)),c.length>a?J7(c,0,a):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:l6(e,this,t,n)}:e,[function(e,n){var i=E6(this),o=null==e?void 0:q6(e,t);return o?l6(o,e,i,n):l6(r,Q9(i),e,n)},function(t,i){var o=S8(this),a=Q9(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var l=j7(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ttt?"g":"y"),h=new l(ttt?"^(?:"+o.source+")":o,c),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===a.length)return null===$7(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=ttt?0:f;var g,v=$7(h,ttt?ott(a,f):a);if(null===v||(g=ett(i9(h.lastIndex+(ttt?f:0)),a.length))===p)f=Y7(a,f,u);else{if(itt(m,ott(a,p,f)),m.length===d)return m;for(var y=1;y<=v.length-1;y++)if(itt(m,v[y]),m.length===d)return m;f=p=g}}return itt(m,ott(a,p)),m}]}),!!o6((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),ttt);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var att=function(){return att=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},att.apply(this,arguments)};function stt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function ltt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function utt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ctt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=utt(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}var htt=c8("unscopables"),dtt=Array.prototype;null==dtt[htt]&&C8.f(dtt,htt,{configurable:!0,value:f7(null)});var ptt,ftt,mtt,gtt=function(t){dtt[htt][t]=!0},vtt={},ytt=!o6((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),btt=N8("IE_PROTO"),xtt=i6.Object,_tt=xtt.prototype,wtt=ytt?xtt.getPrototypeOf:function(t){var e=$6(t);if(e8(e,btt))return e[btt];var n=e.constructor;return T6(n)&&e instanceof n?n.prototype:e instanceof xtt?_tt:null},Stt=c8("iterator"),Mtt=!1;[].keys&&("next"in(mtt=[].keys())?(ftt=wtt(wtt(mtt)))!==Object.prototype&&(ptt=ftt):Mtt=!0);var Ett=null==ptt||o6((function(){var t={};return ptt[Stt].call(t)!==t}));Ett&&(ptt={}),T6(ptt[Stt])||K8(ptt,Stt,(function(){return this}));var Ctt={IteratorPrototype:ptt,BUGGY_SAFARI_ITERATORS:Mtt},Ttt=C8.f,Att=c8("toStringTag"),Dtt=function(t,e,n){t&&!e8(t=n?t:t.prototype,Att)&&Ttt(t,Att,{configurable:!0,value:e})},Ptt=Ctt.IteratorPrototype,Rtt=function(){return this},Ltt=i6.String,Ott=i6.TypeError,ktt=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=v6(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return S8(n),function(t){if("object"==typeof t||T6(t))return t;throw Ott("Can't set "+Ltt(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Itt=Z8.PROPER,Ntt=Z8.CONFIGURABLE,Btt=Ctt.IteratorPrototype,Ftt=Ctt.BUGGY_SAFARI_ITERATORS,ztt=c8("iterator"),Utt=function(){return this},jtt=function(t,e,n,r,i,o,a){!function(t,e,n,r){var i=e+" Iterator";t.prototype=f7(Ptt,{next:d6(+!r,n)}),Dtt(t,i,!1),vtt[i]=Rtt}(n,e,r);var s,l,u,c=function(t){if(t===i&&m)return m;if(!Ftt&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,f=p[ztt]||p["@@iterator"]||i&&p[i],m=!Ftt&&f||c(i),g="Array"==e&&p.entries||f;if(g&&(s=wtt(g.call(new t)))!==Object.prototype&&s.next&&(wtt(s)!==Btt&&(ktt?ktt(s,Btt):T6(s[ztt])||K8(s,ztt,Utt)),Dtt(s,h,!0)),Itt&&"values"==i&&f&&"values"!==f.name&&(Ntt?T8(p,"name","values"):(d=!0,m=function(){return l6(f,this)})),i)if(l={values:c("values"),keys:o?m:c("keys"),entries:c("entries")},a)for(u in l)(Ftt||d||!(u in p))&&K8(p,u,l[u]);else E9({target:e,proto:!0,forced:Ftt||d},l);return p[ztt]!==m&&K8(p,ztt,m,{name:i}),vtt[e]=m,l},Vtt=G8.set,Htt=G8.getterFor("Array Iterator"),Wtt=jtt(Array,"Array",(function(t,e){Vtt(this,{type:"Array Iterator",target:C6(t),index:0,kind:e})}),(function(){var t=Htt(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");vtt.Arguments=vtt.Array,gtt("keys"),gtt("values"),gtt("entries");var Gtt=q7.charAt,qtt=G8.set,Xtt=G8.getterFor("String Iterator");jtt(String,"String",(function(t){qtt(this,{type:"String Iterator",string:Q9(t),index:0})}),(function(){var t,e=Xtt(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Gtt(n,r),e.index+=t.length,{value:t,done:!1})}));var Ytt=function(t,e,n){for(var r in e)K8(t,r,e[r],n);return t},Ztt=d9.f,Ktt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Jtt={f:function(t){return Ktt&&"Window"==x6(t)?function(t){try{return Ztt(t)}catch(t){return J7(Ktt)}}(t):Ztt(C6(t))}},Qtt=o6((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),$tt=Object.isExtensible,tet=o6((function(){$tt(1)}))||Qtt?function(t){return!!A6(t)&&(!Qtt||"ArrayBuffer"!=x6(t))&&(!$tt||$tt(t))}:$tt,eet=!o6((function(){return Object.isExtensible(Object.preventExtensions({}))})),net=t6((function(t){var e=C8.f,n=!1,r=o8("meta"),i=0,o=function(t){e(t,r,{value:{objectID:"O"+i++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},n=!0;var t=d9.f,e=v6([].splice),i={};i[r]=1,t(i).length&&(d9.f=function(n){for(var i=t(n),o=0,a=i.length;o<a;o++)if(i[o]===r){e(i,o,1);break}return i},E9({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Jtt.f}))},fastKey:function(t,e){if(!A6(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!e8(t,r)){if(!tet(t))return"F";if(!e)return"E";o(t)}return t[r].objectID},getWeakData:function(t,e){if(!e8(t,r)){if(!tet(t))return!0;if(!e)return!1;o(t)}return t[r].weakData},onFreeze:function(t){return eet&&n&&tet(t)&&!e8(t,r)&&o(t),t}};B8[r]=!0})),ret=v6(v6.bind),iet=function(t,e){return G6(t),void 0===e?t:ret?ret(t,e):function(){return t.apply(e,arguments)}},oet=c8("iterator"),aet=Array.prototype,set=c8("iterator"),uet=function(t){if(null!=t)return q6(t,set)||q6(t,"@@iterator")||vtt[O9(t)]},cet=i6.TypeError,het=function(t,e,n){var r,i;S8(t);try{if(!(r=q6(t,"return"))){if("throw"===e)throw n;return n}r=l6(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return S8(r),n},det=i6.TypeError,pet=function(t,e){this.stopped=t,this.result=e},fet=pet.prototype,met=function(t,e,n){var r,i,o,a,s,l,u,c,h=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=iet(e,h),g=function(t){return r&&het(r,"normal",t),new pet(!0,t)},v=function(t){return d?(S8(t),f?m(t[0],t[1],g):m(t[0],t[1])):f?m(t,g):m(t)};if(p)r=t;else{if(!(i=uet(t)))throw det(H6(t)+" is not iterable");if(void 0!==(c=i)&&(vtt.Array===c||aet[oet]===c)){for(o=0,a=o9(t);a>o;o++)if((s=v(t[o]))&&R6(fet,s))return s;return new pet(!1)}r=function(t,e){var n=arguments.length<2?uet(t):e;if(G6(n))return S8(l6(n,t));throw cet(H6(t)+" is not iterable")}(t,i)}for(l=r.next;!(u=l6(l,r)).done;){try{s=v(u.value)}catch(t){het(r,"throw",t)}if("object"==typeof s&&s&&R6(fet,s))return s}return new pet(!1)},get=i6.TypeError,vet=function(t,e){if(R6(e,t))return t;throw get("Incorrect invocation")},yet=c8("iterator"),bet=!1;try{var xet=0,_et={next:function(){return{done:!!xet++}},return:function(){bet=!0}};_et[yet]=function(){return this},Array.from(_et,(function(){throw 2}))}catch(m){}var wet=function(t,e){if(!e&&!bet)return!1;var n=!1;try{var r={};r[yet]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Met=c8("species"),Eet=i6.Array,Cet=function(t,e){return new(function(t){var e;return C9(t)&&(e=t.constructor,(j9(e)&&(e===Eet||C9(e.prototype))||A6(e)&&null===(e=e[Met]))&&(e=void 0)),void 0===e?Eet:e}(t))(0===e?0:e)},Tet=v6([].push),Aet=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=$6(l),m=S6(f),g=iet(u,c),v=o9(m),y=0,b=h||Cet,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:Tet(x,d)}else switch(t){case 4:return!1;case 7:Tet(x,d)}return o?-1:r||i?i:x}},Det={forEach:Aet(0),map:Aet(1),filter:Aet(2),some:Aet(3),every:Aet(4),find:Aet(5),findIndex:Aet(6),filterReject:Aet(7)},Pet=net.getWeakData,Ret=G8.set,Let=G8.getterFor,Oet=Det.find,ket=Det.findIndex,Iet=v6([].splice),Net=0,Bet=function(t){return t.frozen||(t.frozen=new Fet)},Fet=function(){this.entries=[]},zet=function(t,e){return Oet(t.entries,(function(t){return t[0]===e}))};Fet.prototype={get:function(t){var e=zet(this,t);if(e)return e[1]},has:function(t){return!!zet(this,t)},set:function(t,e){var n=zet(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=ket(this.entries,(function(e){return e[0]===t}));return~e&&Iet(this.entries,e,1),!!~e}};var Uet,jet={getConstructor:function(t,e,n,r){var i=t((function(t,i){vet(t,o),Ret(t,{type:e,id:Net++,frozen:void 0}),null!=i&&met(i,t[r],{that:t,AS_ENTRIES:n})})),o=i.prototype,a=Let(e),s=function(t,e,n){var r=a(t),i=Pet(S8(e),!0);return!0===i?Bet(r).set(e,n):i[r.id]=n,t};return Ytt(o,{delete:function(t){var e=a(this);if(!A6(t))return!1;var n=Pet(t);return!0===n?Bet(e).delete(t):n&&e8(n,e.id)&&delete n[e.id]},has:function(t){var e=a(this);if(!A6(t))return!1;var n=Pet(t);return!0===n?Bet(e).has(t):n&&e8(n,e.id)}}),Ytt(o,n?{get:function(t){var e=a(this);if(A6(t)){var n=Pet(t);return!0===n?Bet(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),i}},Vet=G8.enforce,Het=!i6.ActiveXObject&&"ActiveXObject"in i6,Wet=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Get=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=i6[t],s=a&&a.prototype,l=a,u={},c=function(t){var e=v6(s[t]);K8(s,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!A6(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return i&&!A6(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!A6(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(S9(t,!T6(a)||!(i||s.forEach&&!o6((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,o),net.enable();else if(S9(t,!0)){var h=new l,d=h[o](i?{}:-0,1)!=h,p=o6((function(){h.has(1)})),f=wet((function(t){new a(t)})),m=!i&&o6((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));f||((l=e((function(t,e){vet(t,s);var n=function(t,e,n){var r,i;return ktt&&T6(r=e.constructor)&&r!==n&&A6(i=r.prototype)&&i!==n.prototype&&ktt(t,i),t}(new a,t,l);return null!=e&&met(e,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=l),(p||m)&&(c("delete"),c("has"),r&&c("get")),(m||d)&&c(o),i&&s.clear&&delete s.clear}return u[t]=l,E9({global:!0,forced:l!=a},u),Dtt(l,t),i||n.setStrong(l,t,r),l}("WeakMap",Wet,jet);if(k8&&Het){Uet=jet.getConstructor(Wet,"WeakMap",!0),net.enable();var qet=Get.prototype,Xet=v6(qet.delete),Yet=v6(qet.has),Zet=v6(qet.get),Ket=v6(qet.set);Ytt(qet,{delete:function(t){if(A6(t)&&!tet(t)){var e=Vet(this);return e.frozen||(e.frozen=new Uet),Xet(this,t)||e.frozen.delete(t)}return Xet(this,t)},has:function(t){if(A6(t)&&!tet(t)){var e=Vet(this);return e.frozen||(e.frozen=new Uet),Yet(this,t)||e.frozen.has(t)}return Yet(this,t)},get:function(t){if(A6(t)&&!tet(t)){var e=Vet(this);return e.frozen||(e.frozen=new Uet),Yet(this,t)?Zet(this,t):e.frozen.get(t)}return Zet(this,t)},set:function(t,e){if(A6(t)&&!tet(t)){var n=Vet(this);n.frozen||(n.frozen=new Uet),Yet(this,t)?Ket(this,t,e):n.frozen.set(t,e)}else Ket(this,t,e);return this}})}var Jet={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qet=v8("span").classList,$et=Qet&&Qet.constructor&&Qet.constructor.prototype,tnt=$et===Object.prototype?void 0:$et,ent=c8("iterator"),nnt=c8("toStringTag"),rnt=Wtt.values,int=function(t,e){if(t){if(t[ent]!==rnt)try{T8(t,ent,rnt)}catch(e){t[ent]=rnt}if(t[nnt]||T8(t,nnt,e),Jet[e])for(var n in Wtt)if(t[n]!==Wtt[n])try{T8(t,n,Wtt[n])}catch(e){t[n]=Wtt[n]}}};for(var ont in Jet)int(i6[ont]&&i6[ont].prototype,ont);int(tnt,"DOMTokenList");var ant=Z8.EXISTS,snt=C8.f,lnt=Function.prototype,unt=v6(lnt.toString),cnt=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,hnt=v6(cnt.exec);a6&&!ant&&snt(lnt,"name",{configurable:!0,get:function(){try{return hnt(cnt,unt(this))[1]}catch(m){return""}}});var dnt=function(t,e){var n=[][t];return!!n&&o6((function(){n.call(null,e||function(){throw 1},1)}))},pnt=Det.forEach,fnt=dnt("forEach")?[].forEach:function(t){return pnt(this,t,arguments.length>1?arguments[1]:void 0)},mnt=function(t){if(t&&t.forEach!==fnt)try{T8(t,"forEach",fnt)}catch(Cut){t.forEach=fnt}};for(var gnt in Jet)Jet[gnt]&&mnt(i6[gnt]&&i6[gnt].prototype);mnt(tnt);var vnt,ynt,bnt,xnt,_nt=i6.Promise,wnt=c8("species"),Snt=/(?:ipad|iphone|ipod).*applewebkit/i.test(L6),Mnt="process"==x6(i6.process),Ent=i6.setImmediate,Cnt=i6.clearImmediate,Tnt=i6.process,Ant=i6.Dispatch,Dnt=i6.Function,Pnt=i6.MessageChannel,Rnt=i6.String,Lnt=0,Ont={};try{vnt=i6.location}catch(m){}var knt=function(t){if(e8(Ont,t)){var e=Ont[t];delete Ont[t],e()}},Int=function(t){return function(){knt(t)}},Nnt=function(t){knt(t.data)},Bnt=function(t){i6.postMessage(Rnt(t),vnt.protocol+"//"+vnt.host)};Ent&&Cnt||(Ent=function(t){var e=W9(arguments,1);return Ont[++Lnt]=function(){I7(T6(t)?t:Dnt(t),void 0,e)},ynt(Lnt),Lnt},Cnt=function(t){delete Ont[t]},Mnt?ynt=function(t){Tnt.nextTick(Int(t))}:Ant&&Ant.now?ynt=function(t){Ant.now(Int(t))}:Pnt&&!Snt?(xnt=(bnt=new Pnt).port2,bnt.port1.onmessage=Nnt,ynt=iet(xnt.postMessage,xnt)):i6.addEventListener&&T6(i6.postMessage)&&!i6.importScripts&&vnt&&"file:"!==vnt.protocol&&!o6(Bnt)?(ynt=Bnt,i6.addEventListener("message",Nnt,!1)):ynt="onreadystatechange"in v8("script")?function(t){a7.appendChild(v8("script")).onreadystatechange=function(){a7.removeChild(this),knt(t)}}:function(t){setTimeout(Int(t),0)});var Fnt,znt,Unt,jnt,Vnt,Hnt,Wnt,Gnt,qnt={set:Ent,clear:Cnt},Xnt=/ipad|iphone|ipod/i.test(L6)&&void 0!==i6.Pebble,Ynt=/web0s(?!.*chrome)/i.test(L6),Znt=x8.f,Knt=qnt.set,Jnt=i6.MutationObserver||i6.WebKitMutationObserver,Qnt=i6.document,$nt=i6.process,trt=i6.Promise,ert=Znt(i6,"queueMicrotask"),nrt=ert&&ert.value;nrt||(Fnt=function(){var t,e;for(Mnt&&(t=$nt.domain)&&t.exit();znt;){e=znt.fn,znt=znt.next;try{e()}catch(t){throw znt?jnt():Unt=void 0,t}}Unt=void 0,t&&t.enter()},Snt||Mnt||Ynt||!Jnt||!Qnt?!Xnt&&trt&&trt.resolve?((Wnt=trt.resolve(void 0)).constructor=trt,Gnt=iet(Wnt.then,Wnt),jnt=function(){Gnt(Fnt)}):Mnt?jnt=function(){$nt.nextTick(Fnt)}:(Knt=iet(Knt,i6),jnt=function(){Knt(Fnt)}):(Vnt=!0,Hnt=Qnt.createTextNode(""),new Jnt(Fnt).observe(Hnt,{characterData:!0}),jnt=function(){Hnt.data=Vnt=!Vnt}));var rrt,irt,ort,art,srt=nrt||function(t){var e={fn:t,next:void 0};Unt&&(Unt.next=e),znt||(znt=e,jnt()),Unt=e},lrt=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=G6(e),this.reject=G6(n)},urt={f:function(t){return new lrt(t)}},crt=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},hrt="object"==typeof window,drt=qnt.set,prt=c8("species"),frt="Promise",mrt=G8.getterFor(frt),grt=G8.set,vrt=G8.getterFor(frt),yrt=_nt&&_nt.prototype,brt=_nt,xrt=yrt,_rt=i6.TypeError,wrt=i6.document,Srt=i6.process,Mrt=urt.f,Ert=Mrt,Crt=!!(wrt&&wrt.createEvent&&i6.dispatchEvent),Trt=T6(i6.PromiseRejectionEvent),Art=!1,Drt=S9(frt,(function(){var t=L8(brt),e=t!==String(brt);if(!e&&66===B6)return!0;if(B6>=51&&/native code/.test(t))return!1;var n=new brt((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[prt]=r,!(Art=n.then((function(){}))instanceof r)||!e&&hrt&&!Trt})),Prt=Drt||!wet((function(t){brt.all(t).catch((function(){}))})),Rrt=function(t){var e;return!(!A6(t)||!T6(e=t.then))&&e},Lrt=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;srt((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,l,u=n[o++],c=i?u.ok:u.fail,h=u.resolve,d=u.reject,p=u.domain;try{c?(i||(2===t.rejection&&Nrt(t),t.rejection=1),!0===c?a=r:(p&&p.enter(),a=c(r),p&&(p.exit(),l=!0)),a===u.promise?d(_rt("Promise-chain cycle")):(s=Rrt(a))?l6(s,a,h,d):h(a)):d(r)}catch(t){p&&!l&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&krt(t)}))}},Ort=function(t,e,n){var r,i;Crt?((r=wrt.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),i6.dispatchEvent(r)):r={promise:e,reason:n},!Trt&&(i=i6["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=i6.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},krt=function(t){l6(drt,i6,(function(){var e,n=t.facade,r=t.value;if(Irt(t)&&(e=crt((function(){Mnt?Srt.emit("unhandledRejection",r,n):Ort("unhandledrejection",n,r)})),t.rejection=Mnt||Irt(t)?2:1,e.error))throw e.value}))},Irt=function(t){return 1!==t.rejection&&!t.parent},Nrt=function(t){l6(drt,i6,(function(){var e=t.facade;Mnt?Srt.emit("rejectionHandled",e):Ort("rejectionhandled",e,t.value)}))},Brt=function(t,e,n){return function(r){t(e,r,n)}},Frt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Lrt(t,!0))},zrt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw _rt("Promise can't be resolved itself");var r=Rrt(e);r?srt((function(){var n={done:!1};try{l6(r,e,Brt(zrt,n,t),Brt(Frt,n,t))}catch(e){Frt(n,e,t)}})):(t.value=e,t.state=1,Lrt(t,!1))}catch(e){Frt({done:!1},e,t)}}};if(Drt&&(xrt=(brt=function(t){vet(this,xrt),G6(t),l6(rrt,this);var e=mrt(this);try{t(Brt(zrt,e),Brt(Frt,e))}catch(t){Frt(e,t)}}).prototype,(rrt=function(t){grt(this,{type:frt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ytt(xrt,{then:function(t,e){var n=vrt(this),r=n.reactions,i=Mrt(j7(this,brt));return i.ok=!T6(t)||t,i.fail=T6(e)&&e,i.domain=Mnt?Srt.domain:void 0,n.parent=!0,r[r.length]=i,0!=n.state&&Lrt(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),irt=function(){var t=new rrt,e=mrt(t);this.promise=t,this.resolve=Brt(zrt,e),this.reject=Brt(Frt,e)},urt.f=Mrt=function(t){return t===brt||t===ort?new irt(t):Ert(t)},T6(_nt)&&yrt!==Object.prototype)){art=yrt.then,Art||(K8(yrt,"then",(function(t,e){var n=this;return new brt((function(t,e){l6(art,n,t,e)})).then(t,e)}),{unsafe:!0}),K8(yrt,"catch",xrt.catch,{unsafe:!0}));try{delete yrt.constructor}catch(m){}ktt&&ktt(yrt,xrt)}E9({global:!0,wrap:!0,forced:Drt},{Promise:brt}),Dtt(brt,frt,!1),function(t){var e=P6(t),n=C8.f;a6&&e&&!e[wnt]&&n(e,wnt,{configurable:!0,get:function(){return this}})}(frt),ort=P6(frt),E9({target:frt,stat:!0,forced:Drt},{reject:function(t){var e=Mrt(this);return l6(e.reject,void 0,t),e.promise}}),E9({target:frt,stat:!0,forced:Drt},{resolve:function(t){return function(t,e){if(S8(t),A6(e)&&e.constructor===t)return e;var n=urt.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),E9({target:frt,stat:!0,forced:Prt},{all:function(t){var e=this,n=Mrt(e),r=n.resolve,i=n.reject,o=crt((function(){var n=G6(e.resolve),o=[],a=0,s=1;met(t,(function(t){var l=a++,u=!1;s++,l6(n,e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Mrt(e),r=n.reject,i=crt((function(){var i=G6(e.resolve);met(t,(function(t){l6(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Urt=Z8.PROPER,jrt=RegExp.prototype,Vrt=jrt.toString,Hrt=v6($9),Wrt=o6((function(){return"/a/b"!=Vrt.call({source:"a",flags:"b"})})),Grt=Urt&&"toString"!=Vrt.name;(Wrt||Grt)&&K8(RegExp.prototype,"toString",(function(){var t=S8(this),e=Q9(t.source),n=t.flags;return"/"+e+"/"+Q9(void 0===n&&R6(jrt,t)&&!("flags"in jrt)?Hrt(t):n)}),{unsafe:!0});var qrt=new WeakMap;function Xrt(t){return t.getMenuConfig("uploadImage")}function Yrt(t,e){return stt(this,void 0,void 0,(function(){return ltt(this,(function(n){return[2,new Promise((function(n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){var i=r.result;if(i){var o=i.toString(),a=0===o.indexOf("data:image")?"":o;Sk(t,o,e.name,a),n("ok")}}}))]}))}))}function Zrt(t,e){return stt(this,void 0,void 0,(function(){var n,r,i,o;return ltt(this,(function(a){switch(a.label){case 0:return n=function(t){var e=qrt.get(t);if(null!=e)return e;var n=Xrt(t),r=n.onSuccess,i=n.onProgress,o=n.onFailed,a=n.customInsert,s=n.onError;return e=VE(att(att({},n),{onProgress:function(e){t.showProgressBar(e),i&&i(e)},onSuccess:function(e,n){if(a)a(n,(function(e,n,r){return Sk(t,e,n,r)}));else{var i=n.errno,s=void 0===i?1:i,l=n.data,u=void 0===l?{}:l;if(0!==s)return console.error("'"+e.name+"' upload failed",n),void o(e,n);if(Array.isArray(u))u.forEach((function(e){var n=e.url,r=void 0===n?"":n,i=e.alt,o=void 0===i?"":i,a=e.href;Sk(t,r,o,void 0===a?"":a)}));else{var c=u.url,h=void 0===c?"":c,d=u.alt,p=void 0===d?"":d,f=u.href;Sk(t,h,p,void 0===f?"":f)}r(e,n)}},onError:function(t,e,n){var r=t.name;console.error("'"+r+" upload error",e,n),s&&s(t,e,n)}})),qrt.set(t,e),e}(t),r=e.name,i=e.type,o=e.size,n.addFile({name:r,type:i,size:o,data:e}),[4,n.upload()];case 1:return a.sent(),[2]}}))}))}function Krt(t,e){var n,r;return stt(this,void 0,void 0,(function(){var i,o,a,s,l,u,c,h,d;return ltt(this,(function(p){switch(p.label){case 0:if(null==e)return[2];i=Array.prototype.slice.call(e),o=Xrt(t),a=o.customUpload,s=o.base64LimitSize,p.label=1;case 1:p.trys.push([1,11,12,17]),l=ctt(i),p.label=2;case 2:return[4,l.next()];case 3:return(u=p.sent()).done?[3,10]:(c=u.value,h=c.size,s&&h<=s?[4,Yrt(t,c)]:[3,5]);case 4:return p.sent(),[3,9];case 5:return a?[4,a(c,(function(e,n,r){return Sk(t,e,n,r)}))]:[3,7];case 6:return p.sent(),[3,9];case 7:return[4,Zrt(t,c)];case 8:p.sent(),p.label=9;case 9:return[3,2];case 10:return[3,17];case 11:return d=p.sent(),n={error:d},[3,17];case 12:return p.trys.push([12,,15,16]),u&&!u.done&&(r=l.return)?[4,r.call(l)]:[3,14];case 13:p.sent(),p.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[2]}}))}))}var Jrt=v6([].join),Qrt=S6!=Object,$rt=dnt("join",",");E9({target:"Array",proto:!0,forced:Qrt||!$rt},{join:function(t){return Jrt(C6(this),void 0===t?",":t)}}),Li&&(hi.fn.append=Li),bi&&(hi.fn.on=bi),Fi&&(hi.fn.remove=Fi),yi&&(hi.fn.val=yi),Vi&&(hi.fn.click=Vi),Mi&&(hi.fn.hide=Mi);var tit=function(){function t(){this.title=IC("uploadImgModule.uploadImage"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M828.708571 585.045333a48.761905 48.761905 0 0 0-48.737523 48.761905v18.529524l-72.143238-72.167619a135.972571 135.972571 0 0 0-191.585524 0l-34.133334 34.133333-120.880762-120.953905a138.898286 138.898286 0 0 0-191.585523 0l-72.167619 72.167619V292.400762a48.786286 48.786286 0 0 1 48.761904-48.761905h341.23581a48.737524 48.737524 0 0 0 34.474667-83.285333 48.737524 48.737524 0 0 0-34.474667-14.287238H146.236952A146.212571 146.212571 0 0 0 0 292.400762v585.289143A146.358857 146.358857 0 0 0 146.236952 1024h584.996572a146.212571 146.212571 0 0 0 146.236952-146.310095V633.807238a48.786286 48.786286 0 0 0-48.761905-48.761905zM146.261333 926.45181a48.737524 48.737524 0 0 1-48.761904-48.761905v-174.128762l141.409523-141.458286a38.497524 38.497524 0 0 1 53.126096 0l154.526476 154.624 209.627428 209.724953H146.236952z m633.734096-48.761905c-0.073143 9.337905-3.145143 18.383238-8.777143 25.843809l-219.843048-220.94019 34.133333-34.133334a37.546667 37.546667 0 0 1 53.613715 0l140.873143 141.897143V877.714286zM1009.615238 160.231619L863.329524 13.897143a48.737524 48.737524 0 0 0-16.091429-10.24c-11.849143-4.87619-25.161143-4.87619-37.059047 0a48.761905 48.761905 0 0 0-16.067048 10.24l-146.236952 146.334476a49.005714 49.005714 0 0 0 69.217523 69.241905l62.902858-63.390476v272.627809a48.761905 48.761905 0 1 0 97.475047 0V166.083048l62.902857 63.390476a48.737524 48.737524 0 0 0 69.217524 0 48.761905 48.761905 0 0 0 0-69.241905z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.isDisabled=function(t){return Ek(t)},t.prototype.getMenuConfig=function(t){return t.getMenuConfig("uploadImage")},t.prototype.exec=function(t,e){var n=this.getMenuConfig(t),r=n.allowedFileTypes,i=void 0===r?[]:r,o=n.customBrowseAndUpload;if(o)o((function(e,n,r){return Sk(t,e,n,r)}));else{var a="";i.length>0&&(a='accept="'+i.join(", ")+'"');var s=hi("body"),l=hi('<input type="file" '+a+" multiple/>");l.hide(),s.append(l),l.click(),l.on("change",(function(){var e=l[0].files;Krt(t,e)}))}},t}(),eit={menus:[{key:"uploadImage",factory:function(){return new tit},config:{server:"",fieldName:"wangeditor-uploaded-image",maxFileSize:2097152,maxNumberOfFiles:100,allowedFileTypes:["image/*"],meta:{},metaWithUrl:!1,withCredentials:!1,timeout:1e4,onBeforeUpload:function(t){return t},onProgress:function(t){},onSuccess:function(t,e){},onFailed:function(t,e){},onError:function(t,e,n){},base64LimitSize:0}}],editorPlugin:function(t){var e=t.insertData,n=t;return n.insertData=function(r){if(Ek(n))e(r);else if(r.getData("text/plain"))e(r);else{var i=r.files;i.length<=0?e(r):Array.prototype.slice.call(i).some((function(t){return"image"===function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t.type.split("/"),1)[0]}))?Krt(t,i):e(r)}},n}};kC("en",{highLightModule:{selectLang:"Language"}}),kC("zh-CN",{highLightModule:{selectLang:"选择语言"}});var nit="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function rit(t){var e={exports:{}};return t(e,e.exports),e.exports}var iit,oit,ait=function(t){return t&&t.Math==Math&&t},sit=ait("object"==typeof globalThis&&globalThis)||ait("object"==typeof window&&window)||ait("object"==typeof self&&self)||ait("object"==typeof nit&&nit)||function(){return this}()||Function("return this")(),lit=Object.defineProperty,uit=function(t,e){try{lit(sit,t,{value:e,configurable:!0,writable:!0})}catch(f){sit[t]=e}return e},cit=sit["__core-js_shared__"]||uit("__core-js_shared__",{}),hit=rit((function(t){(t.exports=function(t,e){return cit[t]||(cit[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),dit=Function.prototype,pit=dit.bind,fit=dit.call,mit=pit&&pit.bind(fit),git=pit?function(t){return t&&mit(fit,t)}:function(t){return t&&function(){return fit.apply(t,arguments)}},vit=sit.TypeError,yit=function(t){if(null==t)throw vit("Can't call method on "+t);return t},bit=sit.Object,xit=function(t){return bit(yit(t))},_it=git({}.hasOwnProperty),wit=Object.hasOwn||function(t,e){return _it(xit(t),e)},Sit=0,Mit=Math.random(),Eit=git(1..toString),Cit=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Eit(++Sit+Mit,36)},Tit=function(t){return"function"==typeof t},Ait=function(t){return Tit(t)?t:void 0},Dit=function(t,e){return arguments.length<2?Ait(sit[t]):sit[t]&&sit[t][e]},Pit=Dit("navigator","userAgent")||"",Rit=sit.process,Lit=sit.Deno,Oit=Rit&&Rit.versions||Lit&&Lit.version,kit=Oit&&Oit.v8;kit&&(oit=(iit=kit.split("."))[0]>0&&iit[0]<4?1:+(iit[0]+iit[1])),!oit&&Pit&&(!(iit=Pit.match(/Edge\/(\d+)/))||iit[1]>=74)&&(iit=Pit.match(/Chrome\/(\d+)/))&&(oit=+iit[1]);var Iit=oit,Nit=function(t){try{return!!t()}catch(t){return!0}},Bit=!!Object.getOwnPropertySymbols&&!Nit((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Iit&&Iit<41})),Fit=Bit&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,zit=hit("wks"),Uit=sit.Symbol,jit=Uit&&Uit.for,Vit=Fit?Uit:Uit&&Uit.withoutSetter||Cit,Hit=function(t){if(!wit(zit,t)||!Bit&&"string"!=typeof zit[t]){var e="Symbol."+t;Bit&&wit(Uit,t)?zit[t]=Uit[t]:zit[t]=Fit&&jit?jit(e):Vit(e)}return zit[t]},Wit={};Wit[Hit("toStringTag")]="z";var Git="[object z]"===String(Wit),qit=!Nit((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Xit=function(t){return"object"==typeof t?null!==t:Tit(t)},Yit=sit.document,Zit=Xit(Yit)&&Xit(Yit.createElement),Kit=function(t){return Zit?Yit.createElement(t):{}},Jit=!qit&&!Nit((function(){return 7!=Object.defineProperty(Kit("div"),"a",{get:function(){return 7}}).a})),Qit=sit.String,$it=sit.TypeError,tot=function(t){if(Xit(t))return t;throw $it(Qit(t)+" is not an object")},eot=Function.prototype.call,not=eot.bind?eot.bind(eot):function(){return eot.apply(eot,arguments)},rot=git({}.isPrototypeOf),iot=sit.Object,oot=Fit?function(t){return"symbol"==typeof t}:function(t){var e=Dit("Symbol");return Tit(e)&&rot(e.prototype,iot(t))},aot=sit.String,sot=function(t){try{return aot(t)}catch(t){return"Object"}},lot=sit.TypeError,uot=function(t){if(Tit(t))return t;throw lot(sot(t)+" is not a function")},cot=function(t,e){var n=t[e];return null==n?void 0:uot(n)},hot=sit.TypeError,dot=sit.TypeError,pot=Hit("toPrimitive"),fot=function(t,e){if(!Xit(t)||oot(t))return t;var n,r=cot(t,pot);if(r){if(void 0===e&&(e="default"),n=not(r,t,e),!Xit(n)||oot(n))return n;throw dot("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&Tit(n=t.toString)&&!Xit(r=not(n,t)))return r;if(Tit(n=t.valueOf)&&!Xit(r=not(n,t)))return r;if("string"!==e&&Tit(n=t.toString)&&!Xit(r=not(n,t)))return r;throw hot("Can't convert object to primitive value")}(t,e)},mot=function(t){var e=fot(t,"string");return oot(e)?e:e+""},got=sit.TypeError,vot=Object.defineProperty,yot={f:qit?vot:function(t,e,n){if(tot(t),e=mot(e),tot(n),Jit)try{return vot(t,e,n)}catch(t){}if("get"in n||"set"in n)throw got("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},bot=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},xot=qit?function(t,e,n){return yot.f(t,e,bot(1,n))}:function(t,e,n){return t[e]=n,t},_ot=git(Function.toString);Tit(cit.inspectSource)||(cit.inspectSource=function(t){return _ot(t)});var wot,Sot,Mot,Eot=cit.inspectSource,Cot=sit.WeakMap,Tot=Tit(Cot)&&/native code/.test(Eot(Cot)),Aot=hit("keys"),Dot=function(t){return Aot[t]||(Aot[t]=Cit(t))},Pot={},Rot=sit.TypeError,Lot=sit.WeakMap;if(Tot||cit.state){var Oot=cit.state||(cit.state=new Lot),kot=git(Oot.get),Iot=git(Oot.has),Not=git(Oot.set);wot=function(t,e){if(Iot(Oot,t))throw new Rot("Object already initialized");return e.facade=t,Not(Oot,t,e),e},Sot=function(t){return kot(Oot,t)||{}},Mot=function(t){return Iot(Oot,t)}}else{var Bot=Dot("state");Pot[Bot]=!0,wot=function(t,e){if(wit(t,Bot))throw new Rot("Object already initialized");return e.facade=t,xot(t,Bot,e),e},Sot=function(t){return wit(t,Bot)?t[Bot]:{}},Mot=function(t){return wit(t,Bot)}}var Fot={set:wot,get:Sot,has:Mot,enforce:function(t){return Mot(t)?Sot(t):wot(t,{})},getterFor:function(t){return function(e){var n;if(!Xit(e)||(n=Sot(e)).type!==t)throw Rot("Incompatible receiver, "+t+" required");return n}}},zot=Function.prototype,Uot=qit&&Object.getOwnPropertyDescriptor,jot=wit(zot,"name"),Vot={EXISTS:jot,PROPER:jot&&"something"===function(){}.name,CONFIGURABLE:jot&&(!qit||qit&&Uot(zot,"name").configurable)},Hot=rit((function(t){var e=Vot.CONFIGURABLE,n=Fot.get,r=Fot.enforce,i=String(String).split("String");(t.exports=function(t,n,o,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,h=a&&void 0!==a.name?a.name:n;Tit(o)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!wit(o,"name")||e&&o.name!==h)&&xot(o,"name",h),(s=r(o)).source||(s.source=i.join("string"==typeof h?h:""))),t!==sit?(l?!c&&t[n]&&(u=!0):delete t[n],u?t[n]=o:xot(t,n,o)):u?t[n]=o:uit(n,o)})(Function.prototype,"toString",(function(){return Tit(this)&&n(this).source||Eot(this)}))})),Wot=git({}.toString),Got=git("".slice),qot=function(t){return Got(Wot(t),8,-1)},Xot=Hit("toStringTag"),Yot=sit.Object,Zot="Arguments"==qot(function(){return arguments}()),Kot=Git?qot:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Yot(t),Xot))?n:Zot?qot(e):"Object"==(r=qot(e))&&Tit(e.callee)?"Arguments":r},Jot=Git?{}.toString:function(){return"[object "+Kot(this)+"]"};Git||Hot(Object.prototype,"toString",Jot,{unsafe:!0});var Qot,$ot,tat={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},eat=Kit("span").classList,nat=eat&&eat.constructor&&eat.constructor.prototype,rat=nat===Object.prototype?void 0:nat,iat=git(git.bind),oat=sit.Object,aat=git("".split),sat=Nit((function(){return!oat("z").propertyIsEnumerable(0)}))?function(t){return"String"==qot(t)?aat(t,""):oat(t)}:oat,lat=Math.ceil,uat=Math.floor,cat=function(t){var e=+t;return e!=e||0===e?0:(e>0?uat:lat)(e)},hat=Math.min,dat=function(t){return t>0?hat(cat(t),9007199254740991):0},pat=function(t){return dat(t.length)},fat=Array.isArray||function(t){return"Array"==qot(t)},mat=function(){},gat=[],vat=Dit("Reflect","construct"),yat=/^\s*(?:class|function)\b/,bat=git(yat.exec),xat=!yat.exec(mat),_at=function(t){if(!Tit(t))return!1;try{return vat(mat,gat,t),!0}catch(t){return!1}},wat=!vat||Nit((function(){var t;return _at(_at.call)||!_at(Object)||!_at((function(){t=!0}))||t}))?function(t){if(!Tit(t))return!1;switch(Kot(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return xat||!!bat(yat,Eot(t))}:_at,Sat=Hit("species"),Mat=sit.Array,Eat=function(t,e){return new(function(t){var e;return fat(t)&&(e=t.constructor,(wat(e)&&(e===Mat||fat(e.prototype))||Xit(e)&&null===(e=e[Sat]))&&(e=void 0)),void 0===e?Mat:e}(t))(0===e?0:e)},Cat=git([].push),Tat=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var d,p,f=xit(l),m=sat(f),g=function(t,e){return uot(t),void 0===e?t:iat?iat(t,e):function(){return t.apply(e,arguments)}}(u,c),v=pat(m),y=0,b=h||Eat,x=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in m)&&(p=g(d=m[y],y,f),t))if(e)x[y]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:Cat(x,d)}else switch(t){case 4:return!1;case 7:Cat(x,d)}return o?-1:r||i?i:x}},Aat={forEach:Tat(0),map:Tat(1),filter:Tat(2),some:Tat(3),every:Tat(4),find:Tat(5),findIndex:Tat(6),filterReject:Tat(7)}.forEach,Dat=($ot=[]["forEach"])&&Nit((function(){$ot.call(null,Qot||function(){throw 1},1)}))?[].forEach:function(t){return Aat(this,t,arguments.length>1?arguments[1]:void 0)},Pat=function(t){if(t&&t.forEach!==Dat)try{xot(t,"forEach",Dat)}catch(m){t.forEach=Dat}};for(var Rat in tat)tat[Rat]&&Pat(sit[Rat]&&sit[Rat].prototype);Pat(rat);var Lat={}.propertyIsEnumerable,Oat=Object.getOwnPropertyDescriptor,kat={f:Oat&&!Lat.call({1:2},1)?function(t){var e=Oat(this,t);return!!e&&e.enumerable}:Lat},Iat=function(t){return sat(yit(t))},Nat=Object.getOwnPropertyDescriptor,Bat={f:qit?Nat:function(t,e){if(t=Iat(t),e=mot(e),Jit)try{return Nat(t,e)}catch(t){}if(wit(t,e))return bot(!not(kat.f,t,e),t[e])}},Fat=Math.max,zat=Math.min,Uat=function(t,e){var n=cat(t);return n<0?Fat(n+e,0):zat(n,e)},jat=function(t){return function(e,n,r){var i,o=Iat(e),a=pat(o),s=Uat(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Vat={includes:jat(!0),indexOf:jat(!1)}.indexOf,Hat=git([].push),Wat=function(t,e){var n,r=Iat(t),i=0,o=[];for(n in r)!wit(Pot,n)&&wit(r,n)&&Hat(o,n);for(;e.length>i;)wit(r,n=e[i++])&&(~Vat(o,n)||Hat(o,n));return o},Gat=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qat=Gat.concat("length","prototype"),Xat={f:Object.getOwnPropertyNames||function(t){return Wat(t,qat)}},Yat={f:Object.getOwnPropertySymbols},Zat=git([].concat),Kat=Dit("Reflect","ownKeys")||function(t){var e=Xat.f(tot(t)),n=Yat.f;return n?Zat(e,n(t)):e},Jat=function(t,e){for(var n=Kat(e),r=yot.f,i=Bat.f,o=0;o<n.length;o++){var a=n[o];wit(t,a)||r(t,a,i(e,a))}},Qat=/#|\.prototype\./,$at=function(t,e){var n=est[tst(t)];return n==rst||n!=nst&&(Tit(e)?Nit(e):!!e)},tst=$at.normalize=function(t){return String(t).replace(Qat,".").toLowerCase()},est=$at.data={},nst=$at.NATIVE="N",rst=$at.POLYFILL="P",ist=$at,ost=Bat.f,ast=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?sit:u?sit[s]||uit(s,{}):(sit[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=ost(n,r))&&a.value:n[r],!ist(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Jat(o,i)}(t.sham||i&&i.sham)&&xot(o,"sham",!0),Hot(n,r,o,t)}},sst=Object.keys||function(t){return Wat(t,Gat)},lst=Object.assign,ust=Object.defineProperty,cst=git([].concat),hst=!lst||Nit((function(){if(qit&&1!==lst({b:1},lst(ust({},"a",{enumerable:!0,get:function(){ust(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=lst({},t)[n]||sst(lst({},e)).join("")!=r}))?function(t,e){for(var n=xit(t),r=arguments.length,i=1,o=Yat.f,a=kat.f;r>i;)for(var s,l=sat(arguments[i++]),u=o?cst(sst(l),o(l)):sst(l),c=u.length,h=0;c>h;)s=u[h++],qit&&!not(a,l,s)||(n[s]=l[s]);return n}:lst;ast({target:"Object",stat:!0,forced:Object.assign!==hst},{assign:hst});var dst=rit((function(t){var e=function(t){var e=/\blang(?:uage)?-([\w-]+)\b/i,n=0,r={},i={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof o?new o(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++n}),t.__id},clone:function t(e,n){var r,o;switch(n=n||{},i.util.type(e)){case"Object":if(o=i.util.objId(e),n[o])return n[o];for(var a in r={},n[o]=r,e)e.hasOwnProperty(a)&&(r[a]=t(e[a],n));return r;case"Array":return o=i.util.objId(e),n[o]?n[o]:(r=[],n[o]=r,e.forEach((function(e,i){r[i]=t(e,n)})),r);default:return e}},getLanguage:function(t){for(;t&&!e.test(t.className);)t=t.parentElement;return t?(t.className.match(e)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var n in e)if(e[n].src==t)return e[n]}return null}},isActive:function(t,e,n){for(var r="no-"+e;t;){var i=t.classList;if(i.contains(e))return!0;if(i.contains(r))return!1;t=t.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(t,e){var n=i.util.clone(i.languages[t]);for(var r in e)n[r]=e[r];return n},insertBefore:function(t,e,n,r){var o=(r=r||i.languages)[t],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==e)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var u=r[t];return r[t]=a,i.languages.DFS(i.languages,(function(e,n){n===u&&e!=t&&(this[e]=a)})),a},DFS:function t(e,n,r,o){o=o||{};var a=i.util.objId;for(var s in e)if(e.hasOwnProperty(s)){n.call(e,s,e[s],r||s);var l=e[s],u=i.util.type(l);"Object"!==u||o[a(l)]?"Array"!==u||o[a(l)]||(o[a(l)]=!0,t(l,n,s,o)):(o[a(l)]=!0,t(l,n,null,o))}}},plugins:{},highlightAll:function(t,e){i.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,n){var r={callback:n,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,a=0;o=r.elements[a++];)i.highlightElement(o,!0===e,r.callback)},highlightElement:function(n,r,o){var a=i.util.getLanguage(n),s=i.languages[a];n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+a;var l=n.parentElement;l&&"pre"===l.nodeName.toLowerCase()&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var u={element:n,language:a,grammar:s,code:n.textContent};function c(t){u.highlightedCode=t,i.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,i.hooks.run("after-highlight",u),i.hooks.run("complete",u),o&&o.call(u.element)}if(i.hooks.run("before-sanity-check",u),(l=u.element.parentElement)&&"pre"===l.nodeName.toLowerCase()&&!l.hasAttribute("tabindex")&&l.setAttribute("tabindex","0"),!u.code)return i.hooks.run("complete",u),void(o&&o.call(u.element));if(i.hooks.run("before-highlight",u),u.grammar)if(r&&t.Worker){var h=new Worker(i.filename);h.onmessage=function(t){c(t.data)},h.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else c(i.highlight(u.code,u.grammar,u.language));else c(i.util.encode(u.code))},highlight:function(t,e,n){var r={code:t,grammar:e,language:n};return i.hooks.run("before-tokenize",r),r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(t,e){var n=e.rest;if(n){for(var r in n)e[r]=n[r];delete e.rest}var i=new l;return u(i,i.head,t),s(t,i,e,i.head,0),function(t){for(var e=[],n=t.head.next;n!==t.tail;)e.push(n.value),n=n.next;return e}(i)},hooks:{all:{},add:function(t,e){var n=i.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=i.hooks.all[t];if(n&&n.length)for(var r,o=0;r=n[o++];)r(e)}},Token:o};function o(t,e,n,r){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length}function a(t,e,n,r){t.lastIndex=e;var i=t.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(t,e,n,r,l,h){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var p=n[d];p=Array.isArray(p)?p:[p];for(var f=0;f<p.length;++f){if(h&&h.cause==d+","+f)return;var m=p[f],g=m.inside,v=!!m.lookbehind,y=!!m.greedy,b=m.alias;if(y&&!m.pattern.global){var x=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,x+"g")}for(var _=m.pattern||m,w=r.next,S=l;w!==e.tail&&!(h&&S>=h.reach);S+=w.value.length,w=w.next){var M=w.value;if(e.length>t.length)return;if(!(M instanceof o)){var E,C=1;if(y){if(!(E=a(_,S,t,v)))break;var T=E.index,A=E.index+E[0].length,D=S;for(D+=w.value.length;T>=D;)D+=(w=w.next).value.length;if(S=D-=w.value.length,w.value instanceof o)continue;for(var P=w;P!==e.tail&&(D<A||"string"==typeof P.value);P=P.next)C++,D+=P.value.length;C--,M=t.slice(S,D),E.index-=S}else if(!(E=a(_,0,M,v)))continue;T=E.index;var R=E[0],L=M.slice(0,T),O=M.slice(T+R.length),k=S+M.length;h&&k>h.reach&&(h.reach=k);var I=w.prev;if(L&&(I=u(e,I,L),S+=L.length),c(e,I,C),w=u(e,I,new o(d,g?i.tokenize(R,g):R,b,R)),O&&u(e,w,O),C>1){var N={cause:d+","+f,reach:k};s(t,e,n,w.prev,S,N),h&&N.reach>h.reach&&(h.reach=N.reach)}}}}}}function l(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function u(t,e,n){var r=e.next,i={value:n,prev:e,next:r};return e.next=i,r.prev=i,t.length++,i}function c(t,e,n){for(var r=e.next,i=0;i<n&&r!==t.tail;i++)r=r.next;e.next=r,r.prev=e,t.length-=i}if(t.Prism=i,o.stringify=function t(e,n){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach((function(e){r+=t(e,n)})),r}var o={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},a=e.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),i.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!t.document)return t.addEventListener?(i.disableWorkerMessageHandler||t.addEventListener("message",(function(e){var n=JSON.parse(e.data),r=n.language,o=n.code,a=n.immediateClose;t.postMessage(i.highlight(o,i.languages[r],r)),a&&t.close()}),!1),i):i;var h=i.util.currentScript();function d(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var p=document.readyState;"loading"===p||"interactive"===p&&h&&h.defer?document.addEventListener("DOMContentLoaded",d):window.requestAnimationFrame?window.requestAnimationFrame(d):window.setTimeout(d,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */t.exports&&(t.exports=e),void 0!==nit&&(nit.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+n]={pattern:/[\s\S]+/,inside:e.languages[n]};var o={};o[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:i},e.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(t,n){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[n,"language-"+n],inside:e.languages[n]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(void 0!==e&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var t={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},n="data-src-status",r="loading",i="loaded",o='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])',a=/\blang(?:uage)?-([\w-]+)\b/i;e.hooks.add("before-highlightall",(function(t){t.selector+=", "+o})),e.hooks.add("before-sanity-check",(function(a){var s=a.element;if(s.matches(o)){a.code="",s.setAttribute(n,r);var u=s.appendChild(document.createElement("CODE"));u.textContent="Loading…";var c=s.getAttribute("data-src"),h=a.language;if("none"===h){var d=(/\.(\w+)$/.exec(c)||[,"none"])[1];h=t[d]||d}l(u,h),l(s,h);var p=e.plugins.autoloader;p&&p.loadLanguages(h);var f=new XMLHttpRequest;f.open("GET",c,!0),f.onreadystatechange=function(){var t,r;4==f.readyState&&(f.status<400&&f.responseText?(s.setAttribute(n,i),u.textContent=f.responseText,e.highlightElement(u)):(s.setAttribute(n,"failed"),f.status>=400?u.textContent=(t=f.status,r=f.statusText,"✖ Error "+t+" while fetching file: "+r):u.textContent="✖ Error: File does not exist or is empty"))},f.send(null)}})),e.plugins.fileHighlight={highlight:function(t){for(var n,r=(t||document).querySelectorAll(o),i=0;n=r[i++];)e.highlightElement(n)}};var s=!1;e.fileHighlight=function(){s||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),s=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}function l(t,e){var n=t.className;n=n.replace(a," ")+" language-"+e,t.className=n.replace(/\s+/g," ").trim()}}()}));!function(t){var e=t.util.clone(t.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(t,e){return t=t.replace(/<S>/g,(function(){return n})).replace(/<BRACES>/g,(function(){return r})).replace(/<SPREAD>/g,(function(){return i})),RegExp(t,e)}i=o(i).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/i,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/i,t.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside.comment=e.comment,t.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx},alias:"language-javascript"}},t.languages.jsx.tag);var a=function(t){return t?"string"==typeof t?t:"string"==typeof t.content?t.content:t.content.map(a).join(""):""},s=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=!1;if("string"!=typeof i&&("tag"===i.type&&i.content[0]&&"tag"===i.content[0].type?"</"===i.content[0].content[0].content?n.length>0&&n[n.length-1].tagName===a(i.content[0].content[1])&&n.pop():"/>"===i.content[i.content.length-1].content||n.push({tagName:a(i.content[0].content[1]),openedBraces:0}):n.length>0&&"punctuation"===i.type&&"{"===i.content?n[n.length-1].openedBraces++:n.length>0&&n[n.length-1].openedBraces>0&&"punctuation"===i.type&&"}"===i.content?n[n.length-1].openedBraces--:o=!0),(o||"string"==typeof i)&&n.length>0&&0===n[n.length-1].openedBraces){var l=a(i);r<e.length-1&&("string"==typeof e[r+1]||"plain-text"===e[r+1].type)&&(l+=a(e[r+1]),e.splice(r+1,1)),r>0&&("string"==typeof e[r-1]||"plain-text"===e[r-1].type)&&(l=a(e[r-1])+l,e.splice(r-1,1),r--),e[r]=new t.Token("plain-text",l,null,l)}i.content&&"string"!=typeof i.content&&s(i.content)}};t.hooks.add("after-tokenize",(function(t){"jsx"!==t.language&&"tsx"!==t.language||s(t.tokens)}))}(Prism),function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|as|declare|implements|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter;var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var i={};i[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(t,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|iota|nil|true|false)\b/,number:/(?:\b0x[a-f\d]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[-+]?\d+)?)i?/i,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/}),delete Prism.languages.go["class-name"],function(t){var e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],r=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,i=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,o=/[{}\[\](),:;]/;t.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:e,variable:/\$+(?:\w+\b|(?=\{))/i,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:bool|boolean|int|integer|float|string|object|array)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:bool|int|float|string|object|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*[\w|]\|\s*)(?:null|false)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?[\w|]\|\s*)(?:null|false)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:null|false)\b/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:__halt_compiler|abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|namespace|match|new|or|parent|print|private|protected|public|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s+)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:r,operator:i,punctuation:o};var a={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:t.languages.php},s=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:a}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:a}}];t.languages.insertBefore("php","variable",{string:s,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:e,string:s,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:r,operator:i,punctuation:o}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),t.hooks.add("before-tokenize",(function(e){/<\?/.test(e.code)&&t.languages["markup-templating"].buildPlaceholders(e,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/gi)})),t.hooks.add("after-tokenize",(function(e){t.languages["markup-templating"].tokenizePlaceholders(e,"php")}))}(Prism),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c.boolean,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{"class-name":[r,{pattern:RegExp(n+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:r.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism),function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return e.source}));t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:module|import)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(Prism),function(t){function e(t,e){return t.replace(/<<(\d+)>>/g,(function(t,n){return"(?:"+e[+n]+")"}))}function n(t,n,r){return RegExp(e(t,n),r||"")}function r(t,e){for(var n=0;n<e;n++)t=t.replace(/<<self>>/g,(function(){return"(?:"+t+")"}));return t.replace(/<<self>>/g,"[^\\s\\S]")}var i="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",o="class enum interface record struct",a="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",s="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function l(t){return"\\b(?:"+t.trim().replace(/ /g,"|")+")\\b"}var u=l(o),c=RegExp(l(i+" "+o+" "+a+" "+s)),h=l(o+" "+a+" "+s),d=l(i+" "+o+" "+s),p=r(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),f=r(/\((?:[^()]|<<self>>)*\)/.source,2),m=/@?\b[A-Za-z_]\w*\b/.source,g=e(/<<0>>(?:\s*<<1>>)?/.source,[m,p]),v=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[h,g]),y=/\[\s*(?:,\s*)*\]/.source,b=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[v,y]),x=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[p,f,y]),_=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[x]),w=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[_,v,y]),S={keyword:c,punctuation:/[<>()?,.:[\]]/},M=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,E=/"(?:\\.|[^\\"\r\n])*"/.source,C=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;t.languages.csharp=t.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[C]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0},{pattern:RegExp(M),greedy:!0,alias:"character"}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[v]),lookbehind:!0,inside:S},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[m,w]),lookbehind:!0,inside:S},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[m]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[u,g]),lookbehind:!0,inside:S},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[v]),lookbehind:!0,inside:S},{pattern:n(/(\bwhere\s+)<<0>>/.source,[m]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[b]),lookbehind:!0,inside:S},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[w,d,m]),inside:S}],keyword:c,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:ul|lu|[dflmu])?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),t.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),t.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[m]),lookbehind:!0,alias:"punctuation"}}),t.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[m]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|typeof|sizeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[f]),lookbehind:!0,alias:"class-name",inside:S},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[w,v]),inside:S,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[w]),lookbehind:!0,inside:S,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[m,p]),inside:{function:n(/^<<0>>/.source,[m]),generic:{pattern:RegExp(p),alias:"class-name",inside:S}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[u,g,m,w,c.source,f,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[g,f]),lookbehind:!0,greedy:!0,inside:t.languages.csharp},keyword:c,"class-name":{pattern:RegExp(w),greedy:!0,inside:S},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var T=E+"|"+M,A=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[T]),D=r(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[A]),2),P=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,R=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[v,D]);t.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[P,R]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[P]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[D]),inside:t.languages.csharp},"class-name":{pattern:RegExp(v),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var L=/:[^}\r\n]+/.source,O=r(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[A]),2),k=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[O,L]),I=r(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[T]),2),N=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[I,L]);function B(e,r){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[e]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[r,L]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:t.languages.csharp}}},string:/[\s\S]+/}}t.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[k]),lookbehind:!0,greedy:!0,inside:B(k,O)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[N]),lookbehind:!0,greedy:!0,inside:B(N,I)}]})}(Prism),Prism.languages.dotnet=Prism.languages.cs=Prism.languages.csharp,Prism.languages["visual-basic"]={comment:{pattern:/(?:['‘’]|REM\b)(?:[^\r\n_]|_(?:\r\n?|\n)?)*/i,inside:{keyword:/^REM/i}},directive:{pattern:/#(?:Const|Else|ElseIf|End|ExternalChecksum|ExternalSource|If|Region)(?:[^\S\r\n]_[^\S\r\n]*(?:\r\n?|\n)|.)+/i,alias:"comment",greedy:!0},string:{pattern:/\$?["“”](?:["“”]{2}|[^"“”])*["“”]C?/i,greedy:!0},date:{pattern:/#[^\S\r\n]*(?:\d+([/-])\d+\1\d+(?:[^\S\r\n]+(?:\d+[^\S\r\n]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[^\S\r\n]*(?:AM|PM))?))?|\d+[^\S\r\n]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[^\S\r\n]*(?:AM|PM))?)[^\S\r\n]*#/i,alias:"builtin"},number:/(?:(?:\b\d+(?:\.\d+)?|\.\d+)(?:E[+-]?\d+)?|&[HO][\dA-F]+)(?:U?[ILS]|[FRD])?/i,boolean:/\b(?:True|False|Nothing)\b/i,keyword:/\b(?:AddHandler|AddressOf|Alias|And(?:Also)?|As|Boolean|ByRef|Byte|ByVal|Call|Case|Catch|C(?:Bool|Byte|Char|Date|Dbl|Dec|Int|Lng|Obj|SByte|Short|Sng|Str|Type|UInt|ULng|UShort)|Char|Class|Const|Continue|Currency|Date|Decimal|Declare|Default|Delegate|Dim|DirectCast|Do|Double|Each|Else(?:If)?|End(?:If)?|Enum|Erase|Error|Event|Exit|Finally|For|Friend|Function|Get(?:Type|XMLNamespace)?|Global|GoSub|GoTo|Handles|If|Implements|Imports|In|Inherits|Integer|Interface|Is|IsNot|Let|Lib|Like|Long|Loop|Me|Mod|Module|Must(?:Inherit|Override)|My(?:Base|Class)|Namespace|Narrowing|New|Next|Not(?:Inheritable|Overridable)?|Object|Of|On|Operator|Option(?:al)?|Or(?:Else)?|Out|Overloads|Overridable|Overrides|ParamArray|Partial|Private|Property|Protected|Public|RaiseEvent|ReadOnly|ReDim|RemoveHandler|Resume|Return|SByte|Select|Set|Shadows|Shared|short|Single|Static|Step|Stop|String|Structure|Sub|SyncLock|Then|Throw|To|Try|TryCast|Type|TypeOf|U(?:Integer|Long|Short)|Using|Variant|Wend|When|While|Widening|With(?:Events)?|WriteOnly|Until|Xor)\b/i,operator:[/[+\-*/\\^<=>&#@$%!]/,{pattern:/([^\S\r\n])_(?=[^\S\r\n]*[\r\n])/,lookbehind:!0}],punctuation:/[{}().,:?]/},Prism.languages.vb=Prism.languages["visual-basic"],Prism.languages.vba=Prism.languages["visual-basic"],Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:S|ING)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|IN|ILIKE|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(t){t.languages.ruby=t.languages.extend("clike",{comment:[/#.*/,{pattern:/^=begin\s[\s\S]*?^=end/m,greedy:!0}],"class-name":{pattern:/(\b(?:class)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|protected|private|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/});var e={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:t.languages.ruby}};delete t.languages.ruby.function,t.languages.insertBefore("ruby","keyword",{regex:[{pattern:RegExp(/%r/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S])*\)/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\]/.source,/<(?:[^<>\\]|\\[\s\S])*>/.source].join("|")+")"+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:e}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:e}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:{pattern:/(^|[^:]):[a-zA-Z_]\w*(?:[?!]|\b)/,lookbehind:!0},"method-definition":{pattern:/(\bdef\s+)[\w.]+/,lookbehind:!0,inside:{function:/\w+$/,rest:t.languages.ruby}}}),t.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),t.languages.ruby.string=[{pattern:RegExp(/%[qQiIwWxs]?/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S])*\)/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\]/.source,/<(?:[^<>\\]|\\[\s\S])*>/.source].join("|")+")"),greedy:!0,inside:{interpolation:e}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|[a-z_]\w*$/i,alias:"symbol",inside:{punctuation:/^<<[-~]?/}},interpolation:e}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|[a-z_]\w*$/i,alias:"symbol",inside:{punctuation:/^<<[-~]?'|'$/}}}}],t.languages.rb=t.languages.ruby}(Prism),Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ \t]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:true|false)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:true|false)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach((function(t){t.inside.interpolation.inside=Prism.languages.swift})),function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|x[0-9a-fA-F]{1,2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|aptitude|apt-cache|apt-get|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:if|then|else|elif|fi|for|while|in|case|esac|function|select|do|done|until)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|break|cd|continue|eval|exec|exit|export|getopts|hash|pwd|readonly|return|shift|test|times|trap|umask|unset|alias|bind|builtin|caller|command|declare|echo|enable|help|let|local|logout|mapfile|printf|read|readarray|source|type|typeset|ulimit|unalias|set|shopt)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:true|false)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,a=0;a<i.length;a++)o[i[a]]=t.languages.bash[i[a]];t.languages.shell=t.languages.bash}(Prism),function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(t){return t=t.replace(/<inner>/g,(function(){return e})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+t+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"font-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(e){["url","bold","italic","strike","code-snippet"].forEach((function(n){e!==n&&(t.languages.markdown[e].inside.content.inside[n]=t.languages.markdown[n])}))})),t.hooks.add("after-tokenize",(function(t){"markdown"!==t.language&&"md"!==t.language||function t(e){if(e&&"string"!=typeof e)for(var n=0,r=e.length;n<r;n++){var i=e[n];if("code"===i.type){var o=i.content[1],a=i.content[3];if(o&&a&&"code-language"===o.type&&"code-block"===a.type&&"string"==typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase());a.alias?"string"==typeof a.alias?a.alias=[a.alias,l]:a.alias.push(l):a.alias=[l]}}else t(i.content)}}(t.tokens)})),t.hooks.add("wrap",(function(e){if("code-block"===e.type){for(var n="",r=0,i=e.classes.length;r<i;r++){var o=e.classes[r],u=/language-(.+)/.exec(o);if(u){n=u[1];break}}var c=t.languages[n];if(c)e.content=t.highlight(function(t){var e=t.replace(a,"");return e.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(t,e){var n;if("#"===(e=e.toLowerCase())[0])return n="x"===e[1]?parseInt(e.slice(2),16):Number(e.slice(1)),l(n);var r=s[e];return r||t}))}(e.content),c,n);else if(n&&"none"!==n&&t.plugins.autoloader){var h="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());e.attributes.id=h,t.plugins.autoloader.loadLanguages(n,(function(){var e=document.getElementById(h);e&&(e.innerHTML=t.highlight(e.textContent,t.languages[n],n))}))}}}));var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;t.languages.md=t.languages.markdown}(Prism);var pst=["comment","prolog","doctype","cdata","punctuation","namespace","property","tag","boolean","number","constant","symbol","deleted","selector","attr-name","string","builtin","inserted","operator","entity","url","string","atrule","attr-value","keyword","function","class-name","regex","important","variable","bold","italic","entity","char"];function fst(t){return"string"==typeof t?t.length:"string"==typeof t.content?t.content.length:t.content.reduce((function(t,e){return t+fst(e)}),0)}var mst,gst=sit.String,vst=function(t){if("Symbol"===Kot(t))throw TypeError("Cannot convert a Symbol value to a string");return gst(t)},yst=function(){var t=tot(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},bst=sit.RegExp,xst=Nit((function(){var t=bst("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),_st=xst||Nit((function(){return!bst("a","y").sticky})),wst={BROKEN_CARET:xst||Nit((function(){var t=bst("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:_st,UNSUPPORTED_Y:xst},Sst=qit?Object.defineProperties:function(t,e){tot(t);for(var n,r=Iat(e),i=sst(e),o=i.length,a=0;o>a;)yot.f(t,n=i[a++],r[n]);return t},Mst=Dit("document","documentElement"),Est=Dot("IE_PROTO"),Cst=function(){},Tst=function(t){return"<script>"+t+"<\/script>"},Ast=function(t){t.write(Tst("")),t.close();var e=t.parentWindow.Object;return t=null,e},Dst=function(){try{mst=new ActiveXObject("htmlfile")}catch(t){}var t,e;Dst="undefined"!=typeof document?document.domain&&mst?Ast(mst):((e=Kit("iframe")).style.display="none",Mst.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Tst("document.F=Object")),t.close(),t.F):Ast(mst);for(var n=Gat.length;n--;)delete Dst.prototype[Gat[n]];return Dst()};Pot[Est]=!0;var Pst,Rst,Lst=Object.create||function(t,e){var n;return null!==t?(Cst.prototype=tot(t),n=new Cst,Cst.prototype=null,n[Est]=t):n=Dst(),void 0===e?n:Sst(n,e)},Ost=sit.RegExp,kst=Nit((function(){var t=Ost(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Ist=sit.RegExp,Nst=Nit((function(){var t=Ist("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Bst=Fot.get,Fst=hit("native-string-replace",String.prototype.replace),zst=RegExp.prototype.exec,Ust=zst,jst=git("".charAt),Vst=git("".indexOf),Hst=git("".replace),Wst=git("".slice),Gst=(Rst=/b*/g,not(zst,Pst=/a/,"a"),not(zst,Rst,"a"),0!==Pst.lastIndex||0!==Rst.lastIndex),qst=wst.BROKEN_CARET,Xst=void 0!==/()??/.exec("")[1];(Gst||Xst||qst||kst||Nst)&&(Ust=function(t){var e,n,r,i,o,a,s,l=this,u=Bst(l),c=vst(t),h=u.raw;if(h)return h.lastIndex=l.lastIndex,e=not(Ust,h,c),l.lastIndex=h.lastIndex,e;var d=u.groups,p=qst&&l.sticky,f=not(yst,l),m=l.source,g=0,v=c;if(p&&(f=Hst(f,"y",""),-1===Vst(f,"g")&&(f+="g"),v=Wst(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==jst(c,l.lastIndex-1))&&(m="(?: "+m+")",v=" "+v,g++),n=new RegExp("^(?:"+m+")",f)),Xst&&(n=new RegExp("^"+m+"$(?!\\s)",f)),Gst&&(r=l.lastIndex),i=not(zst,p?n:l,v),p?i?(i.input=Wst(i.input,g),i[0]=Wst(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:Gst&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),Xst&&i&&i.length>1&&not(Fst,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=Lst(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var Yst=Ust;ast({target:"RegExp",proto:!0,forced:/./.exec!==Yst},{exec:Yst});var Zst=Function.prototype,Kst=Zst.apply,Jst=Zst.bind,Qst=Zst.call,$st="object"==typeof Reflect&&Reflect.apply||(Jst?Qst.bind(Kst):function(){return Qst.apply(Kst,arguments)}),tlt=Hit("species"),elt=RegExp.prototype,nlt=Hit("match"),rlt=sit.TypeError,ilt=Hit("species"),olt=function(t,e){var n,r=tot(t).constructor;return void 0===r||null==(n=tot(r)[ilt])?e:function(t){if(wat(t))return t;throw rlt(sot(t)+" is not a constructor")}(n)},alt=git("".charAt),slt=git("".charCodeAt),llt=git("".slice),ult=function(t){return function(e,n){var r,i,o=vst(yit(e)),a=cat(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=slt(o,a))<55296||r>56319||a+1===s||(i=slt(o,a+1))<56320||i>57343?t?alt(o,a):r:t?llt(o,a,a+2):i-56320+(r-55296<<10)+65536}},clt={codeAt:ult(!1),charAt:ult(!0)}.charAt,hlt=function(t,e,n){return e+(n?clt(t,e).length:1)},dlt=sit.Array,plt=Math.max,flt=function(t,e,n){for(var r,i,o,a,s=pat(t),l=Uat(e,s),u=Uat(void 0===n?s:n,s),c=dlt(plt(u-l,0)),h=0;l<u;l++,h++)r=c,i=h,o=t[l],a=void 0,(a=mot(i))in r?yot.f(r,a,bot(0,o)):r[a]=o;return c.length=h,c},mlt=sit.TypeError,glt=function(t,e){var n=t.exec;if(Tit(n)){var r=not(n,t,e);return null!==r&&tot(r),r}if("RegExp"===qot(t))return not(Yst,t,e);throw mlt("RegExp#exec called on incompatible receiver")},vlt=wst.UNSUPPORTED_Y,ylt=Math.min,blt=[].push,xlt=git(/./.exec),_lt=git(blt),wlt=git("".slice);!function(t,e,n,r){var i=Hit(t),o=!Nit((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!Nit((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[tlt]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=git(/./[i]),l=e(i,""[t],(function(t,e,n,r,i){var a=git(t),l=e.exec;return l===Yst||l===elt.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));Hot(String.prototype,t,l[0]),Hot(elt,i,l[1])}r&&xot(elt[i],"sham",!0)}("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=vst(yit(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!Xit(r=t)||!(void 0!==(i=r[nlt])?i:"RegExp"==qot(r)))return not(e,o,t,a);for(var s,l,u,c=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=new RegExp(t.source,h+"g");(s=not(Yst,p,o))&&!((l=p.lastIndex)>d&&(_lt(c,wlt(o,d,s.index)),s.length>1&&s.index<o.length&&$st(blt,c,flt(s,1)),u=s[0].length,d=l,c.length>=a));)p.lastIndex===s.index&&p.lastIndex++;return d===o.length?!u&&xlt(p,"")||_lt(c,""):_lt(c,wlt(o,d)),c.length>a?flt(c,0,a):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:not(e,this,t,n)}:e,[function(e,n){var i=yit(this),o=null==e?void 0:cot(e,t);return o?not(o,e,i,n):not(r,vst(i),e,n)},function(t,i){var o=tot(this),a=vst(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var l=olt(o,RegExp),u=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(vlt?"g":"y"),h=new l(vlt?"^(?:"+o.source+")":o,c),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===a.length)return null===glt(h,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){h.lastIndex=vlt?0:f;var g,v=glt(h,vlt?wlt(a,f):a);if(null===v||(g=ylt(dat(h.lastIndex+(vlt?f:0)),a.length))===p)f=hlt(a,f,u);else{if(_lt(m,wlt(a,p,f)),m.length===d)return m;for(var y=1;y<=v.length-1;y++)if(_lt(m,v[y]),m.length===d)return m;f=p=g}}return _lt(m,wlt(a,p)),m}]}),!!Nit((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),vlt),ast({global:!0},{globalThis:sit}),mi&&(hi.fn.attr=mi);var Slt=Vot.PROPER,Mlt=RegExp.prototype,Elt=Mlt.toString,Clt=git(yst),Tlt=Nit((function(){return"/a/b"!=Elt.call({source:"a",flags:"b"})})),Alt=Slt&&"toString"!=Elt.name;(Tlt||Alt)&&Hot(RegExp.prototype,"toString",(function(){var t=tot(this),e=vst(t.source),n=t.flags;return"/"+e+"/"+vst(void 0===n&&rot(Mlt,t)&&!("flags"in Mlt)?Clt(t):n)}),{unsafe:!0});var Dlt=function(){function t(){this.title=IC("highLightModule.selectLang"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M64 64v896h896V64H64z m487.6 698.8c0 87.2-51.2 127-125.8 127-67.4 0-106.4-34.8-126.4-77l68.6-41.4c13.2 23.4 25.2 43.2 54.2 43.2 27.6 0 45.2-10.8 45.2-53V475.4h84.2v287.4z m199.2 127c-78.2 0-128.8-37.2-153.4-86l68.6-39.6c18 29.4 41.6 51.2 83 51.2 34.8 0 57.2-17.4 57.2-41.6 0-28.8-22.8-39-61.4-56l-21-9c-60.8-25.8-101-58.4-101-127 0-63.2 48.2-111.2 123.2-111.2 53.6 0 92 18.6 119.6 67.4L800 580c-14.4-25.8-30-36-54.2-36-24.6 0-40.2 15.6-40.2 36 0 25.2 15.6 35.4 51.8 51.2l21 9c71.6 30.6 111.8 62 111.8 132.4 0 75.6-59.6 117.2-139.4 117.2z"></path></svg>',this.tag="select",this.width=95,this.selectPanelWidth=115}return t.prototype.getOptions=function(t){var e=[],n=t.getMenuConfig("codeSelectLang").codeLangs,r=void 0===n?[]:n;e.push({text:"plain text",value:""}),r.forEach((function(t){var n=t.text,r=t.value;e.push({text:n,value:r})}));var i=this.getValue(t);return e.forEach((function(t){t.value===i?t.selected=!0:delete t.selected})),e},t.prototype.isActive=function(t){return!1},t.prototype.getValue=function(t){var e=this.getSelectCodeElem(t);if(null==e)return"";if(!re.isElement(e))return"";var n=e.language.toString(),r=t.getMenuConfig("codeSelectLang").codeLangs;return(void 0===r?[]:r).some((function(t){return t.value===n}))?n:""},t.prototype.isDisabled=function(t){return null==t.selection||!this.getSelectCodeElem(t)},t.prototype.exec=function(t,e){if(null!=this.getSelectCodeElem(t)){var n={language:e.toString()};$e.setNodes(t,n,{match:function(t){return Bx.checkNodeType(t,"code")}})}},t.prototype.getSelectCodeElem=function(t){var e=Bx.getSelectedNodeByType(t,"code");if(null==e)return null;var n=Bx.getParentNode(t,e);return re.isElement(n)?"pre"!==n.type?null:e:null},t}(),Plt={renderStyle:function(t,e){var n=t,r=e,i="";return pst.forEach((function(t){n[t]&&(i=t)})),i&&function(t,e){null==t.data&&(t.data={});var n=t.data;null==n.props&&(n.props={}),Object.assign(n.props,{className:e})}(r,i="token "+i),r},parseStyleHtml:function(t,e,n){var r=hi(t);if(!re.isElement(e))return e;if("code"!==Bx.getNodeType(e))return e;var i=e,o=r.attr("class")||"";return 0===o.indexOf("language-")?i.language=o.split("-")[1]||"":i.language=o.toLowerCase(),i},menus:[{key:"codeSelectLang",factory:function(){return new Dlt},config:{codeLangs:[{text:"CSS",value:"css"},{text:"HTML",value:"html"},{text:"XML",value:"xml"},{text:"Javascript",value:"javascript"},{text:"Typescript",value:"typescript"},{text:"JSX",value:"jsx"},{text:"Go",value:"go"},{text:"PHP",value:"php"},{text:"C",value:"c"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C++",value:"cpp"},{text:"C#",value:"csharp"},{text:"Visual Basic",value:"visual-basic"},{text:"SQL",value:"sql"},{text:"Ruby",value:"ruby"},{text:"Swift",value:"swift"},{text:"Bash",value:"bash"},{text:"Markdown",value:"markdown"}]}}],elemsToHtml:[{type:"code",elemToHtml:function(t,e){var n=t.language,r=void 0===n?"":n;return"<code "+(r?'class="language-'+r+'"':"")+">"+e+"</code>"}}]},Rlt=/"/g,Llt=git("".replace);ast({target:"String",proto:!0,forced:function(t){return Nit((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("anchor")},{anchor:function(t){return e="a",n="name",r=t,i=vst(yit(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+Llt(vst(r),Rlt,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var Olt=function(t){var e,n,r,i=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,2),o=i[0],a=i[1],s=[],l=function(t){if(!ke.isText(t))return null;var e=Bx.getParentNode(null,t);if(e&&"code"===Bx.getNodeType(e)){var n=Bx.getParentNode(null,e);if(n&&"pre"===Bx.getNodeType(n))return e}return null}(o);if(null==l)return s;var u=l.language,c=void 0===u?"":u;if(!c)return s;var h=function(t,e){if(!e)return[];var n=dst.languages[e];return n?dst.tokenize(t.text,n):[]}(o,c),d=0;try{for(var p=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),f=p.next();!f.done;f=p.next()){var m=f.value,g=d+fst(m);"string"!=typeof m&&s.push(((r={})[m.type]=!0,r.anchor={path:a,offset:d},r.focus={path:a,offset:g},r)),d=g}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}return s},klt=function(){return klt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},klt.apply(this,arguments)},Ilt=function(){function t(){throw new Error("不能实例化\nCan not construct a instance")}return t.setEditorConfig=function(t){void 0===t&&(t={}),this.editorConfig=klt(klt({},this.editorConfig),t)},t.setSimpleEditorConfig=function(t){void 0===t&&(t={}),this.simpleEditorConfig=klt(klt({},this.simpleEditorConfig),t)},t.setToolbarConfig=function(t){void 0===t&&(t={}),this.toolbarConfig=klt(klt({},this.toolbarConfig),t)},t.setSimpleToolbarConfig=function(t){void 0===t&&(t={}),this.simpleToolbarConfig=klt(klt({},this.simpleToolbarConfig),t)},t.registerPlugin=function(t){this.plugins.push(t)},t.registerMenu=function(t,e){jx(t,e)},t.registerRenderElem=function(t){RM(t)},t.registerRenderStyle=function(t){DM(t)},t.registerElemToHtml=function(t){y_(t)},t.registerStyleToHtml=function(t){g_(t)},t.registerPreParseHtml=function(t){Jw(t)},t.registerParseElemHtml=function(t){eS(t)},t.registerParseStyleHtml=function(t){$w(t)},t.registerModule=function(t){Nlt(t)},t.editorConfig={},t.simpleEditorConfig={},t.toolbarConfig={},t.simpleToolbarConfig={},t.plugins=[],t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Nlt(t){var e=t.menus,n=t.renderElems,r=t.renderStyle,i=t.elemsToHtml,o=t.styleToHtml,a=t.preParseHtml,s=t.parseElemsHtml,l=t.parseStyleHtml,u=t.editorPlugin;e&&e.forEach((function(t){return Ilt.registerMenu(t)})),n&&n.forEach((function(t){return Ilt.registerRenderElem(t)})),r&&Ilt.registerRenderStyle(r),i&&i.forEach((function(t){return Ilt.registerElemToHtml(t)})),o&&Ilt.registerStyleToHtml(o),a&&a.forEach((function(t){return Ilt.registerPreParseHtml(t)})),s&&s.forEach((function(t){return Ilt.registerParseElemHtml(t)})),l&&Ilt.registerParseStyleHtml(l),u&&Ilt.registerPlugin(u)}zU.forEach((function(t){return Nlt(t)})),Nlt(LG),Nlt(wJ),Nlt(Q5),Nlt(eit),Nlt(Plt);var Blt='<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m384 192h640v128H384z m0 192h640v128H384z m0 192h640v128H384zM0 832h1024v128H0z m0-128V320l256 192z"></path></svg>',Flt='<svg viewBox="0 0 1024 1024"><path d="M768 793.6v102.4H51.2v-102.4h716.8z m204.8-230.4v102.4H51.2v-102.4h921.6z m-204.8-230.4v102.4H51.2v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',zlt='<svg viewBox="0 0 1024 1024"><path d="M959.877 128l0.123 0.123v767.775l-0.123 0.122H64.102l-0.122-0.122V128.123l0.122-0.123h895.775zM960 64H64C28.795 64 0 92.795 0 128v768c0 35.205 28.795 64 64 64h896c35.205 0 64-28.795 64-64V128c0-35.205-28.795-64-64-64zM832 288.01c0 53.023-42.988 96.01-96.01 96.01s-96.01-42.987-96.01-96.01S682.967 192 735.99 192 832 234.988 832 288.01zM896 832H128V704l224.01-384 256 320h64l224.01-192z"></path></svg>',Ult='<svg viewBox="0 0 1024 1024"><path d="M204.8 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M505.6 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M806.4 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path></svg>',jlt='<svg viewBox="0 0 1024 1024"><path d="M981.184 160.096C837.568 139.456 678.848 128 512 128S186.432 139.456 42.816 160.096C15.296 267.808 0 386.848 0 512s15.264 244.16 42.816 351.904C186.464 884.544 345.152 896 512 896s325.568-11.456 469.184-32.096C1008.704 756.192 1024 637.152 1024 512s-15.264-244.16-42.816-351.904zM384 704V320l320 192-320 192z"></path></svg>';function Vlt(){return["headerSelect","blockquote","|","bold","underline","italic",{key:"group-more-style",title:IC("editor.more"),iconSvg:Ult,menuKeys:["through","code","sup","sub","clearStyle"]},"color","bgColor","|","fontSize","fontFamily","lineHeight","|","bulletedList","numberedList","todo",{key:"group-justify",title:IC("editor.justify"),iconSvg:Flt,menuKeys:["justifyLeft","justifyRight","justifyCenter","justifyJustify"]},{key:"group-indent",title:IC("editor.indent"),iconSvg:Blt,menuKeys:["indent","delIndent"]},"|","emotion","insertLink",{key:"group-image",title:IC("editor.image"),iconSvg:zlt,menuKeys:["insertImage","uploadImage"]},{key:"group-video",title:IC("editor.video"),iconSvg:jlt,menuKeys:["insertVideo","uploadVideo"]},"insertTable","codeBlock","divider","|","undo","redo","|","fullScreen"]}function Hlt(){return["blockquote","header1","header2","header3","|","bold","underline","italic","through","color","bgColor","clearStyle","|","bulletedList","numberedList","todo","justifyLeft","justifyRight","justifyCenter","|","insertLink",{key:"group-image",title:IC("editor.image"),iconSvg:zlt,menuKeys:["insertImage","uploadImage"]},"insertVideo","insertTable","codeBlock","|","undo","redo","|","fullScreen"]}var Wlt={link:{menuKeys:["editLink","unLink","viewLink"]},image:{menuKeys:["imageWidth30","imageWidth50","imageWidth100","editImage","viewImageLink","deleteImage"]},pre:{menuKeys:["enter","codeBlock","codeSelectLang"]},table:{menuKeys:["enter","tableHeader","tableFullWidth","insertTableRow","deleteTableRow","insertTableCol","deleteTableCol","deleteTable"]},divider:{menuKeys:["enter"]},video:{menuKeys:["enter","editVideoSize"]}};function Glt(){return klt(klt({},Wlt),{text:{menuKeys:["headerSelect","insertLink","bulletedList","|","bold","through","color","bgColor","clearStyle"]}})}function qlt(){return Wlt}function Xlt(){return{hoverbarKeys:Glt()}}function Ylt(){return{hoverbarKeys:qlt()}}function Zlt(){return{toolbarKeys:Vlt()}}function Klt(){return{toolbarKeys:Hlt()}}var Jlt=Xlt();Ilt.setEditorConfig(klt(klt({},Jlt),{decorate:Olt}));var Qlt=Ylt();Ilt.setSimpleEditorConfig(klt(klt({},Qlt),{decorate:Olt}));var $lt=Zlt();Ilt.setToolbarConfig($lt);var tut=Klt();function eut(t){void 0===t&&(t={});var e=t.selector,n=void 0===e?"":e,r=t.content,i=void 0===r?[]:r,o=t.html,a=t.config,s=void 0===a?{}:a,l=t.mode,u=void 0===l?"default":l,c="simple"===u?Ilt.simpleEditorConfig:Ilt.editorConfig,h=klt(klt({},c.hoverbarKeys||{}),s.hoverbarKeys||{}),d=DE({selector:n,config:klt(klt(klt({},c),s),{hoverbarKeys:h}),content:i,html:o,plugins:Ilt.plugins});return d}function nut(t){var e=t.selector,n=t.editor,r=t.config,i=void 0===r?{}:r,o=t.mode,a=void 0===o?"default":o;if(!e)throw new Error("Cannot find 'selector' when create toolbar");var s="simple"===a?Ilt.simpleToolbarConfig:Ilt.toolbarConfig,l=IE(n,{selector:e,config:klt(klt({},s),i)});return l}Ilt.setSimpleToolbarConfig(tut);var rut=Object.defineProperty,iut=Object.defineProperties,out=Object.getOwnPropertyDescriptors,aut=Object.getOwnPropertySymbols,sut=Object.prototype.hasOwnProperty,lut=Object.prototype.propertyIsEnumerable,uut=(t,e,n)=>e in t?rut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cut=(t,e)=>{for(var n in e||(e={}))sut.call(e,n)&&uut(t,n,e[n]);if(aut)for(var n of aut(e))lut.call(e,n)&&uut(t,n,e[n]);return t},hut=(t,e)=>iut(t,out(e));function dut(t){let e=`请使用 '@${t}' 事件，不要放在 props 中`;return e+=`\nPlease use '@${t}' event instead of props`,e}var put=(t,e)=>{for(const[n,r]of e)t[n]=r;return t};const fut=(0,r.aZ)({props:{mode:{type:String,default:"default"},defaultContent:{type:Array,default:[]},defaultHtml:{type:String,default:""},defaultConfig:{type:Object,default:{}},modelValue:{type:String,default:""}},setup(t,e){const n=(0,s.iH)(null),i=(0,s.XI)(null),o=(0,s.iH)(""),a=()=>{if(!n.value)return;const r=(0,s.IU)(t.defaultContent);eut({selector:n.value,mode:t.mode,content:r||[],html:t.defaultHtml||t.modelValue||"",config:hut(cut({},t.defaultConfig),{onCreated(n){if(i.value=n,e.emit("onCreated",n),t.defaultConfig.onCreated){const t=dut("onCreated");throw new Error(t)}},onChange(n){const r=n.getHtml();if(o.value=r,e.emit("update:modelValue",r),e.emit("onChange",n),t.defaultConfig.onChange){const t=dut("onChange");throw new Error(t)}},onDestroyed(n){if(e.emit("onDestroyed",n),t.defaultConfig.onDestroyed){const t=dut("onDestroyed");throw new Error(t)}},onMaxLength(n){if(e.emit("onMaxLength",n),t.defaultConfig.onMaxLength){const t=dut("onMaxLength");throw new Error(t)}},onFocus(n){if(e.emit("onFocus",n),t.defaultConfig.onFocus){const t=dut("onFocus");throw new Error(t)}},onBlur(n){if(e.emit("onBlur",n),t.defaultConfig.onBlur){const t=dut("onBlur");throw new Error(t)}},customAlert(n,r){if(e.emit("customAlert",n,r),t.defaultConfig.customAlert){const t=dut("customAlert");throw new Error(t)}},customPaste:(n,r)=>{if(t.defaultConfig.customPaste){const t=dut("customPaste");throw new Error(t)}let i;return e.emit("customPaste",n,r,(t=>{i=t})),i}})})};function l(t){const e=i.value;if(null==e)return;const n=e.isDisabled(),r=e.isFocused(),o=JSON.stringify(e.selection);if(e.enable(),e.focus(),e.select([]),e.deleteFragment(),$e.setNodes(e,{type:"paragraph"},{mode:"highest"}),e.dangerouslyInsertHtml(t),r||(e.deselect(),e.blur()),n&&(e.deselect(),e.disable()),e.isFocused())try{e.select(JSON.parse(o))}catch(a){e.select(ue.start(e,[]))}}return(0,r.bv)((()=>{a()})),(0,r.YP)((()=>t.modelValue),(t=>{t!==o.value&&l(t)})),{box:n}}}),mut={ref:"box",style:{height:"100%"}};function gut(t,e,n,i,o,a){return(0,r.wg)(),(0,r.iD)("div",mut,null,512)}var vut=put(fut,[["render",gut]]);const yut=(0,r.aZ)({props:{editor:{type:Object},mode:{type:String,default:"default"},defaultConfig:{type:Object,default:{}}},setup(t){const e=(0,s.iH)(null),n=n=>{if(e.value){if(null==n)throw new Error("Not found instance of Editor when create <Toolbar/> component");Bx.getToolbar(n)||nut({editor:n,selector:e.value||"<div></div>",mode:t.mode,config:t.defaultConfig})}};return(0,r.m0)((()=>{const{editor:e}=t;null!=e&&n(e)})),{selector:e}}}),but={ref:"selector"};function xut(t,e,n,i,o,a){return(0,r.wg)(),(0,r.iD)("div",but,null,512)}var _ut=put(yut,[["render",xut]]),wut={name:"EditorA",components:{Editor:vut,Toolbar:_ut},setup(){const t=(0,s.XI)(),e=(0,s.iH)(""),n={toolbarKeys:["header2","|","bold","|","italic","|","underline","|","through","|","insertLink","|","editLink","|","insertImage"]};function i(t,e){if(e)return 0===e.indexOf("http")||"链接必须以 http/https 开头"}function o(t){return 0!==t.indexOf("http")?`http://${t}`:t}const a={placeholder:"请输入内容...",MENU_CONF:{insertLink:{},editLink:{}}};a.MENU_CONF["insertLink"]={checkLink:i,parseLinkUrl:o},a.MENU_CONF["editLink"]={checkLink:i,parseLinkUrl:o},(0,r.ic)((()=>{console.log(e.value)})),(0,r.Jd)((()=>{const e=t.value;null!=e&&e.destroy()}));const l=e=>{t.value=e,console.log("created",e.getAllMenuKeys())};return{editorRef:t,valueHtml:e,mode:"default",toolbarConfig:n,editorConfig:a,handleCreated:l}}},Sut=n(89);const Mut=(0,Sut.Z)(wut,[["render",o]]);var Eut=Mut},9389:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=n(3396),i=n(4870),o=n(9260);const a={class:"lingo3d"};var s={__name:"Lingo3d",setup(t){const e=t=>{};(0,i.qj)({x:0,y:0,z:0});return(t,n)=>((0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)((0,i.SU)(o.bP),{texture:"sky.webp"}),(0,r.Wm)((0,i.SU)(o.bA),null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(o.c3),{width:9999,depth:9999,y:-100,onClick:e,texture:"ground.webp",textureRepeat:20,color:"green"}),(0,r.Wm)((0,i.SU)(o.bL),{ref:"modelRef",src:"girl.fbx"},null,512),(0,r.Wm)((0,i.SU)(o.bU),{active:"",z:300})])),_:1})]))}},l=n(89);const u=(0,l.Z)(s,[["__scopeId","data-v-31c11fcf"]]);var c=u},4010:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return x}});var r=n(3396),i=n(4870),o=n(7139),a=n(678),s=n(6265),l=n.n(s);function u(t,e){return new Promise(((n,r)=>{l().post(t,e).then((t=>{n(t.data)})).catch((t=>{r(t)}))}))}function c(t,e){return new Promise(((n,r)=>{l().get(t,e).then((t=>{n(t.data)})).catch((t=>{r(t)}))}))}l().defaults.withCredentials=!0,l().defaults.headers.post["Content-Type"]="application/json";var h={mockData(t,e){return u(t,e)},getData(t,e){return c(t,e)}};const d={class:"mock"},p={key:0},f=["src"],m=["href"],g=["innerHTML"];var v=(0,r.aZ)({__name:"Mock",setup(t){const e=(0,a.tv)();console.log(e);const n=(0,i.qj)({list:[],news:[],columns:[{title:"id",dataIndex:"id",key:"id"},{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age"},{title:"价格",dataIndex:"price",key:"price"},{title:"女朋友",dataIndex:"love",key:"love"}]});async function s(){h.mockData("/api/test").then((t=>{200===t.status&&(n.list=t.list||[]),console.log(t)})),h.getData("/news/?channel=头条&start=0&num=10&appkey=4a3e2f884b57a0ba").then((t=>{"ok"===t.msg&&(n.news=t.result?.list||[]),console.log(n.news)}));const t=await h.getData("https://demo-demo-qeqbjjclcu.cn-hangzhou.fcapp.run");console.log("ali:",t)}s();const{list:l,columns:u,news:c}=(0,i.BK)(n);return(t,e)=>{const n=(0,r.up)("a-table"),a=(0,r.up)("a-list-item-meta"),s=(0,r.up)("a-list-item"),h=(0,r.up)("a-list");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(n,{dataSource:(0,i.SU)(l),columns:(0,i.SU)(u),bordered:"",rowKey:"id"},{bodyCell:(0,r.w5)((({column:t,record:e})=>["name"===t.key?((0,r.wg)(),(0,r.iD)("a",p,(0,o.zw)(e.name),1)):(0,r.kq)("",!0),"love"===t.key?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(e.love?"是":"否"),1)],64)):(0,r.kq)("",!0)])),_:1},8,["dataSource","columns"]),(0,r.Wm)(h,{"item-layout":"vertical",size:"large","data-source":(0,i.SU)(c)},{renderItem:(0,r.w5)((({item:t})=>[(0,r.Wm)(s,{key:"item.title"},{extra:(0,r.w5)((()=>[(0,r._)("img",{width:"272",alt:"logo",src:t.pic},null,8,f)])),default:(0,r.w5)((()=>[(0,r.Wm)(a,null,{title:(0,r.w5)((()=>[(0,r._)("a",{href:t.url},(0,o.zw)(t.title),9,m)])),_:2},1024),(0,r._)("span",{innerHTML:t.content},null,8,g)])),_:2},1024)])),_:1},8,["data-source"])])}}}),y=n(89);const b=(0,y.Z)(v,[["__scopeId","data-v-07e5c822"]]);var x=b},1015:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Mh}});var r=n(3396);n(8675),n(3462),n(1703),n(2262),n(4506);
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const i="141",o={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,l=1,u=2,c=1,h=2,d=3,p=0,f=1,m=2,g=1,v=0,y=1,b=2,x=3,_=4,w=5,S=100,M=101,E=102,C=103,T=104,A=200,D=201,P=202,R=203,L=204,O=205,k=206,I=207,N=208,B=209,F=210,z=0,U=1,j=2,V=3,H=4,W=5,G=6,q=7,X=0,Y=1,Z=2,K=0,J=1,Q=2,$=3,tt=4,et=5,nt=300,rt=301,it=302,ot=303,at=304,st=306,lt=1e3,ut=1001,ct=1002,ht=1003,dt=1004,pt=1005,ft=1006,mt=1007,gt=1008,vt=1009,yt=1010,bt=1011,xt=1012,_t=1013,wt=1014,St=1015,Mt=1016,Et=1017,Ct=1018,Tt=1020,At=1021,Dt=1022,Pt=1023,Rt=1024,Lt=1025,Ot=1026,kt=1027,It=1028,Nt=1029,Bt=1030,Ft=1031,zt=1033,Ut=33776,jt=33777,Vt=33778,Ht=33779,Wt=35840,Gt=35841,qt=35842,Xt=35843,Yt=36196,Zt=37492,Kt=37496,Jt=37808,Qt=37809,$t=37810,te=37811,ee=37812,ne=37813,re=37814,ie=37815,oe=37816,ae=37817,se=37818,le=37819,ue=37820,ce=37821,he=36492,de=2300,pe=2301,fe=2302,me=2400,ge=2401,ve=2402,ye=2501,be=3e3,xe=3001,_e=3200,we=3201,Se=0,Me=1,Ee="srgb",Ce="srgb-linear",Te=7680,Ae=519,De=35044,Pe="300 es",Re=1035;class Le{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners,r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,r=e.length;n<r;n++)e[n].call(this,t);t.target=null}}}const Oe=[];for(let Eh=0;Eh<256;Eh++)Oe[Eh]=(Eh<16?"0":"")+Eh.toString(16);const ke=Math.PI/180,Ie=180/Math.PI;function Ne(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Oe[255&t]+Oe[t>>8&255]+Oe[t>>16&255]+Oe[t>>24&255]+"-"+Oe[255&e]+Oe[e>>8&255]+"-"+Oe[e>>16&15|64]+Oe[e>>24&255]+"-"+Oe[63&n|128]+Oe[n>>8&255]+"-"+Oe[n>>16&255]+Oe[n>>24&255]+Oe[255&r]+Oe[r>>8&255]+Oe[r>>16&255]+Oe[r>>24&255];return i.toLowerCase()}function Be(t,e,n){return Math.max(e,Math.min(n,t))}function Fe(t,e){return(t%e+e)%e}function ze(t,e,n){return(1-n)*t+n*e}function Ue(t){return 0===(t&t-1)&&0!==t}function je(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}class Ve{constructor(t=0,e=0){this.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class He{constructor(){this.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=o*f+a*v+s*x,i[3]=o*m+a*y+s*_,i[6]=o*g+a*b+s*w,i[1]=l*f+u*v+c*x,i[4]=l*m+u*y+c*_,i[7]=l*g+u*b+c*w,i[2]=h*f+d*v+p*x,i[5]=h*m+d*y+p*_,i[8]=h*g+d*b+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*o*u-e*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=u*o-a*l,h=a*s-u*i,d=l*i-o*s,p=e*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=c*f,t[1]=(r*l-u*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(u*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-l*e)*f,t[8]=(o*e-n*i)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-r*l,r*s,-r*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*l,r[6]=e*a+n*u,r[1]=-n*i+e*s,r[4]=-n*o+e*l,r[7]=-n*a+e*u,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function We(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Ge(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function qe(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Xe(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Ye={[Ee]:{[Ce]:qe},[Ce]:{[Ee]:Xe}},Ze={legacyMode:!0,get workingColorSpace(){return Ce},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(Ye[e]&&void 0!==Ye[e][n]){const r=Ye[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Je={r:0,g:0,b:0},Qe={h:0,s:0,l:0},$e={h:0,s:0,l:0};function tn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function en(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class nn{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ee){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Ze.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Ce){return this.r=t,this.g=e,this.b=n,Ze.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Ce){if(t=Fe(t,1),e=Be(e,0,1),n=Be(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=tn(i,r,t+1/3),this.g=tn(i,r,t),this.b=tn(i,r,t-1/3)}return Ze.toWorkingColorSpace(this,r),this}setStyle(t,e=Ee){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Ze.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Ze.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100;return n(t[4]),this.setHSL(r,i,o,e)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Ze.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Ze.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Ee){const n=Ke[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=qe(t.r),this.g=qe(t.g),this.b=qe(t.b),this}copyLinearToSRGB(t){return this.r=Xe(t.r),this.g=Xe(t.g),this.b=Xe(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ee){return Ze.fromWorkingColorSpace(en(this,Je),t),Be(255*Je.r,0,255)<<16^Be(255*Je.g,0,255)<<8^Be(255*Je.b,0,255)<<0}getHexString(t=Ee){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Ce){Ze.fromWorkingColorSpace(en(this,Je),e);const n=Je.r,r=Je.g,i=Je.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=u<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4;break}s/=6}return t.h=s,t.s=l,t.l=u,t}getRGB(t,e=Ce){return Ze.fromWorkingColorSpace(en(this,Je),e),t.r=Je.r,t.g=Je.g,t.b=Je.b,t}getStyle(t=Ee){return Ze.fromWorkingColorSpace(en(this,Je),t),t!==Ee?`color(${t} ${Je.r} ${Je.g} ${Je.b})`:`rgb(${255*Je.r|0},${255*Je.g|0},${255*Je.b|0})`}offsetHSL(t,e,n){return this.getHSL(Qe),Qe.h+=t,Qe.s+=e,Qe.l+=n,this.setHSL(Qe.h,Qe.s,Qe.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Qe),t.getHSL($e);const n=ze(Qe.h,$e.h,e),r=ze(Qe.s,$e.s,e),i=ze(Qe.l,$e.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let rn;nn.NAMES=Ke;class on{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===rn&&(rn=Ge("canvas")),rn.width=t.width,rn.height=t.height;const n=rn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=rn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=Ge("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*qe(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*qe(e[t]/255)):e[t]=qe(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class an{constructor(t=null){this.isSource=!0,this.uuid=Ne(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(sn(r[e].image)):t.push(sn(r[e]))}else t=sn(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function sn(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?on.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ln=0;class un extends Le{constructor(t=un.DEFAULT_IMAGE,e=un.DEFAULT_MAPPING,n=ut,r=ut,i=ft,o=gt,a=Pt,s=vt,l=1,u=be){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ln++}),this.uuid=Ne(),this.name="",this.source=new an(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new He,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==nt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case lt:t.x=t.x-Math.floor(t.x);break;case ut:t.x=t.x<0?0:1;break;case ct:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case lt:t.y=t.y-Math.floor(t.y);break;case ut:t.y=t.y<0?0:1;break;case ct:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}un.DEFAULT_IMAGE=null,un.DEFAULT_MAPPING=nt;class cn{constructor(t=0,e=0,n=0,r=1){this.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(u-h)<o&&Math.abs(c-f)<o&&Math.abs(p-m)<o){if(Math.abs(u+h)<a&&Math.abs(c+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(u+h)/4,b=(c+f)/4,x=(p+m)/4;return t>s&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=x/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(c-f)/v,this.z=(h-u)/v,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hn extends Le{constructor(t,e,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new cn(0,0,t,e),this.scissorTest=!1,this.viewport=new cn(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new un(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ft,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new an(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dn extends un{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pn extends un{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fn{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=p,void(t[e+3]=f);if(c!==f||s!==h||l!==d||u!==p){let t=1-a;const e=s*h+l*d+u*p+c*f,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,l=l*t+d*i,u=u*t+p*i,c=c*t+f*i,t===1-a){const t=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=t,l*=t,u*=t,c*=t}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return t[e]=a*p+u*c+s*d-l*h,t[e+1]=s*p+u*h+l*c-a*d,t[e+2]=l*p+u*d+a*h-s*c,t[e+3]=u*p-a*c-s*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],l=e[2],u=e[6],c=e[10],h=n+a+c;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(u-s)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(u-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+u)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(s+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Be(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-e)*u)/l,h=Math.sin(e*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class mn{constructor(t=0,e=0,n=0){this.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(vn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(vn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*r-a*n,u=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return gn.copy(this).projectOnVector(t),this.sub(gn)}reflect(t){return this.sub(gn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Be(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gn=new mn,vn=new fn;class yn{constructor(t=new mn(1/0,1/0,1/0),e=new mn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],u=t[s+1],c=t[s+2];l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),u=t.getY(s),c=t.getZ(s);l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=xn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&void 0!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)xn.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(xn)}else null===n.boundingBox&&n.computeBoundingBox(),_n.copy(n.boundingBox),_n.applyMatrix4(t.matrixWorld),this.union(_n);const r=t.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,xn),xn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(An),Dn.subVectors(this.max,An),wn.subVectors(t.a,An),Sn.subVectors(t.b,An),Mn.subVectors(t.c,An),En.subVectors(Sn,wn),Cn.subVectors(Mn,Sn),Tn.subVectors(wn,Mn);let e=[0,-En.z,En.y,0,-Cn.z,Cn.y,0,-Tn.z,Tn.y,En.z,0,-En.x,Cn.z,0,-Cn.x,Tn.z,0,-Tn.x,-En.y,En.x,0,-Cn.y,Cn.x,0,-Tn.y,Tn.x,0];return!!Ln(e,wn,Sn,Mn,Dn)&&(e=[1,0,0,0,1,0,0,0,1],!!Ln(e,wn,Sn,Mn,Dn)&&(Pn.crossVectors(En,Cn),e=[Pn.x,Pn.y,Pn.z],Ln(e,wn,Sn,Mn,Dn)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=xn.copy(t).clamp(this.min,this.max);return e.sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(xn).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(bn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const bn=[new mn,new mn,new mn,new mn,new mn,new mn,new mn,new mn],xn=new mn,_n=new yn,wn=new mn,Sn=new mn,Mn=new mn,En=new mn,Cn=new mn,Tn=new mn,An=new mn,Dn=new mn,Pn=new mn,Rn=new mn;function Ln(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){Rn.fromArray(t,o);const a=i.x*Math.abs(Rn.x)+i.y*Math.abs(Rn.y)+i.z*Math.abs(Rn.z),s=e.dot(Rn),l=n.dot(Rn),u=r.dot(Rn);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const On=new yn,kn=new mn,In=new mn,Nn=new mn;class Bn{constructor(t=new mn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):On.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Nn.subVectors(t,this.center);const e=Nn.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(Nn.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?In.set(0,0,1).multiplyScalar(t.radius):In.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(kn.copy(t.center).add(In)),this.expandByPoint(kn.copy(t.center).sub(In)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Fn=new mn,zn=new mn,Un=new mn,jn=new mn,Vn=new mn,Hn=new mn,Wn=new mn;class Gn{constructor(t=new mn,e=new mn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Fn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Fn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Fn.copy(this.direction).multiplyScalar(e).add(this.origin),Fn.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){zn.copy(t).add(e).multiplyScalar(.5),Un.copy(e).sub(t).normalize(),jn.copy(this.origin).sub(zn);const i=.5*t.distanceTo(e),o=-this.direction.dot(Un),a=jn.dot(this.direction),s=-jn.dot(Un),l=jn.lengthSq(),u=Math.abs(1-o*o);let c,h,d,p;if(u>0)if(c=o*s-a,h=o*a-s,p=i*u,c>=0)if(h>=-p)if(h<=p){const t=1/u;c*=t,h*=t,d=c*(c+o*h+2*a)+h*(o*c+h+2*s)+l}else h=i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;else h=-i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;else h<=-p?(c=Math.max(0,-(-o*i+a)),h=c>0?-i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l):h<=p?(c=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(c=Math.max(0,-(o*i+a)),h=c>0?i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l);else h=o>0?-i:i,c=Math.max(0,-(o*h+a)),d=-c*c+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Un).multiplyScalar(h).add(zn),d}intersectSphere(t,e){Fn.subVectors(t.center,this.origin);const n=Fn.dot(this.direction),r=Fn.dot(Fn)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),u>=0?(i=(t.min.y-h.y)*u,o=(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,o=(t.min.y-h.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,Fn)}intersectTriangle(t,e,n,r,i){Vn.subVectors(e,t),Hn.subVectors(n,t),Wn.crossVectors(Vn,Hn);let o,a=this.direction.dot(Wn);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}jn.subVectors(this.origin,t);const s=o*this.direction.dot(Hn.crossVectors(jn,Hn));if(s<0)return null;const l=o*this.direction.dot(Vn.cross(jn));if(l<0)return null;if(s+l>a)return null;const u=-o*jn.dot(Wn);return u<0?null:this.at(u/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class qn{constructor(){this.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qn).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Xn.setFromMatrixColumn(t,0).length(),i=1/Xn.setFromMatrixColumn(t,1).length(),o=1/Xn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-a*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*u,e[9]=i-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Zn,t,Kn)}lookAt(t,e,n){const r=this.elements;return $n.subVectors(t,e),0===$n.lengthSq()&&($n.z=1),$n.normalize(),Jn.crossVectors(n,$n),0===Jn.lengthSq()&&(1===Math.abs(n.z)?$n.x+=1e-4:$n.z+=1e-4,$n.normalize(),Jn.crossVectors(n,$n)),Jn.normalize(),Qn.crossVectors($n,Jn),r[0]=Jn.x,r[4]=Qn.x,r[8]=$n.x,r[1]=Jn.y,r[5]=Qn.y,r[9]=$n.y,r[2]=Jn.z,r[6]=Qn.z,r[10]=$n.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],M=r[12],E=r[1],C=r[5],T=r[9],A=r[13],D=r[2],P=r[6],R=r[10],L=r[14],O=r[3],k=r[7],I=r[11],N=r[15];return i[0]=o*_+a*E+s*D+l*O,i[4]=o*w+a*C+s*P+l*k,i[8]=o*S+a*T+s*R+l*I,i[12]=o*M+a*A+s*L+l*N,i[1]=u*_+c*E+h*D+d*O,i[5]=u*w+c*C+h*P+d*k,i[9]=u*S+c*T+h*R+d*I,i[13]=u*M+c*A+h*L+d*N,i[2]=p*_+f*E+m*D+g*O,i[6]=p*w+f*C+m*P+g*k,i[10]=p*S+f*T+m*R+g*I,i[14]=p*M+f*A+m*L+g*N,i[3]=v*_+y*E+b*D+x*O,i[7]=v*w+y*C+b*P+x*k,i[11]=v*S+y*T+b*R+x*I,i[15]=v*M+y*A+b*L+x*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*d-n*s*d)+f*(+e*s*d-e*l*h+i*o*h-r*o*d+r*l*u-i*s*u)+m*(+e*l*c-e*a*d-i*o*c+n*o*d+i*a*u-n*l*u)+g*(-r*a*u-e*s*c+e*a*h+r*o*c-n*o*h+n*s*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=c*m*l-f*h*l+f*s*d-a*m*d-c*s*g+a*h*g,y=p*h*l-u*m*l-p*s*d+o*m*d+u*s*g-o*h*g,b=u*f*l-p*c*l+p*a*d-o*f*d-u*a*g+o*c*g,x=p*c*s-u*f*s-p*a*h+o*f*h+u*a*m-o*c*m,_=e*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=v*w,t[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*w,t[2]=(a*m*i-f*s*i+f*r*l-n*m*l-a*r*g+n*s*g)*w,t[3]=(c*s*i-a*h*i-c*r*l+n*h*l+a*r*d-n*s*d)*w,t[4]=y*w,t[5]=(u*m*i-p*h*i+p*r*d-e*m*d-u*r*g+e*h*g)*w,t[6]=(p*s*i-o*m*i-p*r*l+e*m*l+o*r*g-e*s*g)*w,t[7]=(o*h*i-u*s*i+u*r*l-e*h*l-o*r*d+e*s*d)*w,t[8]=b*w,t[9]=(p*c*i-u*f*i-p*n*d+e*f*d+u*n*g-e*c*g)*w,t[10]=(o*f*i-p*a*i+p*n*l-e*f*l-o*n*g+e*a*g)*w,t[11]=(u*a*i-o*c*i-u*n*l+e*c*l+o*n*d-e*a*d)*w,t[12]=x*w,t[13]=(u*f*r-p*c*r+p*n*h-e*f*h-u*n*m+e*c*m)*w,t[14]=(p*a*r-o*f*r-p*n*s+e*f*s+o*n*m-e*a*m)*w,t[15]=(o*c*r-u*a*r+u*n*s-e*c*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,l=i+i,u=o+o,c=a+a,h=i*l,d=i*u,p=i*c,f=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,x=n.x,_=n.y,w=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(d-b)*_,r[5]=(1-(h+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Xn.set(r[0],r[1],r[2]).length();const o=Xn.set(r[4],r[5],r[6]).length(),a=Xn.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Yn.copy(this);const l=1/i,u=1/o,c=1/a;return Yn.elements[0]*=l,Yn.elements[1]*=l,Yn.elements[2]*=l,Yn.elements[4]*=u,Yn.elements[5]*=u,Yn.elements[6]*=u,Yn.elements[8]*=c,Yn.elements[9]*=c,Yn.elements[10]*=c,e.setFromRotationMatrix(Yn),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),l=1/(n-r),u=1/(o-i),c=(e+t)*s,h=(n+r)*l,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Xn=new mn,Yn=new qn,Zn=new mn(0,0,0),Kn=new mn(1,1,1),Jn=new mn,Qn=new mn,$n=new mn,tr=new qn,er=new fn;class nr{constructor(t=0,e=0,n=0,r=nr.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(Be(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Be(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Be(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Be(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Be(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Be(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return tr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(tr,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return er.setFromEuler(this),this.setFromQuaternion(er,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}nr.DefaultOrder="XYZ",nr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class rr{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let ir=0;const or=new mn,ar=new fn,sr=new qn,lr=new mn,ur=new mn,cr=new mn,hr=new fn,dr=new mn(1,0,0),pr=new mn(0,1,0),fr=new mn(0,0,1),mr={type:"added"},gr={type:"removed"};class vr extends Le{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ir++}),this.uuid=Ne(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vr.DefaultUp.clone();const t=new mn,e=new nr,n=new fn,r=new mn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qn},normalMatrix:{value:new He}}),this.matrix=new qn,this.matrixWorld=new qn,this.matrixAutoUpdate=vr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new rr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return ar.setFromAxisAngle(t,e),this.quaternion.multiply(ar),this}rotateOnWorldAxis(t,e){return ar.setFromAxisAngle(t,e),this.quaternion.premultiply(ar),this}rotateX(t){return this.rotateOnAxis(dr,t)}rotateY(t){return this.rotateOnAxis(pr,t)}rotateZ(t){return this.rotateOnAxis(fr,t)}translateOnAxis(t,e){return or.copy(t).applyQuaternion(this.quaternion),this.position.add(or.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(dr,t)}translateY(t){return this.translateOnAxis(pr,t)}translateZ(t){return this.translateOnAxis(fr,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(sr.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?lr.copy(t):lr.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ur.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sr.lookAt(ur,lr,this.up):sr.lookAt(lr,ur,this.up),this.quaternion.setFromRotationMatrix(sr),r&&(sr.extractRotation(r.matrixWorld),ar.setFromRotationMatrix(sr),this.quaternion.premultiply(ar.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(mr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(gr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(gr)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),sr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),sr.multiply(t.parent.matrixWorld)),t.applyMatrix4(sr),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ur,t,cr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ur,hr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}vr.DefaultUp=new mn(0,1,0),vr.DefaultMatrixAutoUpdate=!0;const yr=new mn,br=new mn,xr=new mn,_r=new mn,wr=new mn,Sr=new mn,Mr=new mn,Er=new mn,Cr=new mn,Tr=new mn;class Ar{constructor(t=new mn,e=new mn,n=new mn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),yr.subVectors(t,e),r.cross(yr);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){yr.subVectors(r,e),br.subVectors(n,e),xr.subVectors(t,e);const o=yr.dot(yr),a=yr.dot(br),s=yr.dot(xr),l=br.dot(br),u=br.dot(xr),c=o*l-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,d=(l*s-a*u)*h,p=(o*u-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,_r),_r.x>=0&&_r.y>=0&&_r.x+_r.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,_r),s.set(0,0),s.addScaledVector(i,_r.x),s.addScaledVector(o,_r.y),s.addScaledVector(a,_r.z),s}static isFrontFacing(t,e,n,r){return yr.subVectors(n,e),br.subVectors(t,e),yr.cross(br).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return yr.subVectors(this.c,this.b),br.subVectors(this.a,this.b),.5*yr.cross(br).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ar.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ar.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return Ar.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return Ar.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ar.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;wr.subVectors(r,n),Sr.subVectors(i,n),Er.subVectors(t,n);const s=wr.dot(Er),l=Sr.dot(Er);if(s<=0&&l<=0)return e.copy(n);Cr.subVectors(t,r);const u=wr.dot(Cr),c=Sr.dot(Cr);if(u>=0&&c<=u)return e.copy(r);const h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return o=s/(s-u),e.copy(n).addScaledVector(wr,o);Tr.subVectors(t,i);const d=wr.dot(Tr),p=Sr.dot(Tr);if(p>=0&&d<=p)return e.copy(i);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(Sr,a);const m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return Mr.subVectors(i,r),a=(c-u)/(c-u+(d-p)),e.copy(r).addScaledVector(Mr,a);const g=1/(m+f+h);return o=f*g,a=h*g,e.copy(n).addScaledVector(wr,o).addScaledVector(Sr,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Dr=0;class Pr extends Le{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Dr++}),this.uuid=Ne(),this.name="",this.type="Material",this.blending=y,this.side=p,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=L,this.blendDst=O,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ae,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Te,this.stencilZFail=Te,this.stencilZPass=Te,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===g;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==y&&(n.blending=this.blending),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}get vertexTangents(){return console.warn("THREE."+this.type+": .vertexTangents has been removed."),!1}set vertexTangents(t){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}Pr.fromType=function(){return null};class Rr extends Pr{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Lr=new mn,Or=new Ve;class kr{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=De,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new nn),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Ve),e[n++]=i.x,e[n++]=i.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new mn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new cn),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Or.fromBufferAttribute(this,e),Or.applyMatrix3(t),this.setXY(e,Or.x,Or.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Lr.fromBufferAttribute(this,e),Lr.applyMatrix3(t),this.setXYZ(e,Lr.x,Lr.y,Lr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Lr.fromBufferAttribute(this,e),Lr.applyMatrix4(t),this.setXYZ(e,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Lr.fromBufferAttribute(this,e),Lr.applyNormalMatrix(t),this.setXYZ(e,Lr.x,Lr.y,Lr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Lr.fromBufferAttribute(this,e),Lr.transformDirection(t),this.setXYZ(e,Lr.x,Lr.y,Lr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==De&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class Ir extends kr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Nr extends kr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Br extends kr{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Fr=0;const zr=new qn,Ur=new vr,jr=new mn,Vr=new yn,Hr=new yn,Wr=new mn;class Gr extends Le{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fr++}),this.uuid=Ne(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(We(t)?Nr:Ir)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new He).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return zr.makeRotationFromQuaternion(t),this.applyMatrix4(zr),this}rotateX(t){return zr.makeRotationX(t),this.applyMatrix4(zr),this}rotateY(t){return zr.makeRotationY(t),this.applyMatrix4(zr),this}rotateZ(t){return zr.makeRotationZ(t),this.applyMatrix4(zr),this}translate(t,e,n){return zr.makeTranslation(t,e,n),this.applyMatrix4(zr),this}scale(t,e,n){return zr.makeScale(t,e,n),this.applyMatrix4(zr),this}lookAt(t){return Ur.lookAt(t),Ur.updateMatrix(),this.applyMatrix4(Ur.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jr).negate(),this.translate(jr.x,jr.y,jr.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Br(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new yn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new mn(-1/0,-1/0,-1/0),new mn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];Vr.setFromBufferAttribute(t),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Vr.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Vr.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Vr.min),this.boundingBox.expandByPoint(Vr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Bn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new mn,1/0);if(t){const n=this.boundingSphere.center;if(Vr.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Hr.setFromBufferAttribute(n),this.morphTargetsRelative?(Wr.addVectors(Vr.min,Hr.min),Vr.expandByPoint(Wr),Wr.addVectors(Vr.max,Hr.max),Vr.expandByPoint(Wr)):(Vr.expandByPoint(Hr.min),Vr.expandByPoint(Hr.max))}Vr.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Wr.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Wr));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Wr.fromBufferAttribute(o,e),a&&(jr.fromBufferAttribute(t,e),Wr.add(jr)),r=Math.max(r,n.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new kr(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let E=0;E<a;E++)l[E]=new mn,u[E]=new mn;const c=new mn,h=new mn,d=new mn,p=new Ve,f=new Ve,m=new Ve,g=new mn,v=new mn;function y(t,e,n){c.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),p.fromArray(o,2*t),f.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(c),d.sub(c),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),u[t].add(v),u[e].add(v),u[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let E=0,C=b.length;E<C;++E){const t=b[E],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)y(n[i+0],n[i+1],n[i+2])}const x=new mn,_=new mn,w=new mn,S=new mn;function M(t){w.fromArray(i,3*t),S.copy(w);const e=l[t];x.copy(e),x.sub(w.multiplyScalar(w.dot(e))).normalize(),_.crossVectors(S,e);const n=_.dot(u[t]),r=n<0?-1:1;s[4*t]=x.x,s[4*t+1]=x.y,s[4*t+2]=x.z,s[4*t+3]=r}for(let E=0,C=b.length;E<C;++E){const t=b[E],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new kr(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new mn,i=new mn,o=new mn,a=new mn,s=new mn,l=new mn,u=new mn,c=new mn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(u),s.add(u),l.add(u),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r],o=i.array,a=t.attributes[r],s=a.array,l=a.itemSize*e,u=Math.min(s.length,o.length-l);for(let t=0,e=l;t<u;t++,e++)o[e]=s[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Wr.fromBufferAttribute(t,e),Wr.normalize(),t.setXYZ(e,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let l=0,u=e.length;l<u;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new kr(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Gr,n=this.index.array,r=this.attributes;for(const a in r){const i=r[a],o=t(i,n);e.setAttribute(a,o)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let e=0,i=o.length;e<i;e++){const i=o[e],a=t(i,n);r.push(a)}e.morphAttributes[a]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const t=o[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const s in n){const e=n[s];t.data.attributes[s]=e.toJSON(t.data)}const r={};let i=!1;for(const s in this.morphAttributes){const e=this.morphAttributes[s],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[s]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,u=o.length;l<u;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const qr=new qn,Xr=new Gn,Yr=new Bn,Zr=new mn,Kr=new mn,Jr=new mn,Qr=new mn,$r=new mn,ti=new mn,ei=new mn,ni=new mn,ri=new mn,ii=new Ve,oi=new Ve,ai=new Ve,si=new mn,li=new mn;class ui extends vr{constructor(t=new Gr,e=new Rr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yr.copy(n.boundingSphere),Yr.applyMatrix4(i),!1===t.ray.intersectsSphere(Yr))return;if(qr.copy(i).invert(),Xr.copy(t.ray).applyMatrix4(qr),null!==n.boundingBox&&!1===Xr.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,h=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==a)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex],m=Math.max(n.start,p.start),g=Math.min(a.count,Math.min(n.start+n.count,p.start+p.count));for(let r=m,d=g;r<d;r+=3){const d=a.getX(r),p=a.getX(r+1),f=a.getX(r+2);o=hi(this,i,t,Xr,s,l,u,c,h,d,p,f),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,e.push(o))}}else{const n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);for(let d=n,p=i;d<p;d+=3){const n=a.getX(d),i=a.getX(d+1),p=a.getX(d+2);o=hi(this,r,t,Xr,s,l,u,c,h,n,i,p),o&&(o.faceIndex=Math.floor(d/3),e.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let f=0,m=d.length;f<m;f++){const n=d[f],i=r[n.materialIndex],a=Math.max(n.start,p.start),m=Math.min(s.count,Math.min(n.start+n.count,p.start+p.count));for(let r=a,d=m;r<d;r+=3){const a=r,d=r+1,p=r+2;o=hi(this,i,t,Xr,s,l,u,c,h,a,d,p),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,e.push(o))}}else{const n=Math.max(0,p.start),i=Math.min(s.count,p.start+p.count);for(let a=n,d=i;a<d;a+=3){const n=a,i=a+1,d=a+2;o=hi(this,r,t,Xr,s,l,u,c,h,n,i,d),o&&(o.faceIndex=Math.floor(a/3),e.push(o))}}}}function ci(t,e,n,r,i,o,a,s){let l;if(l=e.side===f?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==m,s),null===l)return null;li.copy(s),li.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(li);return u<n.near||u>n.far?null:{distance:u,point:li.clone(),object:t}}function hi(t,e,n,r,i,o,a,s,l,u,c,h){Zr.fromBufferAttribute(i,u),Kr.fromBufferAttribute(i,c),Jr.fromBufferAttribute(i,h);const d=t.morphTargetInfluences;if(o&&d){ei.set(0,0,0),ni.set(0,0,0),ri.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(Qr.fromBufferAttribute(n,u),$r.fromBufferAttribute(n,c),ti.fromBufferAttribute(n,h),a?(ei.addScaledVector(Qr,e),ni.addScaledVector($r,e),ri.addScaledVector(ti,e)):(ei.addScaledVector(Qr.sub(Zr),e),ni.addScaledVector($r.sub(Kr),e),ri.addScaledVector(ti.sub(Jr),e)))}Zr.add(ei),Kr.add(ni),Jr.add(ri)}t.isSkinnedMesh&&(t.boneTransform(u,Zr),t.boneTransform(c,Kr),t.boneTransform(h,Jr));const p=ci(t,e,n,r,Zr,Kr,Jr,si);if(p){s&&(ii.fromBufferAttribute(s,u),oi.fromBufferAttribute(s,c),ai.fromBufferAttribute(s,h),p.uv=Ar.getUV(si,Zr,Kr,Jr,ii,oi,ai,new Ve)),l&&(ii.fromBufferAttribute(l,u),oi.fromBufferAttribute(l,c),ai.fromBufferAttribute(l,h),p.uv2=Ar.getUV(si,Zr,Kr,Jr,ii,oi,ai,new Ve));const t={a:u,b:c,c:h,normal:new mn,materialIndex:0};Ar.getNormal(Zr,Kr,Jr,t.normal),p.face=t}return p}class di extends Gr{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],u=[],c=[];let h=0,d=0;function p(t,e,n,r,i,o,p,f,m,g,v){const y=o/m,b=p/g,x=o/2,_=p/2,w=f/2,S=m+1,M=g+1;let E=0,C=0;const T=new mn;for(let a=0;a<M;a++){const o=a*b-_;for(let s=0;s<S;s++){const h=s*y-x;T[t]=h*r,T[e]=o*i,T[n]=w,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=f>0?1:-1,u.push(T.x,T.y,T.z),c.push(s/m),c.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let t=0;t<m;t++){const e=h+t+S*a,n=h+t+S*(a+1),r=h+(t+1)+S*(a+1),i=h+(t+1)+S*a;s.push(e,n,i),s.push(n,r,i),C+=6}a.addGroup(d,C,v),d+=C,h+=E}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Br(l,3)),this.setAttribute("normal",new Br(u,3)),this.setAttribute("uv",new Br(c,2))}static fromJSON(t){return new di(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function pi(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function fi(t){const e={};for(let n=0;n<t.length;n++){const r=pi(t[n]);for(const t in r)e[t]=r[t]}return e}const mi={clone:pi,merge:fi};var gi="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",vi="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class yi extends Pr{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=gi,this.fragmentShader=vi,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=pi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class bi extends vr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qn,this.projectionMatrix=new qn,this.projectionMatrixInverse=new qn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class xi extends bi{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ie*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*ke*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ie*Math.atan(Math.tan(.5*ke*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*ke*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const _i=90,wi=1;class Si extends vr{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new xi(_i,wi,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new mn(1,0,0)),this.add(r);const i=new xi(_i,wi,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new mn(-1,0,0)),this.add(i);const o=new xi(_i,wi,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new mn(0,1,0)),this.add(o);const a=new xi(_i,wi,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new mn(0,-1,0)),this.add(a);const s=new xi(_i,wi,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new mn(0,0,1)),this.add(s);const l=new xi(_i,wi,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new mn(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,u=t.getRenderTarget(),c=t.toneMapping,h=t.xr.enabled;t.toneMapping=K,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=c,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Mi extends un{constructor(t,e,n,r,i,o,a,s,l,u){t=void 0!==t?t:[],e=void 0!==e?e:rt,super(t,e,n,r,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Ei extends hn{constructor(t,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new Mi(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ft}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new di(5,5,5),i=new yi({name:"CubemapFromEquirect",uniforms:pi(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:v});i.uniforms.tEquirect.value=e;const o=new ui(r,i),a=e.minFilter;e.minFilter===gt&&(e.minFilter=ft);const s=new Si(1,10,this);return s.update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const Ci=new mn,Ti=new mn,Ai=new He;class Di{constructor(t=new mn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Ci.subVectors(n,e).cross(Ti.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Ci),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Ai.getNormalMatrix(t),r=this.coplanarPoint(Ci).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Pi=new Bn,Ri=new mn;class Li{constructor(t=new Di,e=new Di,n=new Di,r=new Di,i=new Di,o=new Di){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,c-s,f-h,y-m).normalize(),e[1].setComponents(a+r,c+s,f+h,y+m).normalize(),e[2].setComponents(a+i,c+l,f+d,y+g).normalize(),e[3].setComponents(a-i,c-l,f-d,y-g).normalize(),e[4].setComponents(a-o,c-u,f-p,y-v).normalize(),e[5].setComponents(a+o,c+u,f+p,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Pi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Pi)}intersectsSprite(t){return Pi.center.set(0,0,0),Pi.radius=.7071067811865476,Pi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Pi)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){const t=e[i].distanceToPoint(n);if(t<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Ri.x=r.normal.x>0?t.max.x:t.min.x,Ri.y=r.normal.y>0?t.max.y:t.min.y,Ri.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Ri)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Oi(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ki(t,e){const n=e.isWebGL2,r=new WeakMap;function i(e,r){const i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}function a(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function s(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:a,remove:s,update:l}}class Ii extends Gr{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),l=a+1,u=s+1,c=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let g=0;g<u;g++){const t=g*h-o;for(let e=0;e<l;e++){const n=e*c-i;p.push(n,-t,0),f.push(0,0,1),m.push(e/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let t=0;t<a;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new Br(p,3)),this.setAttribute("normal",new Br(f,3)),this.setAttribute("uv",new Br(m,2))}static fromJSON(t){return new Ii(t.width,t.height,t.widthSegments,t.heightSegments)}}var Ni="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Bi="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Fi="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",zi="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Ui="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",ji="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Vi="vec3 transformed = vec3( position );",Hi="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Wi="vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",Gi="#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",qi="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Xi="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Yi="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Zi="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Ki="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Ji="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Qi="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",$i="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",to="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",eo="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",no="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",ro="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",io="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",oo="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",ao="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",so="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",lo="gl_FragColor = linearToOutputTexel( gl_FragColor );",uo="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",co="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",ho="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",po="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",fo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",mo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",go="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",vo="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",yo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",bo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",xo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",_o="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",wo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",So="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Mo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Eo="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",Co="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",To="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Ao="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Do="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Po="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",Ro="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Lo="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Oo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ko="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Io="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",No="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Bo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Fo="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",zo="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",Uo="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",jo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Vo="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Ho="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Wo="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Go="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",qo="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Xo="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Yo="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Zo="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Ko="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Jo="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Qo="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",$o="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",ta="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",ea="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",na="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",ra="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",ia="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",oa="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",aa="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",sa="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",la="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",ua="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",ca="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",ha="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",da="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",pa="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",fa="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",ma="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",ga="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",va="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ya="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",ba="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",xa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",_a="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",wa="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Sa="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Ma="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Ea="#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",Ca="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",Ta="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Aa="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Da="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Pa="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Ra="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",La="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Oa="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const ka="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ia="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Na="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ba="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Fa="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",za="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ua="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",ja="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Va="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Ha="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Wa="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ga="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",qa="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Xa="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ya="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Za="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ka="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ja="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Qa="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",$a="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",ts="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",es="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ns="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",rs="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",is="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",os="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",as="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",ss="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ls="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",us="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",cs="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",hs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ds={alphamap_fragment:Ni,alphamap_pars_fragment:Bi,alphatest_fragment:Fi,alphatest_pars_fragment:zi,aomap_fragment:Ui,aomap_pars_fragment:ji,begin_vertex:Vi,beginnormal_vertex:Hi,bsdfs:Wi,iridescence_fragment:Gi,bumpmap_pars_fragment:qi,clipping_planes_fragment:Xi,clipping_planes_pars_fragment:Yi,clipping_planes_pars_vertex:Zi,clipping_planes_vertex:Ki,color_fragment:Ji,color_pars_fragment:Qi,color_pars_vertex:$i,color_vertex:to,common:eo,cube_uv_reflection_fragment:no,defaultnormal_vertex:ro,displacementmap_pars_vertex:io,displacementmap_vertex:oo,emissivemap_fragment:ao,emissivemap_pars_fragment:so,encodings_fragment:lo,encodings_pars_fragment:uo,envmap_fragment:co,envmap_common_pars_fragment:ho,envmap_pars_fragment:po,envmap_pars_vertex:fo,envmap_physical_pars_fragment:Eo,envmap_vertex:mo,fog_vertex:go,fog_pars_vertex:vo,fog_fragment:yo,fog_pars_fragment:bo,gradientmap_pars_fragment:xo,lightmap_fragment:_o,lightmap_pars_fragment:wo,lights_lambert_vertex:So,lights_pars_begin:Mo,lights_toon_fragment:Co,lights_toon_pars_fragment:To,lights_phong_fragment:Ao,lights_phong_pars_fragment:Do,lights_physical_fragment:Po,lights_physical_pars_fragment:Ro,lights_fragment_begin:Lo,lights_fragment_maps:Oo,lights_fragment_end:ko,logdepthbuf_fragment:Io,logdepthbuf_pars_fragment:No,logdepthbuf_pars_vertex:Bo,logdepthbuf_vertex:Fo,map_fragment:zo,map_pars_fragment:Uo,map_particle_fragment:jo,map_particle_pars_fragment:Vo,metalnessmap_fragment:Ho,metalnessmap_pars_fragment:Wo,morphcolor_vertex:Go,morphnormal_vertex:qo,morphtarget_pars_vertex:Xo,morphtarget_vertex:Yo,normal_fragment_begin:Zo,normal_fragment_maps:Ko,normal_pars_fragment:Jo,normal_pars_vertex:Qo,normal_vertex:$o,normalmap_pars_fragment:ta,clearcoat_normal_fragment_begin:ea,clearcoat_normal_fragment_maps:na,clearcoat_pars_fragment:ra,iridescence_pars_fragment:ia,output_fragment:oa,packing:aa,premultiplied_alpha_fragment:sa,project_vertex:la,dithering_fragment:ua,dithering_pars_fragment:ca,roughnessmap_fragment:ha,roughnessmap_pars_fragment:da,shadowmap_pars_fragment:pa,shadowmap_pars_vertex:fa,shadowmap_vertex:ma,shadowmask_pars_fragment:ga,skinbase_vertex:va,skinning_pars_vertex:ya,skinning_vertex:ba,skinnormal_vertex:xa,specularmap_fragment:_a,specularmap_pars_fragment:wa,tonemapping_fragment:Sa,tonemapping_pars_fragment:Ma,transmission_fragment:Ea,transmission_pars_fragment:Ca,uv_pars_fragment:Ta,uv_pars_vertex:Aa,uv_vertex:Da,uv2_pars_fragment:Pa,uv2_pars_vertex:Ra,uv2_vertex:La,worldpos_vertex:Oa,background_vert:ka,background_frag:Ia,cube_vert:Na,cube_frag:Ba,depth_vert:Fa,depth_frag:za,distanceRGBA_vert:Ua,distanceRGBA_frag:ja,equirect_vert:Va,equirect_frag:Ha,linedashed_vert:Wa,linedashed_frag:Ga,meshbasic_vert:qa,meshbasic_frag:Xa,meshlambert_vert:Ya,meshlambert_frag:Za,meshmatcap_vert:Ka,meshmatcap_frag:Ja,meshnormal_vert:Qa,meshnormal_frag:$a,meshphong_vert:ts,meshphong_frag:es,meshphysical_vert:ns,meshphysical_frag:rs,meshtoon_vert:is,meshtoon_frag:os,points_vert:as,points_frag:ss,shadow_vert:ls,shadow_frag:us,sprite_vert:cs,sprite_frag:hs},ps={common:{diffuse:{value:new nn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new He},uv2Transform:{value:new He},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new He}},sprite:{diffuse:{value:new nn(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new He}}},fs={basic:{uniforms:fi([ps.common,ps.specularmap,ps.envmap,ps.aomap,ps.lightmap,ps.fog]),vertexShader:ds.meshbasic_vert,fragmentShader:ds.meshbasic_frag},lambert:{uniforms:fi([ps.common,ps.specularmap,ps.envmap,ps.aomap,ps.lightmap,ps.emissivemap,ps.fog,ps.lights,{emissive:{value:new nn(0)}}]),vertexShader:ds.meshlambert_vert,fragmentShader:ds.meshlambert_frag},phong:{uniforms:fi([ps.common,ps.specularmap,ps.envmap,ps.aomap,ps.lightmap,ps.emissivemap,ps.bumpmap,ps.normalmap,ps.displacementmap,ps.fog,ps.lights,{emissive:{value:new nn(0)},specular:{value:new nn(1118481)},shininess:{value:30}}]),vertexShader:ds.meshphong_vert,fragmentShader:ds.meshphong_frag},standard:{uniforms:fi([ps.common,ps.envmap,ps.aomap,ps.lightmap,ps.emissivemap,ps.bumpmap,ps.normalmap,ps.displacementmap,ps.roughnessmap,ps.metalnessmap,ps.fog,ps.lights,{emissive:{value:new nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag},toon:{uniforms:fi([ps.common,ps.aomap,ps.lightmap,ps.emissivemap,ps.bumpmap,ps.normalmap,ps.displacementmap,ps.gradientmap,ps.fog,ps.lights,{emissive:{value:new nn(0)}}]),vertexShader:ds.meshtoon_vert,fragmentShader:ds.meshtoon_frag},matcap:{uniforms:fi([ps.common,ps.bumpmap,ps.normalmap,ps.displacementmap,ps.fog,{matcap:{value:null}}]),vertexShader:ds.meshmatcap_vert,fragmentShader:ds.meshmatcap_frag},points:{uniforms:fi([ps.points,ps.fog]),vertexShader:ds.points_vert,fragmentShader:ds.points_frag},dashed:{uniforms:fi([ps.common,ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ds.linedashed_vert,fragmentShader:ds.linedashed_frag},depth:{uniforms:fi([ps.common,ps.displacementmap]),vertexShader:ds.depth_vert,fragmentShader:ds.depth_frag},normal:{uniforms:fi([ps.common,ps.bumpmap,ps.normalmap,ps.displacementmap,{opacity:{value:1}}]),vertexShader:ds.meshnormal_vert,fragmentShader:ds.meshnormal_frag},sprite:{uniforms:fi([ps.sprite,ps.fog]),vertexShader:ds.sprite_vert,fragmentShader:ds.sprite_frag},background:{uniforms:{uvTransform:{value:new He},t2D:{value:null}},vertexShader:ds.background_vert,fragmentShader:ds.background_frag},cube:{uniforms:fi([ps.envmap,{opacity:{value:1}}]),vertexShader:ds.cube_vert,fragmentShader:ds.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ds.equirect_vert,fragmentShader:ds.equirect_frag},distanceRGBA:{uniforms:fi([ps.common,ps.displacementmap,{referencePosition:{value:new mn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ds.distanceRGBA_vert,fragmentShader:ds.distanceRGBA_frag},shadow:{uniforms:fi([ps.lights,ps.fog,{color:{value:new nn(0)},opacity:{value:1}}]),vertexShader:ds.shadow_vert,fragmentShader:ds.shadow_frag}};function ms(t,e,n,r,i,o){const a=new nn(0);let s,l,u=!0===i?0:1,c=null,h=0,d=null;function m(n,i){let o=!1,m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=e.get(m));const v=t.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(m=null),null===m?g(a,u):m&&m.isColor&&(g(m,1),o=!0),(t.autoClear||o)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.mapping===st)?(void 0===l&&(l=new ui(new di(1,1,1),new yi({name:"BackgroundCubeMaterial",uniforms:pi(fs.cube.uniforms),vertexShader:fs.cube.vertexShader,fragmentShader:fs.cube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=m,l.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,c===m&&h===m.version&&d===t.toneMapping||(l.material.needsUpdate=!0,c=m,h=m.version,d=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):m&&m.isTexture&&(void 0===s&&(s=new ui(new Ii(2,2),new yi({name:"BackgroundMaterial",uniforms:pi(fs.background.uniforms),vertexShader:fs.background.vertexShader,fragmentShader:fs.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&h===m.version&&d===t.toneMapping||(s.material.needsUpdate=!0,c=m,h=m.version,d=t.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null))}function g(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,g(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,g(a,u)},render:m}}function gs(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=g(null);let u=l,c=!1;function h(e,r,i,o,s){let l=!1;if(a){const t=m(o,i,r);u!==t&&(u=t,p(u.object)),l=v(e,o,i,s),l&&y(e,o,i,s)}else{const t=!0===r.wireframe;u.geometry===o.id&&u.program===i.id&&u.wireframe===t||(u.geometry=o.id,u.program=i.id,u.wireframe=t,l=!0)}null!==s&&n.update(s,34963),(l||c)&&(c=!1,M(e,r,i,o),null!==s&&t.bindBuffer(34963,n.get(s).buffer))}function d(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function p(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function f(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,n){const r=!0===n.wireframe;let i=s[t.id];void 0===i&&(i={},s[t.id]=i);let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let a=o[r];return void 0===a&&(a=g(d()),o[r]=a),a}function g(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function v(t,e,n,r){const i=u.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){const e=s[l];if(e.location>=0){const e=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return u.attributesNum!==a||u.index!==r}function y(t,e,n,r){const i={},o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){const e=s[l];if(e.location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,a++}}u.attributes=i,u.attributesNum=a,u.index=r}function b(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function x(t){_(t,0)}function _(n,i){const o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){const o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function w(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function S(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function M(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;b();const l=s.attributes,u=a.getAttributes(),c=o.defaultAttributeValues;for(const e in u){const r=u[e];if(r.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const e=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const u=l.buffer,c=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)_(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)x(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)S(r.location+t,a/r.locationSize,c,e,l*h,(d+a/r.locationSize*t)*h)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)_(r.location+t,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<r.locationSize;t++)x(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)S(r.location+t,a/r.locationSize,c,e,a*h,a/r.locationSize*t*h)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}w()}function E(){A();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t]}}function C(t){if(void 0===s[t.id])return;const e=s[t.id];for(const n in e){const t=e[n];for(const e in t)f(t[e].object),delete t[e];delete e[n]}delete s[t.id]}function T(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)f(r[t].object),delete r[t];delete n[t.id]}}function A(){D(),c=!0,u!==l&&(u=l,p(u.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:A,resetDefaultState:D,dispose:E,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:b,enableAttribute:x,disableUnusedAttributes:w}}function vs(t,e,n,r){const i=r.isWebGL2;let o;function a(t){o=t}function s(e,r){t.drawArrays(o,e,r),n.update(r,o,1)}function l(r,a,s){if(0===s)return;let l,u;if(i)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,a,s),n.update(a,o,s)}this.setMode=a,this.render=s,this.renderInstances=l}function ys(t,e,n){let r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const u=a||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),d=t.getParameter(35660),p=t.getParameter(3379),f=t.getParameter(34076),m=t.getParameter(34921),g=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),b=d>0,x=a||e.has("OES_texture_float"),_=b&&x,w=a?t.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:_,maxSamples:w}}function bs(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Di,s=new He,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(t[n]).applyMatrix4(i,s),a.normal.toArray(u,l),u[l+3]=a.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==r||i;return i=e,n=c(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(e,a,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!p)o?c(null):u();else{const t=o?0:r,e=4*t;let i=f.clippingState||null;l.value=i,i=c(h,a,e,s);for(let r=0;r!==e;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function xs(t){let e=new WeakMap;function n(t,e){return e===ot?t.mapping=rt:e===at&&(t.mapping=it),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===ot||o===at){if(e.has(r)){const t=e.get(r).texture;return n(t,r.mapping)}{const o=r.image;if(o&&o.height>0){const a=new Ei(o.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}fs.physical={uniforms:fi([fs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new nn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new nn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new nn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag};class _s extends bi{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const ws=4,Ss=[.125,.215,.35,.446,.526,.582],Ms=20,Es=new _s,Cs=new nn;let Ts=null;const As=(1+Math.sqrt(5))/2,Ds=1/As,Ps=[new mn(1,1,1),new mn(-1,1,1),new mn(1,1,-1),new mn(-1,1,-1),new mn(0,As,Ds),new mn(0,As,-Ds),new mn(Ds,0,As),new mn(-Ds,0,As),new mn(As,Ds,0),new mn(-As,Ds,0)];class Rs{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Ts=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Bs(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ns(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ts),t.scissorTest=!1,ks(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===rt||t.mapping===it?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Ts=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ft,minFilter:ft,generateMipmaps:!1,type:Mt,format:Pt,encoding:be,depthBuffer:!1},r=Os(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Os(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ls(r)),this._blurMaterial=Is(r,t,e)}return r}_compileMaterial(t){const e=new ui(this._lodPlanes[0],t);this._renderer.compile(e,Es)}_sceneToCubeUV(t,e,n,r){const i=90,o=1,a=new xi(i,o,e,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,h=u.toneMapping;u.getClearColor(Cs),u.toneMapping=K,u.autoClear=!1;const d=new Rr({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new ui(new di,d);let m=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,m=!0):(d.color.copy(Cs),m=!0);for(let f=0;f<6;f++){const e=f%3;0===e?(a.up.set(0,s[f],0),a.lookAt(l[f],0,0)):1===e?(a.up.set(0,0,s[f]),a.lookAt(0,l[f],0)):(a.up.set(0,s[f],0),a.lookAt(0,0,l[f]));const n=this._cubeSize;ks(r,e*n,f>2?n:0,n,n),u.setRenderTarget(r),m&&u.render(p,a),u.render(t,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=c,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===rt||t.mapping===it;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Bs()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ns());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new ui(this._lodPlanes[0],i),a=i.uniforms;a["envMap"].value=t;const s=this._cubeSize;ks(e,0,0,3*s,2*s),n.setRenderTarget(e),n.render(o,Es)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Ps[(r-1)%Ps.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,c=new ui(this._lodPlanes[r],l),h=l.uniforms,d=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*Ms-1),f=i/p,m=isFinite(i)?1+Math.floor(u*f):Ms;m>Ms&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Ms}`);const g=[];let v=0;for(let w=0;w<Ms;++w){const t=w/f,e=Math.exp(-t*t/2);g.push(e),0===w?v+=e:w<m&&(v+=2*e)}for(let w=0;w<g.length;w++)g[w]=g[w]/v;h["envMap"].value=t.texture,h["samples"].value=m,h["weights"].value=g,h["latitudinal"].value="latitudinal"===o,a&&(h["poleAxis"].value=a);const{_lodMax:y}=this;h["dTheta"].value=p,h["mipInt"].value=y-n;const b=this._sizeLods[r],x=3*b*(r>y-ws?r-y+ws:0),_=4*(this._cubeSize-b);ks(e,x,_,3*b,2*b),s.setRenderTarget(e),s.render(c,Es)}}function Ls(t){const e=[],n=[],r=[];let i=t;const o=t-ws+1+Ss.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-ws?s=Ss[a-t+ws-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,f*p*t),y.set(h,m*p*t);const i=[t,t,t,t,t,t];b.set(i,g*p*t)}const x=new Gr;x.setAttribute("position",new kr(v,f)),x.setAttribute("uv",new kr(y,m)),x.setAttribute("faceIndex",new kr(b,g)),e.push(x),i>ws&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Os(t,e,n){const r=new hn(t,e,n);return r.texture.mapping=st,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ks(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Is(t,e,n){const r=new Float32Array(Ms),i=new mn(0,1,0),o=new yi({name:"SphericalGaussianBlur",defines:{n:Ms,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1});return o}function Ns(){return new yi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1})}function Bs(){return new yi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Fs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1})}function Fs(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function zs(t){let e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const a=r.mapping,s=a===ot||a===at,l=a===rt||a===it;if(s||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new Rs(t)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||l&&a&&i(a)){null===n&&(n=new Rs(t));const i=s?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function a(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:a}}function Us(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function js(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e}function l(t){const n=t.attributes;for(const i in n)e.update(n[i],34962);const r=t.morphAttributes;for(const i in r){const t=r[i];for(let n=0,r=t.length;n<r;n++)e.update(t[n],34962)}}function u(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(We(n)?Nr:Ir)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}function c(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&u(t)}else u(t);return o.get(t)}return{get:s,update:l,getWireframeAttribute:c}}function Vs(t,e,n,r){const i=r.isWebGL2;let o,a,s;function l(t){o=t}function u(t){a=t.type,s=t.bytesPerElement}function c(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)}function h(r,l,u){if(0===u)return;let c,h;if(i)c=t,h="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,l,a,r*s,u),n.update(l,o,u)}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function Hs(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,e,r){switch(n.calls++,e){case 4:n.triangles+=r*(t/3);break;case 1:n.lines+=r*(t/2);break;case 3:n.lines+=r*(t-1);break;case 2:n.lines+=r*t;break;case 0:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Ws(t,e){return t[0]-e[0]}function Gs(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qs(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function Xs(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new cn,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(l,u,c,h){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=void 0!==p?p.length:0;let m=o.get(u);if(void 0===m||m.count!==f){void 0!==m&&m.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,_=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],S=u.morphAttributes.color||[];let M=0;!0===y&&(M=1),!0===b&&(M=2),!0===x&&(M=3);let E=u.attributes.position.count*M,C=1;E>e.maxTextureSize&&(C=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*C*4*f),A=new dn(T,E,C,f);A.type=St,A.needsUpdate=!0;const D=4*M;for(let R=0;R<f;R++){const L=_[R],O=w[R],k=S[R],I=E*C*4*R;for(let N=0;N<L.count;N++){const B=N*D;!0===y&&(a.fromBufferAttribute(L,N),!0===L.normalized&&qs(a,L),T[I+B+0]=a.x,T[I+B+1]=a.y,T[I+B+2]=a.z,T[I+B+3]=0),!0===b&&(a.fromBufferAttribute(O,N),!0===O.normalized&&qs(a,O),T[I+B+4]=a.x,T[I+B+5]=a.y,T[I+B+6]=a.z,T[I+B+7]=0),!0===x&&(a.fromBufferAttribute(k,N),!0===k.normalized&&qs(a,k),T[I+B+8]=a.x,T[I+B+9]=a.y,T[I+B+10]=a.z,T[I+B+11]=4===k.itemSize?a.w:1)}}function P(){A.dispose(),o.delete(u),u.removeEventListener("dispose",P)}m={count:f,texture:A,size:new Ve(E,C)},o.set(u,m),u.addEventListener("dispose",P)}let g=0;for(let F=0;F<d.length;F++)g+=d[F];const v=u.morphTargetsRelative?1:1-g;h.getUniforms().setValue(t,"morphTargetBaseInfluence",v),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const z=void 0===d?0:d.length;let U=r[u.id];if(void 0===U||U.length!==z){U=[];for(let G=0;G<z;G++)U[G]=[G,0];r[u.id]=U}for(let q=0;q<z;q++){const X=U[q];X[0]=q,X[1]=d[q]}U.sort(Gs);for(let Y=0;Y<8;Y++)Y<z&&U[Y][1]?(s[Y][0]=U[Y][0],s[Y][1]=U[Y][1]):(s[Y][0]=Number.MAX_SAFE_INTEGER,s[Y][1]=0);s.sort(Ws);const j=u.morphAttributes.position,V=u.morphAttributes.normal;let H=0;for(let Z=0;Z<8;Z++){const K=s[Z],J=K[0],Q=K[1];J!==Number.MAX_SAFE_INTEGER&&Q?(j&&u.getAttribute("morphTarget"+Z)!==j[J]&&u.setAttribute("morphTarget"+Z,j[J]),V&&u.getAttribute("morphNormal"+Z)!==V[J]&&u.setAttribute("morphNormal"+Z,V[J]),i[Z]=Q,H+=Q):(j&&!0===u.hasAttribute("morphTarget"+Z)&&u.deleteAttribute("morphTarget"+Z),V&&!0===u.hasAttribute("morphNormal"+Z)&&u.deleteAttribute("morphNormal"+Z),i[Z]=0)}const W=u.morphTargetsRelative?1:1-H;h.getUniforms().setValue(t,"morphTargetBaseInfluence",W),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Ys(t,e,n,r){let i=new WeakMap;function o(t){const o=r.render.frame,a=t.geometry,l=e.get(t,a);return i.get(l)!==o&&(e.update(l),i.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l}function a(){i=new WeakMap}function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:a}}const Zs=new un,Ks=new dn,Js=new pn,Qs=new Mi,$s=[],tl=[],el=new Float32Array(16),nl=new Float32Array(9),rl=new Float32Array(4);function il(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=$s[i];if(void 0===o&&(o=new Float32Array(i),$s[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function ol(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function al(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function sl(t,e){let n=tl[e];void 0===n&&(n=new Int32Array(e),tl[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function ll(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ul(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ol(n,e))return;t.uniform2fv(this.addr,e),al(n,e)}}function cl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ol(n,e))return;t.uniform3fv(this.addr,e),al(n,e)}}function hl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ol(n,e))return;t.uniform4fv(this.addr,e),al(n,e)}}function dl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ol(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),al(n,e)}else{if(ol(n,r))return;rl.set(r),t.uniformMatrix2fv(this.addr,!1,rl),al(n,r)}}function pl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ol(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),al(n,e)}else{if(ol(n,r))return;nl.set(r),t.uniformMatrix3fv(this.addr,!1,nl),al(n,r)}}function fl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ol(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),al(n,e)}else{if(ol(n,r))return;el.set(r),t.uniformMatrix4fv(this.addr,!1,el),al(n,r)}}function ml(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function gl(t,e){const n=this.cache;ol(n,e)||(t.uniform2iv(this.addr,e),al(n,e))}function vl(t,e){const n=this.cache;ol(n,e)||(t.uniform3iv(this.addr,e),al(n,e))}function yl(t,e){const n=this.cache;ol(n,e)||(t.uniform4iv(this.addr,e),al(n,e))}function bl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function xl(t,e){const n=this.cache;ol(n,e)||(t.uniform2uiv(this.addr,e),al(n,e))}function _l(t,e){const n=this.cache;ol(n,e)||(t.uniform3uiv(this.addr,e),al(n,e))}function wl(t,e){const n=this.cache;ol(n,e)||(t.uniform4uiv(this.addr,e),al(n,e))}function Sl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Zs,i)}function Ml(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Js,i)}function El(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Qs,i)}function Cl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ks,i)}function Tl(t){switch(t){case 5126:return ll;case 35664:return ul;case 35665:return cl;case 35666:return hl;case 35674:return dl;case 35675:return pl;case 35676:return fl;case 5124:case 35670:return ml;case 35667:case 35671:return gl;case 35668:case 35672:return vl;case 35669:case 35673:return yl;case 5125:return bl;case 36294:return xl;case 36295:return _l;case 36296:return wl;case 35678:case 36198:case 36298:case 36306:case 35682:return Sl;case 35679:case 36299:case 36307:return Ml;case 35680:case 36300:case 36308:case 36293:return El;case 36289:case 36303:case 36311:case 36292:return Cl}}function Al(t,e){t.uniform1fv(this.addr,e)}function Dl(t,e){const n=il(e,this.size,2);t.uniform2fv(this.addr,n)}function Pl(t,e){const n=il(e,this.size,3);t.uniform3fv(this.addr,n)}function Rl(t,e){const n=il(e,this.size,4);t.uniform4fv(this.addr,n)}function Ll(t,e){const n=il(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ol(t,e){const n=il(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function kl(t,e){const n=il(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Il(t,e){t.uniform1iv(this.addr,e)}function Nl(t,e){t.uniform2iv(this.addr,e)}function Bl(t,e){t.uniform3iv(this.addr,e)}function Fl(t,e){t.uniform4iv(this.addr,e)}function zl(t,e){t.uniform1uiv(this.addr,e)}function Ul(t,e){t.uniform2uiv(this.addr,e)}function jl(t,e){t.uniform3uiv(this.addr,e)}function Vl(t,e){t.uniform4uiv(this.addr,e)}function Hl(t,e,n){const r=e.length,i=sl(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2D(e[o]||Zs,i[o])}function Wl(t,e,n){const r=e.length,i=sl(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(e[o]||Js,i[o])}function Gl(t,e,n){const r=e.length,i=sl(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTextureCube(e[o]||Qs,i[o])}function ql(t,e,n){const r=e.length,i=sl(n,r);t.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||Ks,i[o])}function Xl(t){switch(t){case 5126:return Al;case 35664:return Dl;case 35665:return Pl;case 35666:return Rl;case 35674:return Ll;case 35675:return Ol;case 35676:return kl;case 5124:case 35670:return Il;case 35667:case 35671:return Nl;case 35668:case 35672:return Bl;case 35669:case 35673:return Fl;case 5125:return zl;case 36294:return Ul;case 36295:return jl;case 36296:return Vl;case 35678:case 36198:case 36298:case 36306:case 35682:return Hl;case 35679:case 36299:case 36307:return Wl;case 35680:case 36300:case 36308:case 36293:return Gl;case 36289:case 36303:case 36311:case 36292:return ql}}class Yl{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Tl(e.type)}}class Zl{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Xl(e.type)}}class Kl{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Jl=/(\w+)(\])?(\[|\.)?/g;function Ql(t,e){t.seq.push(e),t.map[e.id]=e}function $l(t,e,n){const r=t.name,i=r.length;Jl.lastIndex=0;while(1){const o=Jl.exec(r),a=Jl.lastIndex;let s=o[1];const l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){Ql(n,void 0===u?new Yl(s,t,e):new Zl(s,t,e));break}{const t=n.map;let e=t[s];void 0===e&&(e=new Kl(s),Ql(n,e)),n=e}}}class tu{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r),i=t.getUniformLocation(e,n.name);$l(n,i,this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function eu(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let nu=0;function ru(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const t=a+1;r.push(`${t===e?">":" "} ${t}: ${n[a]}`)}return r.join("\n")}function iu(t){switch(t){case be:return["Linear","( value )"];case xe:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function ou(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+ru(t.getShaderSource(e),r)}return i}function au(t,e){const n=iu(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function su(t,e){let n;switch(e){case J:n="Linear";break;case Q:n="Reinhard";break;case $:n="OptimizedCineon";break;case tt:n="ACESFilmic";break;case et:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function lu(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(hu).join("\n")}function uu(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function cu(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function hu(t){return""!==t}function du(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pu(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fu=/^[ \t]*#include +<([\w\d./]+)>/gm;function mu(t){return t.replace(fu,gu)}function gu(t,e){const n=ds[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return mu(n)}const vu=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,yu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bu(t){return t.replace(yu,_u).replace(vu,xu)}function xu(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_u(t,e,n,r)}function _u(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function wu(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Su(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===d&&(e="SHADOWMAP_TYPE_VSM"),e}function Mu(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case rt:case it:e="ENVMAP_TYPE_CUBE";break;case st:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Eu(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case it:e="ENVMAP_MODE_REFRACTION";break}return e}function Cu(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case X:e="ENVMAP_BLENDING_MULTIPLY";break;case Y:e="ENVMAP_BLENDING_MIX";break;case Z:e="ENVMAP_BLENDING_ADD";break}return e}function Tu(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function Au(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Su(n),u=Mu(n),c=Eu(n),h=Cu(n),d=Tu(n),p=n.isWebGL2?"":lu(n),f=uu(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(hu).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(hu).join("\n"),v.length>0&&(v+="\n")):(g=[wu(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(hu).join("\n"),v=[p,wu(n),"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?ds["tonemapping_pars_fragment"]:"",n.toneMapping!==K?su("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ds["encodings_pars_fragment"],au("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(hu).join("\n")),a=mu(a),a=du(a,n),a=pu(a,n),s=mu(s),s=du(s,n),s=pu(s,n),a=bu(a),s=bu(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Pe?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Pe?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+a,x=y+v+s,_=eu(i,35633,b),w=eu(i,35632,x);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const e=ou(i,_,"vertex"),n=ou(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:v}})}let S,M;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new tu(i,m)),S},this.getAttributes=function(){return void 0===M&&(M=cu(i,m)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=nu++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let Du=0;class Pu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Ru(t);e.set(t,n)}return e.get(t)}}class Ru{constructor(t){this.id=Du++,this.code=t,this.usedTimes=0}}function Lu(t,e,n,r,i,o,a){const s=new rr,l=new Pu,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(o,s,u,v,b){const x=v.fog,_=b.geometry,w=o.isMeshStandardMaterial?v.environment:null,S=(o.isMeshStandardMaterial?n:e).get(o.envMap||w),M=S&&S.mapping===st?S.image.height:null,E=g[o.type];null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead."));const C=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,T=void 0!==C?C.length:0;let A,D,P,R,L=0;if(void 0!==_.morphAttributes.position&&(L=1),void 0!==_.morphAttributes.normal&&(L=2),void 0!==_.morphAttributes.color&&(L=3),E){const t=fs[E];A=t.vertexShader,D=t.fragmentShader}else A=o.vertexShader,D=o.fragmentShader,l.update(o),P=l.getVertexShaderID(o),R=l.getFragmentShaderID(o);const O=t.getRenderTarget(),k=o.alphaTest>0,I=o.clearcoat>0,N=o.iridescence>0,B={isWebGL2:c,shaderID:E,shaderName:o.type,vertexShader:A,fragmentShader:D,defines:o.defines,customVertexShaderID:P,customFragmentShaderID:R,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:d,outputEncoding:null===O?t.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:be,map:!!o.map,matcap:!!o.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:M,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===Me,tangentSpaceNormalMap:o.normalMapType===Se,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===xe,clearcoat:I,clearcoatMap:I&&!!o.clearcoatMap,clearcoatRoughnessMap:I&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!o.clearcoatNormalMap,iridescence:N,iridescenceMap:N&&!!o.iridescenceMap,iridescenceThicknessMap:N&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===y,alphaMap:!!o.alphaMap,alphaTest:k,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!_.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.iridescenceMap||!!o.iridescenceThicknessMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||!!o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!x,useFog:!0===o.fog,fogExp2:x&&x.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:T,morphTextureStride:L,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:K,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===m,flipSided:o.side===f,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return B}function b(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(x(n,e),_(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()}function x(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function _(t,e){s.disableAll(),e.isWebGL2&&s.enable(0),e.supportsVertexTextures&&s.enable(1),e.instancing&&s.enable(2),e.instancingColor&&s.enable(3),e.map&&s.enable(4),e.matcap&&s.enable(5),e.envMap&&s.enable(6),e.lightMap&&s.enable(7),e.aoMap&&s.enable(8),e.emissiveMap&&s.enable(9),e.bumpMap&&s.enable(10),e.normalMap&&s.enable(11),e.objectSpaceNormalMap&&s.enable(12),e.tangentSpaceNormalMap&&s.enable(13),e.clearcoat&&s.enable(14),e.clearcoatMap&&s.enable(15),e.clearcoatRoughnessMap&&s.enable(16),e.clearcoatNormalMap&&s.enable(17),e.iridescence&&s.enable(18),e.iridescenceMap&&s.enable(19),e.iridescenceThicknessMap&&s.enable(20),e.displacementMap&&s.enable(21),e.specularMap&&s.enable(22),e.roughnessMap&&s.enable(23),e.metalnessMap&&s.enable(24),e.gradientMap&&s.enable(25),e.alphaMap&&s.enable(26),e.alphaTest&&s.enable(27),e.vertexColors&&s.enable(28),e.vertexAlphas&&s.enable(29),e.vertexUvs&&s.enable(30),e.vertexTangents&&s.enable(31),e.uvsVertexOnly&&s.enable(32),e.fog&&s.enable(33),t.push(s.mask),s.disableAll(),e.useFog&&s.enable(0),e.flatShading&&s.enable(1),e.logarithmicDepthBuffer&&s.enable(2),e.skinning&&s.enable(3),e.morphTargets&&s.enable(4),e.morphNormals&&s.enable(5),e.morphColors&&s.enable(6),e.premultipliedAlpha&&s.enable(7),e.shadowMapEnabled&&s.enable(8),e.physicallyCorrectLights&&s.enable(9),e.doubleSided&&s.enable(10),e.flipSided&&s.enable(11),e.useDepthPacking&&s.enable(12),e.dithering&&s.enable(13),e.specularIntensityMap&&s.enable(14),e.specularColorMap&&s.enable(15),e.transmission&&s.enable(16),e.transmissionMap&&s.enable(17),e.thicknessMap&&s.enable(18),e.sheen&&s.enable(19),e.sheenColorMap&&s.enable(20),e.sheenRoughnessMap&&s.enable(21),e.decodeVideoTexture&&s.enable(22),e.opaque&&s.enable(23),t.push(s.mask)}function w(t){const e=g[t.type];let n;if(e){const t=fs[e];n=mi.clone(t.uniforms)}else n=t.uniforms;return n}function S(e,n){let r;for(let t=0,i=u.length;t<i;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Au(t,n,e,o),u.push(r)),r}function M(t){if(0===--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}}function E(t){l.remove(t)}function C(){l.dispose()}return{getParameters:v,getProgramCacheKey:b,getUniforms:w,acquireProgram:S,releaseProgram:M,releaseShaderCache:E,programs:u,dispose:C}}function Ou(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function ku(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Iu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Nu(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(n,r,i,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}function s(t,e,o,s,l,u){const c=a(t,e,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)}function l(t,e,o,s,l,u){const c=a(t,e,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)}function u(t,e){n.length>1&&n.sort(t||ku),r.length>1&&r.sort(e||Iu),i.length>1&&i.sort(e||Iu)}function c(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:c,sort:u}}function Bu(){let t=new WeakMap;function e(e,n){let r;return!1===t.has(e)?(r=new Nu,t.set(e,[r])):n>=t.get(e).length?(r=new Nu,t.get(e).push(r)):r=t.get(e)[n],r}function n(){t=new WeakMap}return{get:e,dispose:n}}function Fu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new mn,color:new nn};break;case"SpotLight":n={position:new mn,direction:new mn,color:new nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new mn,color:new nn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new mn,skyColor:new nn,groundColor:new nn};break;case"RectAreaLight":n={color:new nn,position:new mn,halfWidth:new mn,halfHeight:new mn};break}return t[e.id]=n,n}}}function zu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Uu=0;function ju(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Vu(t,e){const n=new Fu,r=zu(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)i.probe.push(new mn);const o=new mn,a=new qn,s=new qn;function l(o,a){let s=0,l=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;o.sort(ju);const y=!0!==a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,b=e.intensity,x=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*b*y,l+=a.g*b*y,u+=a.b*b*y;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(b*y),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=_,i.spotShadowMatrix[d]=e.shadow.matrix,v++}i.spot[d]=t,d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[p]=t,p++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*y),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(b*y),t.groundColor.copy(e.groundColor).multiplyScalar(b*y),i.hemi[f]=t,f++}}p>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=ps.LTC_FLOAT_1,i.rectAreaLTC2=ps.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ps.LTC_HALF_1,i.rectAreaLTC2=ps.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;const b=i.hash;b.directionalLength===c&&b.pointLength===h&&b.spotLength===d&&b.rectAreaLength===p&&b.hemiLength===f&&b.numDirectionalShadows===m&&b.numPointShadows===g&&b.numSpotShadows===v||(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,b.directionalLength=c,b.pointLength=h,b.spotLength=d,b.rectAreaLength=p,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,i.version=Uu++)}function u(t,e){let n=0,r=0,l=0,u=0,c=0;const h=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(e.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),u++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),c++}}}return{setup:l,setupView:u,state:i}}function Hu(t,e){const n=new Vu(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(t){r.push(t)}function s(t){i.push(t)}function l(t){n.setup(r,t)}function u(t){n.setupView(r,t)}const c={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:c,setupLights:l,setupLightsView:u,pushLight:a,pushShadow:s}}function Wu(t,e){let n=new WeakMap;function r(r,i=0){let o;return!1===n.has(r)?(o=new Hu(t,e),n.set(r,[o])):i>=n.get(r).length?(o=new Hu(t,e),n.get(r).push(o)):o=n.get(r)[i],o}function i(){n=new WeakMap}return{get:r,dispose:i}}class Gu extends Pr{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class qu extends Pr{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new mn,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Xu="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Yu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Zu(t,e,n){let r=new Li;const i=new Ve,o=new Ve,a=new cn,s=new Gu({depthPacking:we}),l=new qu,u={},h=n.maxTextureSize,g={0:f,1:p,2:m},y=new yi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:Xu,fragmentShader:Yu}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const x=new Gr;x.setAttribute("position",new kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new ui(x,y),w=this;function S(n,r){const i=e.update(_);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,b.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,y,_,null),b.uniforms.shadow_pass.value=n.mapPass.texture,b.uniforms.resolution.value=n.mapSize,b.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,b,_,null)}function M(e,n,r,i,o,a){let c=null;const h=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(c=void 0!==h?h:!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const t=c.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=c.clone(),r[e]=i),c=i}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=a===d?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function E(n,i,o,a,s){if(!1===n.visible)return;const l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===d)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=i[u.materialIndex];if(c&&c.visible){const e=M(n,c,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,u)}}}else if(i.visible){const e=M(n,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const u=n.children;for(let t=0,e=u.length;t<e;t++)E(u[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c,this.render=function(e,n,s){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),p=t.state;p.setBlending(v),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let f=0,m=e.length;f<m;f++){const l=e[f],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const c=u.getFrameExtents();if(i.multiply(c),o.copy(u.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(o.x=Math.floor(h/c.x),i.x=o.x*c.x,u.mapSize.x=o.x),i.y>h&&(o.y=Math.floor(h/c.y),i.y=o.y*c.y,u.mapSize.y=o.y)),null!==u.map||u.isPointLightShadow||this.type!==d||(u.map=new hn(i.x,i.y),u.map.texture.name=l.name+".shadowMap",u.mapPass=new hn(i.x,i.y),u.camera.updateProjectionMatrix()),null===u.map){const t={minFilter:ht,magFilter:ht,format:Pt};u.map=new hn(i.x,i.y,t),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const m=u.getViewportCount();for(let t=0;t<m;t++){const e=u.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),p.viewport(a),u.updateMatrices(l,t),r=u.getFrustum(),E(n,s,u.camera,l,this.type)}u.isPointLightShadow||this.type!==d||S(u,s),u.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(l,u,c)}}function Ku(t,e,n){const r=n.isWebGL2;function i(){let e=!1;const n=new cn;let r=null;const i=new cn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?wt(2929):St(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case z:t.depthFunc(512);break;case U:t.depthFunc(519);break;case j:t.depthFunc(513);break;case V:t.depthFunc(515);break;case H:t.depthFunc(514);break;case W:t.depthFunc(518);break;case G:t.depthFunc(516);break;case q:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function a(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?wt(2960):St(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&l===r||(t.stencilOp(e,n,r),a=e,s=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}}const c=new i,h=new o,d=new a;let p={},g={},X=new WeakMap,Y=[],Z=null,K=!1,J=null,Q=null,$=null,tt=null,et=null,nt=null,rt=null,it=!1,ot=null,at=null,st=null,lt=null,ut=null;const ct=t.getParameter(35661);let ht=!1,dt=0;const pt=t.getParameter(7938);-1!==pt.indexOf("WebGL")?(dt=parseFloat(/^WebGL (\d)/.exec(pt)[1]),ht=dt>=1):-1!==pt.indexOf("OpenGL ES")&&(dt=parseFloat(/^OpenGL ES (\d)/.exec(pt)[1]),ht=dt>=2);let ft=null,mt={};const gt=t.getParameter(3088),vt=t.getParameter(2978),yt=(new cn).fromArray(gt),bt=(new cn).fromArray(vt);function xt(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const _t={};function wt(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function St(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function Mt(e,n){return g[e]!==n&&(t.bindFramebuffer(e,n),g[e]=n,r&&(36009===e&&(g[36160]=n),36160===e&&(g[36009]=n)),!0)}function Et(r,i){let o=Y,a=!1;if(r)if(o=X.get(i),void 0===o&&(o=[],X.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,n=t.length;e<n;e++)o[e]=36064+e;o.length=t.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Ct(e){return Z!==e&&(t.useProgram(e),Z=e,!0)}_t[3553]=xt(3553,3553,1),_t[34067]=xt(34067,34069,6),c.setClear(0,0,0,1),h.setClear(1),d.setClear(0),wt(2929),h.setFunc(V),Rt(!1),Lt(l),wt(2884),Dt(v);const Tt={[S]:32774,[M]:32778,[E]:32779};if(r)Tt[C]=32775,Tt[T]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(Tt[C]=t.MIN_EXT,Tt[T]=t.MAX_EXT)}const At={[A]:0,[D]:1,[P]:768,[L]:770,[F]:776,[N]:774,[k]:772,[R]:769,[O]:771,[B]:775,[I]:773};function Dt(e,n,r,i,o,a,s,l){if(e!==v){if(!1===K&&(wt(3042),K=!0),e===w)o=o||n,a=a||r,s=s||i,n===Q&&o===et||(t.blendEquationSeparate(Tt[n],Tt[o]),Q=n,et=o),r===$&&i===tt&&a===nt&&s===rt||(t.blendFuncSeparate(At[r],At[i],At[a],At[s]),$=r,tt=i,nt=a,rt=s),J=e,it=null;else if(e!==J||l!==it){if(Q===S&&et===S||(t.blendEquation(32774),Q=S,et=S),l)switch(e){case y:t.blendFuncSeparate(1,771,1,771);break;case b:t.blendFunc(1,1);break;case x:t.blendFuncSeparate(0,769,0,1);break;case _:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case y:t.blendFuncSeparate(770,771,1,771);break;case b:t.blendFunc(770,1);break;case x:t.blendFuncSeparate(0,769,0,1);break;case _:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}$=null,tt=null,nt=null,rt=null,J=e,it=l}}else!0===K&&(St(3042),K=!1)}function Pt(t,e){t.side===m?St(2884):wt(2884);let n=t.side===f;e&&(n=!n),Rt(n),t.blending===y&&!1===t.transparent?Dt(v):Dt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),c.setMask(t.colorWrite);const r=t.stencilWrite;d.setTest(r),r&&(d.setMask(t.stencilWriteMask),d.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),d.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),kt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?wt(32926):St(32926)}function Rt(e){ot!==e&&(e?t.frontFace(2304):t.frontFace(2305),ot=e)}function Lt(e){e!==s?(wt(2884),e!==at&&(e===l?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):St(2884),at=e}function Ot(e){e!==st&&(ht&&t.lineWidth(e),st=e)}function kt(e,n,r){e?(wt(32823),lt===n&&ut===r||(t.polygonOffset(n,r),lt=n,ut=r)):St(32823)}function It(t){t?wt(3089):St(3089)}function Nt(e){void 0===e&&(e=33984+ct-1),ft!==e&&(t.activeTexture(e),ft=e)}function Bt(e,n){null===ft&&Nt();let r=mt[ft];void 0===r&&(r={type:void 0,texture:void 0},mt[ft]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||_t[e]),r.type=e,r.texture=n)}function Ft(){const e=mt[ft];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function zt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ut(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function qt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(e){!1===yt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),yt.copy(e))}function Yt(e){!1===bt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),bt.copy(e))}function Zt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},ft=null,mt={},g={},X=new WeakMap,Y=[],Z=null,K=!1,J=null,Q=null,$=null,tt=null,et=null,nt=null,rt=null,it=!1,ot=null,at=null,st=null,lt=null,ut=null,yt.set(0,0,t.canvas.width,t.canvas.height),bt.set(0,0,t.canvas.width,t.canvas.height),c.reset(),h.reset(),d.reset()}return{buffers:{color:c,depth:h,stencil:d},enable:wt,disable:St,bindFramebuffer:Mt,drawBuffers:Et,useProgram:Ct,setBlending:Dt,setMaterial:Pt,setFlipSided:Rt,setCullFace:Lt,setLineWidth:Ot,setPolygonOffset:kt,setScissorTest:It,activeTexture:Nt,bindTexture:Bt,unbindTexture:Ft,compressedTexImage2D:zt,texImage2D:Gt,texImage3D:qt,texStorage2D:Ht,texStorage3D:Wt,texSubImage2D:Ut,texSubImage3D:jt,compressedTexSubImage2D:Vt,scissor:Xt,viewport:Yt,reset:Zt}}function Ju(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(it){}function y(t,e){return v?new OffscreenCanvas(t,e):Ge("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?je:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;s.width=o,s.height=a;const l=s.getContext("2d");return l.drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function x(t){return Ue(t.width)&&Ue(t.height)}function _(t){return!s&&(t.wrapS!==ut||t.wrapT!==ut||t.minFilter!==ht&&t.minFilter!==ft)}function w(t,e){return t.generateMipmaps&&e&&t.minFilter!==ht&&t.minFilter!==ft}function S(e){t.generateMipmap(e)}function M(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===xe&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function E(t,e,n){return!0===w(t,n)||t.isFramebufferTexture&&t.minFilter!==ht&&t.minFilter!==ft?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function C(t){return t===ht||t===dt||t===pt?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T),D(e),e.isVideoTexture&&f.delete(e)}function A(t){const e=t.target;e.removeEventListener("dispose",A),R(e)}function D(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&P(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}function P(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source,o=g.get(i);delete o[n.__cacheKey],a.memory.textures--}function R(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const e=r.get(n[s]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(e)}let L=0;function O(){L=0}function k(){const t=L;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),L+=1,t}function I(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function N(t,e){const i=r.get(t);if(t.isVideoTexture&&nt(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void W(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function B(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))}function F(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?W(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))}function z(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?G(i,t,e):(n.activeTexture(33984+e),n.bindTexture(34067,i.__webglTexture))}const U={[lt]:10497,[ut]:33071,[ct]:33648},j={[ht]:9728,[dt]:9984,[pt]:9986,[ft]:9729,[mt]:9985,[gt]:9987};function V(n,o,a){if(a?(t.texParameteri(n,10242,U[o.wrapS]),t.texParameteri(n,10243,U[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,U[o.wrapR]),t.texParameteri(n,10240,j[o.magFilter]),t.texParameteri(n,10241,j[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===ut&&o.wrapT===ut||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,C(o.magFilter)),t.texParameteri(n,10241,C(o.minFilter)),o.minFilter!==ht&&o.minFilter!==ft&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.type===St&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Mt&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function H(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=I(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&P(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function W(e,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);const l=H(e,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),u.version!==u.__currentVersion||!0===l){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=_(r)&&!1===x(r.image);let i=b(r.image,e,!1,c);i=rt(r,i);const h=x(i)||s,d=o.convert(r.format,r.encoding);let p,f=o.convert(r.type),m=M(r.internalFormat,d,f,r.encoding,r.isVideoTexture);V(a,r,h);const g=r.mipmaps,v=s&&!0!==r.isVideoTexture,y=void 0===u.__currentVersion||!0===l,C=E(r,i,h);if(r.isDepthTexture)m=6402,s?m=r.type===St?36012:r.type===wt?33190:r.type===Tt?35056:33189:r.type===St&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ot&&6402===m&&r.type!==xt&&r.type!==wt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=wt,f=o.convert(r.type)),r.format===kt&&6402===m&&(m=34041,r.type!==Tt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Tt,f=o.convert(r.type))),y&&(v?n.texStorage2D(3553,1,m,i.width,i.height):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,null));else if(r.isDataTexture)if(g.length>0&&h){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],v?n.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,d,f,i.data)):n.texImage2D(3553,0,m,i.width,i.height,0,d,f,i.data);else if(r.isCompressedTexture){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],r.format!==Pt?null!==d?v?n.compressedTexSubImage2D(3553,t,0,0,p.width,p.height,d,p.data):n.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,t,0,0,p.width,p.height,d,f,p.data):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data)}else if(r.isDataArrayTexture)v?(y&&n.texStorage3D(35866,C,m,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(35866,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isData3DTexture)v?(y&&n.texStorage3D(32879,C,m,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,d,f,i.data)):n.texImage3D(32879,0,m,i.width,i.height,i.depth,0,d,f,i.data);else if(r.isFramebufferTexture){if(y)if(v)n.texStorage2D(3553,C,m,i.width,i.height);else{let t=i.width,e=i.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,m,t,e,0,d,f,null),t>>=1,e>>=1}}else if(g.length>0&&h){v&&y&&n.texStorage2D(3553,C,m,g[0].width,g[0].height);for(let t=0,e=g.length;t<e;t++)p=g[t],v?n.texSubImage2D(3553,t,0,0,d,f,p):n.texImage2D(3553,t,m,d,f,p);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,C,m,i.width,i.height),n.texSubImage2D(3553,0,0,0,d,f,i)):n.texImage2D(3553,0,m,d,f,i);w(r,h)&&S(a),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function G(e,r,i){if(6!==r.image.length)return;const a=H(e,r),l=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),l.version!==l.__currentVersion||!0===a){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=e||i?i?r.image[t].image:r.image[t]:b(r.image[t],!1,!0,u),c[t]=rt(r,c[t]);const h=c[0],d=x(h)||s,p=o.convert(r.format,r.encoding),f=o.convert(r.type),m=M(r.internalFormat,p,f,r.encoding),g=s&&!0!==r.isVideoTexture,v=void 0===l.__currentVersion||!0===a;let y,_=E(r,h,d);if(V(34067,r,d),e){g&&v&&n.texStorage2D(34067,_,m,h.width,h.height);for(let t=0;t<6;t++){y=c[t].mipmaps;for(let e=0;e<y.length;e++){const i=y[e];r.format!==Pt?null!==p?g?n.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+t,e,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+t,e,m,i.width,i.height,0,p,f,i.data)}}}else{y=r.mipmaps,g&&v&&(y.length>0&&_++,n.texStorage2D(34067,_,m,c[0].width,c[0].height));for(let t=0;t<6;t++)if(i){g?n.texSubImage2D(34069+t,0,0,0,c[t].width,c[t].height,p,f,c[t].data):n.texImage2D(34069+t,0,m,c[t].width,c[t].height,0,p,f,c[t].data);for(let e=0;e<y.length;e++){const r=y[e],i=r.image[t].image;g?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,p,f,i.data):n.texImage2D(34069+t,e+1,m,i.width,i.height,0,p,f,i.data)}}else{g?n.texSubImage2D(34069+t,0,0,0,p,f,c[t]):n.texImage2D(34069+t,0,m,p,f,c[t]);for(let e=0;e<y.length;e++){const r=y[e];g?n.texSubImage2D(34069+t,e+1,0,0,p,f,r.image[t]):n.texImage2D(34069+t,e+1,m,p,f,r.image[t])}}}w(r,d)&&S(34067),l.__currentVersion=l.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function q(e,i,a,s,l){const u=o.convert(a.format,a.encoding),c=o.convert(a.type),h=M(a.internalFormat,u,c,a.encoding),p=r.get(i);p.__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,e),et(i)?d.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,tt(i)):t.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function X(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||et(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===St?i=36012:e.type===wt&&(i=33190));const r=tt(n);et(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=tt(n);r&&!1===et(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const a=e[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),u=M(a.internalFormat,s,l,a.encoding),c=tt(n);r&&!1===et(n)?t.renderbufferStorageMultisample(36161,c,u,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):t.renderbufferStorage(36161,u,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function Y(e,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=tt(i);if(i.depthTexture.format===Ot)et(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,s):t.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==kt)throw new Error("Unknown depthTexture format");et(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,s):t.framebufferTexture2D(36160,33306,3553,a,0)}}function Z(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");Y(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),X(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),X(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function K(t,e,n){const i=r.get(t);void 0!==e&&q(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&Z(t)}function J(e){const l=e.texture,u=r.get(e),c=r.get(l);e.addEventListener("dispose",A),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,p=x(e)||s;if(h){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&e.samples>0&&!1===et(e)){const r=d?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=M(i.internalFormat,a,s,i.encoding),c=tt(e);t.renderbufferStorageMultisample(36161,c,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),X(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),V(34067,l,p);for(let t=0;t<6;t++)q(u.__webglFramebuffer[t],e,l,36064,34069+t);w(l,p)&&S(34067),n.unbindTexture()}else if(d){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),V(3553,o,p),q(u.__webglFramebuffer,e,o,36064+i,3553),w(o,p)&&S(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),V(t,l,p),q(u.__webglFramebuffer,e,l,36064,t),w(l,p)&&S(t),n.unbindTexture()}e.depthBuffer&&Z(e)}function Q(t){const e=x(t)||s,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(w(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(e,i),S(e),n.unbindTexture()}}}function $(e){if(s&&e.samples>0&&!1===et(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let s=16384;const l=[],u=e.stencilBuffer?33306:36096,c=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),e.depthBuffer&&l.push(u);const d=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024)),h&&t.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(36008,[u]),t.invalidateFramebuffer(36009,[u])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),p&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}}function tt(t){return Math.min(h,t.samples)}function et(t){const n=r.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function nt(t){const e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}function rt(t,n){const r=t.encoding,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Re||r!==be&&(r===xe?!1===s?!0===e.has("EXT_sRGB")&&i===Pt?(t.format=Re,t.minFilter=ft,t.generateMipmaps=!1):n=on.sRGBToLinear(n):i===Pt&&o===vt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=k,this.resetTextureUnits=O,this.setTexture2D=N,this.setTexture2DArray=B,this.setTexture3D=F,this.setTextureCube=z,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=$,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=q,this.useMultisampledRTT=et}function Qu(t,e,n){const r=n.isWebGL2;function i(n,i=null){let o;if(n===vt)return 5121;if(n===Et)return 32819;if(n===Ct)return 32820;if(n===yt)return 5120;if(n===bt)return 5122;if(n===xt)return 5123;if(n===_t)return 5124;if(n===wt)return 5125;if(n===St)return 5126;if(n===Mt)return r?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===At)return 6406;if(n===Pt)return 6408;if(n===Rt)return 6409;if(n===Lt)return 6410;if(n===Ot)return 6402;if(n===kt)return 34041;if(n===It)return 6403;if(n===Dt)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Re)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Nt)return 36244;if(n===Bt)return 33319;if(n===Ft)return 33320;if(n===zt)return 36249;if(n===Ut||n===jt||n===Vt||n===Ht)if(i===xe){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ut)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===jt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Vt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ht)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ut)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===jt)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Vt)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ht)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Wt||n===Gt||n===qt||n===Xt){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===Wt)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Gt)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===qt)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Xt)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Yt)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Zt||n===Kt){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===Zt)return i===xe?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Kt)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Jt||n===Qt||n===$t||n===te||n===ee||n===ne||n===re||n===ie||n===oe||n===ae||n===se||n===le||n===ue||n===ce){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Jt)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Qt)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$t)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===te)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ee)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ne)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===re)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ie)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===oe)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ae)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===se)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===le)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ue)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ce)return i===xe?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===he){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===he)return i===xe?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Tt?r?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}return{convert:i}}class $u extends xi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class tc extends vr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ec={type:"move"};class nc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new tc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new tc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new mn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new mn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new tc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new mn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new mn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ec))),l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const t=new tc;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[o.jointName]=t,l.add(t)}const r=l.joints[o.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&a>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class rc extends un{constructor(t,e,n,r,i,o,a,s,l,u){if(u=void 0!==u?u:Ot,u!==Ot&&u!==kt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ot&&(n=wt),void 0===n&&u===kt&&(n=Tt),super(null,r,i,o,a,s,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:ht,this.minFilter=void 0!==s?s:ht,this.flipY=!1,this.generateMipmaps=!1}}class ic extends Le{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=null,l=null,u=null,c=null,h=null,d=null;const p=e.getContextAttributes();let f=null,m=null;const g=[],v=new Map,y=new xi;y.layers.enable(1),y.viewport=new cn;const b=new xi;b.layers.enable(2),b.viewport=new cn;const x=[y,b],_=new $u;_.layers.enable(1),_.layers.enable(2);let w=null,S=null;function M(t){const e=v.get(t.inputSource);void 0!==e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function E(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",C),v.forEach((function(t,e){void 0!==t&&t.disconnect(e)})),v.clear(),w=null,S=null,t.setRenderTarget(f),h=null,c=null,u=null,r=null,m=null,O.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(t){const e=r.inputSources;for(let n=0;n<e.length;n++){const t="right"===e[n].handedness?1:0;v.set(e[n],g[t])}for(let n=0;n<t.removed.length;n++){const e=t.removed[n],r=v.get(e);r&&(r.dispatchEvent({type:"disconnected",data:e}),v.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],r=v.get(e);r&&r.dispatchEvent({type:"connected",data:e})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new nc,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new nc,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new nc,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(t){s=t},this.getBaseLayer=function(){return null!==c?c:h},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(f=t.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",E),r.addEventListener("inputsourceschange",C),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),m=new hn(h.framebufferWidth,h.framebufferHeight,{format:Pt,type:vt,encoding:t.outputEncoding})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?kt:Ot,o=p.stencil?Tt:wt);const s={colorFormat:t.outputEncoding===xe?35907:32856,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,e),c=u.createProjectionLayer(s),r.updateRenderState({layers:[c]}),m=new hn(c.textureWidth,c.textureHeight,{format:Pt,type:vt,depthTexture:new rc(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});const l=t.properties.get(m);l.__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const T=new mn,A=new mn;function D(t,e,n){T.setFromMatrixPosition(e.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=T.distanceTo(A),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=s+f,y=d-m,b=p+(r-m),x=l*s/v*g,_=u*s/v*g;t.projectionMatrix.makePerspective(y,b,x,_,g,v)}function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;_.near=b.near=y.near=t.near,_.far=b.far=y.far=t.far,w===_.near&&S===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),w=_.near,S=_.far);const e=t.parent,n=_.cameras;P(_,e);for(let r=0;r<n.length;r++)P(n[r],e);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.position.copy(_.position),t.quaternion.copy(_.quaternion),t.scale.copy(_.scale),t.matrix.copy(_.matrix),t.matrixWorld.copy(_.matrixWorld);const i=t.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?D(_,y,b):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(t){null!==c&&(c.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let R=null;function L(e,n){if(l=n.getViewerPose(s||o),d=n,null!==l){const e=l.views;null!==h&&(t.setRenderTargetFramebuffer(m,h.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==h)o=h.getViewport(i);else{const e=u.getViewSubImage(c,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(m,e.colorTexture,c.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let a=x[r];void 0===a&&(a=new xi,a.layers.enable(r),a.viewport=new cn,x[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&_.matrix.copy(a.matrix),!0===n&&_.cameras.push(a)}}const i=r.inputSources;for(let t=0;t<g.length;t++){const e=i[t],r=v.get(e);void 0!==r&&r.update(e,n,s||o)}R&&R(e,n),d=null}const O=new Oi;O.setAnimationLoop(L),this.setAnimationLoop=function(t){R=t},this.dispose=function(){}}}function oc(t,e){function n(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function r(t,e,n,r,f){e.isMeshBasicMaterial||e.isMeshLambertMaterial?i(t,e):e.isMeshToonMaterial?(i(t,e),c(t,e)):e.isMeshPhongMaterial?(i(t,e),u(t,e)):e.isMeshStandardMaterial?(i(t,e),h(t,e),e.isMeshPhysicalMaterial&&d(t,e,f)):e.isMeshMatcapMaterial?(i(t,e),p(t,e)):e.isMeshDepthMaterial?i(t,e):e.isMeshDistanceMaterial?(i(t,e),m(t,e)):e.isMeshNormalMaterial?i(t,e):e.isLineBasicMaterial?(o(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?s(t,e,n,r):e.isSpriteMaterial?l(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===f&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===f&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}function o(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function s(t,e,n,r){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function l(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function c(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function h(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}function d(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===f&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}function p(t,e){e.matcap&&(t.matcap.value=e.matcap)}function m(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function ac(){const t=Ge("canvas");return t.style.display="block",t}function sc(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:ac(),n=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,g=null;const v=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=be,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const b=this;let x=!1,_=0,w=0,S=null,M=-1,E=null;const C=new cn,T=new cn;let A=null,D=e.width,P=e.height,R=1,L=null,O=null;const k=new cn(0,0,D,P),I=new cn(0,0,D,P);let N=!1;const B=new Li;let F=!1,z=!1,U=null;const j=new qn,V=new Ve,H=new mn,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===S?R:1}let q,X,Y,Z,J,Q,$,tt,et,nt,rt,it,ot,at,st,lt,ut,ct,ht,dt,pt,ft,mt,yt=n;function bt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${i}`),e.addEventListener("webglcontextlost",wt,!1),e.addEventListener("webglcontextrestored",Et,!1),e.addEventListener("webglcontextcreationerror",Ct,!1),null===yt){const e=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&e.shift(),yt=bt(e,t),null===yt)throw bt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===yt.getShaderPrecisionFormat&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(qt){throw console.error("THREE.WebGLRenderer: "+qt.message),qt}function xt(){q=new Us(yt),X=new ys(yt,q,t),q.init(X),ft=new Qu(yt,q,X),Y=new Ku(yt,q,X),Z=new Hs(yt),J=new Ou,Q=new Ju(yt,q,Y,J,X,ft,Z),$=new xs(b),tt=new zs(b),et=new ki(yt,X),mt=new gs(yt,q,et,X),nt=new js(yt,et,Z,mt),rt=new Ys(yt,nt,et,Z),ht=new Xs(yt,X,Q),lt=new bs(J),it=new Lu(b,$,tt,q,X,mt,lt),ot=new oc(b,J),at=new Bu,st=new Wu(q,X),ct=new ms(b,$,Y,rt,h,s),ut=new Zu(b,rt,X),dt=new vs(yt,q,Z,X),pt=new Vs(yt,q,Z,X),Z.programs=it.programs,b.capabilities=X,b.extensions=q,b.properties=J,b.renderLists=at,b.shadowMap=ut,b.state=Y,b.info=Z}xt();const _t=new ic(b,yt);function wt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Et(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const t=Z.autoReset,e=ut.enabled,n=ut.autoUpdate,r=ut.needsUpdate,i=ut.type;xt(),Z.autoReset=t,ut.enabled=e,ut.autoUpdate=n,ut.needsUpdate=r,ut.type=i}function Ct(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Tt(t){const e=t.target;e.removeEventListener("dispose",Tt),At(e)}function At(t){Dt(t),J.remove(t)}function Dt(t){const e=J.get(t).programs;void 0!==e&&(e.forEach((function(t){it.releaseProgram(t)})),t.isShaderMaterial&&it.releaseShaderCache(t))}this.xr=_t,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){const t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(D,P,!1))},this.getSize=function(t){return t.set(D,P)},this.setSize=function(t,n,r){_t.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=t,P=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(D*R,P*R).floor()},this.setDrawingBufferSize=function(t,n,r){D=t,P=n,R=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(C)},this.getViewport=function(t){return t.copy(k)},this.setViewport=function(t,e,n,r){t.isVector4?k.set(t.x,t.y,t.z,t.w):k.set(t,e,n,r),Y.viewport(C.copy(k).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(I)},this.setScissor=function(t,e,n,r){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,r),Y.scissor(T.copy(I).multiplyScalar(R).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(t){Y.setScissorTest(N=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(t){return t.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),yt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",wt,!1),e.removeEventListener("webglcontextrestored",Et,!1),e.removeEventListener("webglcontextcreationerror",Ct,!1),at.dispose(),st.dispose(),J.dispose(),$.dispose(),tt.dispose(),rt.dispose(),mt.dispose(),it.dispose(),_t.dispose(),_t.removeEventListener("sessionstart",Ot),_t.removeEventListener("sessionend",kt),U&&(U.dispose(),U=null),It.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=W);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Ht(t,e,n,r,i);Y.setMaterial(r,a);let l=n.index;const u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c,h=1;!0===r.wireframe&&(l=nt.getWireframeAttribute(n),h=2),mt.setup(i,r,s,n,l);let d=dt;null!==l&&(c=et.get(l),d=pt,d.setIndex(c));const p=null!==l?l.count:u.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),b=Math.min(p,f+m,g+v)-1,x=Math.max(0,b-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*G()),d.setMode(1)):d.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),Y.setLineWidth(t*G()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,t)}else d.render(y,x)}},this.compile=function(t,e){g=st.get(t),g.init(),y.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(b.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];jt(i,t,e)}else jt(n,t,e)})),y.pop(),g=null};let Rt=null;function Lt(t){Rt&&Rt(t)}function Ot(){It.stop()}function kt(){It.start()}const It=new Oi;function Nt(t,e,n,r){if(!1===t.visible)return;const i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||B.intersectsSprite(t)){r&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=rt.update(t),i=t.material;i.visible&&d.push(t,e,i,n,H.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Z.render.frame&&(t.skeleton.update(),t.skeleton.frame=Z.render.frame),!t.frustumCulled||B.intersectsObject(t))){r&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(j);const e=rt.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&d.push(t,e,s,n,H.z,a)}}else i.visible&&d.push(t,e,i,n,H.z,null)}const o=t.children;for(let a=0,s=o.length;a<s;a++)Nt(o[a],e,n,r)}function Bt(t,e,n,r){const i=t.opaque,o=t.transmissive,a=t.transparent;g.setupLightsView(n),o.length>0&&Ft(i,e,n),r&&Y.viewport(C.copy(r)),i.length>0&&zt(i,e,n),o.length>0&&zt(o,e,n),a.length>0&&zt(a,e,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Ft(t,e,n){const r=X.isWebGL2;null===U&&(U=new hn(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?Mt:vt,minFilter:gt,samples:r&&!0===a?4:0})),b.getDrawingBufferSize(V),r?U.setSize(V.x,V.y):U.setSize(je(V.x),je(V.y));const i=b.getRenderTarget();b.setRenderTarget(U),b.clear();const o=b.toneMapping;b.toneMapping=K,zt(t,e,n),b.toneMapping=o,Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U),b.setRenderTarget(i)}function zt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=null===r?o.material:r,u=o.group;a.layers.test(n.layers)&&Ut(a,e,n,s,l,u)}}function Ut(t,e,n,r,i,o){t.onBeforeRender(b,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(b,e,n,r,t,o),!0===i.transparent&&i.side===m?(i.side=f,i.needsUpdate=!0,b.renderBufferDirect(n,e,r,i,t,o),i.side=p,i.needsUpdate=!0,b.renderBufferDirect(n,e,r,i,t,o),i.side=m):b.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(b,e,n,r,i,o)}function jt(t,e,n){!0!==e.isScene&&(e=W);const r=J.get(t),i=g.state.lights,o=g.state.shadowsArray,a=i.state.version,s=it.getParameters(t,i.state,o,e,n),l=it.getProgramCacheKey(s);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?tt:$).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",Tt),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Vt(t,s),c}else s.uniforms=it.getUniforms(t),t.onBuild(n,s,b),t.onBeforeCompile(s,b),c=it.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=lt.uniform),Vt(t,s),r.needsLights=Gt(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=c.getUniforms(),p=tu.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Vt(t,e){const n=J.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function Ht(t,e,n,r,i){!0!==e.isScene&&(e=W),Q.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===S?b.outputEncoding:!0===S.isXRRenderTarget?S.texture.encoding:be,l=(r.isMeshStandardMaterial?tt:$).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=r.toneMapped?b.toneMapping:K,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=J.get(r),x=g.state.lights;if(!0===F&&(!0===z||t!==E)){const e=t===E&&r.id===M;lt.setState(r,t,e)}let _=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==x.state.version||y.outputEncoding!==s||i.isInstancedMesh&&!1===y.instancing?_=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?_=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==o?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===lt.numPlanes&&y.numIntersection===lt.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||!0===X.isWebGL2&&y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,y.__version=r.version);let w=y.currentProgram;!0===_&&(w=jt(r,e,i));let C=!1,T=!1,A=!1;const D=w.getUniforms(),L=y.uniforms;if(Y.useProgram(w.program)&&(C=!0,T=!0,A=!0),r.id!==M&&(M=r.id,T=!0),C||E!==t){if(D.setValue(yt,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&D.setValue(yt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,T=!0,A=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=D.map.cameraPosition;void 0!==e&&e.setValue(yt,H.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(yt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&D.setValue(yt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){D.setOptional(yt,i,"bindMatrix"),D.setOptional(yt,i,"bindMatrixInverse");const t=i.skeleton;t&&(X.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),D.setValue(yt,"boneTexture",t.boneTexture,Q),D.setValue(yt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;return(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===X.isWebGL2)&&ht.update(i,n,r,w),(T||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,D.setValue(yt,"receiveShadow",i.receiveShadow)),T&&(D.setValue(yt,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&Wt(L,A),o&&!0===r.fog&&ot.refreshFogUniforms(L,o),ot.refreshMaterialUniforms(L,r,R,P,U),tu.upload(yt,y.uniformsList,L,Q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(tu.upload(yt,y.uniformsList,L,Q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&D.setValue(yt,"center",i.center),D.setValue(yt,"modelViewMatrix",i.modelViewMatrix),D.setValue(yt,"normalMatrix",i.normalMatrix),D.setValue(yt,"modelMatrix",i.matrixWorld),w}function Wt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Gt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}It.setAnimationLoop(Lt),"undefined"!==typeof self&&It.setContext(self),this.setAnimationLoop=function(t){Rt=t,_t.setAnimationLoop(t),null===t?It.stop():It.start()},_t.addEventListener("sessionstart",Ot),_t.addEventListener("sessionend",kt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===_t.enabled&&!0===_t.isPresenting&&(!0===_t.cameraAutoUpdate&&_t.updateCamera(e),e=_t.getCamera()),!0===t.isScene&&t.onBeforeRender(b,t,e,S),g=st.get(t,y.length),g.init(),y.push(g),j.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),B.setFromProjectionMatrix(j),z=this.localClippingEnabled,F=lt.init(this.clippingPlanes,z,e),d=at.get(t,v.length),d.init(),v.push(d),Nt(t,e,0,b.sortObjects),d.finish(),!0===b.sortObjects&&d.sort(L,O),!0===F&&lt.beginShadows();const n=g.state.shadowsArray;if(ut.render(n,t,e),!0===F&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ct.render(d,t),g.setupLights(b.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Bt(d,t,r,r.viewport)}}else Bt(d,t,e);null!==S&&(Q.updateMultisampleRenderTarget(S),Q.updateRenderTargetMipmap(S)),!0===t.isScene&&t.onAfterRender(b,t,e),mt.resetDefaultState(),M=-1,E=null,y.pop(),g=y.length>0?y[y.length-1]:null,v.pop(),d=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(t,e,n){J.get(t.texture).__webglTexture=e,J.get(t.depthTexture).__webglTexture=n;const r=J.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=J.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){S=t,_=e,w=n;let r=!0;if(t){const e=J.get(t);void 0!==e.__useDefaultFramebuffer?(Y.bindFramebuffer(36160,null),r=!1):void 0===e.__webglFramebuffer?Q.setupRenderTarget(t):e.__hasExternalTextures&&Q.rebindTextures(t,J.get(t.texture).__webglTexture,J.get(t.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(t){const n=t.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);const r=J.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=r[e],o=!0):i=X.isWebGL2&&t.samples>0&&!1===Q.useMultisampledRTT(t)?J.get(t).__webglMultisampledFramebuffer:r,C.copy(t.viewport),T.copy(t.scissor),A=t.scissorTest}else C.copy(k).multiplyScalar(R).floor(),T.copy(I).multiplyScalar(R).floor(),A=N;const s=Y.bindFramebuffer(36160,i);if(s&&X.drawBuffers&&r&&Y.drawBuffers(t,i),Y.viewport(C),Y.scissor(T),Y.setScissorTest(A),o){const r=J.get(t.texture);yt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(a){const r=J.get(t.texture),i=e||0;yt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}M=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=J.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,l=a.type;if(s!==Pt&&ft.convert(s)!==yt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===Mt&&(q.has("EXT_color_buffer_half_float")||X.isWebGL2&&q.has("EXT_color_buffer_float"));if(l!==vt&&ft.convert(l)!==yt.getParameter(35738)&&(l!==St||!(X.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&yt.readPixels(e,n,r,i,ft.convert(s),ft.convert(l),o)}finally{const t=null!==S?J.get(S).__webglFramebuffer:null;Y.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);Q.setTexture2D(e,0),yt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,o),Y.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=ft.convert(n.format),s=ft.convert(n.type);Q.setTexture2D(n,0),yt.pixelStorei(37440,n.flipY),yt.pixelStorei(37441,n.premultiplyAlpha),yt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?yt.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?yt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):yt.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&yt.generateMipmap(3553),Y.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=ft.convert(r.format),u=ft.convert(r.type);let c;if(r.isData3DTexture)Q.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Q.setTexture2DArray(r,0),c=35866}yt.pixelStorei(37440,r.flipY),yt.pixelStorei(37441,r.premultiplyAlpha),yt.pixelStorei(3317,r.unpackAlignment);const h=yt.getParameter(3314),d=yt.getParameter(32878),p=yt.getParameter(3316),f=yt.getParameter(3315),m=yt.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;yt.pixelStorei(3314,g.width),yt.pixelStorei(32878,g.height),yt.pixelStorei(3316,t.min.x),yt.pixelStorei(3315,t.min.y),yt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?yt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),yt.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,g.data)):yt.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,g),yt.pixelStorei(3314,h),yt.pixelStorei(32878,d),yt.pixelStorei(3316,p),yt.pixelStorei(3315,f),yt.pixelStorei(32877,m),0===i&&r.generateMipmaps&&yt.generateMipmap(c),Y.unbindTexture()},this.initTexture=function(t){Q.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){_=0,w=0,S=null,Y.reset(),mt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class lc extends sc{}lc.prototype.isWebGL1Renderer=!0;class uc extends vr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}class cc extends Pr{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}class hc extends Pr{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}class dc extends Pr{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}function pc(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,u=(n-e)/a-(r-e)/(a+s)+(r-n)/s;l*=a,u*=a,i(e,n,l,u)},calc:function(i){const o=i*i,a=o*i;return t+e*i+n*o+r*a}}}new mn,new pc,new pc,new pc;class fc extends Gr{constructor(t=1,e=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(){const o=new mn,v=new mn;let y=0;const b=(e-t)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,y=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*s+a,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,c.push(v.x,v.y,v.z),o.set(l,b,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),u.push(p++)}f.push(u)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=f[e][t],r=f[e+1][t],i=f[e+1][t+1],o=f[e][t+1];u.push(n,r,o),u.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}function y(n){const i=p,o=new Ve,f=new mn;let v=0;const y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)c.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=r;t++){const e=t/r,n=e*s+a,i=Math.cos(n),l=Math.sin(n);f.x=y*l,f.y=m*b,f.z=y*i,c.push(f.x,f.y,f.z),h.push(0,b,0),o.x=.5*i+.5,o.y=.5*l*b+.5,d.push(o.x,o.y),p++}for(let t=0;t<r;t++){const e=i+t,r=x+t;!0===n?u.push(r,r+1,e):u.push(r+1,r,e),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Br(c,3)),this.setAttribute("normal",new Br(h,3)),this.setAttribute("uv",new Br(d,2))}static fromJSON(t){return new fc(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}new mn,new mn,new mn,new Ar;class mc extends Gr{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const u=[],c=new mn,h=new mn,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0==g&&0==o?y=.5/e:g==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;c.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=t*Math.cos(o+v*a),c.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}u.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=u[g][t+1],r=u[g][t],i=u[g+1][t],a=u[g+1][t+1];(0!==g||o>0)&&d.push(e,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new Br(p,3)),this.setAttribute("normal",new Br(f,3)),this.setAttribute("uv",new Br(m,2))}static fromJSON(t){return new mc(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class gc extends Pr{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nn(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class vc extends yi{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yc extends Pr{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class bc extends yc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Be(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new nn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!==t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class xc extends Pr{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nn(16777215),this.specular=new nn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _c extends Pr{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class wc extends Pr{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Sc extends Pr{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class Mc extends Pr{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Ec extends hc{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}const Cc={ShadowMaterial:gc,SpriteMaterial:cc,RawShaderMaterial:vc,ShaderMaterial:yi,PointsMaterial:dc,MeshPhysicalMaterial:bc,MeshStandardMaterial:yc,MeshPhongMaterial:xc,MeshToonMaterial:_c,MeshNormalMaterial:wc,MeshLambertMaterial:Sc,MeshDepthMaterial:Gu,MeshDistanceMaterial:qu,MeshBasicMaterial:Rr,MeshMatcapMaterial:Mc,LineDashedMaterial:Ec,LineBasicMaterial:hc,Material:Pr};Pr.fromType=function(t){return new Cc[t]};const Tc={arraySlice:function(t,e,n){return Tc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];while(void 0!==o&&void 0===o[r])o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const t=o.tracks[l],e=t.getValueSize(),s=[],u=[];for(let o=0;o<t.times.length;++o){const a=t.times[o]*i;if(!(a<n||a>=r)){s.push(t.times[o]);for(let n=0;n<e;++n)u.push(t.values[o*e+n])}}0!==s.length&&(t.times=Tc.convertArray(s,t.times.constructor),t.values=Tc.convertArray(u,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let a=0;a<i;++a){const e=n.tracks[a],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const i=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let u=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=e.times.length-1;let d;if(o<=e.times[0]){const t=s,n=l-s;d=Tc.arraySlice(e.values,t,n)}else if(o>=e.times[h]){const t=h*l+s,n=t+l-s;d=Tc.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=s,r=l-s;t.evaluate(o),d=Tc.arraySlice(t.resultBuffer,n,r)}if("quaternion"===r){const t=(new fn).fromArray(d).normalize().conjugate();t.toArray(d)}const p=i.times.length;for(let t=0;t<p;++t){const e=t*c+u;if("quaternion"===r)fn.multiplyQuaternionsFlat(i.values,e,d,0,i.values,e);else{const t=c-2*u;for(let n=0;n<t;++n)i.values[e+n]-=d[n]}}}return t.blendMode=ye,t}};class Ac{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}while(n<o){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Dc extends Ac{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:me,endingEnd:me}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case ge:i=t,a=2*e-n;break;case ve:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ge:o=t,s=2*n-e;break;case ve:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(r-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==a;++x)i[x]=g*o[u+x]+v*o[l+x]+y*o[s+x]+b*o[c+x];return i}}class Pc extends Ac{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=(n-e)/(r-e),c=1-u;for(let h=0;h!==a;++h)i[h]=o[l+h]*c+o[s+h]*u;return i}}class Rc extends Ac{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Lc{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Tc.convertArray(e,this.TimeBufferType),this.values=Tc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Tc.convertArray(t.times,Array),values:Tc.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Rc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Pc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Dc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case de:e=this.InterpolantFactoryMethodDiscrete;break;case pe:e=this.InterpolantFactoryMethodLinear;break;case fe:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return de;case this.InterpolantFactoryMethodLinear:return pe;case this.InterpolantFactoryMethodSmooth:return fe}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Tc.arraySlice(n,i,o),this.values=Tc.arraySlice(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==i;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==r&&Tc.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const e=r[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){const t=Tc.arraySlice(this.times),e=Tc.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===fe,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a],l=t[a+1];if(s!==l&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=Tc.arraySlice(t,0,o),this.values=Tc.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Tc.arraySlice(this.times,0),e=Tc.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Lc.prototype.TimeBufferType=Float32Array,Lc.prototype.ValueBufferType=Float32Array,Lc.prototype.DefaultInterpolation=pe;class Oc extends Lc{}Oc.prototype.ValueTypeName="bool",Oc.prototype.ValueBufferType=Array,Oc.prototype.DefaultInterpolation=de,Oc.prototype.InterpolantFactoryMethodLinear=void 0,Oc.prototype.InterpolantFactoryMethodSmooth=void 0;class kc extends Lc{}kc.prototype.ValueTypeName="color";class Ic extends Lc{}Ic.prototype.ValueTypeName="number";class Nc extends Ac{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let l=t*a;for(let u=l+a;l!==u;l+=4)fn.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Bc extends Lc{InterpolantFactoryMethodLinear(t){return new Nc(this.times,this.values,this.getValueSize(),t)}}Bc.prototype.ValueTypeName="quaternion",Bc.prototype.DefaultInterpolation=pe,Bc.prototype.InterpolantFactoryMethodSmooth=void 0;class Fc extends Lc{}Fc.prototype.ValueTypeName="string",Fc.prototype.ValueBufferType=Array,Fc.prototype.DefaultInterpolation=de,Fc.prototype.InterpolantFactoryMethodLinear=void 0,Fc.prototype.InterpolantFactoryMethodSmooth=void 0;class zc extends Lc{}zc.prototype.ValueTypeName="vector";class Uc{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}new Uc;class jc extends vr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new nn(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const Vc=new qn,Hc=new mn,Wc=new mn;class Gc{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Li,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Hc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Hc),Wc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Wc),e.updateMatrixWorld(),Vc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const qc=new qn,Xc=new mn,Yc=new mn;class Zc extends Gc{constructor(){super(new xi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new cn(2,1,1,1),new cn(0,1,1,1),new cn(3,1,1,1),new cn(1,1,1,1),new cn(3,0,1,1),new cn(1,0,1,1)],this._cubeDirections=[new mn(1,0,0),new mn(-1,0,0),new mn(0,0,1),new mn(0,0,-1),new mn(0,1,0),new mn(0,-1,0)],this._cubeUps=[new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,1,0),new mn(0,0,1),new mn(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Xc.setFromMatrixPosition(t.matrixWorld),n.position.copy(Xc),Yc.copy(n.position),Yc.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Yc),n.updateMatrixWorld(),r.makeTranslation(-Xc.x,-Xc.y,-Xc.z),qc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qc)}}class Kc extends jc{constructor(t,e,n=0,r=1){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Zc}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Jc extends jc{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const Qc="\\[\\]\\.:\\/",$c=new RegExp("["+Qc+"]","g"),th="[^"+Qc+"]",eh="[^"+Qc.replace("\\.","")+"]",nh=/((?:WC+[\/:])*)/.source.replace("WC",th),rh=/(WCOD+)?/.source.replace("WCOD",eh),ih=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",th),oh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",th),ah=new RegExp("^"+nh+rh+ih+oh+"$"),sh=["material","materials","bones"];class lh{constructor(t,e,n){const r=n||uh.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class uh{constructor(t,e,n){this.path=e,this.parsedPath=n||uh.parseTrackName(e),this.node=uh.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new uh.Composite(t,e,n):new uh(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace($c,"")}static parseTrackName(t){const e=ah.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==sh.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=uh.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}uh.Composite=lh,uh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},uh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},uh.prototype.GetterByBindingType=[uh.prototype._getValue_direct,uh.prototype._getValue_array,uh.prototype._getValue_arrayElement,uh.prototype._getValue_toArray],uh.prototype.SetterByBindingTypeAndVersioning=[[uh.prototype._setValue_direct,uh.prototype._setValue_direct_setNeedsUpdate,uh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[uh.prototype._setValue_array,uh.prototype._setValue_array_setNeedsUpdate,uh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[uh.prototype._setValue_arrayElement,uh.prototype._setValue_arrayElement_setNeedsUpdate,uh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[uh.prototype._setValue_fromArray,uh.prototype._setValue_fromArray_setNeedsUpdate,uh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ch{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Be(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const hh=new ArrayBuffer(4),dh=(new Float32Array(hh),new Uint32Array(hh),new Uint32Array(512)),ph=new Uint32Array(512);for(let Eh=0;Eh<256;++Eh){const t=Eh-127;t<-27?(dh[Eh]=0,dh[256|Eh]=32768,ph[Eh]=24,ph[256|Eh]=24):t<-14?(dh[Eh]=1024>>-t-14,dh[256|Eh]=1024>>-t-14|32768,ph[Eh]=-t-1,ph[256|Eh]=-t-1):t<=15?(dh[Eh]=t+15<<10,dh[256|Eh]=t+15<<10|32768,ph[Eh]=13,ph[256|Eh]=13):t<128?(dh[Eh]=31744,dh[256|Eh]=64512,ph[Eh]=24,ph[256|Eh]=24):(dh[Eh]=31744,dh[256|Eh]=64512,ph[Eh]=13,ph[256|Eh]=13)}const fh=new Uint32Array(2048),mh=new Uint32Array(64),gh=new Uint32Array(64);for(let Eh=1;Eh<1024;++Eh){let t=Eh<<13,e=0;while(0===(8388608&t))t<<=1,e-=8388608;t&=-8388609,e+=947912704,fh[Eh]=t|e}for(let Eh=1024;Eh<2048;++Eh)fh[Eh]=939524096+(Eh-1024<<13);for(let Eh=1;Eh<31;++Eh)mh[Eh]=Eh<<23;mh[31]=1199570944,mh[32]=2147483648;for(let Eh=33;Eh<63;++Eh)mh[Eh]=2147483648+(Eh-32<<23);mh[63]=3347054592;for(let Eh=1;Eh<64;++Eh)32!==Eh&&(gh[Eh]=1024);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i);const vh={type:"change"},yh={type:"start"},bh={type:"end"};class xh extends Le{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new mn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:o.ROTATE,MIDDLE:o.DOLLY,RIGHT:o.PAN},this.touches={ONE:a.ROTATE,TWO:a.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",it),this._domElementKeyEvents=t},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(vh),n.update(),i=r.NONE},this.update=function(){const e=new mn,o=(new fn).setFromUnitVectors(t.up,new mn(0,1,0)),a=o.clone().invert(),p=new mn,f=new fn,m=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(o),l.setFromVector3(e),n.autoRotate&&i===r.NONE&&C(M()),n.enableDamping?(l.theta+=u.theta*n.dampingFactor,l.phi+=u.phi*n.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),l.theta=g<=v?Math.max(g,Math.min(v,l.theta)):l.theta>(g+v)/2?Math.max(g,l.theta):Math.min(v,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=c,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),e.setFromSpherical(l),e.applyQuaternion(a),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0)),c=1,!!(d||p.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s)&&(n.dispatchEvent(vh),p.copy(n.object.position),f.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",st),n.domElement.removeEventListener("pointerdown",J),n.domElement.removeEventListener("pointercancel",tt),n.domElement.removeEventListener("wheel",rt),n.domElement.removeEventListener("pointermove",Q),n.domElement.removeEventListener("pointerup",$),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",it)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,l=new ch,u=new ch;let c=1;const h=new mn;let d=!1;const p=new Ve,f=new Ve,m=new Ve,g=new Ve,v=new Ve,y=new Ve,b=new Ve,x=new Ve,_=new Ve,w=[],S={};function M(){return 2*Math.PI/60/60*n.autoRotateSpeed}function E(){return Math.pow(.95,n.zoomSpeed)}function C(t){u.theta-=t}function T(t){u.phi-=t}const A=function(){const t=new mn;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),D=function(){const t=new mn;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),P=function(){const t=new mn;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),A(2*e*a/i.clientHeight,n.object.matrix),D(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(A(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),D(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(t){n.object.isPerspectiveCamera?c/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(t){n.object.isPerspectiveCamera?c*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(t){p.set(t.clientX,t.clientY)}function k(t){b.set(t.clientX,t.clientY)}function I(t){g.set(t.clientX,t.clientY)}function N(t){f.set(t.clientX,t.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*m.x/e.clientHeight),T(2*Math.PI*m.y/e.clientHeight),p.copy(f),n.update()}function B(t){x.set(t.clientX,t.clientY),_.subVectors(x,b),_.y>0?R(E()):_.y<0&&L(E()),b.copy(x),n.update()}function F(t){v.set(t.clientX,t.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),P(y.x,y.y),g.copy(v),n.update()}function z(t){t.deltaY<0?L(E()):t.deltaY>0&&R(E()),n.update()}function U(t){let e=!1;switch(t.code){case n.keys.UP:P(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function j(){if(1===w.length)p.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);p.set(t,e)}}function V(){if(1===w.length)g.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);g.set(t,e)}}function H(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,n=Math.sqrt(t*t+e*e);b.set(0,n)}function W(){n.enableZoom&&H(),n.enablePan&&V()}function G(){n.enableZoom&&H(),n.enableRotate&&j()}function q(t){if(1==w.length)f.set(t.pageX,t.pageY);else{const e=ht(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*m.x/e.clientHeight),T(2*Math.PI*m.y/e.clientHeight),p.copy(f)}function X(t){if(1===w.length)v.set(t.pageX,t.pageY);else{const e=ht(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),P(y.x,y.y),g.copy(v)}function Y(t){const e=ht(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);x.set(0,o),_.set(0,Math.pow(x.y/b.y,n.zoomSpeed)),R(_.y),b.copy(x)}function Z(t){n.enableZoom&&Y(t),n.enablePan&&X(t)}function K(t){n.enableZoom&&Y(t),n.enableRotate&&q(t)}function J(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",Q),n.domElement.addEventListener("pointerup",$)),lt(t),"touch"===t.pointerType?ot(t):et(t))}function Q(t){!1!==n.enabled&&("touch"===t.pointerType?at(t):nt(t))}function $(t){ut(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",Q),n.domElement.removeEventListener("pointerup",$)),n.dispatchEvent(bh),i=r.NONE}function tt(t){ut(t)}function et(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case o.DOLLY:if(!1===n.enableZoom)return;k(t),i=r.DOLLY;break;case o.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;I(t),i=r.PAN}else{if(!1===n.enableRotate)return;O(t),i=r.ROTATE}break;case o.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;O(t),i=r.ROTATE}else{if(!1===n.enablePan)return;I(t),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(yh)}function nt(t){if(!1!==n.enabled)switch(i){case r.ROTATE:if(!1===n.enableRotate)return;N(t);break;case r.DOLLY:if(!1===n.enableZoom)return;B(t);break;case r.PAN:if(!1===n.enablePan)return;F(t);break}}function rt(t){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(t.preventDefault(),n.dispatchEvent(yh),z(t),n.dispatchEvent(bh))}function it(t){!1!==n.enabled&&!1!==n.enablePan&&U(t)}function ot(t){switch(ct(t),w.length){case 1:switch(n.touches.ONE){case a.ROTATE:if(!1===n.enableRotate)return;j(),i=r.TOUCH_ROTATE;break;case a.PAN:if(!1===n.enablePan)return;V(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case a.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;W(),i=r.TOUCH_DOLLY_PAN;break;case a.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;G(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(yh)}function at(t){switch(ct(t),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;q(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;X(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;Z(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;K(t),n.update();break;default:i=r.NONE}}function st(t){!1!==n.enabled&&t.preventDefault()}function lt(t){w.push(t)}function ut(t){delete S[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function ct(t){let e=S[t.pointerId];void 0===e&&(e=new Ve,S[t.pointerId]=e),e.set(t.pageX,t.pageY)}function ht(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return S[e.pointerId]}n.domElement.addEventListener("contextmenu",st),n.domElement.addEventListener("pointerdown",J),n.domElement.addEventListener("pointercancel",tt),n.domElement.addEventListener("wheel",rt,{passive:!1}),this.update()}}const _h={id:"three"};var wh={__name:"Three",setup(t){return(0,r.bv)((()=>{var t=new uc,e=new di(100,100,100),n=new xc({color:255,specular:4491502,shininess:12}),r=new ui(e,n);t.add(r);var i=new mc(60,40,40),o=new Sc({color:16711935}),a=new ui(i,o);a.translateY(120),t.add(a);var s=new fc(50,50,100,25),l=new Sc({color:16776960}),u=new ui(s,l);u.position.set(120,0,0),t.add(u);var c=new Kc(16777215);c.position.set(300,100,300),t.add(c);var h=new Jc(4473924);t.add(h);var d=window.innerWidth,p=window.innerHeight,f=d/p,m=200,g=new _s(-m*f,m*f,m,-m,1,1e3);g.position.set(500,100,800),g.lookAt(t.position);var v=new sc;function y(){v.render(t,g)}v.setSize(d,p),v.setClearColor(12178431,1),console.log(document.getElementById("three")),document.getElementById("three").appendChild(v.domElement),y();var b=new xh(g,v.domElement);b.addEventListener("change",y)})),(t,e)=>((0,r.wg)(),(0,r.iD)("div",_h))}};const Sh=wh;var Mh=Sh},7609:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return O}});var r=n(3396),i=n(9242),o=n(4870),a=n(7139),s=n.p+"img/sendAixin.7090ac6f.gif",l=n(2074),u=n(3495),c={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:t}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:e}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:t}}]}},name:"check-circle",theme:"twotone"},h=c,d=n(9388);function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){f(t,e,n[e])}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t,e){var n=p({},t,e.attrs);return(0,r.Wm)(d.Z,p({},n,{icon:h}),null)};m.displayName="CheckCircleTwoTone",m.inheritAttrs=!1;var g=m,v={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:t}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm176.5 509.7l-28.6 39a7.99 7.99 0 01-11.2 1.7L483.3 569.8a7.92 7.92 0 01-3.3-6.5V288c0-4.4 3.6-8 8-8h48.1c4.4 0 8 3.6 8 8v247.5l142.6 103.1c3.6 2.5 4.4 7.5 1.8 11.1z",fill:e}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.6-3.6 1.8-8.6-1.8-11.1z",fill:t}}]}},name:"clock-circle",theme:"twotone"},y=v;function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){x(t,e,n[e])}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t,e){var n=b({},t,e.attrs);return(0,r.Wm)(d.Z,b({},n,{icon:y}),null)};_.displayName="ClockCircleTwoTone",_.inheritAttrs=!1;var w=_;const S={class:"todos"},M=(0,r._)("img",{alt:"example",src:s},null,-1),E=["onClick"],C=(0,r.Uk)("确定"),T=(0,r.Uk)("取消"),A={style:{display:"inline-block",width:"350px"}},D=(0,r.Uk)("编辑"),P=(0,r.Uk)("删除");var R=(0,r.aZ)({__name:"index",setup(t){const e=JSON.parse(localStorage.getItem("Todos"))||{list:[],oldVal:[],percent:0},n=(0,o.qj)(e);function s(t){const e=0===n.list.length||n.list.length>0&&!!n.oldVal[n.list.length-1];if(e)n.list.push({value:"",placeholder:"请输入代办",canEdit:!0,isFinish:!1});else{if(!n.oldVal[n.list.length-1])return void l.ZP.warning("请确认输入的代办");l.ZP.warning("请输入代办")}}function c(t){const e=!n.oldVal[t];e?n.list.splice(t,1):(n.list[t].value=n.oldVal[t],n.list[t].canEdit=!1)}function h(t){const e=n.list.length>0&&!!n.list[n.list.length-1].value;e?(n.list[t].canEdit=!1,n.oldVal[t]=n.list[t].value,localStorage.setItem("Todos",JSON.stringify(n))):l.ZP.warning("请输入代办")}function d(t){n.list[t].canEdit=!0,n.oldVal[t]=n.list[t].value||""}function p(t){n.list[t].isFinish=!n.list[t].isFinish,localStorage.setItem("Todos",JSON.stringify(n))}function f(t){u.Z.confirm({title:"确定要删除吗？",okText:"提交",cancelText:"取消",onOk(){n.list.splice(t,1),localStorage.setItem("Todos",JSON.stringify(n))},onCancel(){}})}(0,r.YP)(n.list,(t=>{const e=t.length,r=t.filter((t=>t.isFinish)).length;n.percent=Math.floor(r/e*100)}),{deep:!0,immediate:!0});const{list:m,percent:v}=(0,o.BK)(n);return(t,e)=>{const n=(0,r.up)("a-progress"),l=(0,r.up)("a-input"),u=(0,r.up)("a-button"),y=(0,r.up)("a-space"),b=(0,r.up)("a-card"),x=(0,r.up)("a-col"),_=(0,r.up)("a-row");return(0,r.wg)(),(0,r.iD)("div",S,[(0,r.Wm)(_,{type:"flex",justify:"space-around",align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{title:"备忘录",style:{width:"800px"}},{cover:(0,r.w5)((()=>[M])),extra:(0,r.w5)((()=>[(0,r._)("a",{onClick:(0,i.iM)(s,["prevent"])},"添加",8,E)])),default:(0,r.w5)((()=>[(0,r.Wm)(n,{type:"circle",width:50,percent:(0,o.SU)(v)},null,8,["percent"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,o.SU)(m),((t,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e,style:{"margin-top":"10px"}},[t.canEdit?((0,r.wg)(),(0,r.j4)(y,{key:0},{default:(0,r.w5)((()=>[t.isFinish?((0,r.wg)(),(0,r.j4)((0,o.SU)(g),{key:0,"two-tone-color":"#52c41a"})):((0,r.wg)(),(0,r.j4)((0,o.SU)(w),{key:1})),t.canEdit?((0,r.wg)(),(0,r.j4)(l,{key:2,value:t.value,"onUpdate:value":e=>t.value=e,style:{width:"350px"},placeholder:t.placeholder},null,8,["value","onUpdate:value","placeholder"])):(0,r.kq)("",!0),(0,r.Wm)(u,{type:"primary",onClick:t=>h(e)},{default:(0,r.w5)((()=>[C])),_:2},1032,["onClick"]),(0,r.Wm)(u,{onClick:t=>c(e)},{default:(0,r.w5)((()=>[T])),_:2},1032,["onClick"])])),_:2},1024)):((0,r.wg)(),(0,r.j4)(y,{key:1},{default:(0,r.w5)((()=>[t.isFinish?((0,r.wg)(),(0,r.j4)((0,o.SU)(g),{key:0,"two-tone-color":"#52c41a"})):((0,r.wg)(),(0,r.j4)((0,o.SU)(w),{key:1})),(0,r._)("span",A,(0,a.zw)(t.value),1),(0,r.Wm)(u,{onClick:t=>d(e)},{default:(0,r.w5)((()=>[D])),_:2},1032,["onClick"]),(0,r.Wm)(u,{danger:"",onClick:t=>f(e)},{default:(0,r.w5)((()=>[P])),_:2},1032,["onClick"]),(0,r.Wm)(u,{type:t.isFinish?"":"primary",onClick:t=>p(e)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(t.isFinish?"未完成":"已完成"),1)])),_:2},1032,["type","onClick"])])),_:2},1024))])))),128))])),_:1})])),_:1})])),_:1})])}}});const L=R;var O=L},6842:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l}});var r=n(3396);const i={class:"markToPDF"},o=(0,r.Uk)("开始转换");var a={__name:"markdown2PDF",setup(t){return(t,e)=>{const n=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(n,{type:"primary"},{default:(0,r.w5)((()=>[o])),_:1})])}}};const s=a;var l=s}}]);
//# sourceMappingURL=editor.df6df98e.js.map